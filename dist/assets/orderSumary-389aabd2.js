import{_ as C,g as L,B as O,h as k,q as R,s as N,D as $,e as E,o as _,c as f,a as r,t as d,u as o,b as l,f as s,U as B,d as n,E as u,F as I,r as F,x as M,n as j,p as U,k as V}from"./index-7dd807de.js";/* empty css                                                                    */import{f as T}from"./formatoPesos-8aa989a0.js";const w=h=>(U("data-v-6fec4fb2"),h=h(),V(),h),G={class:"col-12 p-0 md:p-2 m-auto",style:{}},q=w(()=>r("p",{class:"text-xl px-0 mx-0 my-3 pb-0",style:{"font-weight":"bold"}}," RESUMEN DE VENTAS",-1)),z={class:"text-l px-0 my-4 text-900 font-bold",style:{"text-transform":"uppercase"}},W=w(()=>r("template",null,null,-1)),H=w(()=>r("p",{class:"text-xl px-0 mx-0 my-6 pb-0",style:{"font-weight":"bold"}}," REPORTE CALLCENTER",-1)),X=w(()=>r("template",null,null,-1)),J={__name:"orderSumary",setup(h){const b=L(null),D={LILIAN:"var(--red-100)",ALEXANDRA:"var(--yellow-100)"},x=L();function g(y){const p=new Date(y),a={weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0};return new Intl.DateTimeFormat("es-CO",a).format(p)}const t=O(),v=async()=>{t.setLoading(!0,"cargando reporte");const y=t.formatDate(t.dateRange.startDate),p=t.formatDate(t.dateRange.endDate),a=t.selectedSites.map(i=>i.site_id).join(","),m=new URLSearchParams({site_ids:a,start_date:y,end_date:p}),e=`${B}/sales_report_sumary?${m.toString()}`;try{const i=await fetch(e,{method:"GET",headers:{"Content-Type":"application/json"}});if(!i.ok)throw t.setLoading(!1,"cargando reporte"),new Error(`HTTP error! status: ${i.status}`);const c=await i.json();if(t.sumaryData=c,c){const S=Object.keys(c.callcenter_report[0]);S?x.value=S:x.value=[]}t.setLoading(!1,"cargando reporte")}catch(i){console.error("Fetch error:",i),t.setLoading(!1,"cargando reporte")}};k(async()=>{await v()}),R(()=>{A()});const A=()=>{b.value={global:{value:null,matchMode:N.CONTAINS}}};return $(()=>t.dateRange,async()=>{await v()},{deep:!0}),(y,p)=>{const a=E("Column"),m=E("DataTable");return _(),f("div",G,[q,r("p",z,d(g(o(t).formatDate(o(t).dateRange.startDate)))+" -> "+d(g(o(t).formatDate(o(t).dateRange.endDate))),1),l(m,{style:{"box-shadow":"0 0 1rem #00000030","border-radius":".5rem",overflow:"hidden"},loading:o(t).loading.visible,stripedRows:"",showGridLines:"",value:o(t).sumaryData.total_sales,tableStyle:"min-width: 100%  max-width:500px",rows:11,filters:b.value,responsiveLayout:"scroll",scrollable:""},{default:s(()=>[W,l(a,{field:"order_id",header:"SEDE   ",class:"py-0 px-0",headerStyle:"width:12rem;min-width:3rem"},{body:s(e=>[r("p",{class:n(["text",e.data.site_name=="TOTAL"?"bold":""]),style:{"min-width":"max-content"}},d(e.data.site_name),3)]),_:1}),l(a,{field:"order_id",header:"#_BOT",class:"py-0 px-0",headerStyle:"width:12rem;min-width:3rem;color:var(--green-500)"},{body:s(e=>[r("p",{class:n(["text",e.data.site_name=="TOTAL"?"bold":""]),style:{"min-width":"max-content","background-color":"#22c55e5c"}},d(e.data.orders_chatbot),3)]),_:1}),l(a,{field:"order_id",header:"$_BOT",class:"py-0 px-0",headerStyle:"width:12rem;min-width:3rem;color:var(--green-500)"},{body:s(e=>[r("p",{class:n(["text",e.data.site_name=="TOTAL"?"bold":""]),style:{"min-width":"max-content","background-color":"#22c55e5c"}},d(o(u)(e.data.sales_chatbot)||"$ 0"),3)]),_:1}),l(a,{field:"order_id",header:"#_WEB",class:"py-0 px-0",headerStyle:"width:12rem;min-width:3rem;color:var(--primary-color)"},{body:s(e=>[r("p",{class:n(["text",e.data.site_name=="TOTAL"?"bold":""]),style:{"min-width":"max-content","background-color":"#ff620061"}},d(e.data.orders_web),3)]),_:1}),l(a,{field:"order_id",header:"$_WEB",class:"py-0 px-0",headerStyle:"width:12rem;min-width:3rem;color:var(--primary-color)"},{body:s(e=>[r("p",{class:n(["text",e.data.site_name=="TOTAL"?"bold":""]),style:{"min-width":"max-content","background-color":"#ff620061"}},d(o(T)(e.data.sales_web)||"$ 0"),3)]),_:1}),l(a,{field:"order_id",header:"#_C.CENTER",class:"py-0 px-0",headerStyle:"width:12rem;min-width:3rem"},{body:s(e=>[r("p",{class:n(["text",e.data.site_name=="TOTAL"?"bold":""]),style:{"min-width":"max-content","background-color":"var(--blue-100)"}},d(e.data.orders_callcenter),3)]),_:1}),l(a,{field:"order_id",header:"$_C.CENTER",class:"py-0 px-0",headerStyle:"width:12rem;min-width:3rem"},{body:s(e=>[r("p",{class:n(["text",e.data.site_name=="TOTAL"?"bold":""]),style:{"min-width":"max-content","background-color":"var(--blue-100)"}},d(o(T)(e.data.sales_callcenter)),3)]),_:1}),l(a,{field:"order_id",header:"#_TOTAL_ENV",class:"py-0 px-0",headerStyle:"width:3rem;min-width:3rem; min-width:max-content"},{body:s(e=>[r("p",{class:n(["text",e.data.site_name=="TOTAL"?"bold":""]),style:{"min-width":"max-content","background-color":"#ffff0042"}},d(e.data.total_orders_sent),3)]),_:1}),l(a,{field:"order_id",header:"$_TOTAL_ENV",class:"py-0 px-0",headerStyle:"width:3rem;min-width:2rem"},{body:s(e=>[r("p",{class:n(["text",e.data.site_name=="TOTAL"?"bold":""]),style:{"min-width":"max-content","background-color":"#ffff0042"}},d(o(u)(e.data.total_sales_sent)||"$ 0"),3)]),_:1}),l(a,{field:"order_id",header:"CANC",class:"py-0 px-0",headerStyle:"width:3rem;min-width:3rem"},{body:s(e=>[r("p",{class:n(["text",e.data.site_name=="TOTAL"?"bold":""]),style:{"min-width":"max-content","background-color":"var(--red-100)"}},d(e.data.total_orders_cancelled||0),3)]),_:1}),l(a,{field:"order_id",header:"$_CANC",class:"py-0 px-0",headerStyle:"width:12rem;min-width:3rem"},{body:s(e=>[r("p",{class:n(["text",e.data.site_name=="TOTAL"?"bold":""]),style:{"min-width":"max-content","background-color":"var(--red-100)"}},d(o(u)(e.data.total_sales_cancelled)||"$ 0.0"),3)]),_:1})]),_:1},8,["loading","value","filters"]),H,l(m,{style:{"box-shadow":"0 0 1rem #00000030","border-radius":".5rem",overflow:"hidden"},loading:o(t).loading.visible,stripedRows:"",showGridLines:"",value:o(t).sumaryData.callcenter_report,tableStyle:"min-width: 100%  max-width:500px",rows:11,filters:b.value,responsiveLayout:"scroll",scrollable:""},{default:s(()=>[X,(_(!0),f(I,null,F(x.value,e=>{var i;return _(),M(a,{style:j([`background-color:${D[e==null?void 0:e.split(" ").slice(0,1)]}`,{"text-transform":"uppercase"}]),header:(e==null?void 0:e.split(" ").slice(0,1).join(" "))+" "+((i=e==null?void 0:e.split(" "))==null?void 0:i.reverse()[0]),field:"order_id",class:"py-0 px-0",headerStyle:"width:12rem;min-width:3rem"},{body:s(c=>[e!=null&&e.includes("Dinero")?(_(),f("p",{key:1,class:n(["text",c.data["SEDE "]=="TOTAL"?"bold":""]),style:{"min-width":"max-content"}},d(o(T)(c.data[e])),3)):(_(),f("p",{key:0,class:n(["text",c.data["SEDE "]=="TOTAL"?"bold":""]),style:{"min-width":"max-content"}},d(c.data[e]),3))]),_:2},1032,["style","header"])}),256))]),_:1},8,["loading","value","filters"])])}}},Z=C(J,[["__scopeId","data-v-6fec4fb2"]]);export{Z as default};
