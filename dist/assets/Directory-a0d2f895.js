import{s as L}from"./siteService-8f3f7676.js";import{_ as ae,r as f,i as ee,x as te,U as h,a as A,o as c,c as u,b as e,g as a,w as v,t as m,j as D,e as se,f as b,T as ke,F as I,p as le,h as ie,J as Le,u as U,d as B,v as Se}from"./index-e7a37f9b.js";import{u as ne}from"./directorio-9609a860.js";const oe=N=>(le("data-v-3f6f351a"),N=N(),ie(),N),Ce={class:"p-0",style:{"border-radius":"1rem","background-color":"red"}},Ve={class:"m-0"},De=oe(()=>e("span",{class:"p-column-title"},"Code",-1)),$e=oe(()=>e("span",{class:"p-column-title"},"Code",-1)),Ee={class:"col-12 px-1",style:{display:"flex",position:"relative","background-color":"","align-items":"center",gap:"0.5rem","justify-content":"end"}},Ue={key:0,class:"fa-solid fa-pen-to-square mr-2"},Ne={key:1,class:"fa-solid fa-rotate-right mr-2"},je=oe(()=>e("i",{class:"fa-solid fa-floppy-disk mr-2"},null,-1)),Te={__name:"horarios",setup(N){const S=f(!1),r=()=>{S.value&&J().then(w=>R.value=w),S.value=!S.value},l=f(!1),R=f([]),P=f(!1),y=ne();ee(()=>{J().then(w=>R.value=w)}),te(()=>y.currentSite,w=>{J().then(p=>R.value=p)});const J=async()=>{P.value=!0,localStorage.getItem("siteId");try{const w=await fetch(`${h}/site-schedule/${y.currentSite.site_id}/`);if(!w.ok)throw"paila";const p=await w.json();return p.forEach(_=>{_.opening_time=new Date(`1970-01-01T${_.opening_time}`),_.closing_time=new Date(`1970-01-01T${_.closing_time}`)}),P.value=!1,p}catch(w){P.value=!1,console.log(w)}};f("");const Y=async()=>{l.value=!0;try{const w=R.value.map(_=>{const C={hour12:!1,hour:"2-digit",minute:"2-digit"},M=_.opening_time instanceof Date?_.opening_time.toLocaleTimeString([],C):_.opening_time,F=_.closing_time instanceof Date?_.closing_time.toLocaleTimeString([],C):_.closing_time;return{..._,opening_time:M,closing_time:F}});if(!(await fetch(`${h}/site-schedule/`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(w)})).ok)throw new Error("Error al enviar los datos");S.value=!1,l.value=!1}catch(w){console.log(w),l.value=!1}},Z=f(["Domingo","Lunes","Martes","Miercoles","Jueves","Viernes","Sabado"]);return(w,p)=>{const _=A("Column"),C=A("Calendar"),M=A("DataTable"),F=A("Button");return c(),u(I,null,[e("div",Ce,[a(M,{stripedRowss:"",ref:"dt",class:"",value:R.value,dataKey:"id",style:{border:"1rem",overflow:"hidden"},rows:7,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25,100],currentPageReportTemplate:"Mostrando {first} a {last} de {totalRecords} scheldules",responsiveLayout:"scroll",scrollable:""},{default:v(()=>[a(_,{style:{"max-width":"3rem"},class:"p-0",field:"day_of_week",header:"Dia",headerStyle:"width:1rem; min-width:1rem;"},{body:v(j=>[e("span",Ve,m(Z.value[j.data.day_of_week-1]),1)]),_:1}),a(_,{class:"p-0",field:"opening_time",header:"Abre",headerStyle:"width:2rem; min-width:2rem;"},{body:v(j=>[De,a(C,{class:"p-0",disabled:!S.value,hourFormat:"12",timeOnly:"",modelValue:j.data.opening_time,"onUpdate:modelValue":O=>j.data.opening_time=O},null,8,["disabled","modelValue","onUpdate:modelValue"])]),_:1}),a(_,{class:"p-1",field:"closing_time",header:"Cierra",headerStyle:"width:2rem; min-width:2rem;"},{body:v(j=>[$e,a(C,{disabled:!S.value,hourFormat:"12",timeOnly:"",modelValue:j.data.closing_time,"onUpdate:modelValue":O=>j.data.closing_time=O},null,8,["disabled","modelValue","onUpdate:modelValue"])]),_:1})]),_:1},8,["value"])]),e("div",Ee,[a(F,{severity:S.value?"help":"info",onClick:r,size:"small",class:"",style:{transition:"all  .5s","min-width":"max-content","align-items":"","font-weight":"bold","border-radius":"0.5rem"}},{default:v(()=>[S.value?(c(),u("i",Ne)):(c(),u("i",Ue)),D(" "+m(S.value?"Restablecer":"Modificar horario"),1)]),_:1},8,["severity","onClick"]),a(ke,{name:"fade"},{default:v(()=>[S.value?(c(),se(F,{key:0,size:"small",severity:"success",onClick:Y,style:{"font-weight":"bold","min-height":"max-content","border-radius":"0.5rem"},class:""},{default:v(()=>[je,D(" Guardar")]),_:1})):b("",!0)]),_:1})])],64)}}},Ae=ae(Te,[["__scopeId","data-v-3f6f351a"]]);const n=N=>(le("data-v-20b09be7"),N=N(),ie(),N),Pe={class:"col-12 mx-auto md:shadow-3 py-6 md:p-3 p-0 px-2 mb-8",style:{"max-width":"700px","margin-top":"3rem","background-color":"white","border-radius":"0.5rem"}},Oe=n(()=>e("p",{class:"m-0",for:"siteName"},"Nombre de la sede",-1)),qe=n(()=>e("p",{class:"m-0",for:"siteAddress"},"Dirección",-1)),Ie=n(()=>e("p",{class:"m-0",for:"sitePhone"},"Teléfono",-1)),Re=n(()=>e("p",{class:"m-0",for:"emailAddress"},"Correo electrónico",-1)),Be=n(()=>e("p",{class:"m-0",for:"whatsappLink"},"Enlace de WhatsApp",-1)),Fe=n(()=>e("p",{class:"m-0",for:"mapsLink"},"Enlace de maps",-1)),We={class:"col-12 p-0",style:{display:"flex","justify-content":"end"}},Je={class:"field col-12 pb-0 px-0"},Me=n(()=>e("label",{for:"appName"},"Nombre de la aplicación",-1)),ze={class:"field col-12 pb-0 px-0"},Ge=n(()=>e("label",{for:"username"},"Nombre de usuario",-1)),He={class:"field col-12 pb-0 px-0"},Ke=n(()=>e("label",{for:"password"},"Contraseña",-1)),Qe={class:"field col-12 pb-0 px-0"},Xe=n(()=>e("label",{for:"pageName"},"Nombre de la página",-1)),Ye={class:"field col-12 pb-0 px-0"},Ze=n(()=>e("label",{for:"username"},"Nombre de usuario",-1)),et={class:"field col-12 pb-0 px-0"},tt=n(()=>e("label",{for:"password"},"Contraseña",-1)),st={class:"field col-12 pb-0 px-0"},ot=n(()=>e("label",{for:"uniqueCode"},"Código único",-1)),at={class:"field col-12 pb-0 px-0"},lt=n(()=>e("label",{for:"externalCode"},"Código externo",-1)),it={class:"field col-12 pb-0 px-0"},nt=n(()=>e("label",{for:"wifiUsername"},"Nombre de usuario",-1)),rt={class:"field col-12 pb-0 px-0"},dt=n(()=>e("label",{for:"wifiPassword"},"Contraseña",-1)),ct={class:"field col-12 pb-0 px-0"},ut=n(()=>e("label",{for:"username"},"Nombre de usuario",-1)),pt={class:"field col-12 pb-0 px-0"},mt=n(()=>e("label",{for:"password"},"Contraseña",-1)),ft={class:"field col-12 pb-0 px-0"},vt=n(()=>e("label",{for:"boxName"},"Nombre de la caja",-1)),_t={class:"field col-12 pb-0 px-0"},ht=n(()=>e("label",{for:"password"},"Contraseña",-1)),yt=n(()=>e("p",{class:"p-3 text-2xl text-center",style:{"font-weight":"bold"}},[e("i",{class:"fa-solid fa-folder-open"}),D(" Directorio")],-1)),gt={class:"p-0",style:{overflow:"hidden"}},bt={class:"col-12 p-0 my-5"},wt=["src"],xt={class:"field col-12 pb-0 px-0 col-12 mt-2 mb-6 p-0",style:{display:"flex","justify-content":"end",gap:"1rem"}},kt=n(()=>e("i",{class:"fa-solid fa-camera"},null,-1)),Lt=n(()=>e("i",{class:"fa-solid fa-spinner"},null,-1)),St=n(()=>e("i",{class:"fa-solid fa-floppy-disk"},null,-1)),Ct={class:"grid p-0 m-0",style:{}},Vt=n(()=>e("p",{class:"text-xl mb-1 col-12",style:{"font-weight":"bold"}},[e("i",{class:"fa-solid fa-circle-info mr-3"}),D(" INFORMACION BASICA")],-1)),Dt={style:{"overflow-x":"auto"},class:"py-3 md:py-0"},$t={class:"p-0"},Et={style:{"font-weight":"bold","min-width":"10rem"}},Ut={key:0,class:"",style:{"min-width":"max-content"}},Nt=["href"],jt={class:"col-12 px-0 my-4",style:{display:"flex",gap:"1rem","justify-content":"start","align-items":"center"}},Tt=n(()=>e("div",{style:{"background-color":"#000",height:"0.3rem","border-radius":"0 1rem 1rem 0",width:"100%"}},null,-1)),At={class:"col-12 mt-4 mb-1 col-12",style:{"background-color":"#f6f7c1","border-radius":"0.5rem",position:"relative"}},Pt={class:"text-xl p-0 mb-1 col-12",style:{display:"flex","justify-content":"space-between"}},Ot=n(()=>e("p",{style:{"font-weight":"bold"}},[e("i",{class:"fa-solid fa-video mr-3"}),D(" CAMARAS")],-1)),qt={style:{display:"flex","align-items":"center",gap:"1rem"}},It={class:"p-0"},Rt={style:{"font-weight":"bold","min-width":"10rem"}},Bt={key:0,class:"",style:{"min-width":"max-content"}},Ft={style:{display:"flex","align-items":"center",gap:"1rem"}},Wt={class:"p-0"},Jt={style:{"font-weight":"bold","min-width":"10rem"}},Mt={key:0,class:"",style:{"min-width":"max-content"}},zt={class:"col-12 mt-4 mb-1 col-12",style:{"background-color":"#84e4ff",position:"relative","border-radius":"0.5rem"}},Gt={class:"text-xl p-0 mb-1 col-12",style:{display:"flex","justify-content":"space-between"}},Ht=n(()=>e("p",{style:{"font-weight":"bold"}},[e("i",{class:"fa-solid fa-shield mr-3"}),D(" CAJAS FUERTES")],-1)),Kt=n(()=>e("i",{class:"fa-solid fa-plus text-xl"},null,-1)),Qt={style:{"overflow-x":"auto"}},Xt={style:{display:"flex","align-items":"center",gap:"1rem"}},Yt={class:"p-0"},Zt={style:{"font-weight":"bold","min-width":"10rem"}},es={key:0,class:"",style:{"min-width":"max-content"}},ts={style:{display:"flex","align-items":"center",gap:"1rem"}},ss={class:"p-0"},os={style:{"font-weight":"bold","min-width":"10rem"}},as={key:0,class:"",style:{"min-width":"max-content"}},ls={class:"col-12 mt-4 mb-1 col-12",style:{"background-color":"#d0f5be",position:"relative","border-radius":"0.5rem"}},is={class:"text-xl p-0 mb-1 col-12",style:{display:"flex","justify-content":"space-between"}},ns=n(()=>e("p",{style:{"font-weight":"bold"}},[e("i",{class:"fa-solid fa-wifi mr-3"}),D(" WIFI'S")],-1)),rs=n(()=>e("i",{class:"fa-solid fa-plus text-xl"},null,-1)),ds={style:{"overflow-x":"auto"}},cs={style:{display:"flex","align-items":"center",gap:"1rem"}},us=n(()=>e("div",{class:"p-0"},[e("p",{style:{"font-weight":"bold","min-width":"10rem"}},"Nombre:")],-1)),ps={key:0,class:"",style:{"min-width":"max-content"}},ms={style:{display:"flex","align-items":"center",gap:"1rem"}},fs=n(()=>e("div",{class:"p-0"},[e("p",{style:{"font-weight":"bold","min-width":"10rem"}},"Clave:")],-1)),vs={key:0,class:"",style:{"min-width":"max-content"}},_s={class:"col-12 mt-4 mb-1 col-12",style:{"background-color":"#e7ceff",position:"relative","border-radius":"0.5rem"}},hs={class:"text-xl p-0 mb-1 col-12",style:{display:"flex","justify-content":"space-between"}},ys=n(()=>e("p",{style:{"font-weight":"bold"}},[e("i",{class:"fa-regular fa-credit-card mr-3"}),D(" DATAFONOS")],-1)),gs=n(()=>e("i",{class:"fa-solid fa-plus text-xl"},null,-1)),bs={style:{display:"flex","align-items":"center",gap:"1rem"}},ws={class:"p-0"},xs={style:{"font-weight":"bold","min-width":"10rem"}},ks={key:0,class:"",style:{"min-width":"max-content"}},Ls={style:{display:"flex","align-items":"center",gap:"1rem"}},Ss={class:"p-0"},Cs={style:{"font-weight":"bold","min-width":"10rem"}},Vs={key:0,class:"",style:{"min-width":"max-content"}},Ds={class:"col-12 mt-4 mb-1 col-12",style:{"background-color":"rgb(237 120 85 / 43%)","border-radius":"0.5rem",position:"relative"}},$s={class:"text-xl p-0 mb-1 col-12",style:{display:"flex","justify-content":"space-between"}},Es=n(()=>e("p",{style:{"font-weight":"bold"}},[e("i",{class:"fa-solid fa-paper-plane mr-3"}),D(" PAGINAS WEB")],-1)),Us=n(()=>e("i",{class:"fa-solid fa-plus text-xl"},null,-1)),Ns={style:{display:"flex","align-items":"center",gap:"1rem"}},js=n(()=>e("div",{class:"p-0"},[e("p",{style:{"font-weight":"bold","min-width":"10rem"}},"Nombre :")],-1)),Ts={key:0,class:"",style:{"min-width":"max-content"}},As={style:{display:"flex","align-items":"center",gap:"1rem"}},Ps=n(()=>e("div",{class:"p-0"},[e("p",{style:{"font-weight":"bold","min-width":"10rem"}},"Usuario:")],-1)),Os={key:0,class:"",style:{"min-width":"max-content"}},qs={style:{display:"flex","align-items":"center",gap:"1rem"}},Is=n(()=>e("div",{class:"p-0"},[e("p",{style:{"font-weight":"bold","min-width":"10rem"}},"Clave:")],-1)),Rs={key:0,class:"",style:{"min-width":"max-content"}},Bs={class:"col-12 mt-4 mb-1 col-12",style:{"background-color":"#ddedea","border-radius":"0.5rem",position:"relative"}},Fs={class:"text-xl p-0 mb-1 col-12",style:{display:"flex","justify-content":"space-between"}},Ws=n(()=>e("p",{style:{"font-weight":"bold"}},[e("i",{class:"fa-brands fa-app-store-ios mr-3"}),D("APLICACIONES")],-1)),Js=n(()=>e("i",{class:"fa-solid fa-plus text-xl"},null,-1)),Ms={style:{display:"flex","align-items":"center",gap:"1rem"}},zs=n(()=>e("div",{class:"p-0"},[e("p",{style:{"font-weight":"bold","min-width":"10rem"}},"Nombre :")],-1)),Gs={key:0,class:"",style:{"min-width":"max-content"}},Hs={style:{display:"flex","align-items":"center",gap:"1rem"}},Ks=n(()=>e("div",{class:"p-0"},[e("p",{style:{"font-weight":"bold","min-width":"10rem"}},"Usuario:")],-1)),Qs={key:0,class:"",style:{"min-width":"max-content"}},Xs={style:{display:"flex","align-items":"center",gap:"1rem"}},Ys=n(()=>e("div",{class:"p-0"},[e("p",{style:{"font-weight":"bold","min-width":"10rem"}},"Clave:")],-1)),Zs={key:0,class:"",style:{"min-width":"max-content"}},eo=n(()=>e("div",{class:"col-12 p-0 my-4",style:{display:"flex","justify-content":"start","align-items":"center"}},[e("div",{style:{"background-color":"#ef4444",height:"0.3rem","border-radius":"0 1rem 1rem 0",width:"100%"}})],-1)),to=n(()=>e("p",{class:"text-xl mb-1 col-12",style:{"font-weight":"bold"}},[e("i",{class:"fa-solid fa-clock mr-3"}),D(" HORARIO")],-1)),so={class:"col-12"},oo={__name:"Directory",setup(N){const S=f(),r=ne();f(r.currentSite);const l=Le();ee(()=>{y.value={...r.currentSite}});const R=()=>{const i=`${h}/site/${r.currentSite.site_id}`;Se.put(i,y.value).then(t=>{console.log("Actualización exitosa:",t.data),P.value=!1,r.currentSite={...y.value}}).catch(t=>{console.error("Error en la actualización:",t.response.data)})},P=f(!1),y=f({site_name:"",site_address:"",site_phone:"",email_address:"",wsp_link:"",maps:""});te(()=>r.currentSite,(i,t)=>{i!==t&&(y.value={...i})},{deep:!0,immediate:!0});const J=i=>{confirm("¿Estás seguro de que quieres eliminar esta red Wi-Fi?")&&Y(i)},Y=i=>{l.setLoading(!0,"borrando");const t=`${h}/site/${r.currentSite.site_id}/wifi-network/${i}`;fetch(t,{method:"DELETE",headers:{"Content-Type":"application/json"}}).then(o=>{if(!o.ok)throw l.setLoading(!1,"borrando"),new Error("Network response was not ok");return o.json()}).then(()=>{l.setLoading(!1,"borrando"),L.siteDirectory(r.currentSite.site_id).then(o=>p.value=o)}).catch(o=>{l.setLoading(!1,"borrando"),console.error("Error:",o)})},Z=i=>{confirm("¿Estás seguro de que quieres eliminar esta caja fuerte?")&&w(i)},w=i=>{l.setLoading(!0,"borrando");const t=`${h}/site/${r.currentSite.site_id}/safe-box/${i}`;fetch(t,{method:"DELETE",headers:{"Content-Type":"application/json"}}).then(o=>{if(!o.ok)throw l.setLoading(!1,"enviando"),new Error("Network response was not ok");return o.json()}).then(()=>{l.setLoading(!1,"enviando"),L.siteDirectory(r.currentSite.site_id).then(o=>p.value=o)}).catch(o=>{l.setLoading(!1,"enviando"),console.error("Error:",o)})},p=f({}),_=f(!1),C=f({username:"",password:""}),M=()=>{if(l.setLoading(!0,"enviando"),!C.value.username||!C.value.password){alert("Por favor, completa todos los campos.");return}const i={site_id:r.currentSite.site_id,username:C.value.username,password:C.value.password},t=`${h}/site/camera`;fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}).then(o=>{if(!o.ok)throw new Error("Network response was not ok");return l.setLoading(!1,"enviando"),o.json()}).then(o=>{console.log("Success:",o),_.value=!1,L.siteDirectory(r.currentSite.site_id).then(d=>p.value=d),l.setLoading(!1,"enviando")}).catch(o=>{l.setLoading(!1,"enviando"),console.error("Error:",o)})},F=i=>{confirm("¿Estás seguro de que quieres eliminar este datáfono?")&&j(i)},j=i=>{l.setLoading(!0,"borrando");const t=`${h}/site/${r.currentSite.site_id}/dataphone/${i}`;fetch(t,{method:"DELETE",headers:{"Content-Type":"application/json"}}).then(o=>{if(!o.ok)throw l.setLoading(!1,"borrando"),new Error("Network response was not ok");return o.json()}).then(()=>{l.setLoading(!1,"enviando"),L.siteDirectory(r.currentSite.site_id).then(o=>p.value=o)}).catch(o=>{l.setLoading(!1,"enviando"),console.error("Error:",o)})},O=f(!1),$=f({boxName:"",password:""}),re=i=>{confirm("¿Estás seguro de que quieres eliminar esta aplicación?")&&de(i)},de=i=>{l.setLoading(!0,"borrando");const t=`${h}/site/${r.currentSite.site_id}/application/${i}`;fetch(t,{method:"DELETE",headers:{"Content-Type":"application/json"}}).then(o=>{if(!o.ok)throw new Error("Network response was not ok");return l.setLoading(!1,"enviando"),o.json()}).then(()=>{l.setLoading(!1,"enviando"),L.siteDirectory(r.currentSite.site_id).then(o=>p.value=o)}).catch(o=>{console.error("Error:",o)})},q=f(null),W=f(""),ce=i=>{const t=i.target.files[0];t&&(console.log("Archivo seleccionado:",t),q.value=t,W.value=URL.createObjectURL(t))},ue=()=>{if(l.setLoading(!0,"enviando"),!$.value.boxName||!$.value.password){alert("Por favor, completa todos los campos.");return}const i={site_id:r.currentSite.site_id,box_name:$.value.boxName,password:$.value.password},t=`${h}/site/safe-box`;fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}).then(o=>{if(l.setLoading(!1,"enviando"),!o.ok)throw new Error("Network response was not ok");return o.json()}).then(o=>{l.setLoading(!1,"enviando"),console.log("Success:",o),L.siteDirectory(r.currentSite.site_id).then(d=>p.value=d),O.value=!1,$.value.boxName="",$.value.password=""}).catch(o=>{l.setLoading(!1,"enviando"),console.error("Error:",o)})},H=f(!1),E=f({username:"",password:""}),pe=()=>{if(l.setLoading(!0,"enviando"),!E.value.username||!E.value.password){alert("Por favor, completa todos los campos.");return}const i={site_id:r.currentSite.site_id,username:E.value.username,password:E.value.password},t=`${h}/site/wifi-network`;fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}).then(o=>{if(!o.ok)throw l.setLoading(!1,"enviando"),new Error("Network response was not ok");return o.json()}).then(o=>{l.setLoading(!1,"enviando"),console.log("Success:",o),H.value=!1,E.value.username="",E.value.password="",L.siteDirectory(r.currentSite.site_id).then(d=>p.value=d)}).catch(o=>{l.setLoading(!1,"enviando"),console.error("Error:",o)})},me=i=>{confirm("¿Estás seguro de que quieres eliminar esta página web?")&&fe(i)},fe=i=>{l.setLoading(!0,"borrando");const t=`${h}/site/${r.currentSite.site_id}/web-page/${i}`;fetch(t,{method:"DELETE",headers:{"Content-Type":"application/json"}}).then(o=>{if(!o.ok)throw l.setLoading(!1,"borrando"),new Error("Network response was not ok");return o.json()}).then(()=>{l.setLoading(!1,"borrando"),L.siteDirectory(r.currentSite.site_id).then(o=>p.value=o)}).catch(o=>{l.setLoading(!1,"borrando"),console.error("Error:",o)})},K=f(!1),T=f({unique_code:"",external_code:""}),ve=()=>{if(l.setLoading(!0,"enviando"),!T.value.unique_code){alert("Por favor, completa todos los campos.");return}const i={site_id:r.currentSite.site_id,unique_code:T.value.unique_code,external_code:T.value.external_code},t=`${h}/site/dataphone`;fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}).then(o=>{if(!o.ok)throw l.setLoading(!1,"borrando"),new Error("Network response was not ok");return o.json()}).then(o=>{l.setLoading(!1,"borrando"),console.log("Success:",o),K.value=!1,L.siteDirectory(r.currentSite.site_id).then(d=>p.value=d)}).catch(o=>{l.setLoading(!1,"borrando"),console.error("Error:",o)}),T.value.unique_code="",T.value.external_code=""},_e=i=>{confirm("¿Estás seguro de que quieres eliminar esta cámara?")&&he(i)},he=i=>{l.setLoading(!0,"borrando");const t=`${h}/site/${r.currentSite.site_id}/camera/${i}`;fetch(t,{method:"DELETE",headers:{"Content-Type":"application/json"}}).then(o=>{if(!o.ok)throw l.setLoading(!1,"enviando"),new Error("Network response was not ok");return o.json()}).then(()=>{l.setLoading(!1,"enviando"),L.siteDirectory(r.currentSite.site_id).then(o=>p.value=o)}).catch(o=>{console.error("Error:",o)})},Q=f(!1),x=f({page:"",username:"",password:""}),ye=()=>{if(l.setLoading(!0,"enviando"),!x.value.page||!x.value.username||!x.value.password){alert("Por favor, completa todos los campos.");return}const i={site_id:r.currentSite.site_id,page:x.value.page,username:x.value.username,password:x.value.password},t=`${h}/siteweb-page`;fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}).then(o=>{if(!o.ok)throw l.setLoading(!1,"borrando"),new Error("Network response was not ok");return o.json()}).then(o=>{l.setLoading(!1,"borrando"),console.log("Success:",o),Q.value=!1,L.siteDirectory(r.currentSite.site_id).then(d=>p.value=d)}).catch(o=>{l.setLoading(!1,"borrando"),console.error("Error:",o)}),x.value.page="",x.value.username="",x.value.password=""},X=f(!1),k=f({name:"",username:"",password:""}),ge=()=>{if(l.setLoading(!0,"enviando"),!k.value.name||!k.value.username||!k.value.password){alert("Por favor, completa todos los campos.");return}const i={site_id:r.currentSite.site_id,name:k.value.name,username:k.value.username,password:k.value.password},t=`${h}/site/application`;fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}).then(o=>{if(l.setLoading(!1,"borrando"),!o.ok)throw new Error("Network response was not ok");return o.json()}).then(o=>{l.setLoading(!1,"borrando"),console.log("Success:",o),X.value=!1,L.siteDirectory(r.currentSite.site_id).then(d=>p.value=d)}).catch(o=>{l.setLoading(!1,"borrando"),console.error("Error:",o)}),k.value.name="",k.value.username="",k.value.password=""},be=[{label:"Nombre",value:"site_name"},{label:"Direccion",value:"site_address"},{label:"Telefono",value:"site_phone"},{label:"Correo",value:"email_address"},{label:"Link de WhatsApp",value:"wsp_link",isLink:!0},{label:"Link de Maps",value:"maps",isLink:!0}];ee(async()=>{await L.getSites().then(i=>S.value=i),await L.siteDirectory(r.currentSite.site_id).then(i=>p.value=i),r.currentSite||r.setSite(S.value[0]),W.value=`${h}/read-product-image/600/site-${r.currentSite.site_id}`,q.value=""});function we(i,t){const o=`${h}/upload-product-image/site-${t}`;l.setLoading(!0,"sibiendo imagen");const d=new FormData;d.append("file",i),fetch(o,{method:"POST",body:d}).then(V=>{V.ok?(console.log("Archivo photo cargado con éxito"),q.value="",l.setLoading(!1,"sibiendo imagen")):(console.error("Error al cargar foto de perfil:",V.status,V.statusText),l.setLoading(!1,"sibiendo imagen"))}).catch(V=>{console.error("Error en la solicitud:",V),l.setLoading(!1,"sibiendo imagen")})}return te(()=>r.currentSite,i=>{l.setLoading(!0,`cargando información de ${i.site_name}`),l.setLoading(!1),L.siteDirectory(r.currentSite.site_id).then(t=>p.value=t),W.value=`${h}/read-product-image/600/site-${r.currentSite.site_id}`,q.value=""}),(i,t)=>{const o=A("InputText"),d=A("Button"),V=A("Dialog"),xe=A("Dropdown"),z=A("Divider");return c(),u("div",Pe,[a(V,{class:"mx-2",header:"Actualizar datos de la sede",visible:P.value,"onUpdate:visible":t[6]||(t[6]=s=>P.value=s),modal:!0,style:{width:"500px"}},{default:v(()=>[Oe,a(o,{class:"mb-3",style:{width:"100%"},id:"siteName",modelValue:y.value.site_name,"onUpdate:modelValue":t[0]||(t[0]=s=>y.value.site_name=s)},null,8,["modelValue"]),qe,a(o,{class:"mb-3",style:{width:"100%"},id:"siteAddress",modelValue:y.value.site_address,"onUpdate:modelValue":t[1]||(t[1]=s=>y.value.site_address=s)},null,8,["modelValue"]),Ie,a(o,{class:"mb-3",style:{width:"100%"},id:"sitePhone",modelValue:y.value.site_phone,"onUpdate:modelValue":t[2]||(t[2]=s=>y.value.site_phone=s)},null,8,["modelValue"]),Re,a(o,{class:"mb-3",style:{width:"100%"},id:"emailAddress",modelValue:y.value.email_address,"onUpdate:modelValue":t[3]||(t[3]=s=>y.value.email_address=s)},null,8,["modelValue"]),Be,a(o,{class:"mb-3",style:{width:"100%"},id:"whatsappLink",modelValue:y.value.wsp_link,"onUpdate:modelValue":t[4]||(t[4]=s=>y.value.wsp_link=s)},null,8,["modelValue"]),Fe,a(o,{class:"mb-3",style:{width:"100%"},id:"mapsLink",modelValue:y.value.maps,"onUpdate:modelValue":t[5]||(t[5]=s=>y.value.maps=s)},null,8,["modelValue"]),e("div",We,[a(d,{class:"mt-4",label:"Guardar cambios",onClick:R,severity:"success"})])]),_:1},8,["visible"]),a(V,{header:"Agregar nueva aplicación",visible:X.value,"onUpdate:visible":t[10]||(t[10]=s=>X.value=s),modal:"",style:{width:"450px"}},{default:v(()=>[e("div",Je,[Me,a(o,{class:"col-12",id:"appName",modelValue:k.value.name,"onUpdate:modelValue":t[7]||(t[7]=s=>k.value.name=s)},null,8,["modelValue"])]),e("div",ze,[Ge,a(o,{class:"col-12",id:"username",modelValue:k.value.username,"onUpdate:modelValue":t[8]||(t[8]=s=>k.value.username=s)},null,8,["modelValue"])]),e("div",He,[Ke,a(o,{class:"col-12",id:"password",type:"password",modelValue:k.value.password,"onUpdate:modelValue":t[9]||(t[9]=s=>k.value.password=s)},null,8,["modelValue"])]),a(d,{label:"Agregar",severity:"success",onClick:ge})]),_:1},8,["visible"]),a(V,{header:"Agregar nueva página web",visible:Q.value,"onUpdate:visible":t[14]||(t[14]=s=>Q.value=s),modal:"",style:{width:"450px"}},{default:v(()=>[e("div",Qe,[Xe,a(o,{class:"col-12",id:"pageName",modelValue:x.value.page,"onUpdate:modelValue":t[11]||(t[11]=s=>x.value.page=s)},null,8,["modelValue"])]),e("div",Ye,[Ze,a(o,{class:"col-12",id:"username",modelValue:x.value.username,"onUpdate:modelValue":t[12]||(t[12]=s=>x.value.username=s)},null,8,["modelValue"])]),e("div",et,[tt,a(o,{class:"col-12",id:"password",type:"password",modelValue:x.value.password,"onUpdate:modelValue":t[13]||(t[13]=s=>x.value.password=s)},null,8,["modelValue"])]),a(d,{label:"Agregar",severity:"success",onClick:ye})]),_:1},8,["visible"]),a(V,{header:"Agregar nuevo datáfono",visible:K.value,"onUpdate:visible":t[17]||(t[17]=s=>K.value=s),modal:"",style:{width:"450px"}},{default:v(()=>[e("div",st,[ot,a(o,{class:"col-12",id:"uniqueCode",modelValue:T.value.unique_code,"onUpdate:modelValue":t[15]||(t[15]=s=>T.value.unique_code=s)},null,8,["modelValue"])]),e("div",at,[lt,a(o,{class:"col-12",id:"externalCode",modelValue:T.value.external_code,"onUpdate:modelValue":t[16]||(t[16]=s=>T.value.external_code=s)},null,8,["modelValue"])]),a(d,{label:"Agregar",severity:"success",onClick:ve})]),_:1},8,["visible"]),a(V,{header:"Agregar nueva red WiFi",visible:H.value,"onUpdate:visible":t[20]||(t[20]=s=>H.value=s),modal:"",style:{width:"450px"}},{default:v(()=>[e("div",it,[nt,a(o,{class:"col-12",id:"wifiUsername",modelValue:E.value.username,"onUpdate:modelValue":t[18]||(t[18]=s=>E.value.username=s)},null,8,["modelValue"])]),e("div",rt,[dt,a(o,{class:"col-12",id:"wifiPassword",modelValue:E.value.password,"onUpdate:modelValue":t[19]||(t[19]=s=>E.value.password=s),type:"password"},null,8,["modelValue"])]),a(d,{label:"Agregar",severity:"success",onClick:pe})]),_:1},8,["visible"]),a(V,{header:"Agregar nueva cámara",visible:_.value,"onUpdate:visible":t[23]||(t[23]=s=>_.value=s),modal:"",style:{width:"450px"},closable:!0,showHeader:!0},{default:v(()=>[e("div",ct,[ut,a(o,{class:"col-12",id:"username",modelValue:C.value.username,"onUpdate:modelValue":t[21]||(t[21]=s=>C.value.username=s)},null,8,["modelValue"])]),e("div",pt,[mt,a(o,{class:"col-12",id:"password",modelValue:C.value.password,"onUpdate:modelValue":t[22]||(t[22]=s=>C.value.password=s)},null,8,["modelValue"])]),a(d,{label:"Agregar",severity:"success",onClick:M})]),_:1},8,["visible"]),a(V,{header:"Agregar nueva caja fuerte",visible:O.value,"onUpdate:visible":t[26]||(t[26]=s=>O.value=s),modal:"",style:{width:"450px"}},{default:v(()=>[e("div",ft,[vt,a(o,{class:"col-12",id:"boxName",modelValue:$.value.boxName,"onUpdate:modelValue":t[24]||(t[24]=s=>$.value.boxName=s)},null,8,["modelValue"])]),e("div",_t,[ht,a(o,{class:"col-12",id:"password",modelValue:$.value.password,"onUpdate:modelValue":t[25]||(t[25]=s=>$.value.password=s),type:"password"},null,8,["modelValue"])]),a(d,{label:"Agregar",severity:"success",onClick:ue})]),_:1},8,["visible"]),yt,e("div",gt,[a(xe,{modelValue:U(r).currentSite,"onUpdate:modelValue":t[27]||(t[27]=s=>U(r).currentSite=s),options:S.value,optionLabel:"site_name",style:{"max-width":"30rem"},class:"col-12 p-0",placeholder:"Sede"},null,8,["modelValue","options"]),e("div",bt,[e("img",{class:"img-profile-add p-0",style:{width:"100%","border-radius":"0.5rem","object-fit":"cover","aspect-ratio":"4 / 2","background-color":"#84e4ff"},src:W.value?W.value:`${U(h)}/read-product-image/600/site-${U(r).currentSite.site_id}`,alt:""},null,8,wt),e("div",xt,[e("input",{ref:"fileInput",type:"file",accept:"image/*",onChange:ce,style:{display:"none"}},null,544),a(d,{severity:"help",class:"",style:{width:"min-content"},onClick:t[28]||(t[28]=s=>{i.$refs.fileInput.click()})},{default:v(()=>[kt]),_:1}),q.value?(c(),se(d,{key:0,severity:"help",class:"",style:{width:"min-content"},onClick:t[29]||(t[29]=()=>{W.value=`${U(h)}/read-product-image/600/site-${U(r).currentSite.site_id}`,q.value=""})},{default:v(()=>[Lt]),_:1})):b("",!0),q.value?(c(),se(d,{key:1,severity:"success",class:"",style:{width:"min-content"},onClick:t[30]||(t[30]=s=>we(q.value,U(r).currentSite.site_id))},{default:v(()=>[St]),_:1})):b("",!0)])]),e("div",Ct,[Vt,e("div",Dt,[(c(),u(I,null,B(be,(s,g)=>e("div",{key:g,class:"my-0 p-3 py-0",style:{display:"flex","align-items":"center",gap:"1rem"}},[e("div",$t,[e("p",Et,m(s.label)+":",1)]),s.isLink?(c(),u("a",{key:1,class:"",style:{"min-width":"max-content"},href:U(r).currentSite[s.value]},m(U(r).currentSite[s.value]),9,Nt)):(c(),u("div",Ut,m(U(r).currentSite[s.value]),1))])),64))]),e("div",jt,[a(d,{severity:"help",style:{height:"min-content","min-width":"max-content"},label:"Actualizar informacion basica",onClick:t[31]||(t[31]=s=>P.value=!0)}),Tt]),e("div",At,[e("div",Pt,[Ot,a(d,{icon:"fa-solid fa-plus text-xl",onClick:t[32]||(t[32]=s=>_.value=!0),class:"p-0",rounded:"",style:{"aspect-ratio":"1 / 1",display:"flex","align-items":"center","justify-content":"center",width:"3rem",height:"3rem"},severity:"help"})]),(c(!0),u(I,null,B(p.value.cameras,(s,g)=>(c(),u("div",{key:g,class:"my-0 col-12 py-0",style:{}},[a(d,{text:"",style:{position:"absolute",right:"1rem"},icon:"fa-solid fa-trash-can",class:"p-button-rounded p-button-danger p-0 text-2xl text-2xl",onClick:G=>_e(s.camera_id)},null,8,["onClick"]),e("div",qt,[e("div",It,[e("p",Rt,"Usuario "+m(g+1)+":",1)]),s.isLink?b("",!0):(c(),u("div",Bt,m(s.username),1))]),e("div",Ft,[e("div",Wt,[e("p",Jt,"Clave "+m(g+1)+":",1)]),s.isLink?b("",!0):(c(),u("div",Mt,m(s.password),1))]),a(z,{class:"p-0 m-1"})]))),128))]),e("div",zt,[e("div",Gt,[Ht,a(d,{onClick:t[33]||(t[33]=s=>O.value=!0),class:"p-0",rounded:"",style:{"aspect-ratio":"1 / 1",display:"flex","align-items":"center","justify-content":"center",width:"3rem",height:"3rem"},severity:"help"},{default:v(()=>[Kt]),_:1})]),e("div",Qt,[(c(!0),u(I,null,B(p.value.safe_boxes,(s,g)=>(c(),u("div",{key:g,class:"my-0 col-12 py-0",style:{}},[a(d,{style:{position:"absolute",right:"1rem"},icon:"fa-solid fa-trash-can",text:"",class:"p-button-rounded p-button-danger p-0 text-2xl",onClick:G=>Z(s.safe_box_id)},null,8,["onClick"]),e("div",Xt,[e("div",Yt,[e("p",Zt,"Usuario "+m(g+1)+":",1)]),s.isLink?b("",!0):(c(),u("div",es,m(s.box_name),1))]),e("div",ts,[e("div",ss,[e("p",os,"Clave "+m(g+1)+":",1)]),s.isLink?b("",!0):(c(),u("div",as,m(s.password),1))]),a(z,{class:"p-0 m-1"})]))),128))])]),e("div",ls,[e("div",is,[ns,a(d,{onClick:t[34]||(t[34]=s=>H.value=!0),class:"p-0",rounded:"",style:{"aspect-ratio":"1 / 1",display:"flex","align-items":"center","justify-content":"center",width:"3rem",height:"3rem"},severity:"help"},{default:v(()=>[rs]),_:1})]),e("div",ds,[(c(!0),u(I,null,B(p.value.wifi_networks,(s,g)=>(c(),u("div",{style:{},key:g,class:"my-0 col-12 py-0"},[a(d,{style:{position:"absolute",right:"1rem"},icon:"fa-solid fa-trash-can",text:"",class:"p-button-rounded p-button-danger p-0 text-2xl",onClick:G=>J(s.wifi_id)},null,8,["onClick"]),e("div",cs,[us,s.isLink?b("",!0):(c(),u("div",ps,m(s.username),1))]),e("div",ms,[fs,s.isLink?b("",!0):(c(),u("div",vs,m(s.password),1))]),a(z,{class:"p-0 m-1"})]))),128))])]),e("div",_s,[e("div",hs,[ys,a(d,{onClick:t[35]||(t[35]=s=>K.value=!0),class:"p-0",rounded:"",style:{"aspect-ratio":"1 / 1",display:"flex","align-items":"center","justify-content":"center",width:"3rem",height:"3rem"},severity:"help"},{default:v(()=>[gs]),_:1})]),(c(!0),u(I,null,B(p.value.dataphones,(s,g)=>(c(),u("div",{key:g,class:"my-0 col-12 py-0",style:{}},[a(d,{style:{position:"absolute",right:"1rem"},icon:"fa-solid fa-trash-can",text:"",class:"p-button-rounded p-button-danger p-0 text-2xl",onClick:G=>F(s.dataphone_id)},null,8,["onClick"]),e("div",bs,[e("div",ws,[e("p",xs,"Codigo unico "+m(g+1)+":",1)]),s.isLink?b("",!0):(c(),u("div",ks,m(s.unique_code),1))]),e("div",Ls,[e("div",Ss,[e("p",Cs,"Codigo externo "+m(g+1)+":",1)]),s.isLink?b("",!0):(c(),u("div",Vs,m(s.external_code),1))]),a(z,{class:"p-0 m-1"})]))),128))]),e("div",Ds,[e("div",$s,[Es,a(d,{onClick:t[36]||(t[36]=s=>Q.value=!0),class:"p-0",rounded:"",style:{"aspect-ratio":"1 / 1",display:"flex","align-items":"center","justify-content":"center",width:"3rem",height:"3rem"},severity:"help"},{default:v(()=>[Us]),_:1})]),(c(!0),u(I,null,B(p.value.web_pages,(s,g)=>(c(),u("div",{key:g,class:"my-0 col-12 py-0",style:{}},[a(d,{style:{position:"absolute",right:"1rem"},icon:"fa-solid fa-trash-can",text:"",class:"p-button-rounded p-button-danger p-0 text-2xl",onClick:G=>me(s.web_page_id)},null,8,["onClick"]),e("div",Ns,[js,s.isLink?b("",!0):(c(),u("div",Ts,m(s.page),1))]),e("div",As,[Ps,s.isLink?b("",!0):(c(),u("div",Os,m(s.username),1))]),e("div",qs,[Is,s.isLink?b("",!0):(c(),u("div",Rs,m(s.password),1))]),a(z,{class:"p-0 m-1",style:{color:"red","background-color":"red"}})]))),128))]),e("div",Bs,[e("div",Fs,[Ws,a(d,{onClick:t[37]||(t[37]=s=>X.value=!0),class:"p-0",rounded:"",style:{"aspect-ratio":"1 / 1",display:"flex","align-items":"center","justify-content":"center",width:"3rem",height:"3rem"},severity:"help"},{default:v(()=>[Js]),_:1})]),(c(!0),u(I,null,B(p.value.applications,(s,g)=>(c(),u("div",{key:g,class:"my-0 col-12 py-0",style:{}},[a(d,{style:{position:"absolute",right:"1rem"},icon:"fa-solid fa-trash-can",text:"",class:"p-button-rounded p-button-danger p-0 text-2xl",onClick:G=>re(s.application_id)},null,8,["onClick"]),e("div",Ms,[zs,s.isLink?b("",!0):(c(),u("div",Gs,m(s.name),1))]),e("div",Hs,[Ks,s.isLink?b("",!0):(c(),u("div",Qs,m(s.username),1))]),e("div",Xs,[Ys,s.isLink?b("",!0):(c(),u("div",Zs,m(s.password),1))])]))),128))]),eo,to,e("div",so,[a(Ae)])])])])}}},no=ae(oo,[["__scopeId","data-v-20b09be7"]]);export{no as default};
