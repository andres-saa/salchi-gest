import{p as _}from"./pqrsService-f91ee82c.js";import{_ as N,r as i,y as Q,i as U,x as L,a as d,o as w,c as f,g as o,w as r,b as e,F as P,u as M,j as $,t as x,d as j,e as z,n as D,p as F,h as H}from"./index-9672dc6b.js";import{s as G}from"./editor.esm-9ac76b80.js";const S=u=>(F("data-v-ca053dea"),u=u(),H(),u),J=S(()=>e("p",{class:"my-3"},[e("b",null,"Pregunta")],-1)),K=S(()=>e("p",{class:"my-3"},[e("b",null,"Respuesta")],-1)),O={class:"col-12 p-0"},W={class:"container col-12"},X={class:"p-0 col-12 bar my-4"},Y={class:"p-0 m-0",style:{width:"100%"}},Z={class:"",style:{display:"flex",width:"100%","justify-content":"end","align-items":"center"}},ee={class:"m-0"},se=["innerHTML"],te={__name:"pqrsSection",setup(u){const n=i({question:"",answer:""}),m=i({}),y=i({});i(null);const h=Q(),b=i([]),a=i({}),p=i(!1);i({});const T=l=>{p.value=!0,a.value.showDialogToAddPqrs=!0,n.value={...l}},k=()=>{p.value=!1,a.value.showDialogToAddPqrs=!0},C=l=>{m.value=l,a.value.showDeleteDialog=!0},v=async()=>{b.value=await _.getPqrsByPlaceId(h.params.section_id)},V=async l=>{a.value.showDeleteDialog=!1,await _.deletePqrs(l),v()};U(async()=>{v()}),L(()=>h.params.section_id,()=>{v()},{deep:!0});const A=async()=>{const l={question:n.value.question,answer:n.value.answer,place_id:h.params.section_id};a.value.showDialogToAddPqrs=!1,p.value?await _.updatePqrs(l,n.value.id):await _.createPqrs(l),v()};return(l,t)=>{const I=d("InputText"),c=d("Button"),g=d("Dialog"),R=d("AccordionTab"),B=d("Accordion");return w(),f(P,null,[o(g,{class:"mx-2",header:p.value?"Editar PQRS":"Crear nueva PQRS",style:{width:"50rem"},visible:a.value.showDialogToAddPqrs,"onUpdate:visible":t[2]||(t[2]=s=>a.value.showDialogToAddPqrs=s)},{footer:r(()=>[e("div",O,[o(c,{onClick:A,class:"m-0",severity:"success",label:"ENVIAR"})])]),default:r(()=>[J,o(I,{style:{width:"100%"},modelValue:n.value.question,"onUpdate:modelValue":t[0]||(t[0]=s=>n.value.question=s),editorStyle:"height: 5rem"},null,8,["modelValue"]),K,o(M(G),{modelValue:n.value.answer,"onUpdate:modelValue":t[1]||(t[1]=s=>n.value.answer=s),editorStyle:"height: 320px"},null,8,["modelValue"])]),_:1},8,["header","visible"]),o(g,{header:"Eliminar PQRS",style:{width:"20rem"},visible:a.value.showDeleteDialog,"onUpdate:visible":t[4]||(t[4]=s=>a.value.showDeleteDialog=s)},{footer:r(()=>[e("div",null,[o(c,{onClick:t[3]||(t[3]=s=>V(m.value.id)),text:"",label:"Eliminar",severity:"danger"})])]),default:r(()=>[e("p",null,[$(" Esta seguro de elimnar esta PQRS "),e("b",null,x(m.value.question),1)])]),_:1},8,["visible"]),e("div",W,[e("div",X,[o(c,{size:"small",onClick:k,label:"NUEVA PQRS",severity:"help"})]),o(B,{style:{width:"100%"},expandIcon:"pi pi-plus",collapseIcon:"pi pi-minus"},{default:r(()=>[(w(!0),f(P,null,j(b.value,(s,q)=>(w(),z(R,{key:s.id,style:{"background-color":"red"}},{header:r(()=>[e("p",Y,[e("b",null,x(s.question),1)]),e("div",Z,[o(c,{severity:"danger",onClick:E=>C(s),text:"",style:{transition:".3s ease all"},class:D([y.value[q]?"button-visible":"button-hide","p-0 m-0"]),icon:"pi pi-trash text-xl p-0"},null,8,["onClick","class"]),o(c,{class:D([y.value[q]?"button-visible":"button-hide","p-0 m-0"]),severity:"warning",onClick:E=>T(s),text:"",icon:"pi pi-pencil text-xl p-0"},null,8,["class","onClick"])])]),default:r(()=>[e("p",ee,[e("p",{innerHTML:s.answer},null,8,se)])]),_:2},1024))),128))]),_:1})])],64)}}},ne=N(te,[["__scopeId","data-v-ca053dea"]]);export{ne as default};
