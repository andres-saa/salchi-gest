import{d as S}from"./dailyInventoryService-a23f40de.js";import{_ as j,r as p,V as T,i as B,a as v,o as c,c as _,d as r,w as x,b as e,q as s,t as l,l as g,F as w,e as k,C as M,p as $,g as L,j as O}from"./index-53be5af1.js";const a=m=>($("data-v-7c3b26cb"),m=m(),L(),m),z=a(()=>e("span",{style:{color:"red"}},"Esta accion no se puede deshacer luego, piensalo bien.",-1)),A=a(()=>e("br",null,null,-1)),W=a(()=>e("br",null,null,-1)),G={style:{"text-transform":"capitalize"}},H={style:{}},P=a(()=>e("b",{class:"text-l"},"ES CORRECTO",-1)),Y=a(()=>e("b",{class:"text-l"},"PERSONALMENTE.",-1)),J=a(()=>e("br",null,null,-1)),K=a(()=>e("br",null,null,-1)),Q=a(()=>e("b",null,"Deseas continuar?",-1)),X={style:{display:"flex","justify-content":"end"}},Z={class:"md:mx-auto p-3 md:shadow-2 mb-6",style:{"max-width":"700px","border-radius":"0.5rem","min-height":"80vh","margin-top":"3rem"}},ee=a(()=>e("p",{class:"text-2xl my-3 text-center"},[e("b",null," Reportar inventario ")],-1)),te={class:"text-xl py-0 my-0"},se=a(()=>e("b",null," Fechah : ",-1)),oe={class:"text-xl py-0 my-0",style:{"text-transform":"capitalize"}},ae=a(()=>e("b",null," Responsable : ",-1)),ne={class:"text-center p-1 my-3",style:{"background-color":"#00000020","border-radius":"0.2rem"}},le={style:{"text-transform":"uppercase"}},re={style:{"text-transform":"uppercase","font-weight":"bold"},class:"col-12 my-2 md:col-7 p-0"},ie={class:"col-12 md:col-5 p-0 md:pl-3",style:{display:"flex","align-items":"center",gap:"1rem"}},de={key:0,style:{color:"red","font-weight":"bold"}},ce={class:"col-12 p-0 mt-3",style:{display:"flex","justify-content":"end"}},_e={__name:"reportInventory",setup(m){p({items:[{}]});const h=p([]),y=p(!1),u=T();p([]),p(!1);function D(o){const t=["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"];let i=o.getDate(),b=o.getMonth(),f=o.getFullYear();return`${i} de ${t[b]} del ${f}`}const q=o=>o.map(t=>t).map(t=>t.items).flat().map(t=>({daily_inventory_item_id:t.item_id,quantity:t.quantity||0,daily_inventory_unit_measure_id:t.unit_measure_id})),I=()=>{var o,t;return{daily_inventory:{responsible_id:(o=u.rawUserData)==null?void 0:o.id,site_id:(t=u.rawUserData)==null?void 0:t.site_id},daily_inventory_items:q(h.value)}},E=()=>{if(I().daily_inventory_items.some(t=>!t.quantity)){alert("Debes llenar todos los espacios");return}y.value=!0},V=async()=>{const o=I();await S.InsertDailyInventory(o),O.push("/daily-inventory/daily-inventory-my-reports/")};return B(async()=>{h.value=await S.getGroupsWithItems()}),(o,t)=>{var C;const i=v("Button"),b=v("Dialog"),f=v("Tag"),N=v("InputNumber");return c(),_(w,null,[r(b,{style:{width:"30rem"},class:"m-2",header:"Estas seguro Monstruo?",modal:"",visible:y.value,"onUpdate:visible":t[1]||(t[1]=n=>y.value=n)},{footer:x(()=>[e("div",X,[r(i,{onClick:t[0]||(t[0]=n=>y.value=!1),label:"Mejor lo reviso de nuevo!",severity:"help"}),r(i,{text:"",label:"Firmar",onClick:V,severity:"danger"})])]),default:x(()=>{var n;return[z,s(),A,s(),W,s(" Hola, "),e("span",G,l((n=g(u).rawUserData)==null?void 0:n.name.toLowerCase())+" ! ",1),e("p",H,[s(" Al precionar "),r(i,{severity:"danger",text:"",class:"p-0",label:"Firmar"}),s(" das fe de que el reporte del inventario para la sede "),e("b",null,"Salchimonster "+l(g(u).rawUserData.site_name),1),s(" el dia "+l(D(new Date))+" que estas intentando enviar ",1),P,s(" y lo has verificado "),Y,s(),J,s(),K,Q])]}),_:1},8,["visible"]),e("div",Z,[ee,e("p",te,[se,s(" "+l(D(new Date)),1)]),e("p",oe,[ae,s(l((C=g(u).rawUserData)==null?void 0:C.name.toLowerCase()),1)]),(c(!0),_(w,null,k(h.value,(n,U)=>(c(),_("div",{key:U},[e("p",ne,[e("b",le,l(n.group_name),1)]),(c(!0),_(w,null,k(n.items,(d,F)=>(c(),_("div",{style:{"align-items":"center"},class:"grid m-0",key:F},[e("div",re,[s(l(d.item_name)+" ",1),r(f,{severity:"danger"},{default:x(()=>[s(l(d.unit_measure),1)]),_:2},1024)]),e("div",ie,[d.quantity==null?(c(),_("span",de,"*")):M("",!0),r(N,{min:0,maxFractionDigits:2,modelValue:d.quantity,"onUpdate:modelValue":R=>d.quantity=R,suffix:` ${d.unit_measure}`,maxDecimal:"5",style:{width:"100%"},class:""},null,8,["modelValue","onUpdate:modelValue","suffix"])])]))),128))]))),128)),e("div",ce,[r(i,{onClick:E,severity:"help",label:"Enviar Reporte"})])])],64)}}},me=j(_e,[["__scopeId","data-v-7c3b26cb"]]);export{me as default};
