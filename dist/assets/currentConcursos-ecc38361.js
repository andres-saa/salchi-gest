import{c as b}from"./contestService-b8bd004c.js";import{_ as G,r as c,l as H,h as J,a as I,o as l,c as o,d as v,w as m,b as e,F as x,e as S,s as A,u as y,U as N,q as d,t as a,f as U,m as h,p as W,g as K}from"./index-42ad2ef6.js";import{f as j}from"./formatDate-262296cf.js";import{f as Q}from"./format-36e25dfb.js";import{e as X}from"./es-e43b915c.js";const Y="/images/gif/fire.gif";const i=k=>(W("data-v-bfe99989"),k=k(),K(),k),Z={class:"py-2",style:{display:"flex",gap:"1rem","overflow-x":"auto",width:"50rem"}},ee={style:{display:"flex","flex-direction":"column",gap:"1rem","justify-content":"end","align-items":"center"}},te=i(()=>e("img",{style:{width:"2rem","aspect-ratio":"1 / 1","border-radius":"50%",border:"3px solid yellow"},src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRC-buhde5C1FxyNtkRvkUTCe6gq73eLIv_JOycF3WMvg&s",alt:""},null,-1)),se={class:"py-2",style:{"overflow-x":"auto",display:"flex","flex-direction":"column",width:"20rem"}},le=["src"],ie=i(()=>e("b",null,"Nombre:",-1)),oe=i(()=>e("b",null,"Participaciones:",-1)),ae={style:{"font-weight":"bold"}},ne=i(()=>e("span",{style:{"font-weight":"bold"}},"Fecha:",-1)),re=i(()=>e("p",{class:"p-0 m-0 mt-3"},[e("b",null,"Instrucciones:")],-1)),ce={class:"px-0 mx-0"},de=["src"],ue={key:1},pe={key:2},_e={class:"py-3",style:{display:"flex",width:"100%","justify-content":"space-between",gap:"1rem"}},ve={style:{height:"60vh"}},me=i(()=>e("b",null,"MIS EVIDENCIAS ",-1)),ye={class:"p-3",style:{display:"flex","flex-direction":"column",gap:".5rem"}},he={style:{},class:""},fe={class:"p-0 m-0"},ge=["href"],we=["src"],be=i(()=>e("div",{style:{position:"fixed",left:"-2rem","z-index":"-1",filter:"blur(3px)"},class:"col-12"},[e("img",{style:{width:"120%",left:"0rem",height:"100vh"},src:"https://backend.salchimonster.com/read-product-image/600/site-4",alt:""})],-1)),xe={class:"container mx-auto p-2",style:{"max-width":"700px","z-index":"99"}},ke=i(()=>e("p",{class:"text-white text-4xl text-center",style:{"font-weight":"bold"}}," CONCURSOS",-1)),Ce={class:"container_contests",style:{display:"flex","flex-direction":"column",gap:"2rem"}},De={class:"container_contest_item p-2",style:{display:"flex","flex-direction":"column",gap:"1rem","background-color":"#00000090",border:"3px solid var(--primary-color)","border-radius":"0.5rem"}},$e={class:"col-12 p-0",style:{display:"flex","flex-direction":"column"}},Ie={class:"gridd",style:{display:"flex",gap:"1rem"}},Se=i(()=>e("img",{class:"p-0",style:{width:"30%","aspect-ratio":"3 / 3","object-fit":"cover"},src:"https://www.mundodeportivo.com/urbantecno/hero/2022/08/Como-anadirle-subtitulos-a-un-video-de-TikTok.jpg?width=1200",alt:""},null,-1)),Ue={class:"m-0 text-2xl",style:{"font-weight":"bold",color:"#fff"}},Ee={class:"m-0",style:{color:"#fff"}},Me=i(()=>e("img",{src:"",alt:""},null,-1)),Pe={class:"text-white"},Fe=i(()=>e("span",{style:{color:"var(--primary-color)"}},[e("b",null,"Desde"),d(":")],-1)),Ne=i(()=>e("br",null,null,-1)),je=i(()=>e("span",{style:{color:"var(--primary-color)"}},[e("b",null,"Hasta"),d(":")],-1)),Ve={class:"text-white text-xl py-0 my-0"},Te={class:"text-2xl",style:{color:"var(--primary-color)","font-weight":"bold"}},ze={style:{display:"flex",gap:"1rem"}},Ae={style:{"justify-content":"center","overflow-x":"auto",width:"100%",gap:"0rem",display:"flex","flex-direction":"column"},class:"px-0 overflow pb-1",c:""},Be=i(()=>e("div",{style:{display:"flex","justify-content":"end","align-items":"center"}},null,-1)),Re={class:"py-2",style:{display:"flex",gap:"1rem","overflow-x":"auto",width:"100%"}},qe={style:{display:"flex","flex-direction":"column",gap:"1rem","justify-content":"end","align-items":"center",width:"100%",position:"relative"}},Le={class:"text-white py-0 my-0"},Oe=["onClick","src"],Ge={key:0,style:{width:"100%",position:"absolute","z-index":"10",bottom:"0"},src:Y,alt:""},He=i(()=>e("div",{style:{display:"flex","flex-direction":"column",gap:".5rem","justify-content":"end",height:"100%"}},null,-1)),Je={__name:"currentConcursos",setup(k){const f=c({showMyEvidenceDialog:!1,showParticipantDetail:!1}),C=c({}),E=c([]),V=c(!1),M=c([]),g=c(null);c();const B=()=>{const n=w.value.files[0];n&&(g.value=URL.createObjectURL(n))},R=n=>{C.value=n,f.value.showParticipantDetail=!0},D=c(""),T=H(),$=c(!1),w=c(null),z=n=>{w.value=null,$.value=!0,u.value=n},u=c({}),q=async(n,s,r)=>{const _={evidence_type_id:r,evidence_entry:n||"",contest_id:s},P={participant_id:T.rawUserData.id,contest_id:s},F=await b.sendEvidence({evidence:_,Contest_entry:P});if(r===1){if(!w.value.files.length){alert("Por favor, selecciona una imagen.");return}const t=w.value.files[0];await b.sendContestImage(T.rawUserData.id,s,F,t)}$.value=!1,D.value="",E.value=await b.getAllContest()},L=async n=>{M.value=[],f.value.showMyEvidenceDialog=!0,M.value=await b.getParticipationByUserId(n)},O=n=>{const s=new Date(n).getDate()-new Date().getDate();let r="";switch(s){case 1:r="Finaliza acaba Manana";break;case 2:r="Finaliza pasado Manana";break;default:r=`Finaliza en  ${s} dias`;break}return r};return J(async()=>{E.value=await b.getAllContest()}),(n,s)=>{const r=I("Dialog"),_=I("Button"),P=I("inputNumber"),F=I("inputText");return l(),o(x,null,[v(r,{class:"p-2",style:{"max-width":"100vw"},modal:"",visible:V.value,"onUpdate:visible":s[0]||(s[0]=t=>V.value=t)},{default:m(()=>[e("div",Z,[(l(),o(x,null,S([1,2,3,4,5,6,7,8,9,0,4,5,6,7],(t,p)=>e("div",ee,[te,e("div",{class:"py-2",style:A([`height:${(12-p+1)/2}rem`,{width:"2rem","background-color":"var(--primary-color)","border-radius":"3rem 3rem 0 0"}])},null,4)])),64))])]),_:1},8,["visible"]),v(r,{class:"p-2",style:{"max-width":"min-content"},modal:"",visible:f.value.showParticipantDetail,"onUpdate:visible":s[1]||(s[1]=t=>f.value.showParticipantDetail=t)},{default:m(()=>[e("div",se,[e("img",{style:{width:"100%","border-radius":".5rem","aspect-ratio":"1 / 1","object-fit":"cover"},src:`${y(N)}/read-product-image/600/employer-${C.value.dni}`,alt:""},null,8,le),e("p",null,[ie,d(" "+a(C.value.name),1)]),e("p",null,[oe,d(" "+a(C.value.total_entries),1)]),v(_,{severity:"help",size:"small",label:"VER PARTICIPACIONES"})])]),_:1},8,["visible"]),v(r,{close:g.value=null,class:"p-2",header:"Cargar Evidencia",style:{width:"30rem"},modal:"",visible:$.value,"onUpdate:visible":s[5]||(s[5]=t=>$.value=t)},{footer:m(()=>[e("div",_e,[u.value.evidence_type_id==1?(l(),U(_,{key:0,class:"m-0",severity:g.value?"warning":"help",onClick:s[3]||(s[3]=t=>w.value.click()),style:{width:"100%"},label:g.value?"Cambiar archivo":"Subir Archivo"},null,8,["severity","label"])):h("",!0),v(_,{severity:"help",class:"m-0",style:{width:"100%"},label:"Guardar",onClick:s[4]||(s[4]=t=>q(D.value,u.value.id,u.value.evidence_type_id))})])]),default:m(()=>[e("div",null,[e("p",ae,a(u.value.name),1),e("span",null,[ne,d(" "+a(y(Q)(new Date,"dd-MMMM-yyyy",{locale:y(X)})),1)]),re,e("p",ce,a(u.value.instructions),1),u.value.evidence_type_id==1&&g.value?(l(),o("img",{key:0,class:"",style:{width:"100%"},src:g.value,alt:""},null,8,de)):h("",!0),u.value.evidence_type_id==4?(l(),o("div",ue,[v(P,{style:{width:"100%"}})])):h("",!0),u.value.evidence_type_id==2||u.value.evidence_type_id==3?(l(),o("div",pe,[v(F,{modelValue:D.value,"onUpdate:modelValue":s[2]||(s[2]=t=>D.value=t),style:{width:"100%"}},null,8,["modelValue"])])):h("",!0),e("input",{onChange:B,ref_key:"inputFile",ref:w,style:{display:"none"},type:"file",accept:"image/*"},null,544)])]),_:1},8,["close","visible"]),v(r,{class:"p-2",header:"Listado de evidencias",style:{width:"30rem","background-color":"#fff"},modal:"",visible:f.value.showMyEvidenceDialog,"onUpdate:visible":s[6]||(s[6]=t=>f.value.showMyEvidenceDialog=t)},{default:m(()=>[e("div",ve,[me,e("ol",ye,[(l(!0),o(x,null,S(M.value,t=>(l(),o("li",he,[e("p",fe,[e("b",null,a(y(j)(t.timestamp)),1)]),t.evidence_type_id!==1?(l(),o("a",{key:0,style:{color:"var(--primary-color)"},href:t.evidence_entry},a(t.evidence_entry),9,ge)):h("",!0),t.evidence_type_id==1?(l(),o("img",{key:1,style:{width:"100%","border-radius":".5rem"},src:`${y(N)}${t.evidence_entry}`,alt:""},null,8,we)):h("",!0)]))),256))])])]),_:1},8,["visible"]),be,e("div",xe,[ke,e("div",Ce,[(l(!0),o(x,null,S(E.value,t=>(l(),o("div",De,[e("div",$e,[e("div",Ie,[Se,e("div",null,[e("p",Ue,a(t.name),1),e("p",Ee,a(t.description),1),Me,e("p",Pe,[Fe,d(" "+a(y(j)(t.start_date))+" ",1),Ne,d(),je,d(" "+a(y(j)(t.end_date)),1)]),e("p",Ve,[e("b",null,a(t.rbq.length)+" personas participando",1)]),e("p",Te,a(O(t.end_date)),1),e("div",ze,[t.entry_exists?(l(),U(_,{key:1,onClick:p=>z(t),severity:"help",style:{"background-color":"var(--primary-color)"}},{default:m(()=>[d("Subir evidencia")]),_:2},1032,["onClick"])):(l(),U(_,{key:0,onClick:p=>z(t),severity:"help",style:{"background-color":"var(--primary-color)"}},{default:m(()=>[d("Participar")]),_:2},1032,["onClick"])),t.entry_exists?(l(),U(_,{key:2,onClick:p=>L(t.id),severity:"help",style:{border:"2px solid var(--primary-color)"}},{default:m(()=>[d("Mis evidencias")]),_:2},1032,["onClick"])):h("",!0)])])]),e("div",Ae,[Be,e("div",Re,[(l(!0),o(x,null,S(t.rbq,(p,We)=>(l(),o("div",qe,[e("p",Le,a(p.total_entries),1),e("img",{class:"min-user-img",onClick:Ke=>R(p),style:{width:"100%","max-width":"5rem","background-color":"#fff","aspect-ratio":"1 / 1","border-radius":"50%","object-fit":"cover"},src:`${y(N)}/read-product-image/96/employer-${p.dni}`,alt:""},null,8,Oe),e("div",{class:"py-2",style:A([`height:${p.total_entries/t.max_entries*10}rem; width:${100/t.rbq.length}%`,{"min-width":"3rem","max-width":"5rem","background-color":"var(--primary-color)",overflow:"hidden","border-radius":"3rem 3rem 0 0",position:"relative"}])},[p.total_entries==t.max_entries?(l(),o("img",Ge)):h("",!0),He],4)]))),256))])])])]))),256))])])],64)}}},tt=G(Je,[["__scopeId","data-v-bfe99989"]]);export{tt as default};
