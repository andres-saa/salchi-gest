import"./pqrUser.vue_vue_type_style_index_0_scoped_508d9820_lang-9e912f5c.js";import{_ as ve,L as he,r as d,A as be,l as fe,q as ge,i as xe,D as le,a as y,o as l,c as s,g as u,w as p,b as t,F as U,d as se,s as Ve,j as $,U as E,t as a,k as v,m as c,f as n,u as I,M as ke,n as we,e as oe,p as Te,h as qe}from"./index-94a9853b.js";import"./editor.esm-28ef19c0.js";/* empty css                                                             */import Ce from"./pqrUser-31ac7bf1.js";const i=T=>(Te("data-v-2718bd58"),T=T(),qe(),T),Ne={style:{display:"flex","flex-direction":"column"}},ze={style:{"min-width":"max-content",margin:"0",padding:"0"},class:"p-text-secondary m-0 p-0"},Pe={style:{"min-width":"max-content",margin:"0",padding:"0"},class:"p-text-secondary m-0 p-0"},Re={class:"m-0"},Se=i(()=>t("div",null,null,-1)),De={key:0,class:"m-0",style:{"text-transform":"capitalize"}},Ie=i(()=>t("b",null,"Responsable:",-1)),Le={key:1,class:"p-0 m-0"},Ue={key:2,class:"p-0 m-0"},$e={key:3},Ee=i(()=>t("b",null,"Notas",-1)),Oe=i(()=>t("br",null,null,-1)),je=i(()=>t("div",{style:{display:"flex",gap:"1rem"}},null,-1)),Be=i(()=>t("div",null,[t("h4",{class:"mt-0 py-0"})],-1)),Ae={style:{display:"flex","flex-direction":"column"}},Fe=i(()=>t("h6",{class:"mx-0 my-0"},[t("b",null,"TIPO")],-1)),Me={style:{display:"flex","align-items":"center",gap:"1rem"}},Ge=i(()=>t("h6",{class:"mx-0 my-0"},[t("b",null,"CANAL")],-1)),He={class:"m-0 p-0",style:{display:"flex","align-items":"center",gap:"1rem"}},Qe=i(()=>t("h6",{class:"mt-3 mb-2"},[t("b",null,"CONTEXTO")],-1)),Xe={style:{display:"flex",gap:"1rem"}},Je={style:{display:"flex","flex-direction":"column"}},Ke={key:0,class:"mt-3 mb-3"},We=i(()=>t("b",null,"DATOS DEL CLIENTE",-1)),Ye=[We],Ze={style:{display:"flex",gap:"1rem"}},et={style:{display:"flex","flex-direction":"column"}},tt={key:0},lt=i(()=>t("b",null,"Nombre: ",-1)),st={key:1},ot=i(()=>t("b",null,"Telefono: ",-1)),at={key:2},nt=i(()=>t("b",null,"Direccion: ",-1)),it={key:3},ut=i(()=>t("b",null,"Orden: ",-1)),rt=i(()=>t("h6",null,[t("b",null,"HISTORIAL")],-1)),dt={style:{display:"flex",gap:"1rem"}},ct={style:{display:"flex","flex-direction":"column"}},mt={style:{display:"flex","flex-direction":"column"}},pt={style:{"min-width":"max-content",margin:"0",padding:"0"},class:"p-text-secondary m-0 p-0"},_t={style:{"min-width":"max-content",margin:"0",padding:"0"},class:"p-text-secondary m-0 p-0"},yt={class:"m-0"},vt=i(()=>t("div",null,null,-1)),ht={key:0,class:"m-0",style:{"text-transform":"capitalize"}},bt=i(()=>t("b",null,"Responsable:",-1)),ft={key:1,class:"p-0 m-0"},gt={key:2,class:"p-0 m-0"},xt={key:3},Vt=i(()=>t("b",null,"Notas",-1)),kt=i(()=>t("br",null,null,-1)),wt=i(()=>t("div",{style:{display:"flex",gap:"1rem"}},null,-1)),Tt=i(()=>t("h6",null,[t("b",null,"Como desea proceder?")],-1)),qt={key:1},Ct={key:0,style:{display:"flex","justify-content":"space-between",margin:"1rem 0"}},Nt=i(()=>t("h6",{class:"m-0"},"Le dio una cortesia del 100% ?",-1)),zt={key:1,style:{display:"flex","justify-content":"space-between",margin:"1rem 0"}},Pt=i(()=>t("h6",{class:"m-0"},"Le dio un bono de descuento?",-1)),Rt={key:2},St=i(()=>t("h6",{class:"m-0 my-3"},"porcentaje del descuento ",-1)),Dt={key:3},It=i(()=>t("h6",{class:"m-0 my-3"},"Valor de la orden",-1)),Lt={key:4},Ut=i(()=>t("h6",{class:"m-0 my-3"},"Id de la orden",-1)),$t=i(()=>t("h6",{class:"m-0 my-3"},"Detalles",-1)),Et={style:{"background-color":"#ff00002e"},class:"p-3"},Ot=i(()=>t("b",null,"No preste sus credenciales de Salchigest, cada miembro de la empresa tiene los suyos, muchas gracias",-1)),jt={style:{display:"flex","justify-content":"end","margin-top":"2rem"}},Bt={class:"nav_bar shadow-2 p-0 my-0 mx-2",style:{position:"sticky","overflow-x":"auto",top:"3rem","max-width":"min-content","border-radius":".5rem","background-color":"white","z-index":"99"}},At={class:"nav_bar--buttons p-0 m-1",style:{}},Ft={class:"grid p-3",style:{"align-items":"center","justify-content":"space-between",display:"flex",gap:"1rem"}},Mt={class:"px-2"},Gt=i(()=>t("i",{class:"fa-regular fa-bars-progress"},null,-1)),Ht={style:{"text-transform":"uppercase"}},Qt={style:{display:"flex",gap:"1rem"}},Xt={key:0,style:{"min-width":"max-content"},class:"m-0 p-0"},Jt={key:1,style:{"min-width":"max-content"},class:"m-0 p-0"},Kt={key:3,style:{"text-align":"justify","min-width":"max-content"},class:"m-0 p-0"},Wt={key:4,style:{"text-align":"justify"},class:"m-0 p-0"},Yt={key:5,class:"m-0 p-0"},Zt={key:1},el={key:7,class:"p-2",style:{display:"flex",gap:".1rem","flex-direction":"column","align-items":"center"}},tl={key:8,class:"p-2",style:{display:"flex",gap:".1rem","flex-direction":"column","align-items":"center"}},ll={key:9,class:"p-2",style:{display:"flex",gap:".1rem","flex-direction":"column","align-items":"center"}},sl={key:10,class:"p-2",style:{display:"flex",gap:".1rem","flex-direction":"column","align-items":"start"}},ol={style:{display:"flex",gap:".4rem","justify-content":"center"},class:"px-2"},al={__name:"pqrsSection",setup(T){const ae=he(),q=d(""),C=d(),O=be(),j=d([]),ne=[{name:"Resumen de Pqr"},{name:"Resumen de Pqr"}],L=d({id:2,name:"Generada",description:"Estado inicial de la pqr",exist:!0,color:"#3498DB"}),B=fe(),A=d([]),_=d(),ie=async f=>{N.value=!0,m.value=f},F=d([]),m=d([]),M=d(!1),N=d(!1),z=d(null),ue=()=>{z.value={global:{value:null,matchMode:Ve.CONTAINS}}};ge(()=>{ue()});const re=d([{columnName:"Id",columnValue:"pqr_request_id",columnType:"other",size:"1rem",vif:!0},{columnName:"Tipo",columnValue:"request_type",columnType:"other",size:"15rem",vif:!0},{columnName:"Clasificacion",columnValue:"tag_name",columnType:"tag",size:"1rem",vif:!0},{columnName:"Restaurante",columnValue:"restaurant",columnType:"restaurant",size:"1rem",vif:!0},{columnName:"Id orden",columnValue:"order_id",columnType:"order_id",size:"1rem",vif:!0},{columnName:"Canal",columnValue:"channel",columnType:"tag",size:"4rem",vif:!0},{columnName:"Sede",columnValue:"site_name",columnType:"other",size:"4rem",vif:!0},{columnName:"Red",columnValue:"red",columnType:"other",size:"4rem",vif:!0},{columnName:"Calificacion",columnValue:"rating",columnType:"rating",size:"10rem",vif:!0},{columnName:"Comentarios",columnValue:"request_content",columnType:"other",size:"40rem",vif:!0},{columnName:"Responsable",columnValue:"responsible_name",columnType:"responsible_name",size:"20rem",vif:!1},{columnName:"Estado",columnValue:"current_status",columnType:"status",size:"15rem",vif:!0}]);d({2:"#3498DB",4:"#2ECC71",5:"#16A085",6:"#E74C3C",7:"#F39C12"}),d({question:"",answer:""}),d({}),d({}),d(null);const G=d([{}]);d({}),d(!1),d({});const w=d(!1),V=d(),k=d(!1),P=async()=>{G.value=await $.get(`${E}/get-all-pqrs`);const f=await $.get(`${E}/get-all-pqrs-status`);A.value=f,j.value=f};xe(async()=>{P()}),le(_,()=>{H()});const H=()=>{V.value=null,q.value="",C.value=null,w.value=!1,k.value=!1},R=d(),de=async()=>{const f=R.value&&V.value?(V.value-V.value*(R.value/100)).toFixed(2):V.value,r={pqr_request_id:m.value.pqr_request_id,status_id:_.value,responsible_id:B.rawUserData.id,value:f||null,notes:q.value,order_id:C.value||null};try{await $.post(`${E}/change-pqr-status`,r),P(),N.value=!1,H()}catch(b){console.error("Error al enviar la actualizaciÃ³n de la PQR:",b)}};return le(()=>O.params.section_id,()=>{P()},{deep:!0}),(f,r)=>{const b=y("Tag"),Q=y("Timeline"),X=y("Dialog"),J=y("Dropdown"),K=y("Checkbox"),W=y("InputNumber"),Y=y("InputText"),ce=y("Textarea"),S=y("Button"),me=y("Rating"),pe=y("column"),_e=y("Column"),ye=y("DataTable");return l(),s(U,null,[u(X,{class:"mx-2",visible:M.value,"onUpdate:visible":r[0]||(r[0]=e=>M.value=e),modal:"",header:`Historial de la pqr  ID   ${F.value.pqr_request_id}`,style:{width:"40rem"}},{default:p(()=>[u(Q,{value:F.value.status_history},{opposite:p(e=>{var o,h,g,x;return[t("div",Ne,[t("p",ze,a((o=e.item.timestamp)==null?void 0:o.split(" ")[0]),1),t("p",Pe,a((x=(g=(h=e.item.timestamp)==null?void 0:h.split(" "))==null?void 0:g.slice(1,4))==null?void 0:x.join(" ")),1)])]}),content:p(e=>{var o;return[u(b,{style:v(`background-color:${e.item.color}`)},{default:p(()=>[t("p",Re,[t("b",null,a(e.item.status),1)])]),_:2},1032,["style"]),Se,e.item.responsible_name?(l(),s("p",De,[Ie,c(" "+a((o=e.item.responsible_name)==null?void 0:o.toLowerCase()),1)])):n("",!0),e.item.value?(l(),s("p",Le,[c("Le costo a la empresa "),t("b",null,a(e.item),1)])):n("",!0),e.item.order_id?(l(),s("p",Ue,[c("Orden entregada "),t("b",null,a(e.item.order_id),1)])):n("",!0),e.item.notes?(l(),s("p",$e,[Ee,c(" "+a(e.item.notes),1)])):n("",!0),Oe,je]}),_:1},8,["value"])]),_:1},8,["visible","header"]),Be,u(X,{class:"mx-2",visible:N.value,"onUpdate:visible":r[8]||(r[8]=e=>N.value=e),modal:"",header:`GESTION DE LA PQR  ID:    ${m.value.pqr_request_id}`,style:{width:"50rem"}},{footer:p(()=>[t("div",jt,[u(S,{onClick:de,label:"Enviar",severity:"help"})])]),default:p(()=>[t("div",Ae,[Fe,t("p",Me,a(m.value.request_type),1),Ge,t("p",He,a(m.value.channel),1),Qe,t("div",Xe,[t("div",{style:v([{width:"100%","max-width":".4rem","border-radius":"45rem","box-sizing":"border-box"},`background-color:${m.value.channel_color}`])},null,4),t("div",Je,[t("p",null,a(m.value.request_content),1)])]),m.value.user_name||m.value.user_phone?(l(),s("h6",Ke,Ye)):n("",!0),t("div",Ze,[t("div",{style:v([{width:"100%","max-width":".4rem","border-radius":"45rem","box-sizing":"border-box"},`background-color:${m.value.channel_color}`])},null,4),t("div",et,[m.value.user_name?(l(),s("span",tt,[lt,c(" "+a(m.value.user_name),1)])):n("",!0),m.value.user_phone?(l(),s("span",st,[ot,c(" "+a(m.value.user_phone),1)])):n("",!0),m.value.user_address?(l(),s("span",at,[nt,c(" "+a(m.value.user_address),1)])):n("",!0),m.value.order_id?(l(),s("span",it,[ut,c(" "+a(m.value.order_id),1)])):n("",!0)])]),rt,t("div",dt,[t("div",{style:v([{width:"100%","max-width":".4rem","border-radius":"45rem","box-sizing":"border-box"},`background-color:${m.value.status_history[0].color}`])},null,4),t("div",ct,[u(Q,{value:m.value.status_history},{opposite:p(e=>{var o,h,g,x;return[t("div",mt,[t("p",pt,a((o=e.item.timestamp)==null?void 0:o.split(" ")[0]),1),t("p",_t,a((x=(g=(h=e.item.timestamp)==null?void 0:h.split(" "))==null?void 0:g.slice(1,4))==null?void 0:x.join(" ")),1)])]}),content:p(e=>{var o;return[u(b,{style:v(`background-color:${e.item.color}`)},{default:p(()=>[t("p",yt,[t("b",null,a(e.item.status),1)])]),_:2},1032,["style"]),vt,e.item.responsible_name?(l(),s("p",ht,[bt,c(" "+a((o=e.item.responsible_name)==null?void 0:o.toLowerCase()),1)])):n("",!0),e.item.value?(l(),s("p",ft,[c("Le costo a la empresa "),t("b",null,a(I(ke)(e.item.value)),1)])):n("",!0),e.item.order_id?(l(),s("p",gt,[c("Orden entregada "),t("b",null,a(e.item.order_id),1)])):n("",!0),e.item.notes?(l(),s("p",xt,[Vt,c(" "+a(e.item.notes),1)])):n("",!0),kt,wt]}),_:1},8,["value"])])]),Tt,u(J,{modelValue:_.value,"onUpdate:modelValue":r[1]||(r[1]=e=>_.value=e),options:A.value.filter(e=>e.id!=2),optionLabel:"name",optionValue:"id"},null,8,["modelValue","options"]),_.value?(l(),s("div",qt,[_.value==4||_.value==7?(l(),s("div",Ct,[Nt,u(K,{binary:"",modelValue:w.value,"onUpdate:modelValue":r[2]||(r[2]=e=>w.value=e)},null,8,["modelValue"])])):n("",!0),_.value==4||_.value==7?(l(),s("div",zt,[Pt,u(K,{modelValue:k.value,"onUpdate:modelValue":r[3]||(r[3]=e=>k.value=e),binary:""},null,8,["modelValue"])])):n("",!0),(_.value==4||_.value==7)&&k.value?(l(),s("div",Rt,[St,u(W,{modelValue:R.value,"onUpdate:modelValue":r[4]||(r[4]=e=>R.value=e),style:{width:"100%"}},null,8,["modelValue"])])):n("",!0),(_.value==4||_.value==7)&&w.value||k.value?(l(),s("div",Dt,[It,u(W,{modelValue:V.value,"onUpdate:modelValue":r[5]||(r[5]=e=>V.value=e),style:{width:"100%"}},null,8,["modelValue"])])):n("",!0),(_.value==4||_.value==7)&&k.value||w.value?(l(),s("div",Lt,[Ut,u(Y,{modelValue:C.value,"onUpdate:modelValue":r[6]||(r[6]=e=>C.value=e),style:{width:"100%"}},null,8,["modelValue"])])):n("",!0),t("div",null,[$t,u(ce,{modelValue:q.value,"onUpdate:modelValue":r[7]||(r[7]=e=>q.value=e),rows:"5",style:{resize:"none",width:"100%"}},null,8,["modelValue"])]),t("h6",Et,[c("Recuerde que esta firmando como "),t("b",null,a(I(B).rawUserData.name),1),c(" y por ende se hace responsable, "),Ot])])):n("",!0)])]),_:1},8,["visible","header"]),t("nav",Bt,[t("ul",At,[(l(!0),s(U,null,se(j.value,e=>(l(),s("li",{class:we([e.id==L.value.id?"nav_bar--buttons-button-selected":"",""]),key:"",style:{display:"flex","align-items":"center"}},[u(b,{style:v([`background-color:${e.color}`,{height:"1.3rem","aspect-ratio":"1 / 1","border-radius":"50%"}])},null,8,["style"]),c(),u(S,{onClick:()=>L.value=e,class:"nav_bar--buttons-button p-2",label:e.name},null,8,["onClick","label"])],2))),128)),t("li",null,[u(J,{options:ne,optionLabel:"name",style:{"font-weight":"bold"},placeholder:"Avanzado"})])])]),u(ye,{paginator:!0,rows:15,style:{width:"100%"},paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",currentPageReportTemplate:"Mostrando {first} a {last} de {totalRecords} solicitudes",rowsPerPageOptions:[5,10,25,100],scrollable:"",showGridlines:"",scrollHeight:"65vh",stripedRows:"",class:"col-12 m-auto",value:G.value.filter(e=>{var o,h;return((o=e.current_status)==null?void 0:o.status)==((h=L.value)==null?void 0:h.name)}),tableStyle:"min-width: 50rem;",filters:z.value},{header:p(()=>[t("div",Ft,[t("h4",Mt,[Gt,c(),t("b",Ht,[c("PQRS "),t("b",null,a(I(O).params.section),1)])]),t("div",Qt,[u(Y,{class:"",modelValue:z.value.global.value,"onUpdate:modelValue":r[9]||(r[9]=e=>z.value.global.value=e),placeholder:"Buscar Solicitud..."},null,8,["modelValue"]),u(S,{onClick:r[10]||(r[10]=e=>I(ae).visible_add_pqr=!0),label:"Nueva PQR",severity:"help"})])])]),default:p(()=>[(l(!0),s(U,null,se(re.value,e=>(l(),oe(pe,{header:e.columnName,style:v(`min-width:${e.size}`),field:e.columnValue,class:"my-0 py-2"},{body:p(o=>{var h,g,x,Z,ee,te;return[e.columnType=="date"?(l(),s("h6",Xt,a(((h=o.data[e.columnValue])==null?void 0:h.split("-").reverse().join("-"))||"---------"),1)):n("",!0),e.columnType=="responsible_name"?(l(),s("h6",Jt,a(((Z=(x=(g=o.data)==null?void 0:g.status_history)==null?void 0:x[0])==null?void 0:Z.responsible_name)||"No se ha interactuado"),1)):n("",!0),e.columnType=="max-content"?(l(),s("h6",{key:2,style:v(e.columnType=="max-content"?"min-width: max-content":""),class:"m-0 p-0"},a(o.data[e.columnValue]||"---------"),5)):n("",!0),e.columnType=="order_id"?(l(),s("h6",Kt,a(o.data[e.columnValue]||"---------"),1)):n("",!0),e.columnType=="other"?(l(),s("h6",Wt,a(o.data[e.columnValue]||"---------"),1)):n("",!0),e.columnType=="rating"?(l(),s("h6",Yt,[o.data[e.columnValue]>0?(l(),oe(me,{key:0,cancel:!1,readonly:"",modelValue:o.data[e.columnValue],"onUpdate:modelValue":D=>o.data[e.columnValue]=D},null,8,["modelValue","onUpdate:modelValue"])):(l(),s("span",Zt," ------------"))])):n("",!0),e.columnType=="money"?(l(),s("h6",{key:6,style:v(e.columnType=="max-content"?"min-width: max-content":""),class:"m-0 p-0"},a(f.formatoPesosColombianos(o.data[e.columnValue])||"---------"),5)):n("",!0),e.columnValue=="current_status"?(l(),s("div",el,[u(b,{style:v([{color:"white","text-align":"center"},`background-color:${(ee=o.data[e.columnValue])==null?void 0:ee.color}`])},{default:p(()=>{var D;return[c(a(((D=o.data[e.columnValue])==null?void 0:D.status)||"---------"),1)]}),_:2},1032,["style"]),t("b",null,a(((te=o.data[e.columnValue])==null?void 0:te.timestamp)||"---------"),1)])):n("",!0),e.columnValue=="channel"?(l(),s("div",tl,[u(b,{style:v([{color:"white","text-align":"center"},`background-color:${o.data.channel_color}`])},{default:p(()=>[c(a(o.data[e.columnValue]||"---------"),1)]),_:2},1032,["style"])])):n("",!0),e.columnValue=="tag_name"?(l(),s("div",ll,[u(b,{style:v([{color:"white","text-align":"center"},`background-color:${o.data.tag_color}`])},{default:p(()=>[c(a(o.data[e.columnValue]),1)]),_:2},1032,["style"])])):n("",!0),e.columnValue=="restaurant"?(l(),s("div",sl,[u(b,{style:v([{color:"white"},`background-color:${o.data.restaurant_color}`])},{default:p(()=>[c(a(o.data[e.columnValue]),1)]),_:2},1032,["style"])])):n("",!0)]}),_:2},1032,["header","style","field"]))),256)),u(_e,{class:"my-0 py-0 px-0 mx-0",style:{},frozen:"",alignFrozen:"right",header:"Interactuar"},{body:p(e=>[t("div",ol,[u(S,{onClick:o=>ie(e.data),label:"Gestionar",severity:"help",icon:"pi pi-check p-0",class:"my-0 py-2"},null,8,["onClick"])])]),_:1})]),_:1},8,["value","filters"]),u(Ce,{onReload:r[11]||(r[11]=e=>P())})],64)}}},cl=ve(al,[["__scopeId","data-v-2718bd58"]]);export{cl as default};
