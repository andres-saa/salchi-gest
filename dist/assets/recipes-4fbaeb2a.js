import{j as w,U as V,r as h,h as R,a as c,o as A,c as P,d as l,w as a,F as E,e as q,n as j,b as t,q as N,t as I,I as i}from"./index-b10cff69.js";const C={async getrecipes(){try{const s=await w.get(`${V}/recipes`);return s.status===200?s.data:(console.error("An error occurred while fetching the recipes:",s.status),null)}catch(s){return console.error("An error occurred while fetching the recipes:",s),null}},async getRecipeDatasheet(s){try{const r=await w.get(`${V}/recipe_data_sheet/${s}/`);return r.status===200?r.data:(console.error("An error occurred while fetching the recipes:",r.status),[])}catch(r){return console.error("An error occurred while fetching the recipes:",r),[]}},async createrecipe(s){try{const r=await w.post(`${V}/recipe`,s);return r.status===200?r.data:(console.error("An error occurred while creating the recipe:",r.status),null)}catch(r){return console.error("An error occurred while creating the recipe:",r),null}},async deleterecipe(s){try{const r=await w.delete(`${V}/recipe/${s}`);return r.status===200?(console.log("recipe deleted successfully"),!0):(console.error("An error occurred while deleting the recipe:",r.status),!1)}catch(r){return console.error("An error occurred while deleting the recipe:",r),!1}}},z={lang:"es-CO"},G=t("p",null,"¿Estás seguro de que quieres eliminar este recipee?",-1),Q={class:"formgrid grid"},H={class:"field col"},J=t("label",{for:"name"},"Nombre",-1),K={class:"field col"},W=t("label",{for:"unit"},"Unidad de Medida",-1),Y={class:"field col"},X=t("label",{for:"price"},"Precio de Compra",-1),Z={class:"field col"},ee=t("label",{for:"units"},"No. Unid por Compra",-1),le={class:"field col"},oe=t("label",{for:"format"},"Formato de Compra",-1),re={class:"field col"},te=t("label",{for:"weight"},"Peso Neto",-1),ae={class:"field col"},ne=t("label",{for:"shrinkage"},"Porcentaje de Merma",-1),se={class:"flex justify-content-between"},ie=t("img",{style:{width:"2rem",height:"2rem","aspect-ratio":"1 / 1","object-fit":"cover","border-radius":"0.5rem"},src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRYV84QloLgfvrli6GpuJoJlvB-bicUpq2H6QAS80K6Rw&s",alt:""},null,-1),ue={style:{display:"flex",gap:"1rem"}},de={__name:"recipes",setup(s){const r=h(!1);let x=h(null);function S(u){x.value=u,r.value=!0}const T=[{label:"No",icon:"pi pi-times",onClick:()=>r.value=!1,class:"p-button-text"},{label:"Sí",icon:"pi pi-check",onClick:()=>{g.value=!0,M(x.value),r.value=!1},class:"p-button-text"}];async function M(u){try{await C.deleterecipe(u)?(console.log("recipee eliminado exitosamente"),k.value=await C.getrecipes(),g.value=!1):(console.error("Error al eliminar el recipee"),g.value=!1)}catch(o){console.error("Error al eliminar el recipee:",o),g.value=!1}}const k=h([]);R(async()=>{k.value=await C.getrecipes(),g.value=!1});const _=h(!1),n=h({name:"",purchasing_unit_measure:"",purchasing_price:0,number_units_purchasing:0,purchasing_format:"",net_gross_weight:0,shrinkage_percent:0});async function D(){try{const u=await C.createrecipe(n.value);u?(console.log("recipee creado exitosamente",u),_.value=!1):console.error("Error al crear el recipee")}catch(u){console.error("Error al guardar el recipee:",u)}}const b=h({global:{value:null,matchMode:i.CONTAINS},name:{value:null,matchMode:i.CONTAINS},purchasing_unit_measure:{value:null,matchMode:i.CONTAINS},purchasing_price:{value:null,matchMode:i.CONTAINS},purchasing_format:{value:null,matchMode:i.CONTAINS},net_gross_weight:{value:null,matchMode:i.CONTAINS},shrinkage_percent:{value:null,matchMode:i.CONTAINS},number_units_purchasing:{value:null,matchMode:i.CONTAINS},representative:{value:null,matchMode:i.IN},status:{value:null,matchMode:i.EQUALS},verified:{value:null,matchMode:i.EQUALS}}),g=h(!0);return(u,o)=>{const p=c("Button"),U=c("Dialog"),m=c("InputText"),y=c("InputNumber"),L=c("InputIcon"),$=c("IconField"),O=c("ProgressSpinner"),f=c("Column"),F=c("RouterLink"),B=c("DataTable");return A(),P("div",z,[l(U,{visible:r.value,"onUpdate:visible":o[0]||(o[0]=e=>r.value=e),header:"Confirmar",modal:"",closable:!1,showHeader:!0},{footer:a(()=>[(A(),P(E,null,q(T,e=>l(p,{key:e.label,label:e.label,icon:e.icon,onClick:e.onClick,class:j(e.class)},null,8,["label","icon","onClick","class"])),64))]),default:a(()=>[G]),_:1},8,["visible"]),l(U,{visible:_.value,"onUpdate:visible":o[9]||(o[9]=e=>_.value=e),style:{width:"450px"},header:"Nuevo recipee",modal:"",closable:!0},{footer:a(()=>[l(p,{label:"Cancelar",icon:"pi pi-times",onClick:o[8]||(o[8]=e=>_.value=!1),class:"p-button-text"}),l(p,{label:"Guardar",icon:"pi pi-check",onClick:D,autofocus:""})]),default:a(()=>[t("div",Q,[t("div",H,[J,l(m,{id:"name",modelValue:n.value.name,"onUpdate:modelValue":o[1]||(o[1]=e=>n.value.name=e)},null,8,["modelValue"])]),t("div",K,[W,l(m,{id:"unit",modelValue:n.value.purchasing_unit_measure,"onUpdate:modelValue":o[2]||(o[2]=e=>n.value.purchasing_unit_measure=e)},null,8,["modelValue"])]),t("div",Y,[X,l(y,{id:"price",modelValue:n.value.purchasing_price,"onUpdate:modelValue":o[3]||(o[3]=e=>n.value.purchasing_price=e),mode:"currency",currency:"COP",locale:"es-CO"},null,8,["modelValue"])]),t("div",Z,[ee,l(y,{id:"units",modelValue:n.value.number_units_purchasing,"onUpdate:modelValue":o[4]||(o[4]=e=>n.value.number_units_purchasing=e)},null,8,["modelValue"])]),t("div",le,[oe,l(m,{id:"format",modelValue:n.value.purchasing_format,"onUpdate:modelValue":o[5]||(o[5]=e=>n.value.purchasing_format=e)},null,8,["modelValue"])]),t("div",re,[te,l(y,{id:"weight",modelValue:n.value.net_gross_weight,"onUpdate:modelValue":o[6]||(o[6]=e=>n.value.net_gross_weight=e)},null,8,["modelValue"])]),t("div",ae,[ne,l(y,{id:"shrinkage",modelValue:n.value.shrinkage_percent,"onUpdate:modelValue":o[7]||(o[7]=e=>n.value.shrinkage_percent=e)},null,8,["modelValue"])])])]),_:1},8,["visible"]),l(B,{showGridlines:"",filters:b.value,"onUpdate:filters":o[12]||(o[12]=e=>b.value=e),value:k.value,paginator:"",rows:10,dataKey:"id",filterDisplay:"row",paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25,100],currentPageReportTemplate:"Mostrando {first} to {last} de {totalRecords} recipees",responsiveLayout:"scroll",scrollable:"",frozenValue:u.lockedCustomers,globalFilterFields:["name","country.name","representative.name","status"],loading:g.value},{header:a(()=>[t("div",se,[t("div",null,[l(p,{size:"small",label:"Agregar recipee",severity:"success",icon:"pi pi-plus",onClick:o[10]||(o[10]=e=>_.value=!0)})]),t("div",null,[l($,{iconPosition:"right"},{default:a(()=>[l(L),l(m,{icon:"pi pi-search",modelValue:b.value.global.value,"onUpdate:modelValue":o[11]||(o[11]=e=>b.value.global.value=e),placeholder:"Buscar..."},null,8,["modelValue"])]),_:1})])])]),loading:a(()=>[l(O,{style:{width:"100px","background-color":"transparent",color:"transparent",height:"100px"},strokeWidth:"5",fill:"transparent",animationDuration:".3s","aria-label":"Custom ProgressSpinner"})]),default:a(()=>[l(f,{class:"p-1 px-2",field:"",header:"Foto",style:{"min-width":"3rem"}},{body:a(({data:e})=>[ie]),_:1}),l(f,{class:"p-1 px-2",field:"name",header:"Nombre",style:{"min-width":"12rem"}},{body:a(({data:e})=>[N(I(e.recipe_name),1)]),filter:a(({filterModel:e,filterCallback:v})=>[l(m,{modelValue:e.value,"onUpdate:modelValue":d=>e.value=d,type:"text",onInput:d=>v(),class:"p-column-filter",placeholder:"Buscar por nombre"},null,8,["modelValue","onUpdate:modelValue","onInput"])]),_:1}),l(f,{class:"p-1 px-2",field:"name",header:"Producto",style:{"min-width":"12rem"}},{body:a(({data:e})=>[N(I(e.product_name),1)]),filter:a(({filterModel:e,filterCallback:v})=>[l(m,{modelValue:e.value,"onUpdate:modelValue":d=>e.value=d,type:"text",onInput:d=>v(),class:"p-column-filter",placeholder:"Buscar por nombre"},null,8,["modelValue","onUpdate:modelValue","onInput"])]),_:1}),l(f,{class:"p-1 px-2",field:"name",header:"Categoria",style:{"min-width":"12rem"}},{body:a(({data:e})=>[N(I(e.category_name),1)]),filter:a(({filterModel:e,filterCallback:v})=>[l(m,{modelValue:e.value,"onUpdate:modelValue":d=>e.value=d,type:"text",onInput:d=>v(),class:"p-column-filter",placeholder:"Buscar por nombre"},null,8,["modelValue","onUpdate:modelValue","onInput"])]),_:1}),l(f,null,{body:a(({data:e})=>[t("div",ue,[l(F,{to:`recipe-data-sheet/${e.recipe_id}`},{default:a(()=>[l(p,{style:{width:"2rem",height:"2rem"},icon:"pi pi-eye",class:"p-button-rounded p-button-info"})]),_:2},1032,["to"]),l(p,{style:{width:"2rem",height:"2rem"},icon:"pi pi-trash",class:"p-button-rounded p-button-danger",onClick:v=>S(e.recipe_id)},null,8,["onClick"]),l(p,{style:{width:"2rem",height:"2rem"},icon:"pi pi-pencil",class:"p-button-rounded p-button-warning"})])]),_:1})]),_:1},8,["filters","value","frozenValue","loading"])])}}};export{de as default};
