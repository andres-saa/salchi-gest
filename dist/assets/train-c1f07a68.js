import{_ as L,r,i as O,a as m,o as n,c as i,b as a,t as k,g as o,j as I,k as v,F as E,d as V,m as R,f as K,w as S,q,e as J,p as Q,h as W}from"./index-caf3b98c.js";const N=h=>(Q("data-v-0d7ea053"),h=h(),W(),h),Y={class:"mx-auto shadow-5 px-0 py-0 my-0",style:{"max-width":"900px","background-color":"rgb(21 67 96 / 31%)",position:"relative"}},G=N(()=>a("h1",{class:"text-center mb-1 p-1 shadow-4",style:{"margin-top":"4rem",color:"white","background-color":"rgb(21, 67, 96)"}},[a("b",null,"Entrenador SalchiðŸ¤–bot")],-1)),H={class:"m-0 text-center",style:{color:"rgb(21, 67, 96)"}},Z={class:"m-auto",style:{display:"flex","align-items":"center",width:"max-content"}},ee=N(()=>a("h4",{class:"m-0 p-0"},[a("b",null,"Etiqutas")],-1)),te={style:{display:"flex",gap:"1rem","max-width":"900px",overflow:"hidden",height:"75vh"},class:"mx-auto p-3"},ae={class:"col-12 md:col-6 px-2 py-0"},se={class:"col-12 md:col-6 px-2 py-0",style:{height:"70vh",overflow:"auto"}},oe={class:"col-12 md:col-6 px-2 py-0"},le={class:"col-12 md:col-6 px-2 py-0",style:{height:"70vh",overflow:"auto"}},ne={class:"col-12 m-0 pr-7"},re={key:0,class:"p-3",style:{position:"absolute","background-color":"rgba(21, 67, 96, 0.31)",bottom:"0",width:"97%"}},ie={style:{display:"flex","flex-direction":"column",gap:"1rem"}},de={__name:"train",setup(h){const s=r(1),y=r(!1),c=r(""),p=r(""),C=r(""),A=r([]),f=r({}),B=async()=>{A.value=await q.get("https://chatbot.salchimonster.com/get_tags","cargando Etiquedas")};O(()=>{B()});const X=["#1B2631","#2C3E50","#34495E","#1A1A1A","#4A235A","#512E5F","#7D3C98","#154360","#1B4F72","#17202A","#1C2833","#641E16","#78281F","#943126","#512E5F","#4D5656","#212F3D","#0B5345","#145A32","#1D8348","#6E2C00","#784212","#4E342E","#3E2723","#283747"];function j(){const l=Math.floor(Math.random()*X.length);return X[l]}const F=async()=>{const l={name:C.value};await q.post("https://chatbot.salchimonster.com/create_tag",l,"creando etiqueta"),await B(),y.value=!1},M=async()=>{if(!f.value.id){alert("etiqueta no seleccionado");return}if(!c.value){alert("Patrones no definidos");return}if(!p.value){alert("Respuestas no definidas");return}const l={intent_id:f.value.id,paterns:c.value.split(`
`).filter(t=>t!=="").map(t=>t.split(" ").filter(g=>g!==" ")),responses:p.value.split(`
`)};await q.post("https://chatbot.salchimonster.com/train",l,"enviando respuesta"),c.value="",p.value=" "},w=r([]),_=r(""),P=()=>{const l={id:Date.now(),text:_.value};w.value.push(l),_.value="",U(l.text)},U=async l=>{const d={method:"POST",headers:{Authorization:"9yqQJxLc0hcSx47-_9Ya1k8KiLrIdMs-45xOWrYEQWI","Content-Type":"application/json"},body:JSON.stringify({answer:l,client_id:"andres"})};try{const u=await fetch("https://chatbot.salchimonster.com/chat",d);if(!u.ok)throw new Error("Respuesta de red no fue ok");const x=await u.json(),b={id:Date.now(),text:x.response};w.value.push(b)}catch(u){console.error("Error al enviar el mensaje:",u),w.value.push({id:Date.now(),text:"Error al obtener respuesta de la API"})}};return(l,t)=>{const g=m("Dropdown"),d=m("Button"),u=m("Textarea"),x=m("Tag"),b=m("InputText"),$=m("Dialog");return n(),i("div",Y,[G,a("h2",H,[a("b",null,k(s.value==1?"Patrones":s.value==2?"Respuestas":"Chat"),1)]),a("div",Z,[ee,o(g,{style:{width:"100%","max-width":"20rem","min-width":"15rem"},class:"my-3 mx-4",modelValue:f.value,"onUpdate:modelValue":t[0]||(t[0]=e=>f.value=e),options:A.value,optionLabel:"name"},null,8,["modelValue","options"]),I(),o(d,{onClick:t[1]||(t[1]=e=>y.value=!0),style:{"min-width":"max-content"},severity:"help",label:"Nueva Etiqueta"})]),o(d,{onClick:t[2]||(t[2]=e=>s.value==3?s.value=2:s.value=1),severity:"help",icon:"pi pi-arrow-left px-2",style:{position:"fixed","justify-content":"end",left:"-1rem",top:"40vh"}}),a("div",te,[a("div",{style:v([s.value==1?"transform: translateX(0)":s.value==2?"transform: translateX(-100%)":"transform: translateX(-200%)",{"min-width":"100%","overflow-y":"auto"}]),class:"grid m-0"},[a("div",ae,[o(u,{rows:"10",class:"p-3 shadow-4",modelValue:c.value,"onUpdate:modelValue":t[3]||(t[3]=e=>c.value=e),style:{height:"70vh",width:"100%","max-width":"100%",resize:"none"}},null,8,["modelValue"])]),a("div",se,[(n(!0),i(E,null,V(c.value.split(`
`).filter(e=>e!==""),(e,D)=>(n(),i("div",{class:"mb-2",key:D},[a("div",{cla:"",style:v([`background-color: ${j()};`,{"border-radius":".3rem",transition:"all .3s ease"}]),class:"shadow-2"},[(n(!0),i(E,null,V(e.split(" ").filter(T=>T.trim()!==""),(T,z)=>(n(),J(x,{style:{"border-radius":".2rem","background-color":"#ffffff40"},class:"m-1 px-2",key:z},{default:S(()=>[I(k(T),1)]),_:2},1024))),128))],4)]))),128))])],4),a("div",{style:v([s.value==1?"transform: translateX(0)":s.value==2?"transform: translateX(-100%)":"transform: translateX(-200%)",{"min-width":"100%","overflow-y":"auto"}]),class:"grid m-0"},[a("div",oe,[o(u,{rows:"10",class:"p-3 shadow-4",modelValue:p.value,"onUpdate:modelValue":t[4]||(t[4]=e=>p.value=e),style:{height:"70vh",width:"100%","max-width":"100%",resize:"none"}},null,8,["modelValue"])]),a("div",le,[(n(!0),i(E,null,V(p.value.split(`
`).filter(e=>e!==""),(e,D)=>(n(),i("div",{class:"mb-2",key:D},[a("div",{style:v([`background-color: ${j()};`,{"border-radius":".3rem",transition:"all .3s ease"}]),class:"shadow-2"},[o(x,{style:{"border-radius":".2rem","background-color":"#ffffff40"},class:"m-1 px-2"},{default:S(()=>[I(k(e),1)]),_:2},1024)],4)]))),128))])],4),a("div",{style:v([s.value==1?"transform: translateX(0)":s.value==2?"transform: translateX(-100%)":"transform: translateX(-200%)",{"min-width":"100%","overflow-y":"auto"}]),class:"grid m-0"},[a("div",ne,[(n(!0),i(E,null,V(w.value,e=>(n(),i("div",{style:{"border-radius":".3rem","background-color":"white"},key:e.id,class:"p-3 shadow-4 my-3"},[a("p",null,k(e.text),1)]))),128))])],4),s.value==3?(n(),i("div",re,[o(b,{style:{width:"100%"},type:"text",modelValue:_.value,"onUpdate:modelValue":t[5]||(t[5]=e=>_.value=e),onKeyup:R(P,["enter"]),placeholder:"Escribe un mensaje..."},null,8,["modelValue"])])):K("",!0)]),o(d,{onClick:t[6]||(t[6]=e=>s.value==1?s.value=2:s.value=3),icon:"pi pi-arrow-right  px-2",severity:"help",style:{position:"fixed",right:"-1rem",top:"40vh","justify-content":"start"}}),o(d,{onClick:M,iconPos:"right",icon:"pi pi-arrow-up  px-2",label:"Entrenar",severity:"success",style:{position:"fixed",right:"1rem",bottom:"1rem","justify-content":"start"}}),o($,{header:"Nueva etiqueta",visible:y.value,"onUpdate:visible":t[8]||(t[8]=e=>y.value=e),modal:""},{default:S(()=>[a("div",ie,[o(b,{modelValue:C.value,"onUpdate:modelValue":t[7]||(t[7]=e=>C.value=e)},null,8,["modelValue"]),o(d,{onClick:F,label:"Crear",severity:"help"})])]),_:1},8,["visible"])])}}},ce=L(de,[["__scopeId","data-v-0d7ea053"]]);export{ce as default};
