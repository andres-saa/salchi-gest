import{v as Z,U as H,_ as J,r as p,i as K,x as R,s as j,o as _,c as x,b as o,F as z,d as N,n as U,t as V,y as ee,a as m,e as Q,w,g as r,u as s,j as A,D as M,E as q,f as te}from"./index-9672dc6b.js";import{u as F}from"./site-f146b953.js";import{s as oe}from"./siteService-00b98a17.js";import{u as W,p as O}from"./ProductService-413fa67f.js";import{a as I}from"./aditionalService-94f009bf.js";import{f as ae}from"./formatoPesos-8aa989a0.js";const se=F(),ne={async getCategories(){const l=se.restaurant;try{const e=await Z.get(`${H}/categories/3/${l}`);return e.status===200?e.data:(console.error("An error occurred while fetching the ingredients:",e.status),null)}catch(e){return console.error("An error occurred while fetching the ingredients:",e),null}}};const ie={class:"barra align-items-center p-0 md:p-1",style:{"overflow-x":"auto",display:"flex","background-color":"rgba(255, 255, 255, 0.913)"}},re=["onClick"],le={class:"text-lg",style:{"min-width":"max-content"}},ce={__name:"BarraCategorias",setup(S){const l=F(),e=p([]),a=(d,y)=>{y>=1e3?j.push("/tienda-menu/productos/adicionales"):j.push({name:"sesion",params:{menu_name:d,category_id:y}})},g=async()=>{e.value=await ne.getCategories()};K(async()=>{g()});const c=d=>ee().params.category_id==d.category_id;return R(()=>l.restaurant,d=>{g(),j.push("/tienda-menu/")},{depth:!0}),(d,y)=>(_(),x("div",{class:U([e.value.length>0?"apear":"hide","shadow-3 d-flex p lg:justify-content-center align-items-center mb-5 p-0 md:p-0 m-0"]),style:{position:"sticky",top:"3rem","min-height":"3rem","min-width":"100%","z-index":"99"}},[o("div",ie,[(_(!0),x(z,null,N(e.value,v=>(_(),x("div",{key:v.id,class:"p-1"},[o("button",{onClick:u=>a(v.category_name,v.category_id),class:U([c(v)?"selected menu-button":"menu-button","p-2 text-lg titulo"]),style:{"font-weight":"400","text-transform":"uppercase","min-width":"max-content"}},[o("span",le,V(v.category_name),1)],10,re)]))),128))])],2))}},de=J(ce,[["__scopeId","data-v-ae4a7a6c"]]),ue={class:"image",style:{display:"flex","flex-direction":"column","justify-content":"end","align-items":"end"}},me=["src"],pe=["src"],_e={style:{display:"flex","flex-direction":"column",gap:"1rem"}},ge=o("span",null,"Nombre:",-1),ve=o("span",null,"descripcion:",-1),fe=o("span",null,"Precio:",-1),he={class:"text-center text-2xl py-4",style:{"font-weight":"bold","text-transform":"capitalize",display:"flex","align-items":"center","justify-content":"center",gap:"1rem"}},ye={style:{"text-transform":"uppercase"}},be={style:{"font-weight":"bold"}},we={class:"col-12 px-0 pb-0"},xe={__name:"dialogEditProduct",setup(S){const l=p([]),e=W(),a=p([]),g=p(null),c=p(null),d=async n=>{const t=n.target.files[0];if(!t)return;g.value=URL.createObjectURL(t);const i=new FormData;i.append("file",t);try{const T=(await O.uploadPhoto(i)).image_identifier;e.currentProductToEdit.img_identifier=T,URL.revokeObjectURL(g.value)}catch(P){console.error("Error al subir la imagen:",P)}},y=()=>{!a.value||a.value.length===0||Object.entries(a.value).forEach(([n,t])=>{t.forEach(i=>{const P=l.value.some(T=>T.items.some(C=>C.aditional_item_name.toLowerCase()===i.item_name.toLowerCase()&&C.aditional_item_price===i.item_price&&C.aditional_item_type_name===i.type_name));i.status=P})})},v=n=>a.value[n].every(t=>t.status),u=(n,t)=>{a.value[n].forEach(i=>{i.status=t,f(i.item_id,n,t)})},f=(n,t,i)=>{const P=a.value[t].findIndex(T=>T.item_id===n);P!==-1&&(a.value[t][P].status=i)};R(()=>e.currentProductToEdit.id,async()=>{l.value=await I.getAditional(e.currentProductToEdit.id),a.value=await I.getAllAditionsRegistered(),y()});const b=p([]),$=()=>{let n=[];for(const t in a.value)a.value.hasOwnProperty(t)&&a.value[t].forEach(i=>{i.status&&n.push(i.item_id)});b.value=n,k()},k=()=>{const n={product_id:e.currentProductToEdit.id,name:e.currentProductToEdit.product_name,price:e.currentProductToEdit.price,description:e.currentProductToEdit.product_description,category_id:e.currentProductToEdit.category_id,status:!0,img_identifier:e.currentProductToEdit.img_identifier,parent_id:e.currentProductToEdit.product_id},t=b.value;O.updateProductInstance(n,t)};return(n,t)=>{const i=m("Button"),P=m("InputText"),T=m("Textarea"),C=m("InputNumber"),G=m("InputSwitch"),B=m("Column"),X=m("DataTable"),Y=m("Dialog");return _(),Q(Y,{closeOnEscape:"",visible:s(e).visibles.dialogEditProduct,"onUpdate:visible":t[5]||(t[5]=h=>s(e).visibles.dialogEditProduct=h),modal:"",style:{width:"40rem"}},{footer:w(()=>[o("div",we,[r(i,{class:"",onClick:$,severity:"success",label:"Guardar"})])]),default:w(()=>[r(i,{onClick:t[0]||(t[0]=h=>s(e).visibles.dialogEditProduct=!1),severity:"danger",style:{position:"absolute",right:"-1rem",top:"-1rem"},rounded:"",icon:"pi pi-times"}),o("div",ue,[g.value?(_(),x("img",{key:0,src:g.value,alt:"Preview",style:{width:"100%","aspect-ratio":"1 / 1","background-color":"rgb(255, 255, 255)","object-fit":"contain","border-radius":"0.2rem"}},null,8,me)):(_(),x("img",{key:1,class:"",style:{width:"100%","aspect-ratio":"1 / 1","background-color":"rgb(255, 255, 255)","object-fit":"contain","border-radius":"0.2rem"},src:`${s(H)}/read-photo-product/${s(e).currentProductToEdit.img_identifier}/600`,alt:""},null,8,pe)),r(i,{style:{},class:"my-3",severity:"help",onClick:t[1]||(t[1]=h=>c.value.click())},{default:w(()=>[A("Cambiar foto")]),_:1}),o("input",{type:"file",ref_key:"fileInput",ref:c,onChange:d,style:{display:"none"}},null,544)]),o("div",_e,[o("div",null,[ge,r(P,{modelValue:s(e).currentProductToEdit.product_name,"onUpdate:modelValue":t[2]||(t[2]=h=>s(e).currentProductToEdit.product_name=h),style:{width:"100%"}},null,8,["modelValue"])]),o("div",null,[ve,r(T,{modelValue:s(e).currentProductToEdit.product_description,"onUpdate:modelValue":t[3]||(t[3]=h=>s(e).currentProductToEdit.product_description=h),rows:"3",style:{width:"100%",resize:"none"}},null,8,["modelValue"])]),o("div",null,[fe,r(C,{modelValue:s(e).currentProductToEdit.price,"onUpdate:modelValue":t[4]||(t[4]=h=>s(e).currentProductToEdit.price=h),prefix:"$",maxFractionDigits:"0",rows:"3",style:{width:"100%",resize:"none"}},null,8,["modelValue"])])]),(_(!0),x(z,null,N(a.value,(h,D)=>(_(),x("div",{class:"m-auto col-12 p-0",style:{"max-width":"600px"},key:D},[o("p",he,[o("span",null,V(D),1),r(G,{modelValue:v(D),"onUpdate:modelValue":E=>u(D,E)},null,8,["modelValue","onUpdate:modelValue"])]),r(X,{stripedRows:"",value:h,class:"p-0"},{default:w(()=>[r(B,{style:{"text-transform":"capitalize"},class:"p-0",field:"aditional_item_name",header:"Nombre"},{body:w(E=>[o("span",ye,V(E.data.item_name),1)]),_:1}),r(B,{class:"p-0",field:"aditional_item_price",header:"Precio"},{body:w(E=>[o("span",be,V(s(ae)(E.data.item_price)),1)]),_:1}),r(B,{class:"py-0 pl-4 p-0",header:"Estado",headerStyle:"width:1rem"},{body:w(E=>[r(G,{modelValue:E.data.status,"onUpdate:modelValue":[L=>E.data.status=L,L=>f(E.data.item_id,D,L)]},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1032,["value"])]))),128))]),_:1},8,["visible"])}}};const Pe={class:"py-3",style:{overflow:"hidden"}},Ee=["src"],Te={class:"col-12 p-0"},ke={__name:"dialogDeleteProduct",setup(S){const l=p(!1),e=()=>{l.value=!0,a.value=!a.value},a=p(!1),g=p([]),c=W(),d=p([]);p(c.currentProductToDelete);const y=()=>{!d.value||d.value.length===0||Object.entries(d.value).forEach(([u,f])=>{f.forEach(b=>{const $=g.value.some(k=>k.items.some(n=>n.aditional_item_name.toLowerCase()===b.item_name.toLowerCase()&&n.aditional_item_price===b.item_price&&n.aditional_item_type_name===b.type_name));b.status=$})})},v=async u=>{await O.deleteProduct(u),c.visibles.dialogDeleteProduct=!1,location.reload()};return R(()=>c.currentProductToEdit.id,async()=>{g.value=await I.getAditional(c.currentProductToEdit.id),d.value=await I.getAllAditionsRegistered(),y()}),p([]),(u,f)=>{const b=m("Button"),$=m("Dialog");return _(),Q($,{close:l.value=!1,closeOnEscape:"",visible:s(c).visibles.dialogDeleteProduct,"onUpdate:visible":f[1]||(f[1]=k=>s(c).visibles.dialogDeleteProduct=k),modal:"",style:{width:"20rem"}},{footer:w(()=>[o("div",Te,[r(b,{style:{width:"100%"},onClick:f[0]||(f[0]=k=>v(s(c).currentProductToDelete.product_id)),severity:"danger",label:"Eliminar producto"})])]),default:w(()=>[A(" Esta seguro de eliminar "),o("b",null,V(s(c).currentProductToDelete.product_name),1),A(" ? "),o("div",Pe,[M(o("img",{onLoad:e,class:U([l.value&&a.value?"cargado1":l.value&&!a.value?"cargado2":"nada",""]),style:{width:"100%",height:"100%","background-color":"rgb(255, 255, 255)","object-fit":"contain","border-radius":"0.2rem"},src:`https://backend.salchimonster.com/read-product-image/300/${s(c).currentProductToDelete.product_name}`,alt:""},null,42,Ee),[[q,l.value]]),M(o("div",{onLoad:e,class:U([l.value?"cargado":"sin-cargar","p-0"]),style:{width:"100%","aspect-ratio":"1 / 1","background-color":"rgb(255, 255, 255)",height:"100%","object-fit":"contain","border-radius":"0.2rem"},alt:""},null,34),[[q,!l.value]])])]),_:1},8,["close","visible"])}}},$e=J(ke,[["__scopeId","data-v-ab78fcc4"]]),Ce={style:{"border-radius":"1rem",position:"relative"},class:"mx-auto mx-0 p-0 mt-6 mb-8"},De={class:"mx-3 my-4 mx-auto px-4",style:{"min-width":"max-content","max-width":"1024px",display:"flex","align-items":"center"}},Ve=o("span",{class:"mr-4"},[o("b",null,"SEDE")],-1),Se={style:{position:"fixed",overflow:"hidden","background-color":"white","border-radius":"0 1rem 1rem 0",left:"0",top:"12rem",display:"flex","flex-direction":"column"}},Ue={style:{display:"flex","align-items":"center",width:"2rem","flex-direction":"column"}},Ie=["src"],Be={key:0,style:{"border-top":".1rem solid white"}},Ne={__name:"MenuTienda",setup(S){const l=F(),e=p([]),a=async()=>{e.value=await oe.getSites()};return K(async()=>{a()}),(g,c)=>{const d=m("Dropdown"),y=m("router-view"),v=m("Button");return _(),x("div",Ce,[r(de,{class:"m-0"}),o("div",De,[Ve,r(d,{modelValue:s(l).site,"onUpdate:modelValue":c[0]||(c[0]=u=>s(l).site=u),options:e.value.filter(u=>u.show_on_web),optionLabel:"site_name",class:"",style:{width:"100%"}},null,8,["modelValue","options"])]),r(y,{class:""}),r(xe,{class:"m-3"}),r($e),o("div",Se,[(_(),x(z,null,N([{name:"S",id:1,imagen:"https://www.salchimonster.com/images/logo.png"},{name:"B",id:2,imagen:"https://burgermonsterr.com/images/LOGO.png"},{name:"P",id:4,imagen:"https://papasmonster.com/images/LOGO.png"}],(u,f)=>o("div",Ue,[r(v,{size:"small",text:"",label:u.name,class:"text-white",onClick:b=>s(l).restaurant=u.id},{default:w(()=>[o("img",{style:{width:"2rem"},src:u.imagen,alt:""},null,8,Ie)]),_:2},1032,["label","onClick"]),f!=2?(_(),x("span",Be)):te("",!0)])),64))])])}}};export{Ne as default};
