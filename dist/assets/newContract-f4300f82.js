import{_ as F,l as N,r as p,H as k,i as E,q as _,U as i,a as y,o as M,c as B,b as o,g as r,w as u,K as D,u as w,t as v,j,p as z,h as A}from"./index-e7a37f9b.js";const s=m=>(z("data-v-80072615"),m=m(),A(),m),L={class:"container mx-4"},T={class:"m-auto",style:{"max-width":"500px"}},q=s(()=>o("h4",null,[o("b",null,"Nuevo contrato")],-1)),G=s(()=>o("h6",null,"Empleado",-1)),H={style:{display:"flex",gap:"1rem","align-items":"center"}},K=["onClick","src","onError"],O={class:"p-0 m-0"},P={style:{display:"flex",gap:"1rem",height:"1rem","align-items":"center"}},R=["onClick","src","onError"],J={class:"p-0 m-0"},Q=s(()=>o("h6",null,"Tipo de contrato",-1)),W={class:"p-0 m-0",style:{"text-transform":"capitalize"}},X=s(()=>o("span",{style:{color:"grey"}},"Seleccione el tipo de contrato",-1)),Y={class:"p-0 m-0",style:{"text-transform":"capitalize"}},Z=s(()=>o("i",{class:"pi pi-book"},null,-1)),ee=s(()=>o("h6",null,"Fecha de inicio",-1)),te=s(()=>o("h6",null,"Fecha de finalizacion",-1)),oe=s(()=>o("h6",null,"Salario",-1)),ae=s(()=>o("h6",null,"Fecha de Alarma",-1)),le={class:"my-8",style:{display:"flex",gap:"1rem","justify-content":"end",width:"100%"}},ne={__name:"newContract",setup(m){const V=N(),t=p({employer_id:0,contract_type_id:0,start_date:"",end_date:"",created_by:0,alert_date:"",Salary:0}),h=p([]),g=p([]),f=(l,a)=>{var d;const c={masculino:"/images/male-avatar.png",femenino:"/images/female-avatar.png",default:"/images/who.png"};!l||l==""||l=="N/A"?a.target.src=c.default:a.target.src=c[(d=l.trim())==null?void 0:d.toLowerCase()]},b=p(null),C=()=>{b.value={global:{value:null,matchMode:D.CONTAINS}}};k(()=>{C()});const S=p([{id:1}]);E(async()=>{S.value=await _.get(`${i}/get-all-vigent-contracts`,"cargando contratos"),h.value=await _.get(`${i}/employers-basic`),g.value=await _.get(`${i}/get-all-contract-types`)});const x=()=>{const l=V.rawUserData.id;if(!t.value.employer_id||!t.value.contract_type_id||!t.value.start_date||!t.value.end_date||!t.value.alert_date||!t.value.Salary){alert("Error: Faltan datos necesarios. Por favor, complete todos los campos.");return}return{employer_id:t.value.employer_id.id,contract_type_id:t.value.contract_type_id.id,start_date:t.value.start_date,end_date:t.value.end_date,created_by:l,alert_date:t.value.alert_date,Salary:t.value.Salary}},$=async()=>{const l=x();l&&_.post(`${i}/create-new-contract/`,l,"Generando contrato","/contracts/contracts-all/")};return(l,a)=>{const c=y("Dropdown"),d=y("Calendar"),I=y("InputNumber"),U=y("Button");return M(),B("div",L,[o("div",T,[q,G,r(c,{options:h.value,filter:"",optionLabel:"name",modelValue:t.value.employer_id,"onUpdate:modelValue":a[0]||(a[0]=e=>t.value.employer_id=e),style:{width:"100%"}},{option:u(e=>[o("div",H,[o("img",{onClick:n=>l.verIMagen(e.option.dni),src:`${w(i)}/read-product-image/96/employer-${e.option.dni}`,onError:n=>f(e.option.gender,n),class:"shadow-2 img-profile",style:{border:"none",position:"relative",height:"2rem",width:"2rem","object-fit":"cover","border-radius":"50%"}},null,40,K),o("h6",O,v(e.option.name),1)])]),value:u(e=>[o("div",P,[o("img",{onClick:n=>l.verIMagen(e.value.dni),src:`${w(i)}/read-product-image/96/employer-${e.value.dni}`,onError:n=>f(e.value.gender,n),class:"shadow-2 p-0 m-0 img-profile",style:{border:"none",position:"relative",height:"2rem",width:"2rem","object-fit":"cover","border-radius":"50%"}},null,40,R),o("h6",J,v(e.value.name),1)])]),_:1},8,["options","modelValue"]),Q,r(c,{class:"",options:g.value,placeholder:"Seleccione el tipo de contrato",modelValue:t.value.contract_type_id,"onUpdate:modelValue":a[1]||(a[1]=e=>t.value.contract_type_id=e),optionLabel:"name",filter:"",style:{width:"100%"}},{option:u(e=>{var n;return[o("h6",W,v((n=e.option.name)==null?void 0:n.toUpperCase()),1)]}),placeholder:u(()=>[X]),value:u(e=>{var n;return[o("h6",Y,[Z,j(" "+v((n=e.value.name)==null?void 0:n.toUpperCase()),1)])]}),_:1},8,["options","modelValue"]),ee,r(d,{dateFormat:"dd/mm/yy",modelValue:t.value.start_date,"onUpdate:modelValue":a[2]||(a[2]=e=>t.value.start_date=e),style:{width:"100%"}},null,8,["modelValue"]),te,r(d,{dateFormat:"dd/mm/yy",modelValue:t.value.end_date,"onUpdate:modelValue":a[3]||(a[3]=e=>t.value.end_date=e),style:{width:"100%"}},null,8,["modelValue"]),oe,r(I,{dateFormat:"dd/mm/yy",prefix:"$",modelValue:t.value.Salary,"onUpdate:modelValue":a[4]||(a[4]=e=>t.value.Salary=e),style:{width:"100%"}},null,8,["modelValue"]),ae,r(d,{dateFormat:"dd/mm/yy",modelValue:t.value.alert_date,"onUpdate:modelValue":a[5]||(a[5]=e=>t.value.alert_date=e),style:{width:"100%"}},null,8,["modelValue"]),o("div",le,[r(U,{onClick:a[6]||(a[6]=e=>$()),severity:"help",label:"Confirmar y enviar"})])])])}}},re=F(ne,[["__scopeId","data-v-80072615"]]);export{re as default};
