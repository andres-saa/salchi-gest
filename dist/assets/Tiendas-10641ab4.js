import{_ as j,h as r,i as S,j as f,U as c,J as F,g as V,o as b,c as x,f as o,e as g,u as a,a as e,F as U,r as B,t as E,a3 as p,a6 as $,ae as M,a2 as J,p as L,m as O,q}from"./index-d6f027a1.js";const d=_=>(L("data-v-9bbb6983"),_=_(),O(),_),P={style:{margin:"0 auto"},class:"px-2 md:px-4 xl:px-6"},T={style:{display:"flex","justify-content":"center","align-items":"center","flex-direction":"column",width:"100%"}},z=d(()=>e("i",{class:"pi pi-check text-7xl",style:{"font-weight":"bold",color:"green"}},null,-1)),A={class:"p-3"},W={class:"field"},K=d(()=>e("label",{for:"descuentoMayor"},[e("b",null,"Descuento para Precio Mayor (%)")],-1)),G={class:"field mt-3"},H=d(()=>e("label",{for:"descuentoDistribuidor"},[e("b",null,"Descuento para Precio Distribuidor (%)")],-1)),Q={class:"flex justify-content-end gap-2 mt-4"},X={style:{"margin-top":"10rem",margin:"5rem auto 2rem auto"},class:""},Y={style:{width:"100%","justify-content":"center",gap:"1rem",display:"flex","flex-wrap":"wrap"},class:"my-4"},Z=["src"],ee=["src"],te=["src"],se=d(()=>e("img",{src:"https://restaurant.pe/assets/images/logo-header.svg",alt:"",style:{height:"5rem",width:"min-content",margin:"auto"}},null,-1)),ae=d(()=>e("img",{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/8/85/WhatsApp_Business_icon.png/169px-WhatsApp_Business_icon.png",alt:"",style:{height:"5rem",width:"min-content",margin:"auto"}},null,-1)),oe=d(()=>e("h5",null,[e("b",null,"Sincronizar las cartas"),q(" ¿Como funciona? El servidor principal correra' un script que se encargara' de tomar la carta de restaurant.Pe y descargar todo el contenido nuevo incluyendo las fotos, con esto logramos que nuestro servidor (que es mas rapido) nos entregue el menu sin preguntarle cual es a restaurant.Pe "),e("b",null,"Esta tarea deberia tomar maximo 2 minutos")],-1)),ie={style:{display:"flex","justify-content":"end",width:"100%"}},re={style:{display:"flex","flex-wrap":"wrap","box-shadow":"0 0rem 1rem #00000030",padding:"1rem","border-radius":".5rem",gap:".5rem"}},le={style:{display:"flex","align-items":"center",border:"1px solid","border-radius":".5rem","background-color":"#00000030"}},ne={class:""},ce={__name:"Tiendas",setup(_){const w=r([]);S(async()=>{w.value=await f.get(`${c}/sites`)});const v=r(!1),h=r(!1),u=r(0),m=r(0),y=r([]),k=r([]);r(!1),F(()=>JSON.stringify(y.value)!==JSON.stringify(k.value));const C=async()=>{var i,s;try{const n=((s=(i=(await f.get(`${c}/get-product-integration-distrimonster`)).data)==null?void 0:i.data)==null?void 0:s.filter(t=>t.categoria_id==107))||[];y.value=n,k.value=JSON.parse(JSON.stringify(n))}catch(l){console.error("Error al actualizar los datos:",l)}};S(async()=>{C()});const D=r(""),I=async()=>{try{const i=await f.get(`${c}/tiendas/refresh_all`);D.value=i,v.value=!0}catch(i){console.error("Error al refrescar la caché:",i)}},N=()=>{const i=parseInt(u.value,10)||0,s=parseInt(m.value,10)||0;y.value=y.value.map(l=>{const n=l.minor*(1-i/100),t=l.minor*(1-s/100);return{...l,mayor:parseFloat(n.toFixed(0)),distribuidor:parseFloat(t.toFixed(0))}}),h.value=!1,u.value=0,m.value=0},R=()=>{h.value=!1,u.value=0,m.value=0};return(i,s)=>{const l=V("RouterLink"),n=V("RouterView");return b(),x("div",P,[o(a($),{visible:v.value,"onUpdate:visible":s[1]||(s[1]=t=>v.value=t),modal:"",closable:!1,style:{display:"flex","justify-content":"center",width:"30rem"}},{default:g(()=>{var t;return[e("div",T,[e("h3",null,[e("b",null,E((t=D.value)==null?void 0:t.message),1)]),z,o(a(p),{onClick:s[0]||(s[0]=de=>v.value=!1),icon:"pi pi-times",style:{position:"absolute","aspect-ratio":"1/1","border-radius":"50%",right:"-1.5rem",top:"-1.5rem"},severity:"danger"})])]}),_:1},8,["visible"]),o(a($),{visible:h.value,"onUpdate:visible":s[4]||(s[4]=t=>h.value=t),modal:"",header:"Modificar precios masivamente",closable:!0,style:{width:"20rem"}},{default:g(()=>[e("div",A,[e("div",W,[K,o(a(M),{inputStyle:{width:"100%",height:"2rem",borderRadius:"0"},id:"descuentoMayor",modelValue:u.value,"onUpdate:modelValue":s[2]||(s[2]=t=>u.value=t),mode:"decimal",min:0,max:100,step:.1,class:"w-full"},null,8,["modelValue"])]),e("div",G,[H,o(a(M),{inputStyle:{width:"100%",height:"2rem",borderRadius:"0"},id:"descuentoDistribuidor",modelValue:m.value,"onUpdate:modelValue":s[3]||(s[3]=t=>m.value=t),mode:"decimal",min:0,max:100,step:.1,class:"w-full"},null,8,["modelValue"])]),e("div",Q,[o(a(p),{label:"Cancelar",severity:"danger",onClick:R}),o(a(p),{label:"Aplicar",severity:"success",onClick:N})])])]),_:1},8,["visible"]),e("div",X,[e("div",Y,[e("img",{src:`${a(c)}/read-photo-product/xai0dVnL`,alt:"",style:{height:"5rem",width:"min-content",margin:"auto"}},null,8,Z),e("img",{src:`${a(c)}/read-photo-product/a1roeK3y`,alt:"",style:{height:"5rem",width:"min-content",margin:"auto"}},null,8,ee),e("img",{src:`${a(c)}/read-photo-product/mm9Ohnu7`,alt:"",style:{height:"5rem",width:"min-content",margin:"auto"}},null,8,te),se,ae]),o(a(J),{class:"p-4",severity:"success"},{default:g(()=>[oe]),_:1}),e("div",ie,[o(a(p),{onClick:I,severity:"help",label:"Sincronizar Las cartas",class:"my-4"})])]),e("div",re,[(b(!0),x(U,null,B(w.value.filter(t=>t.show_on_web),t=>(b(),x("div",le,[o(l,{"active-class":"active","exact-active-class":"full-active",style:{},to:`/tiendas/site/${t.pe_site_id}/${t.site_name}`},{default:g(()=>[o(a(p),{label:t.site_name,text:"",style:{color:"black",outline:"none","box-shadow":"none"}},null,8,["label"])]),_:2},1032,["to"])]))),256))]),e("div",ne,[o(n)])])}}},me=j(ce,[["__scopeId","data-v-9bbb6983"]]);export{me as default};
