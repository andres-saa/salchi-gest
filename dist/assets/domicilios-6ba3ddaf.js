import{_ as U,j as r,G as k,H as b,k as B,r as a,o as C,c as D,e as l,f as y,a as i,d as I,U as g,q as E,x as T,h as R,B as $}from"./index-78a1d656.js";const c=u=>(E("data-v-7b3cfac2"),u=u(),T(),u),j={class:"col-12 p-3"},L=c(()=>i("p",{class:"text-4xl text-center px-4",style:{"font-weight":"bold","margin-top":"6rem"}},[i("i",{class:"fa-solid fa-truck-arrow-right"}),R(" Domicilios ")],-1)),q={class:"p-fluid"},A={class:"p-field"},G=c(()=>i("label",{for:"name"},"Nombre del Barrio",-1)),O={class:"p-field"},P=c(()=>i("label",{for:"delivery_price"},"Precio de Domicilio",-1)),z={class:"p-field"},H=c(()=>i("label",{for:"site"},"Sede",-1)),J={class:"p-field"},M=c(()=>i("label",{for:"city"},"Ciudad",-1)),F={style:{"max-width":"700px"},class:"m-auto"},K={style:{display:"flex",gap:"1rem","align-items":"center"}},Q={__name:"domicilios",setup(u){const p=r([]),n=r({}),_=r(!1),s=r({neighborhood_id:0,name:"",delivery_price:0,site_id:0,city_id:0}),V=r([]);async function w(){try{if(!(await fetch(`${g}/neighborhoods`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s.value)})).ok)throw new Error("Error al crear el barrio");_.value=!1,console.log("Barrio agregado con Ã©xito")}catch(o){console.error("Error al agregar el barrio:",o)}}const m=k();b(n,(o,e)=>{o&&o.site_id!==void 0&&$.push(`/domicilios/${o.site_id}`)},{deep:!0}),b(()=>m.path,()=>{const o=m.params.site_id;f().then(e=>{p.value=e,n.value=e.filter(d=>d.site_id==o)[0]})});const f=async()=>{try{const o=await fetch(`${g}/sites`);if(o.ok)return await o.json()}catch{}};return B(async()=>{const o=m.params.site_id;f().then(e=>{p.value=e,n.value=e.filter(d=>d.site_id==o)[0]})}),(o,e)=>{const d=a("InputText"),x=a("InputNumber"),v=a("Dropdown"),h=a("Button"),S=a("Dialog"),N=a("RouterView");return C(),D("div",j,[L,l(S,{visible:_.value,"onUpdate:visible":e[5]||(e[5]=t=>_.value=t),header:"Agregar Nuevo Barrio",modal:!0,closable:!1},{footer:y(()=>[l(h,{label:"Cancelar",icon:"pi pi-times",onClick:e[4]||(e[4]=t=>_.value=!1),class:"p-button-text"}),l(h,{label:"Guardar",icon:"pi pi-check",onClick:w,class:"p-button-text"})]),default:y(()=>[i("div",q,[i("div",A,[G,l(d,{id:"name",modelValue:s.value.name,"onUpdate:modelValue":e[0]||(e[0]=t=>s.value.name=t)},null,8,["modelValue"])]),i("div",O,[P,l(x,{id:"delivery_price",modelValue:s.value.delivery_price,"onUpdate:modelValue":e[1]||(e[1]=t=>s.value.delivery_price=t),mode:"currency",currency:"USD",locale:"en-US"},null,8,["modelValue"])]),i("div",z,[H,l(v,{id:"site",modelValue:s.value.site_id,"onUpdate:modelValue":e[2]||(e[2]=t=>s.value.site_id=t),options:p.value,optionLabel:"site_name",placeholder:"Selecciona una Sede"},null,8,["modelValue","options"])]),i("div",J,[M,l(v,{id:"city",modelValue:s.value.city_id,"onUpdate:modelValue":e[3]||(e[3]=t=>s.value.city_id=t),options:V.value,optionLabel:"name",placeholder:"Selecciona una Ciudad"},null,8,["modelValue","options"])])])]),_:1},8,["visible"]),i("div",F,[i("div",K,[l(v,{style:{width:"100%"},filter:"",modelValue:n.value,"onUpdate:modelValue":e[6]||(e[6]=t=>n.value=t),options:p.value.filter(t=>t.show_on_web),placeholder:"SEDE",optionLabel:"site_name",required:"true",class:I({"p-invalid":o.submitted&&!o.currentUser.position})},null,8,["modelValue","options","class"])]),l(N)])])}}},X=U(Q,[["__scopeId","data-v-7b3cfac2"]]);export{X as default};
