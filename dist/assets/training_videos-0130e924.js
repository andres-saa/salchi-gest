import{v as L}from"./videoTrainingService-01e2f043.js";import{u as R}from"./urlService-89e3f0c9.js";import{_ as B,l as $,C as q,g as u,h as N,e as _,o as j,c as M,b as o,f as s,a as t,t as n,u as S,m as b,i as E,U as z,p as A,k as F}from"./index-22c9d1ba.js";const H=v=>(A("data-v-0c422b83"),v=v(),F(),v),G={class:"container py-6"},O={class:"p-0 m-0"},Y={style:{display:"flex","justify-content":"end",width:"100%"}},Z={style:{"text-transform":"uppercase"},class:"text-center"},J={style:{height:"100%"}},K=["src"],Q={class:"grid p-2",style:{"align-items":"center","justify-content":"space-between",display:"flex",gap:"1rem"}},W=H(()=>t("h4",{class:"px-2"},[t("i",{class:"fa fa-book"}),b(),t("b",null,"Clases")],-1)),X={style:{}},ee={style:{}},te={style:{display:"flex","justify-content":"start","align-items":"center"}},ae={class:"",style:{}},oe={style:{display:"flex",gap:".5rem"}},se=["onClick","src"],ie={class:"date",style:{}},de={class:"date",style:{}},le={style:{"min-width":"max-content"}},ne={__name:"training_videos",setup(v){const f=$(),w=q(),h=u(!1),r=u({}),g=u([]),x=u({}),p=u(!1),I=i=>{const a=i.match(/(?:https?:\/\/)?(?:www\.)?(?:youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/shorts\/)([a-zA-Z0-9_-]+)(?:\?.*)?/);return a&&a[1]?`https://www.youtube.com/embed/${a[1]}`:(console.error("La URL del video no es vÃ¡lida: ",i),"")},k=i=>{x.value=i,h.value=!0},P=async i=>{const a={user_id:f.rawUserData.id,video_id:i.video_id};await E.post(`${z}/mark-video-user`,a,"marcando video como visto"),C(),p.value=!1},C=async()=>{const i=w.params.sequence_id,a=f.rawUserData.id,d=await L.getVideosBySequenceIdAndStudentId(i,a);d.forEach(c=>{r.value[c.video_id]=c.video_user_mark}),g.value=d};N(async()=>{await C()});const y=u({}),T=(i,a)=>{p.value=!0,a&&(r.value[i.video_id]=!1,y.value=i)};return(i,a)=>{const d=_("Button"),c=_("Dialog"),U=_("InputText"),V=_("Checkbox"),l=_("column"),D=_("DataTable");return j(),M("div",G,[o(c,{header:"Completar clase",visible:p.value,"onUpdate:visible":a[2]||(a[2]=e=>p.value=e),modal:"",style:{width:"30rem","text-transform":"capitalize"}},{footer:s(()=>[t("div",Y,[o(d,{onClick:a[0]||(a[0]=e=>p.value=!1),severity:"help",label:"No, no le he visto aun"}),o(d,{onClick:a[1]||(a[1]=e=>P(y.value)),text:"",severity:"danger",label:"Si claro"})])]),default:s(()=>[t("h5",O,[b(" Esta accion no se puede deshacer, seguro que deseas marcar el video "),t("b",null,n(y.value.video_name),1),b(" como completado?")])]),_:1},8,["visible"]),t("h2",Z,[t("b",null,n(S(w).params.sequence_name),1)]),o(c,{visible:h.value,"onUpdate:visible":a[3]||(a[3]=e=>h.value=e),class:"p-0 m-3",header:`Reproductor de video
    `,modal:"",style:{width:"100%","max-width":"150vh","aspect-ratio":"16  / 9"}},{default:s(()=>[t("div",J,[t("iframe",{class:"p-0",width:"100%",style:{"aspect-ratio":"16 / 9"},src:I(x.value.video_link),title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",referrerpolicy:"strict-origin-when-cross-origin",allowfullscreen:""},null,8,K)])]),_:1},8,["visible"]),o(D,{paginator:!0,rows:15,style:{width:"100%","max-width":"1280px"},paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",currentPageReportTemplate:"Mostrando {first} a {last} de {totalRecords} Secuencias",rowsPerPageOptions:[5,10,25,100],scrollable:"",showGridlines:"",scrollHeight:"65vh",stripedRows:"",class:"col-12 m-auto",value:g.value,tableStyle:"min-width: 50rem;"},{header:s(()=>[t("div",Q,[W,o(U,{class:"",style:{width:"100%","max-width":"500px"},placeholder:"Buscar Secuencia..."})])]),default:s(()=>[o(l,{header:"Check",icon:"pi pi-check",class:"px-4",field:"created_time"},{body:s(e=>[o(V,{disabled:r.value[e.data.video_id],onChange:m=>T(e.data,r.value[e.data.video_id]),binary:"",modelValue:r.value[e.data.video_id],"onUpdate:modelValue":m=>r.value[e.data.video_id]=m},null,8,["disabled","onChange","modelValue","onUpdate:modelValue"])]),_:1}),o(l,{header:"Id",class:"px-4",field:"id"},{body:s(e=>[t("h6",X,n(e.data.video_id),1)]),_:1}),o(l,{header:"Nombre",style:{"min-width":"20rem"},class:"px-4",field:"created_time"},{body:s(e=>[t("h6",ee,n(e.data.video_name),1),t("div",te,[o(d,{onClick:m=>k(e.data),text:"",icon:"fa-solid fa-play"},null,8,["onClick"]),o(d,{text:"",icon:"fa-solid fa-ellipsis-vertical"})])]),_:1}),o(l,{header:"Descripcion",style:{"max-width":"20rem"},class:"px-4",field:"created_time"},{body:s(e=>[t("h6",ae,n(e.data.description),1)]),_:1}),o(l,{header:"Miniatura",class:"px-4"},{body:s(e=>[t("div",oe,[t("img",{onClick:m=>k(e.data),style:{width:"9rem",cursor:"pointer","border-radius":".3rem","aspect-ratio":"16 / 9","object-fit":"cover"},src:S(R).getThumbnail(e.data.video_link),alt:""},null,8,se)])]),_:1}),o(l,{header:"Fecha",class:"px-4",field:"created_time"},{body:s(e=>[t("h6",ie,n(e.data.created_date),1)]),_:1}),o(l,{header:"Hora",class:"px-4",field:"created_time"},{body:s(e=>[t("h6",de,n(e.data.created_time),1)]),_:1}),o(l,{header:"Creador",class:"px-4",field:"created_time"},{body:s(e=>[t("h6",le,n(e.data.creator_name),1)]),_:1})]),_:1},8,["value"])])}}},_e=B(ne,[["__scopeId","data-v-0c422b83"]]);export{_e as default};
