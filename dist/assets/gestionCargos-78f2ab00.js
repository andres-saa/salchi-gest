<<<<<<<< HEAD:dist/assets/gestionCargos-b05c520f.js
import{f as r,h as N,r as v,o as l,c as n,I as M,n as U,a as o,d as a,w as d,F as h,b as R,U as g,k as f,t as u,q as z,l as F,P as L}from"./index-015b4f08.js";import{_ as J}from"./Loading-aa7071a6.js";const H={key:1,class:"col-12",style:{display:"flex","flex-direction":"column","pointer-events":"none","align-items":"center","justify-content":"center",position:"fixed","z-index":"1000",left:"0",top:"0",height:"100%","background-color":"rgba(0, 0, 0, 0.5)"}},q=o("p",{class:"text-3xl",style:{"font-weight":"bold",color:"white","text-shadow":"0 0 10px rgba(0, 0, 0, 0.551)"}},"BUSCANDO CARGOS",-1),W={style:{display:"flex"}},K={style:{display:"flex"},class:"grid pt-6"},Q={style:{display:"flex"},class:"col-12 p-0"},X={class:"col-12 p-1",style:{display:"flex",gap:"1rem"}},Y=o("p",null," Nombre",-1),Z=o("p",null," Descripcion",-1),ee=o("p",null,"Seleccionar Grupo(s)",-1),oe={class:"grid"},te={class:"col-12 p-0 m-auto",style:{"max-width":"900px",display:"flex",gap:"1rem","align-items":"center"}},se={class:"p-5",style:{display:"flex",gap:"1rem","align-items":"center"}},le={class:"text-2xl p-0 m-0",style:{"font-weight":"bold","text-transform":"capitalize"}},ae={class:"mx-5 my-0 p-5",style:{"border-radius":"0.5rem","background-color":"rgba(252, 155, 0, 0.105)",display:"1rem","align-items":"center"}},re=o("p",{class:"text-xl p-0 m-0",style:{"font-weight":"bold"}},"Description de las funciones del Grupo: ",-1),ne={class:"text-sm md:text-lg p-0 m-0"},ie={class:"grid col-12 p-6"},ce={class:"col-12 p-0 mb-6",style:{display:"flex",gap:"1rem","align-items":"center"}},de=o("p",{style:{"font-weight":"bold"},class:"text-xl px-1 m-0"},"Cargos ",-1),ue={style:{display:"flex",gap:"0.5rem","align-items":"center"}},pe={class:"p-0 m-0",style:{"text-transform":"capitalize"}},fe={__name:"gestionCargos",setup(me){const x=r(!1),V=r([]),I=r([]),w=r(!1),p=r(!1),b=r([]),D=r(null),C=r(["todos"]),O=r(!0),S=async()=>{try{const e=await(await fetch(g+"/rolegroups")).json();for(const c of e){const i=await(await fetch(`${g}/rolegroup/${c.id}/roles`)).json();c.roles=i}V.value=e,O.value=!1}catch(s){console.error(s)}},T=async()=>{try{const e=await(await fetch(g+"/roles")).json();I.value=e}catch(s){console.error(s)}},$=async()=>{p.value=!0;const s=`${g}/assign-roles-to-group-delete-olds/${D.value}`;try{if(!(await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(b.value)})).ok)throw new Error("Hubo un problema al asignar los roles al grupo");x.value=!1,p.value=!1,await S()}catch(e){console.error("Error al asignar roles al grupo:",e)}},m=r({}),P=async()=>{p.value=!0;const s=`${g}/role`;try{const e={title:m.value.title,description:m.value.description},c=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!c.ok)throw new Error("Hubo un problema al crear el nuevo cargo.");const{role_id:y}=await c.json();for(const i of C.value){const k=`${g}/assign-roles-to-group/${i}`;await fetch(k,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify([y])})}p.value=!1,w.value=!1,await S(),await T(),C.value=["todos"]}catch(e){console.error("Error al crear y asignar el nuevo rol:",e),p.value=!1}},j=s=>{D.value=s.id,b.value=s.roles.map(e=>e.id),x.value=!0};return N(S),N(T),(s,e)=>{const c=v("ProgressSpinner"),y=v("Checkbox"),i=v("Button"),k=v("Dialog"),B=v("InputText"),E=v("Textarea");return l(),n(h,null,[p.value?(l(),M(J,{key:0,tittle:"MODIFICANDO GRUPO DE CARGOS"})):U("",!0),O.value?(l(),n("div",H,[q,o("div",W,[a(c,{style:{width:"100px",height:"100px"},strokeWidth:"4",fill:"var(--surface-ground)",animationDuration:".5s","aria-label":"Custom ProgressSpinner"})])])):U("",!0),a(k,{visible:x.value,"onUpdate:visible":e[1]||(e[1]=t=>x.value=t),modal:"",header:"Seleccion de Cargos para el grupo",style:{width:"50rem",height:"80vh"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{footer:d(()=>[a(i,{onClick:$},{default:d(()=>[f("Guardar cambios")]),_:1})]),default:d(()=>[o("div",K,[(l(!0),n(h,null,R(I.value,t=>(l(),n("div",Q,[o("div",X,[a(y,{modelValue:b.value,"onUpdate:modelValue":e[0]||(e[0]=_=>b.value=_),value:t.id},null,8,["modelValue","value"]),o("p",null,u(t.title),1)])]))),256))])]),_:1},8,["visible"]),a(k,{visible:w.value,"onUpdate:visible":e[5]||(e[5]=t=>w.value=t),modal:"",header:"Crear nuevo Cargo",style:{width:"50rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{default:d(()=>[Y,a(B,{modelValue:m.value.title,"onUpdate:modelValue":e[2]||(e[2]=t=>m.value.title=t),class:"col-12"},null,8,["modelValue"]),Z,a(E,{modelValue:m.value.description,"onUpdate:modelValue":e[3]||(e[3]=t=>m.value.description=t),class:"col-12",style:{"max-width":"100%","min-width":"100%",height:"20vh"}},null,8,["modelValue"]),ee,o("div",oe,[(l(!0),n(h,null,R(V.value,t=>(l(),n("div",{class:"col-12 py-1",key:t.id},[a(y,{modelValue:C.value,"onUpdate:modelValue":e[4]||(e[4]=_=>C.value=_),value:t.id},null,8,["modelValue","value"]),f(" "+u(t.group_name),1)]))),128))]),a(i,{onClick:P,class:"mt-4"},{default:d(()=>[f("Crear nuevo cargo")]),_:1})]),_:1},8,["visible"]),o("div",te,[a(i,{severity:"success",style:{"font-weight":"bold"},onClick:e[6]||(e[6]=t=>w.value=!0)},{default:d(()=>[f("Crear nuevo cargo")]),_:1})]),o("div",null,[(l(!0),n(h,null,R(V.value,(t,_)=>(l(),n("div",{key:t.id,class:"my-6 m-auto",style:{"max-width":"900px","border-radius":"1rem","box-shadow":"0 0 20px rgba(0, 0, 0, 0.2)"}},[o("div",se,[o("p",le,u(_+1)+". Grupo "+u(t.group_name),1)]),o("div",ae,[re,o("p",ne,u(t.description),1)]),o("div",ie,[o("div",ce,[de,a(i,{severity:"warning",style:{"font-weight":"bold"},onClick:G=>j(t)},{default:d(()=>[f("Modificar")]),_:2},1032,["onClick"])]),(l(!0),n(h,null,R(t.roles,(G,A)=>(l(),n("div",{key:G.id,class:"col-12 md:col-6 p-1 text-sm lg:text-lg"},[o("div",ue,[o("p",pe,[o("i",{class:z(F(L).CIRCLE_FILL)},null,2),f(" "+u(A+1)+". "+u(G.title),1)])])]))),128))])]))),128))])],64)}}};export{fe as default};
========
import{f as r,h as N,r as v,o as l,c as n,I as M,n as U,a as o,d as a,w as d,F as h,b as R,U as g,k as f,t as u,q as z,l as F,P as L}from"./index-829b5995.js";import{_ as J}from"./Loading-11fe6358.js";const H={key:1,class:"col-12",style:{display:"flex","flex-direction":"column","pointer-events":"none","align-items":"center","justify-content":"center",position:"fixed","z-index":"1000",left:"0",top:"0",height:"100%","background-color":"rgba(0, 0, 0, 0.5)"}},q=o("p",{class:"text-3xl",style:{"font-weight":"bold",color:"white","text-shadow":"0 0 10px rgba(0, 0, 0, 0.551)"}},"BUSCANDO CARGOS",-1),W={style:{display:"flex"}},K={style:{display:"flex"},class:"grid pt-6"},Q={style:{display:"flex"},class:"col-12 p-0"},X={class:"col-12 p-1",style:{display:"flex",gap:"1rem"}},Y=o("p",null," Nombre",-1),Z=o("p",null," Descripcion",-1),ee=o("p",null,"Seleccionar Grupo(s)",-1),oe={class:"grid"},te={class:"col-12 p-0 m-auto",style:{"max-width":"900px",display:"flex",gap:"1rem","align-items":"center"}},se={class:"p-5",style:{display:"flex",gap:"1rem","align-items":"center"}},le={class:"text-2xl p-0 m-0",style:{"font-weight":"bold","text-transform":"capitalize"}},ae={class:"mx-5 my-0 p-5",style:{"border-radius":"0.5rem","background-color":"rgba(252, 155, 0, 0.105)",display:"1rem","align-items":"center"}},re=o("p",{class:"text-xl p-0 m-0",style:{"font-weight":"bold"}},"Description de las funciones del Grupo: ",-1),ne={class:"text-sm md:text-lg p-0 m-0"},ie={class:"grid col-12 p-6"},ce={class:"col-12 p-0 mb-6",style:{display:"flex",gap:"1rem","align-items":"center"}},de=o("p",{style:{"font-weight":"bold"},class:"text-xl px-1 m-0"},"Cargos ",-1),ue={style:{display:"flex",gap:"0.5rem","align-items":"center"}},pe={class:"p-0 m-0",style:{"text-transform":"capitalize"}},fe={__name:"gestionCargos",setup(me){const x=r(!1),V=r([]),I=r([]),w=r(!1),p=r(!1),b=r([]),D=r(null),C=r(["todos"]),O=r(!0),S=async()=>{try{const e=await(await fetch(g+"/rolegroups")).json();for(const c of e){const i=await(await fetch(`${g}/rolegroup/${c.id}/roles`)).json();c.roles=i}V.value=e,O.value=!1}catch(s){console.error(s)}},T=async()=>{try{const e=await(await fetch(g+"/roles")).json();I.value=e}catch(s){console.error(s)}},$=async()=>{p.value=!0;const s=`${g}/assign-roles-to-group-delete-olds/${D.value}`;try{if(!(await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(b.value)})).ok)throw new Error("Hubo un problema al asignar los roles al grupo");x.value=!1,p.value=!1,await S()}catch(e){console.error("Error al asignar roles al grupo:",e)}},m=r({}),P=async()=>{p.value=!0;const s=`${g}/role`;try{const e={title:m.value.title,description:m.value.description},c=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!c.ok)throw new Error("Hubo un problema al crear el nuevo cargo.");const{role_id:y}=await c.json();for(const i of C.value){const k=`${g}/assign-roles-to-group/${i}`;await fetch(k,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify([y])})}p.value=!1,w.value=!1,await S(),await T(),C.value=["todos"]}catch(e){console.error("Error al crear y asignar el nuevo rol:",e),p.value=!1}},j=s=>{D.value=s.id,b.value=s.roles.map(e=>e.id),x.value=!0};return N(S),N(T),(s,e)=>{const c=v("ProgressSpinner"),y=v("Checkbox"),i=v("Button"),k=v("Dialog"),B=v("InputText"),E=v("Textarea");return l(),n(h,null,[p.value?(l(),M(J,{key:0,tittle:"MODIFICANDO GRUPO DE CARGOS"})):U("",!0),O.value?(l(),n("div",H,[q,o("div",W,[a(c,{style:{width:"100px",height:"100px"},strokeWidth:"4",fill:"var(--surface-ground)",animationDuration:".5s","aria-label":"Custom ProgressSpinner"})])])):U("",!0),a(k,{visible:x.value,"onUpdate:visible":e[1]||(e[1]=t=>x.value=t),modal:"",header:"Seleccion de Cargos para el grupo",style:{width:"50rem",height:"80vh"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{footer:d(()=>[a(i,{onClick:$},{default:d(()=>[f("Guardar cambios")]),_:1})]),default:d(()=>[o("div",K,[(l(!0),n(h,null,R(I.value,t=>(l(),n("div",Q,[o("div",X,[a(y,{modelValue:b.value,"onUpdate:modelValue":e[0]||(e[0]=_=>b.value=_),value:t.id},null,8,["modelValue","value"]),o("p",null,u(t.title),1)])]))),256))])]),_:1},8,["visible"]),a(k,{visible:w.value,"onUpdate:visible":e[5]||(e[5]=t=>w.value=t),modal:"",header:"Crear nuevo Cargo",style:{width:"50rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{default:d(()=>[Y,a(B,{modelValue:m.value.title,"onUpdate:modelValue":e[2]||(e[2]=t=>m.value.title=t),class:"col-12"},null,8,["modelValue"]),Z,a(E,{modelValue:m.value.description,"onUpdate:modelValue":e[3]||(e[3]=t=>m.value.description=t),class:"col-12",style:{"max-width":"100%","min-width":"100%",height:"20vh"}},null,8,["modelValue"]),ee,o("div",oe,[(l(!0),n(h,null,R(V.value,t=>(l(),n("div",{class:"col-12 py-1",key:t.id},[a(y,{modelValue:C.value,"onUpdate:modelValue":e[4]||(e[4]=_=>C.value=_),value:t.id},null,8,["modelValue","value"]),f(" "+u(t.group_name),1)]))),128))]),a(i,{onClick:P,class:"mt-4"},{default:d(()=>[f("Crear nuevo cargo")]),_:1})]),_:1},8,["visible"]),o("div",te,[a(i,{severity:"success",style:{"font-weight":"bold"},onClick:e[6]||(e[6]=t=>w.value=!0)},{default:d(()=>[f("Crear nuevo cargo")]),_:1})]),o("div",null,[(l(!0),n(h,null,R(V.value,(t,_)=>(l(),n("div",{key:t.id,class:"my-6 m-auto",style:{"max-width":"900px","border-radius":"1rem","box-shadow":"0 0 20px rgba(0, 0, 0, 0.2)"}},[o("div",se,[o("p",le,u(_+1)+". Grupo "+u(t.group_name),1)]),o("div",ae,[re,o("p",ne,u(t.description),1)]),o("div",ie,[o("div",ce,[de,a(i,{severity:"warning",style:{"font-weight":"bold"},onClick:G=>j(t)},{default:d(()=>[f("Modificar")]),_:2},1032,["onClick"])]),(l(!0),n(h,null,R(t.roles,(G,A)=>(l(),n("div",{key:G.id,class:"col-12 md:col-6 p-1 text-sm lg:text-lg"},[o("div",ue,[o("p",pe,[o("i",{class:z(F(L).CIRCLE_FILL)},null,2),f(" "+u(A+1)+". "+u(G.title),1)])])]))),128))])]))),128))])],64)}}};export{fe as default};
>>>>>>>> 6a6a2f8df2e4b301eeba2cd73d19d831b0cb1a4d:dist/assets/gestionCargos-78f2ab00.js
