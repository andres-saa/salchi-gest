import{r as le}from"./resumen-fd7dedbc.js";import{a as se,u as ne}from"./site-45dbfee3.js";import{_ as de,j as S,k as re,m as W,U as X,H as b,I as ie,r as _,o as u,c as m,a as l,e as n,f as g,u as o,F as Y,i as h,h as y,g as ue,t as x,q as ce,x as me}from"./index-4f6f9fdf.js";import{u as pe}from"./orderService-b7300d5c.js";import"./ventas-f225542b.js";import"./formatoPesos-e824e30b.js";const i=v=>(ce("data-v-0de184c5"),v=v(),me(),v),_e={class:"finalizar-compra-container"},ye=i(()=>l("p",{class:"title"},"FINALIZAR COMPRA",-1)),ge={style:{margin:"auto","max-width":"800px"}},he={class:"title",style:{margin:"3rem .5rem"}},ve={class:"form-grid"},fe={class:"form-column"},Ve=i(()=>l("span",null,"NOMBRE",-1)),be={class:"form-group"},xe=i(()=>l("span",null,"Ubicacio'n",-1)),Ue={class:"form-group"},Ie=i(()=>l("span",null,"Metodo Entrega",-1)),Se={class:"form-group"},ke=i(()=>l("span",null,"Direccio'n",-1)),Ne={class:"form-group"},Ce=i(()=>l("span",null,"Correo Electronico",-1)),Ee={class:"form-group"},De=i(()=>l("span",null,"Telefono",-1)),Te={class:"form-group"},Me=i(()=>l("span",null,"Placa de tu vehiculo",-1)),Oe={class:"form-group"},we={style:{display:"flex","align-items":"center",gap:"1rem"}},Re={key:2,class:"form-group"},Be={key:0},Fe={key:1},qe=i(()=>l("span",null,"Metodo de pago",-1)),Le={class:"form-group"},Pe={key:3},je={class:"form-group"},Ae=i(()=>l("span",null,"Notas",-1)),$e={__name:"pay",setup(v){const f=S(!1),ee=[{id:1,name:"Demora más de una hora",percentage:"15%"},{id:2,name:"Pedido frío",percentage:"20%"},{id:3,name:"Un pelo",percentage:"100%"},{id:4,name:"Producto dañado",percentage:"100%"},{id:5,name:"Faltante de bebida y adición",percentage:"0%"},{id:6,name:"Responderle con lo que falta",percentage:"0%"},{id:7,name:"Salsas que no son",percentage:"20%"},{id:8,name:"Si se enoja y quiere cambio",percentage:"100%"},{id:9,name:"Mala atención Call Center",percentage:"20%"},{id:10,name:"Mala atención en Punto de venta",percentage:"20%"},{id:11,name:"Influencer",percentage:"100%"},{id:12,name:"No llegó el pedido",percentage:"20%"}],V=se(),s=ne(),a=pe(),U=S([]),c=S([]);re(async()=>{a.user.order_type={},c.value=await W.get(`${X}/payment_methods`),U.value=await W.get(`${X}/get_all_order_types`)}),b(()=>a.user.order_type,r=>{(r==null?void 0:r.id)==2&&(s.current_delivery=s.location.neigborhood.delivery_price,s.location.neigborhood.delivery_price=0)}),b(f,r=>{r&&alert("El esquema de comandas cambio y el modelo actual ya no es valido, la orden se envia como una orden comun")}),b(()=>{var r,t;return(t=(r=s.location)==null?void 0:r.site)==null?void 0:t.site_id},()=>{a.user.order_type=null}),b(()=>a.user.order_type,()=>{a.user.placa=null});const oe=ie(()=>{var t,p;return((p=(t=s.location)==null?void 0:t.site)==null?void 0:p.site_id)===33?U.value.filter(d=>(d==null?void 0:d.id)!==3):U.value.filter(d=>(d==null?void 0:d.id)!==1)});return(r,t)=>{var N,C,E,D,T,M,O,w,R,B,F,q,L,P,j,A,$,z,G,H,Z,J,K,Q;const p=_("Tag"),d=_("InputText"),I=_("Dropdown"),te=_("Checkbox"),ae=_("InputNumber"),k=_("Textarea");return u(),m("div",_e,[ye,l("div",ge,[l("div",he,[n(p,{severity:"success",class:"advertice"},{default:g(()=>[y(" El tiempo promedio de entrega es de 60 a 75 minutos, por favor téngalo en cuenta antes de ordenar ")]),_:1})])]),l("div",ve,[l("div",fe,[Ve,l("div",be,[n(d,{id:"username",placeholder:"NOMBRE",modelValue:o(a).user.name,"onUpdate:modelValue":t[0]||(t[0]=e=>o(a).user.name=e)},null,8,["modelValue"])]),xe,l("div",Ue,[n(d,{onClick:t[1]||(t[1]=e=>o(s).setVisible("currentSite",!0)),modelValue:o(s).location.neigborhood.name,id:"neighborhood",placeholder:"Ubicacion",readonly:""},null,8,["modelValue"])]),Ie,l("div",Se,[n(I,{style:{width:"100%"},modelValue:o(a).user.order_type,"onUpdate:modelValue":t[2]||(t[2]=e=>o(a).user.order_type=e),id:"metodo_de_entrega",placeholder:"Metodo de entrega",options:oe.value.filter(e=>[1,2,3].includes(e.id)),optionLabel:"name"},null,8,["modelValue","options"])]),!o(a).user.order_type||((N=o(a).user.order_type)==null?void 0:N.id)!==2?(u(),m(Y,{key:0},[ke,l("div",Ne,[n(d,{modelValue:o(a).user.address,"onUpdate:modelValue":t[3]||(t[3]=e=>o(a).user.address=e),id:"address",placeholder:"DIRECCION"},null,8,["modelValue"])])],64)):h("",!0),Ce,l("div",Ee,[n(d,{modelValue:o(a).user.email,"onUpdate:modelValue":t[4]||(t[4]=e=>o(a).user.email=e),id:"email",placeholder:"Correo Electronico"},null,8,["modelValue"])]),De,l("div",Te,[n(d,{modelValue:o(a).user.phone_number,"onUpdate:modelValue":t[5]||(t[5]=e=>o(a).user.phone_number=e),id:"phone_number",mask:"999 999 9999",placeholder:"TELEFONO"},null,8,["modelValue"])]),o(a).user.order_type&&((C=o(a).user.order_type)==null?void 0:C.id)===2&&((D=(E=o(s).location)==null?void 0:E.site)==null?void 0:D.site_id)===33?(u(),m(Y,{key:1},[Me,l("div",Oe,[n(d,{modelValue:o(a).user.placa,"onUpdate:modelValue":t[6]||(t[6]=e=>o(a).user.placa=e),id:"placa",placeholder:"Placa de tu vehiculo"},null,8,["modelValue"])])],64)):h("",!0),l("span",we,[n(te,{modelValue:f.value,"onUpdate:modelValue":t[7]||(t[7]=e=>f.value=e),binary:""},null,8,["modelValue"]),y(" Es una cortesía? ")]),f.value?(u(),m("div",Re,[n(I,{style:{width:"100%"},modelValue:o(a).user.payment_method_option,"onUpdate:modelValue":t[8]||(t[8]=e=>o(a).user.payment_method_option=e),id:"payment_method",placeholder:"Porcentaje de cortesía",options:ee},{option:g(e=>[y(x(e.option.name)+" ",1),n(p,null,{default:g(()=>[y(x(e.option.percentage),1)]),_:2},1024)]),value:g(e=>[e.value?(u(),m("span",Be,[y(x(e.value.name)+" ",1),n(p,null,{default:g(()=>[y(x(e.value.percentage),1)]),_:2},1024)])):(u(),m("span",Fe," Selecciona un porcentaje "))]),_:1},8,["modelValue"])])):h("",!0),qe,l("div",Le,[n(I,{style:{width:"100%"},modelValue:o(a).user.payment_method_option,"onUpdate:modelValue":t[9]||(t[9]=e=>o(a).user.payment_method_option=e),id:"payment_method",placeholder:"METODO DE PAGO",options:((M=(T=o(s).location)==null?void 0:T.site)==null?void 0:M.site_id)===33||((w=(O=o(s).location)==null?void 0:O.site)==null?void 0:w.site_id)===36||((B=(R=o(s).location)==null?void 0:R.site)==null?void 0:B.site_id)===35?c.value.filter(e=>[6,8].includes(e.id)):((q=(F=o(s).location)==null?void 0:F.site)==null?void 0:q.site_id)!==33||((P=(L=o(s).location)==null?void 0:L.site)==null?void 0:P.site_id)!==36||((A=(j=o(s).location)==null?void 0:j.site)==null?void 0:A.site_id)!==35?c.value.filter(e=>![7,6,8,5].includes(e.id)):c.value.filter(e=>e.id!=8),optionLabel:"name"},null,8,["modelValue","options"])]),((z=($=o(a).user)==null?void 0:$.order_type)==null?void 0:z.id)!=2?(u(),m("span",Pe,"Domicilio")):h("",!0),l("div",je,[((H=(G=o(a).user)==null?void 0:G.order_type)==null?void 0:H.id)!=2?(u(),ue(ae,{key:0,style:{width:"100%"},prefix:"$",min:"0",maxFractionDigits:2,modelValue:o(s).location.neigborhood.delivery_price,"onUpdate:modelValue":t[10]||(t[10]=e=>o(s).location.neigborhood.delivery_price=e),id:"payment_method",placeholder:"Domicilio",options:((J=(Z=o(s).location)==null?void 0:Z.site)==null?void 0:J.site_id)===33?c.value.filter(e=>[6,8].includes(e==null?void 0:e.id)):((Q=(K=o(s).location)==null?void 0:K.site)==null?void 0:Q.site_id)!==33?c.value.filter(e=>![7].includes(e==null?void 0:e.id)):c.value,optionLabel:"name"},null,8,["modelValue","options"])):h("",!0)]),Ae,n(k,{modelValue:o(V).cart.order_notes,"onUpdate:modelValue":t[11]||(t[11]=e=>o(V).cart.order_notes=e),class:"order-notes",placeholder:"Notas adicionales"},null,8,["modelValue"]),l("template",null,[n(k,{modelValue:o(V).cart.order_notes,"onUpdate:modelValue":t[12]||(t[12]=e=>o(V).cart.order_notes=e),class:"order-notes",placeholder:"Notas"},null,8,["modelValue"])])]),n(le,{class:"resumen-column"})])])}}},Qe=de($e,[["__scopeId","data-v-0de184c5"]]);export{Qe as default};
