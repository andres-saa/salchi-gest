import{_ as q,q as W,f as J,r as T,o as s,j as K,w as g,a as e,t as n,k as a,G as w,n as V,P as z,v as k,c as l,F as p,b as y,A as d,D as Z,p as Q,e as X,H as ee,x as te,z as se,d as m}from"./index-c5715e60.js";import{u as L,w as ae}from"./xlsx-4f9172c7.js";const h=b=>(Q("data-v-5f8be31f"),b=b(),X(),b),le={style:{"border-radius":"1rem",overflow:"hidden"}},ne=h(()=>e("div",{class:"P-0 mt-0",style:{"background-color":"var(--orange-500)"}},[e("div",{class:"header p-4",style:{display:"flex","justify-content":"space-between","align-items":"center"}},[e("div",{style:{display:"flex"}},[e("img",{class:"p-0",src:ee,style:{filter:"brightness(0) invert()",width:"",height:"3rem","object-fit":"contain"},alt:""}),e("span",{style:{width:"min-content","font-weight":"bold",color:"white"}},"INVERSIONES SALCHIMONSTER")]),e("div",{style:{display:"flex","flex-direction":"column","max-width":"40%"}},[e("span",{class:"text-left text-sm",style:{"text-align":"end",width:"min-content","font-weight":"bold",color:"white"}},"TERMINOS Y CONDICIONES "),e("small",{class:"mt-2 text-left",style:{color:"white","max-width":""}},"Lorem ipsum dolor sit amet consectetur, adipisi")])])],-1)),oe={class:"P-0",style:{"background-color":"var(--gray-200)"}},ie={class:"header p-4",style:{display:"flex","justify-content":"space-between"}},re={style:{"font-weight":"bold",display:"flex","flex-direction":"column","max-width":"50%"}},de=h(()=>e("span",{class:"text-xl mb-2",style:{width:"min-content","font-weight":"bold",color:"rgb(0, 0, 0)"}},"Factura",-1)),ce={style:{display:"flex",gap:"1rem","justify-content":"space-between"}},he=h(()=>e("div",{style:{display:"flex","flex-direction":"column"}},[e("span",null," Orden No."),e("span",null," Sede"),e("span",null," Fecha"),e("span",null," Metodo de pago")],-1)),_e=h(()=>e("div",{style:{display:"flex","font-weight":"200","flex-direction":"column"}},[e("span",null," |"),e("span",null," | "),e("span",null," |"),e("span",null," |")],-1)),me={style:{display:"flex","font-weight":"400","flex-direction":"column"}},pe={style:{"font-weight":"bold",display:"flex","flex-direction":"column","max-width":"40%"}},ue=h(()=>e("span",{class:"text-xl mb-2",style:{width:"min-content","font-weight":"bold",color:"rgb(0, 0, 0)"}},"Balance",-1)),ge={style:{display:"flex",gap:"1rem","justify-content":"space-between"}},ye=h(()=>e("div",{style:{display:"flex","flex-direction":"column"}},[e("span",null," Subtotal"),e("span",null," Domicilio"),e("span",{class:"text-2xl"}," Total")],-1)),xe=h(()=>e("div",{style:{display:"flex","font-weight":"200","flex-direction":"column"}},[e("span",null," | "),e("span",null," |"),e("span",null," |")],-1)),fe={style:{display:"flex","font-weight":"400","flex-direction":"column"}},we={class:"text-xl",style:{"font-weight":"bold","border-top":"2px solid red"}},be=h(()=>e("p",{class:"text-xl text-center",style:{"font-weight":"bold",color:"rgb(255, 255, 255)","background-color":"black"}},"Datos de usuario",-1)),ve={class:"p-4",style:{display:"flex",gap:"1rem","justify-content":"start"}},Me={style:{display:"flex","font-weight":"400",height:"4rem","aspect-ratio":"1 / 1","background-color":"rgb(255, 255, 255)","border-radius":"50%","flex-direction":"column","align-items":"center","justify-content":"center"}},ke=h(()=>e("div",{style:{display:"flex","font-weight":"200","flex-direction":"column"}},[e("span",null," |"),e("span",null," | "),e("span",null," |")],-1)),Se={style:{display:"flex","flex-direction":"column"}},Oe={style:{"text-transform":"capitalize"}},Ce=h(()=>e("span",{style:{"font-weight":"bold"}}," Nombre :",-1)),Te={style:{"text-transform":"capitalize"}},Ne=h(()=>e("span",{style:{"font-weight":"bold"}},"DIRECCION :",-1)),De=h(()=>e("span",{style:{"font-weight":"bold"}}," TELEFONO : ",-1)),Pe={class:"P-0",style:{"background-color":"var(--white-200)"}},Fe={class:"header py-4",style:{display:"flex","justify-content":"space-between"}},Ie={style:{"font-weight":"bold",display:"flex","flex-direction":"column",width:"100%"}},je=h(()=>e("span",{class:"text-xl pl-4 mb-2",style:{width:"min-content","font-weight":"bold",color:"rgb(0, 0, 0)"}},"Productos",-1)),Ee={class:"m-0 p-0"},Re={class:"text-l p-1 text-center my-2",style:{"font-weight":"bold",width:"100","background-color":"var(--gray-200)",color:"black"}},Le={class:"px-4 py-0",style:{display:"flex",gap:"1rem",width:"100%","justify-content":"space-between"}},Ve={style:{display:"flex","flex-direction":"column","font-weight":"500"}},ze={key:0,class:"",style:{"font-weight":"bold"}},Ae={class:"ml-4"},Be={key:2,class:"",style:{"font-weight":"bold"}},$e={class:"ml-4"},He={key:4,class:"",style:{"font-weight":"bold"}},Ue={class:"ml-4"},Ge={key:6,class:"",style:{"font-weight":"bold"}},Ye={class:"ml-4"},qe={key:8,class:"",style:{"font-weight":"bold"}},We={class:"ml-4"},Je=h(()=>e("div",{style:{display:"flex","font-weight":"200","flex-direction":"column"}},null,-1)),Ke={style:{display:"flex","font-weight":"400","flex-direction":"column"}},Qe={key:0,class:"text-right",style:{}},Xe={class:"ml-4 text-right",style:{}},Ze={key:2,class:"text-right",style:{}},et={class:"ml-4 text-right"},tt={key:4,class:"text-right",style:{}},st={class:"ml-4 text-right"},at={key:5,class:"text-right",style:{}},lt={class:"ml-4 text-right"},nt={key:6,class:"text-right",style:{}},ot={class:"ml-4"},it={__name:"orderDialog",setup(b){const i=W();return J(!0),(c,j)=>{const R=T("Dialog");return s(),K(R,{style:Z([{"background-color":""},{width:"40rem"}]),visible:a(i).visibleOrder.visible,"onUpdate:visible":j[0]||(j[0]=N=>a(i).visibleOrder.visible=N),modal:"",header:"Orden"},{default:g(()=>{var N,E,x,v,f,M;return[e("div",le,[ne,e("div",oe,[e("div",ie,[e("div",re,[de,e("div",ce,[he,_e,e("div",me,[e("span",null,n(a(i).visibleOrder.order.order_id),1),e("span",null,n(a(i).visibleOrder.order.site_name),1),e("span",null,n((E=(N=a(i).visibleOrder.order)==null?void 0:N.status)==null?void 0:E.timestamp.split(" ")[0]),1),e("span",null,n((x=a(i).visibleOrder.order)==null?void 0:x.payment_method),1)])])]),e("div",pe,[ue,e("div",ge,[ye,xe,e("div",fe,[e("span",null,n(a(w)(a(i).visibleOrder.order.total_price)),1),e("span",null,n(a(w)(a(i).visibleOrder.order.delivery_price)),1),e("span",we,n(a(w)(a(i).visibleOrder.order.total_price+a(i).visibleOrder.order.delivery_price)),1)])])])]),be,e("div",ve,[e("div",Me,[e("i",{class:V(["text-2xl",a(z).USER])},null,2)]),ke,e("div",Se,[e("span",Oe,[Ce,k(" "+n((v=a(i).visibleOrder.order.user_data)==null?void 0:v.user_name),1)]),e("span",Te,[Ne,k(" "+n((f=a(i).visibleOrder.order.user_data)==null?void 0:f.user_address),1)]),e("span",null,[De,k(" "+n((M=a(i).visibleOrder.order.user_data)==null?void 0:M.user_phone),1)])])])]),e("div",Pe,[e("div",Fe,[e("div",Ie,[je,(s(!0),l(p,null,y(a(i).visibleOrder.order.products,t=>{var _,O,C,S,o,u,D,P,F,I,A,B,$,H,U,G,Y;return s(),l("div",Ee,[e("p",Re,[k(n(t.name)+" ",1),e("span",null,n(a(w)(t.price)),1)]),e("div",Le,[e("div",Ve,[((_=t.salsas)==null?void 0:_.length)>0?(s(),l("span",ze," Salsas")):d("",!0),((O=t.salsas)==null?void 0:O.length)>0?(s(!0),l(p,{key:1},y(t.salsas,r=>(s(),l("span",Ae,n(r),1))),256)):d("",!0),((C=t.adiciones)==null?void 0:C.length)>0?(s(),l("span",Be," Adiciones")):d("",!0),((S=t.adiciones)==null?void 0:S.length)>0?(s(!0),l(p,{key:3},y(t.adiciones,r=>(s(),l("span",$e,n(r.name),1))),256)):d("",!0),((o=t.cambios)==null?void 0:o.length)>0?(s(),l("span",He," Cambios")):d("",!0),((u=t.cambios)==null?void 0:u.length)>0?(s(!0),l(p,{key:5},y(t.cambios,r=>(s(),l("span",Ue,n(r.name),1))),256)):d("",!0),((D=t.toppings)==null?void 0:D.length)>0?(s(),l("span",Ge," Toppings")):d("",!0),((P=t.toppings)==null?void 0:P.length)>0?(s(!0),l(p,{key:7},y(t.toppings,r=>(s(),l("span",Ye,n(r==null?void 0:r.name),1))),256)):d("",!0),((F=t.acompanantes)==null?void 0:F.length)>0?(s(),l("span",qe," Acompanantes")):d("",!0),((I=t.acompanantes)==null?void 0:I.length)>0?(s(!0),l(p,{key:9},y(t.acompanantes,r=>(s(),l("span",We,n(r.name),1))),256)):d("",!0)]),Je,e("div",Ke,[((A=t.salsas)==null?void 0:A.length)>0?(s(),l("span",Qe," --------------")):d("",!0),((B=t.salsas)==null?void 0:B.length)>0?(s(!0),l(p,{key:1},y(t.salsas,r=>(s(),l("span",Xe," ..."))),256)):d("",!0),(($=t.adiciones)==null?void 0:$.length)>0?(s(),l("span",Ze," --------------")):d("",!0),((H=t.adiciones)==null?void 0:H.length)>0?(s(!0),l(p,{key:3},y(t.adiciones,r=>(s(),l("span",et,n(a(w)(r.price)),1))),256)):d("",!0),((U=t.cambios)==null?void 0:U.length)>0?(s(),l("span",tt," --------------")):d("",!0),(s(!0),l(p,null,y(t.cambios,r=>(s(),l("span",st,n(a(w)(r.price)),1))),256)),((G=t.topping)==null?void 0:G.length)>0?(s(),l("span",at," --------------")):d("",!0),(s(!0),l(p,null,y(t.toppings,r=>(s(),l("span",lt,n(a(w)(r==null?void 0:r.price)),1))),256)),((Y=t.acompanantes)==null?void 0:Y.length)>0?(s(),l("span",nt," --------------")):d("",!0),(s(!0),l(p,null,y(t.acompanantes,r=>(s(),l("span",ot,n(a(w)(r.price)),1))),256))])])])}),256))])])])])]}),_:1},8,["visible"])}}},rt=q(it,[["__scopeId","data-v-5f8be31f"]]);const dt=b=>(Q("data-v-3273da87"),b=b(),X(),b),ct={class:"flex flex-wrap align-items-center justify-content-between gap-2 my-5 pl-0 ml-0"},ht={class:"text-l p-0 text-900 font-bold"},_t={class:"flex p-0 flex-column md:flex-row md:justify-content-between md:align-items-center",style:{"background-color":""}},mt={class:"block mt-2 md:mt-0 py-0"},pt=dt(()=>e("template",null,null,-1)),ut={class:"motivo"},gt={__name:"ordenes",setup(b){const i=J(null),c=W();te(()=>{j()});const j=()=>{i.value={global:{value:null,matchMode:se.CONTAINS}}},R=x=>{switch(x){case"enviada":return"success";case"cancelada":return"danger";default:return null}},N=async()=>{var f;let x=[...c.salesReport.total_sales.orders_info];if(c.order_status=c.order_status=="enviada"?"cancelada":"enviada",await c.fetchSalesReport(),x=x.concat([...c.salesReport.total_sales.orders_info]),!((f=i==null?void 0:i.value)!=null&&f.global.value))return x;const v=i.value.global.value.trim().toLowerCase();return x.filter(M=>Object.values(M).some(t=>t&&t.toString().trim().toLowerCase().includes(v)))},E=async()=>{const v=(await N()).map(t=>{var _,O,C,S,o;return{"Orden No":t.order_id,Monto:t.total_order_price,Sede:t.site_name,Fecha:(_=t.latest_status_timestamp)==null?void 0:_.split("T")[0],Hora:(o=(S=(C=(O=t.latest_status_timestamp)==null?void 0:O.split("T")[1])==null?void 0:C.split(":"))==null?void 0:S.slice(0,2))==null?void 0:o.join(":"),Estado:t.current_status,Domicilio:t.delivery_price,"Metodo de pago":t.payment_method,"razon de la cancelacion":t.reason||"es una orden enviada","Nombre del usuario":t.user_name,"telefono del usuario":t.user_phone,"direccion del usuario":t.user_address}}),f=L.json_to_sheet(v);f["!cols"]=[{wch:Math.max(8,2)},{wch:Math.max(10,5)},{wch:Math.max(12,4)},{wch:Math.max(10,5)},{wch:Math.max(5,4)},{wch:Math.max(10,6)},{wch:Math.max(5,9)},{wch:Math.max(25,14)},{wch:Math.max(40,19)},{wch:Math.max(20,8)},{wch:Math.max(10,18)},{wch:Math.max(40,16)},{wch:Math.max(15,15)},{wch:Math.max(18,16)},{wch:Math.max(25,21)},{wch:Math.max(20,18)},{wch:Math.max(25,26)},{wch:Math.max(20,20)},{wch:Math.max(15,14)},{wch:Math.max(15,12)},{wch:Math.max(20,18)},{wch:Math.max(18,16)},{wch:Math.max(20,3)},{wch:Math.max(18,16)},{wch:Math.max(18,18)},{wch:Math.max(12,11)},{wch:Math.max(18,16)},{wch:Math.max(16,14)},{wch:Math.max(18,16)},{wch:Math.max(18,16)},{wch:Math.max(22,22)},{wch:Math.max(15,15)},{wch:Math.max(18,17)},{wch:Math.max(35,34)},{wch:Math.max(40,44)},{wch:Math.max(10,7)},{wch:Math.max(20,17)}];const M=L.book_new();L.book_append_sheet(M,f,"ventas"),ae(M,"reporte de ventas salchimonster")};return(x,v)=>{var S;const f=T("Button"),M=T("InputText"),t=T("P"),_=T("Column"),O=T("Tag"),C=T("DataTable");return s(),l(p,null,[(s(!0),l(p,null,y((S=a(c).salesReport.total_sales)==null?void 0:S.orders_info,o=>(s(),l("div"))),256)),m(f,{size:"small",class:"py-2",severity:"success",onClick:E},{default:g(()=>[e("i",{class:V(["pr-3",a(z).DOWNLOAD])},null,2),k(" Descargar reporte")]),_:1}),e("div",ct,[e("span",ht,"Ordenes "+n(a(c).order_status)+"s entre "+n(a(c).formatDate(a(c).dateRange.startDate))+" y "+n(a(c).formatDate(a(c).dateRange.endDate)),1),e("div",_t,[e("span",mt,[m(M,{class:"p-2",modelValue:i.value.global.value,"onUpdate:modelValue":v[0]||(v[0]=o=>i.value.global.value=o),placeholder:"Buscar..."},null,8,["modelValue"])])])]),m(C,{paginator:"",value:a(c).salesReport.total_sales.orders_info,tableStyle:"min-width: 50rem",rows:10,filters:i.value,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25,100],currentPageReportTemplate:"Mostrando {first} a {last} de {totalRecords} ordenes",responsiveLayout:"scroll",scrollable:"","scroll-height":"62vh"},{default:g(()=>[pt,m(_,{field:"order_id",header:"Id",class:"p-0",headerStyle:"max-width:8rem; width:10rem"},{body:g(o=>[m(t,{style:{"min-width":"max-content"}},{default:g(()=>[k(n(o.data.order_id),1)]),_:2},1024)]),_:1}),m(_,{field:"total_price",header:"Monto",class:"p-0",headerStyle:"max-width:10rem; width:5rem"},{body:g(o=>[k(n(a(w)(o.data.total_order_price)),1)]),_:1}),m(_,{field:"site_name",header:"Sede",class:"p-0",headerStyle:"max-width:6rem; width:6rem"},{body:g(o=>[k(n(a(w)(o.data.site_name)),1)]),_:1}),m(_,{field:"status.timestamp",class:"p-0",header:"Fecha y hora",headerStyle:"width:10rem; min-width:8rem "},{body:g(o=>{var u,D,P,F,I;return[k(n((u=o.data.latest_status_timestamp)==null?void 0:u.split("T")[0])+" "+n((I=(F=(P=(D=o.data.latest_status_timestamp)==null?void 0:D.split("T")[1])==null?void 0:P.split(":"))==null?void 0:F.slice(0,2))==null?void 0:I.join(":")),1)]}),_:1}),a(c).order_status=="cancelada"?(s(),K(_,{key:0,class:"p-0",headerStyle:"width:30rem; max-width:40rem; ",field:"status.reazon",header:"Motivo"},{body:g(o=>{var u;return[e("span",ut,n((u=o.data.reason)==null?void 0:u.toLowerCase())+".",1)]}),_:1})):d("",!0),m(_,{header:"Status",class:"p-0"},{body:g(o=>{var u;return[m(O,{value:o.data.current_status,severity:R((u=o.data)==null?void 0:u.current_status)},null,8,["value","severity"])]}),_:1}),m(_,{class:"p-0",header:"",frozen:"",alignFrozen:"right",headerStyle:"width:0.5rem; max-width:0.5rem "},{body:g(o=>[m(f,{style:{width:"min-content"},onClick:u=>a(c).setVisibleOrder(!0,o.data),text:""},{default:g(()=>[e("i",{class:V(["text-2xl p-0",a(z).EYE])},null,2)]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["value","filters"]),m(rt)],64)}}},ft=q(gt,[["__scopeId","data-v-3273da87"]]);export{ft as default};
