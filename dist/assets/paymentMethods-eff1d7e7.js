import{_ as N,j as c,T as $,I,k as O,m as u,U as p,r as V,o as n,c as l,a as h,F as f,b,e as g,n as J,u as M,aw as B,t as C,i as D,q as E,x as U}from"./index-30f9c1fa.js";const j=r=>(E("data-v-a7951adf"),r=r(),U(),r),R=j(()=>h("h3",null,"MÃ©todos de pago por sede",-1)),F={class:"sites-wrapper"},L={key:0,class:"methods-list",style:{"min-width":"16rem","margin-top":".5rem",padding:".5rem",border:"1px solid var(--surface-border)","border-radius":"4px"}},P=["for"],q={__name:"paymentMethods",setup(r){const m=c([]),_=c([]),o=$({}),v=c({}),i=c(null),S=t=>{i.value=i.value===t?null:t},w=I(()=>JSON.stringify(o)!==JSON.stringify(v.value)),x=()=>Object.fromEntries(Object.entries(o).map(([t,d])=>[t,m.value.filter(a=>d.includes(a.id)).map(({id:a,name:e,exist:s})=>({id:a,name:e,exist:s}))])),k=async()=>{try{await u.put(`${p}/site-payments`,{data:x()}),v.value=JSON.parse(JSON.stringify(o))}catch(t){console.error("Error guardando site-payments",t)}};return O(async()=>{const[t,d,a]=await Promise.all([u.get(`${p}/payment_methods`),u.get(`${p}/sites`),u.get(`${p}/site-payments`)]);m.value=t,_.value=d,_.value.filter(e=>e.show_on_web).forEach(({site_id:e})=>{const s=(a[e]||[]).map(y=>y.id);o[e]=s.length?s:[]}),v.value=JSON.parse(JSON.stringify(o))}),(t,d)=>{const a=V("Button");return n(),l(f,null,[R,h("div",F,[(n(!0),l(f,null,b(_.value.filter(e=>e.show_on_web),e=>(n(),l("div",{style:J([{"border-radius":"1rem"},i.value===e.site_id?"border: 2px solid red":""]),key:e.site_id,class:"site-item"},[g(a,{label:e.site_name,onClick:s=>S(e.site_id)},null,8,["label","onClick"]),i.value===e.site_id?(n(),l("div",L,[(n(!0),l(f,null,b(m.value,s=>(n(),l("div",{key:s.id,class:"method-item",style:{display:"flex","align-items":"center",gap:".5rem","margin-bottom":".25rem"}},[g(M(B),{inputId:`m-${e.site_id}-${s.id}`,modelValue:o[e.site_id],"onUpdate:modelValue":y=>o[e.site_id]=y,value:s.id},null,8,["inputId","modelValue","onUpdate:modelValue","value"]),h("label",{for:`m-${e.site_id}-${s.id}`},C(s.name),9,P)]))),128))])):D("",!0)],4))),128))]),g(a,{label:"Guardar cambios",severity:"success",style:{"margin-top":"2rem"},disabled:!w.value,onClick:k},null,8,["disabled"])],64)}}},G=N(q,[["__scopeId","data-v-a7951adf"]]);export{G as default};
