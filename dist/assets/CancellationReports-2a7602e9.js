import{h as d,i as D,j as h,U as y,g as n,o as r,c as g,f as o,e as u,a as s,F as k,r as U,d as R,t as S}from"./index-8e096720.js";const j={style:{"max-width":"1300px",margin:"auto"}},M=s("h2",{style:{"text-align":"center"}},[s("b",null,"Reporte de Cancelaciones")],-1),F={class:"grid p-3 mt-4",style:{"align-items":"center","justify-content":"start",display:"flex",gap:"1rem"}},L={class:"m-0 py-2"},N=s("h2",{style:{"text-align":"center"}},[s("b",null,"Cancelaciones en el tiempo por categorias")],-1),T={class:"card"},$={class:"card"},G={__name:"CancellationReports",setup(q){const _=d([{}]),a=d({start_date:new Date,end_date:new Date,sites:[]}),c=d([]),m=d([]),p=d({}),v=async()=>{var l;const e=await h.post(`${y}/get_all_cancellation_request_summary`,{start_date:a.value.start_date,end_date:a.value.end_date,site_ids:a.value.sites.map(i=>i.site_id)||[1,2]});((l=e==null?void 0:e.summary)==null?void 0:l.length)>0&&(_.value=e==null?void 0:e.summary,c.value=Object.keys(e==null?void 0:e.summary[0]),console.log(c.value),p.value=e==null?void 0:e.graph_daily_categories)};return D(async()=>{await v(),m.value=await h.get(`${y}/sites/`)}),(e,l)=>{const i=n("Calendar"),w=n("calendar"),x=n("MultiSelect"),f=n("Button"),V=n("column"),C=n("DataTable"),b=n("Chart");return r(),g("div",j,[o(C,{class:"mx-auto shadow-2 p-4",style:{"max-width":"max-content"},stripedRows:"",showGridlines:"",value:_.value},{header:u(()=>[M,s("div",F,[o(i,{modelValue:a.value.start_date,"onUpdate:modelValue":l[0]||(l[0]=t=>a.value.start_date=t)},null,8,["modelValue"]),o(w,{modelValue:a.value.end_date,"onUpdate:modelValue":l[1]||(l[1]=t=>a.value.end_date=t)},null,8,["modelValue"]),o(x,{style:{"max-width":"30rem"},modelValue:a.value.sites,"onUpdate:modelValue":l[2]||(l[2]=t=>a.value.sites=t),optionLabel:"site_name",options:m.value.filter(t=>t.show_on_web)},null,8,["modelValue","options"]),o(f,{severity:"help",onClick:v,label:"Buscar",icon:"pi pi-search"})])]),default:u(()=>[(r(!0),g(k,null,U(c.value,t=>(r(),R(V,{class:"py-0",style:{"text-transform":"uppercase"},header:t},{body:u(B=>[s("h6",L,S(B.data[t]),1)]),_:2},1032,["header"]))),256))]),_:1},8,["value"]),N,s("div",T,[s("div",$,[o(b,{type:"line",data:p.value,class:"h-30rem"},null,8,["data"])])])])}}};export{G as default};
