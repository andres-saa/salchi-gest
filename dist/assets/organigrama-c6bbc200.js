import{_ as I,o as r,c as i,F as x,e as y,b as o,m as _,n as m,u as g,ab as b,U as N,t as d,f as v,p as A,g as C,r as p,h as f,d as E,ac as O}from"./index-9ac1edba.js";import{a as S}from"./userServices-0f0d1558.js";import{g as $}from"./dropDownAux-665df03b.js";const w=l=>(A("data-v-c2c20977"),l=l(),C(),l),B={class:"list-unstyled pt-0 5 m-0 mt-4 px-0",style:{position:"",display:"flex","list-style":"none"}},R={class:"py-4 mx-6 py-3 px-0"},U=w(()=>o("i",{class:""},null,-1)),j={class:"tex-center p-0",style:{height:"auto",position:"relative","min-width":"max-content","background-color":"rgba(255, 255, 255, 0)",border:"2px",display:"flex","justify-content":"center"}},G={key:0,style:{width:"100%",top:"40px",height:"5px","border-radius":"10rem","background-color":"rgb(0, 0, 0)",position:"absolute"}},V=["src","onError"],z=w(()=>o("div",{style:{position:"absolute",height:"91px",bottom:"90%","background-color":"rgb(0, 0, 0)",width:"5px"}},null,-1)),D={class:"p-0 text-center",style:{width:"",overflow:"hidden",position:"absolute",height:"auto",bottom:"115%","max-width":"400px","background-color":"rgb(255, 255, 255)"}},F={cla:"",class:"text-center p-0 text-sm p-0 m-0",style:{"min-width":"max-content","font-weight":"bold",color:"black",width:"100%"}},L={cla:"",class:"text-center p-0 text-sm p-0",style:{"min-width":"max-content",width:"100%","text-transform":"uppercase"}},M={__name:"OrganigramaItem",props:{items:{type:Array,default:()=>[]}},setup(l){const u=(n,c)=>{const t={masculino:"/images/male-avatar.png",femenino:"/images/female-avatar.png",default:"/images/who.png"};!n||n==""||n=="N/A"?c.target.src=t.default:c.target.src=t[n.trim().toLowerCase()]};return(n,c)=>(r(),i("ul",B,[(r(!0),i(x,null,y(l.items,t=>{var a;return r(),i("li",{class:"px-0",key:t.id},[o("div",R,[U,o("div",j,[((a=t.subordinates)==null?void 0:a.length)>1?(r(),i("div",G)):_("",!0),o("div",{class:m([t.id==g(b)()?"aro-ext-imagen":"","p-1"]),style:{"border-radius":"50%",display:"flex","align-items":"center","justify-content":"center",position:"relative","z-index":"111"}},[o("img",{class:m([t.id==g(b)()?"aro-int-imagen":"","img-profile"]),style:{width:"1.5cm","background-color":"white",height:"1.5cm","border-radius":"50%","object-fit":"cover",border:"5px solid rgb(0, 0, 0)"},src:`${g(N)}/read-product-image/96/employer-${t.dni}`,onError:s=>u(t.gender,s)},null,42,V)],2),z,o("div",D,[o("p",F,d(t.subordinates?t.position.slice(0,30):t.position.slice(0,15))+" "+d(!t.subordinates&&t.position.length>10||t.subordinates&&t.position.length>20?"...":""),1),o("p",L,d(t.subordinates?t.name.slice(0,30):t.name.slice(0,15))+" "+d(!t.subordinates&&t.name.length>10||t.subordinates&&t.name.length>20?"...":""),1)])])]),t.subordinates&&t.subordinates.length?(r(),v(k,{key:0,items:t.subordinates},null,8,["items"])):_("",!0)])}),128))]))}},k=I(M,[["__scopeId","data-v-c2c20977"]]),q={class:"text-5xl mb-6",style:{"font-weight":"bold",position:"absolute"}},H={class:"py-8",style:{}},Q={__name:"organigrama",setup(l){p();const u=p(!0);p(null),f(()=>{});const n=p([]);function c(t,a=null){const s=[];for(const e of t)if(e.boss_id===a){const h=c(t,e.id);h.length>0&&(e.subordinates=h),s.push(e)}return s}return f(async()=>{const t=await $();for(const a of t){const s=await S(a==null?void 0:a.site_id),e=c(s);console.log("organigrama",e),n.value.push({site:a,organigrama:e}),u.value=!1}}),(t,a)=>(r(),i("div",null,[u.value?(r(),v(O,{key:0,tittle:"GENERANDO ORGANIGRAMA"})):_("",!0),(r(!0),i(x,null,y(n.value.filter(s=>{var e;return((e=s==null?void 0:s.site)==null?void 0:e.site_name)!="prueba"}),s=>{var e;return r(),i("div",{ref_for:!0,ref:"scrollContainer mt-8",class:"m-auto col mt-8",style:{"overflow-x":"auto","background-color":"rgb(255, 255, 255)","border-top":"6px solid rgba(0, 0, 0, 0.331)"}},[o("p",q,d((e=s==null?void 0:s.site)==null?void 0:e.site_name),1),o("div",H,[E(k,{style:{},class:"pt-8",items:s.organigrama,ref_for:!0,ref:"organigramaItem"},null,8,["items"])])],512)}),256))]))}};export{Q as default};
