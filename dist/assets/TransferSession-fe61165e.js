import{_ as D,r as n,l as B,z as I,k as q,B as A,i as M,m as N,a as r,o as S,c as L,d as t,w as l,b as s,L as T,u as U,f as O,D as F,p as E,g as $,s as j}from"./index-9cbe9f48.js";import{o as u}from"./orderService-2b70c646.js";import{u as H}from"./order-b588bdfe.js";import"./index-558f534d.js";import"./_commonjsHelpers-23102255.js";const _=c=>(E("data-v-221aa794"),c=c(),$(),c),G={class:"container",style:{"margin-top":"7rem"}},J=_(()=>s("h3",null,[s("b",null,"Rechazar esta solicitud")],-1)),K=_(()=>s("h3",null,[s("b",null,"Aprobar esta solicitud")],-1)),Q={class:"grid",style:{"align-items":"center","justify-content":"space-between"}},W=_(()=>s("div",{class:"col-12 md:col-6 p-3"},[s("span",{class:"text-xl",style:{width:"100%"}},[j(" Transferencias pendientes "),s("span",{style:{"text-transform":"capitalize"}})])],-1)),X={class:"md:mt-0 p-input-icon-right m-3"},Y=_(()=>s("i",{class:"pi pi-search"},null,-1)),Z={style:{display:"flex",gap:"0.5rem"}},ee={__name:"TransferSession",setup(c){const p=n(!1),m=n([]),v=n(!1),V=B(),o=n({});new Audio("/sound/pip1.wav"),new Audio("/sound/pip2.wav"),new Audio("/sound/pip3.wav"),H(),n(null);const h={revisar:u.getPendientsCancellationRequest,aprobadas:u.getaceptedCancellationAcepted,rechazadas:u.getPendientsCancellationRejected};I(()=>{x()});const z=(f,e)=>{o.value.id=e,f?v.value=!0:p.value=!0},w=async(f,e,b)=>{const d={authorized:f,responsible_id:V.rawUserData.id,responsible_observation:o.value.reason||"sin observaciones"};await u.resolveCancellationRequest(e,d),v.value=!1,p.value=!1,m.value=await h.revisar()},y=q(),i=n(),x=()=>{i.value={global:{value:null,matchMode:A.CONTAINS}}};x(),M(()=>{C()});const C=async()=>{m.value=await u.getOrdersTransfer()};return N(()=>y.params.request_status,async()=>{m.value=await h.revisar()},{deep:!0}),(f,e)=>{const b=r("Textarea"),d=r("Button"),P=r("Dialog"),k=r("InputText"),g=r("Column"),R=r("DataTable");return S(),L("div",G,[t(P,{visible:p.value,"onUpdate:visible":e[2]||(e[2]=a=>p.value=a),closeOnEscape:"",closable:!0,modal:"",style:{width:"30rem"}},{header:l(()=>[J]),default:l(()=>[s("form",{onSubmit:e[1]||(e[1]=T(a=>w(!1,o.value.id,o.value.reason),["prevent"])),style:{display:"flex",gap:"1rem","flex-direction":"column","align-items":"start"}},[t(b,{style:{resize:"none","text-transform":"lowercase",width:"100%"},id:"reason",modelValue:o.value.reason,"onUpdate:modelValue":e[0]||(e[0]=a=>o.value.reason=a),rows:"5",placeholder:"Porque desea rechazar esta solicitud?"},null,8,["modelValue"]),t(d,{style:{width:"100%","border-radius":"0.5rem"},label:"Rechazar",type:"submit",class:"p-button-danger"})],32)]),_:1},8,["visible"]),t(P,{visible:v.value,"onUpdate:visible":e[5]||(e[5]=a=>v.value=a),closeOnEscape:"",closable:!0,modal:"",style:{width:"30rem"}},{header:l(()=>[K]),default:l(()=>[s("form",{onSubmit:e[4]||(e[4]=T(a=>w(!0,o.value.id,o.value.reason),["prevent"])),style:{display:"flex",gap:"1rem","flex-direction":"column","align-items":"start"}},[t(b,{style:{resize:"none","text-transform":"lowercase",width:"100%"},id:"reason",modelValue:o.value.reason,"onUpdate:modelValue":e[3]||(e[3]=a=>o.value.reason=a),rows:"5",placeholder:"Notas para el solicitante"},null,8,["modelValue"]),t(d,{style:{width:"100%","border-radius":"0.5rem"},label:"Aprobar",type:"submit",class:"p-button-success"})],32)]),_:1},8,["visible"]),t(R,{paginator:!0,rows:15,filters:i.value,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",currentPageReportTemplate:"Mostrando {first} a {last} de {totalRecords} solicitudes",rowsPerPageOptions:[5,10,25,100],scrollable:"",scrollHeight:"65vh",stripedRows:"",style:{},"onUpdate:filters":e[7]||(e[7]=a=>i.value=a),class:"col-12 m-auto",value:m.value,tableStyle:"min-width: 50rem;"},{header:l(()=>[s("div",Q,[W,s("span",X,[Y,t(k,{class:"",modelValue:i.value.global.value,"onUpdate:modelValue":e[6]||(e[6]=a=>i.value.global.value=a),placeholder:"Buscar Solicitud..."},null,8,["modelValue"])])])]),default:l(()=>[t(g,{style:{},class:"py-1 pl-0",field:"order_id",header:"ID orden",frozen:""}),t(g,{style:{},class:"py-1 pl-0",field:"order_id",header:"ID orden",frozen:""}),t(g,{style:{},class:"py-1 px-0",field:"date",header:"Action",frozen:"",alignFrozen:"right"},{body:l(a=>[s("div",Z,[U(y).params.request_status!="aprobadas"?(S(),O(d,{key:0,size:"",onClick:ae=>z(!0,a.data.id),style:{height:"1.8rem",width:"2rem"},severity:"success",class:"p-1",icon:"pi pi-check"},null,8,["onClick"])):F("",!0)])]),_:1})]),_:1},8,["filters","value"])])}}},re=D(ee,[["__scopeId","data-v-221aa794"]]);export{re as default};
