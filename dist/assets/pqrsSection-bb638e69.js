import"./pqrsService-9c59aeb0.js";import{_ as Ie,r as i,A as Be,s as Te,B as Fe,l as Ae,j as Ge,k as D,U as N,C as Re,a as f,o as l,c as n,g as u,w as p,b as t,F as z,d as H,m as _,u as w,f as d,q as m,t as o,v as He,D as Me,n as Qe,e as M,p as Xe,h as Ye,E as Je}from"./index-4977c679.js";import"./editor.esm-38f8ade2.js";/* empty css                                                             */import{F as Ke}from"./FileSaver.min-cc8488c4.js";import We from"./pqrUser-2e6b64ed.js";import"./_commonjsHelpers-23102255.js";/* empty css                                                                */const r=Q=>(Xe("data-v-3874b151"),Q=Q(),Ye(),Q),Ze={style:{display:"flex","flex-direction":"column"}},et={style:{"min-width":"max-content",margin:"0",padding:"0"},class:"p-text-secondary m-0 p-0"},tt={style:{"min-width":"max-content",margin:"0",padding:"0"},class:"p-text-secondary m-0 p-0"},st={class:"m-0"},lt=r(()=>t("div",null,null,-1)),at={key:0,class:"m-0",style:{"text-transform":"capitalize"}},ot=r(()=>t("b",null,"Responsable:",-1)),nt={key:1,class:"p-0 m-0"},it={key:2,class:"p-0 m-0"},rt={key:3},ut=r(()=>t("b",null,"Notas",-1)),dt=r(()=>t("br",null,null,-1)),ct=r(()=>t("div",{style:{display:"flex",gap:"1rem"}},null,-1)),mt={style:{display:"flex","flex-direction":"column"}},pt=r(()=>t("h6",{class:"mx-0 my-0"},[t("b",null,"TIPO")],-1)),_t={style:{display:"flex","align-items":"center",gap:"1rem"}},yt=r(()=>t("h6",{class:"mx-0 my-0"},[t("b",null,"CANAL")],-1)),ht={class:"m-0 p-0",style:{display:"flex","align-items":"center",gap:"1rem"}},vt=r(()=>t("h6",{class:"mt-3 mb-2"},[t("b",null,"CONTEXTO")],-1)),bt={style:{display:"flex",gap:"1rem"}},xt={style:{display:"flex","flex-direction":"column"}},ft={key:0,class:"mt-3 mb-3"},gt=r(()=>t("b",null,"DATOS DEL CLIENTE",-1)),wt=[gt],kt={style:{display:"flex",gap:"1rem"}},Vt={style:{display:"flex","flex-direction":"column"}},St={key:0},Tt=r(()=>t("b",null,"Nombre: ",-1)),Rt={key:1},Ct=r(()=>t("b",null,"Telefono: ",-1)),qt={key:2},jt=r(()=>t("b",null,"Direccion: ",-1)),$t={key:3},Pt=r(()=>t("b",null,"Orden: ",-1)),Dt=r(()=>t("h6",null,[t("b",null,"HISTORIAL")],-1)),Nt={style:{display:"flex",gap:"1rem"}},Et={style:{display:"flex","flex-direction":"column"}},Ot={style:{display:"flex","flex-direction":"column"}},zt={style:{"min-width":"max-content",margin:"0",padding:"0"},class:"p-text-secondary m-0 p-0"},Lt={style:{"min-width":"max-content",margin:"0",padding:"0"},class:"p-text-secondary m-0 p-0"},Ut={class:"m-0"},It=r(()=>t("div",null,null,-1)),Bt={key:0,class:"m-0",style:{"text-transform":"capitalize"}},Ft=r(()=>t("b",null,"Responsable:",-1)),At={key:1,class:"p-0 m-0"},Gt={key:2,class:"p-0 m-0"},Ht={key:3},Mt=r(()=>t("b",null,"Notas",-1)),Qt=r(()=>t("br",null,null,-1)),Xt=r(()=>t("div",{style:{display:"flex",gap:"1rem"}},null,-1)),Yt=r(()=>t("h6",null,[t("b",null,"Como desea proceder?")],-1)),Jt={key:1},Kt={key:0,style:{display:"flex","justify-content":"space-between",margin:"1rem 0"}},Wt=r(()=>t("h6",{class:"m-0"},"Le dio una cortesia del 100% ?",-1)),Zt={key:1,style:{display:"flex","justify-content":"space-between",margin:"1rem 0"}},es=r(()=>t("h6",{class:"m-0"},"Le dio un bono de descuento?",-1)),ts={key:2},ss=r(()=>t("h6",{class:"m-0 my-3"},"porcentaje del descuento ",-1)),ls={key:3},as=r(()=>t("h6",{class:"m-0 my-3"},"Valor de la orden",-1)),os={key:4},ns=r(()=>t("h6",{class:"m-0 my-3"},"Id de la orden",-1)),is=r(()=>t("h6",{class:"m-0 my-3"},"Detalles",-1)),rs={style:{"background-color":"#ff00002e"},class:"p-3"},us=r(()=>t("b",null,"No preste sus credenciales de Salchigest, cada miembro de la empresa tiene los suyos, muchas gracias",-1)),ds={style:{display:"flex","justify-content":"end","margin-top":"2rem"}},cs={style:{"min-width":"1200px"}},ms={class:"nav_bar shadow-2 p-0 my-0 mx-3",style:{position:"sticky",top:"3rem","max-width":"1200px","background-color":"white","z-index":"99"}},ps={class:"nav_bar--buttons p-0 m-1",style:{}},_s={key:"",class:"",style:{display:"flex","align-items":"center"}},ys={style:{display:"flex","justify-content":"center",width:"100%","max-width":"1200px","align-items":"end",gap:"1rem"},class:"mt-0 px-1"},hs=r(()=>t("h6",null,[t("b",null," Desde")],-1)),vs=r(()=>t("h6",null,[t("b",null,"Hasta")],-1)),bs=r(()=>t("h6",null,[t("b",null,"Sedes")],-1)),xs={style:{display:"flex","align-items":"center",gap:"1rem"}},fs=r(()=>t("h6",{class:"m-0"},[t("b",null,"MODOS")],-1)),gs={style:{"text-align":"right",margin:"1rem"}},ws=r(()=>t("div",{class:"px-0 mt-2",style:{display:"flex",width:"100%","align-items":"center","justify-content":"end",gap:"1rem","max-width":"1200px"}},null,-1)),ks={class:"scroll-container",style:{}},Vs={style:{display:"flex","max-width":"1200px",overflow:"hidden","align-items":"start"}},Ss={class:"grid p-3",style:{"align-items":"center","justify-content":"space-between",display:"flex",gap:"1rem"}},Ts={class:"px-2"},Rs=r(()=>t("i",{class:"fa-regular fa-bars-progress"},null,-1)),Cs={style:{"text-transform":"uppercase"}},qs={style:{display:"flex",gap:"1rem"}},js={key:0,style:{"min-width":"max-content"},class:"m-0 p-0"},$s={key:1,style:{"min-width":"max-content"},class:"m-0 p-0"},Ps={key:3,style:{"text-align":"justify","min-width":"max-content"},class:"m-0 p-0"},Ds={key:4,style:{"text-align":"justify"},class:"m-0 p-0"},Ns={key:5,class:"m-0 p-0"},Es={key:1},Os={key:7,class:"p-2",style:{display:"flex",gap:".1rem","flex-direction":"column","align-items":"center"}},zs={key:8,class:"p-2",style:{display:"flex",gap:".1rem","flex-direction":"column","align-items":"center"}},Ls={key:9,class:"p-2",style:{display:"flex",gap:".1rem","flex-direction":"column","align-items":"center"}},Us={key:10,class:"p-2",style:{display:"flex",gap:".1rem","flex-direction":"column","align-items":"start"}},Is={style:{display:"flex",gap:".4rem","justify-content":"center"},class:"px-2"},Bs={style:{"max-width":"1010px"},class:"m-auto my-6"},Fs={class:"m-0 px-0"},As=r(()=>t("i",{class:"pi pi-arrow-right"},null,-1)),Gs={style:{"max-width":"1010px"},class:"mx-auto my-6"},Hs={class:"m-0 px-0"},Ms=r(()=>t("i",{class:"pi pi-arrow-right"},null,-1)),Qs={style:{"max-width":"1010px"},class:"mx-auto my-3"},Xs={class:"m-0 px-0"},Ys=r(()=>t("i",{class:"pi pi-arrow-right"},null,-1)),Js=r(()=>t("div",null,null,-1)),Ks={style:{display:"flex",gap:"1rem","align-items":"center"},class:"my-4"},Ws=r(()=>t("h6",{class:"m-0"},[t("b",null,"Tipo de grafica")],-1)),Zs=r(()=>t("div",null,null,-1)),el={__name:"pqrsSection",setup(Q){const Ce=()=>{if(!I.value||I.value.length===0)return alert("No hay PQRs disponibles para descargar."),null;const s=I.value.filter(h=>h.tag_name&&h.tag_name!=="CORTESÍAS").reduce((h,y)=>{const x=y.site_name||"Sin Sede";return h[x]||(h[x]=[]),h[x].push(y),h},{});return{hojas:Object.keys(s).map(h=>({hoja:h,title:`Reporte de PQRs - Sede: ${h}`,column_widths:{ID:15,Clasificacion:30,Descripción:60,Fecha:15,Hora:10,Estado:45,"Observación del estado":50,Responsable:50},data:s[h].sort((y,x)=>{const S=y.tag_name||"",R=x.tag_name||"";return S.localeCompare(R)}).map(y=>{var R,F,ee,C,A;let x="--------",S="--------";if((R=y.current_status)!=null&&R.timestamp){const G=y.current_status.timestamp.split(" ");G.length>=3?(x=G.slice(0,1)[0],S=`${G.slice(1,3).join(" ")}`):x=y.current_status.timestamp}return{ID:y.pqr_request_id,Clasificacion:y.tag_name||"Sin Clasificación",Descripción:y.request_content,Fecha:x,Hora:S,Estado:((F=y.current_status)==null?void 0:F.status)||"N/A","Observación del estado":((ee=y.current_status)==null?void 0:ee.notes)||"--------",Responsable:((A=(C=y.current_status)==null?void 0:C.responsible_name)==null?void 0:A.toUpperCase())||"--------"}})}))}},qe=async()=>{try{const c=Ce();if(!c)return;const s=await Je.post("https://excel-creator.salchimonster.com/crear-excel",c,{responseType:"blob"}),b=new Blob([s.data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});Ke.saveAs(b,"Reporte_PQRs.xlsx")}catch(c){console.error("Error al descargar el Excel:",c),alert("Ocurrió un error al intentar descargar el archivo Excel.")}},je=[{name:"Lineas",value:"line"},{name:"Barras",value:"bar"}],ae=i([]),oe=i([]),ne=i({name:"Barras",value:"bar"}),$e=Be(),re=i([]);function q(c){const s=new Date(c);if(isNaN(s))throw new Error("Fecha inválida");const b=s.getFullYear(),h=String(s.getMonth()+1).padStart(2,"0"),y=String(s.getDate()).padStart(2,"0");return`${b}-${h}-${y}`}const X=i(""),T=i(),j=i(),U=i(),Y=i(),Pe=async(c,s)=>{if(!c||!s){alert("Por favor, proporciona tanto la fecha de inicio como la fecha de fin.");return}await ge(c,s),j.value=c,T.value=s};Te(()=>{T.value=new Date;const c=new Date;c.setDate(c.getDate()-15),j.value=c,U.value=j.value,Y.value=T.value});const ue=i([]),de=i([]),ce=i([]),me=i([]),pe=i([]),_e=i([]),ye=i([{name:"Basico",x:0},{name:"Reportes Generales",x:-100},{name:"Reportes Graficados",x:-200}]),J=i(),he=Fe(),ve=i([]),ie=i({id:2,name:"Generada",description:"Estado inicial de la pqr",exist:!0,color:"#3498DB"}),k=Ae(),be=i([]),g=i(),De=async c=>{K.value=!0,v.value=c},xe=i([]),v=i([]),fe=i(!1),K=i(!1),E=i(null),Ne=()=>{E.value={global:{value:null,matchMode:He.CONTAINS}}};Te(()=>{Ne()});const Ee=i([{columnName:"Id",columnValue:"pqr_request_id",columnType:"other",size:"1rem",vif:!0},{columnName:"Estado",columnValue:"current_status",columnType:"status",size:"15rem",vif:!0},{columnName:"Tipo",columnValue:"request_type",columnType:"other",size:"15rem",vif:!0},{columnName:"Clasificacion",columnValue:"tag_name",columnType:"tag",size:"1rem",vif:!0},{columnName:"Restaurante",columnValue:"restaurant",columnType:"restaurant",size:"1rem",vif:!0},{columnName:"Id orden",columnValue:"order_id",columnType:"order_id",size:"1rem",vif:!0},{columnName:"Canal",columnValue:"channel",columnType:"tag",size:"4rem",vif:!0},{columnName:"Sede",columnValue:"site_name",columnType:"other",size:"4rem",vif:!0},{columnName:"Red",columnValue:"red",columnType:"other",size:"4rem",vif:!0},{columnName:"Calificacion",columnValue:"rating",columnType:"rating",size:"10rem",vif:!0},{columnName:"Comentarios",columnValue:"request_content",columnType:"other",size:"40rem",vif:!0},{columnName:"Responsable",columnValue:"responsible_name",columnType:"responsible_name",size:"20rem",vif:!1}]);i({2:"#3498DB",4:"#2ECC71",5:"#16A085",6:"#E74C3C",7:"#F39C12"}),i({question:"",answer:""}),i({}),i({}),i(null);const I=i([{}]);i({}),i(!1),i({});const B=i(!1),O=i(),L=i(!1),W=async()=>{I.value=await D.get(`${N}/get-all-pqrs`);const c=await D.get(`${N}/get-all-pqrs-status`);be.value=c,ve.value=c},ge=async(c,s)=>{if(!c||!T)return;const b=q(c),h=q(s),y=await D.get(`${N}/get-pqrs-by-date-range/${b}/${h}`),x=await D.get(`${N}/get-pqrs-by-date-range-types/${b}/${h}`),S=await D.get(`${N}/get_pqrs_by_responsible_and_state/${b}/${h}`);ue.value=y,de.value=Object.keys(y[0]),ce.value=x,me.value=Object.keys(x[0]),pe.value=S,_e.value=Object.keys(S[0]),re.value=await D.post(`${N}/get_daily_pqrs_report/${b}/${h}`,{ids:oe.value.map(R=>R.site_id)})};Ge(async()=>{await W(),ae.value=await D.get(`${N}/sites`),ae.value.filter(c=>c.show_on_web),await ge(j.value,T.value)}),Re(g,()=>{we(j.value,T.value)});const we=()=>{O.value=null,X.value="",J.value=null,B.value=!1,L.value=!1},Z=i(),Oe=async()=>{const c=Z.value&&O.value?(O.value-O.value*(Z.value/100)).toFixed(2):O.value,s={pqr_request_id:v.value.pqr_request_id,status_id:g.value,responsible_id:k.rawUserData.id,value:c||null,notes:X.value,order_id:J.value||null};try{await D.post(`${N}/change-pqr-status`,s),W(),K.value=!1,we()}catch(b){console.error("Error al enviar la actualización de la PQR:",b)}};return Re(()=>he.params.section_id,()=>{W()},{deep:!0}),(c,s)=>{const b=f("Tag"),h=f("Timeline"),y=f("Dialog"),x=f("Dropdown"),S=f("Checkbox"),R=f("InputNumber"),F=f("InputText"),ee=f("Textarea"),C=f("Button"),A=f("Calendar"),G=f("MultiSelect"),ze=f("Rating"),Le=f("column"),te=f("Column"),se=f("DataTable"),Ue=f("Chart");return l(),n(z,null,[u(y,{class:"mx-2",visible:fe.value,"onUpdate:visible":s[0]||(s[0]=e=>fe.value=e),modal:"",header:`Historial de la pqr  ID   ${xe.value.pqr_request_id}`,style:{width:"40rem"}},{default:p(()=>[u(h,{value:xe.value.status_history},{opposite:p(e=>{var a,V,$,P;return[t("div",Ze,[t("p",et,o((a=e.item.timestamp)==null?void 0:a.split(" ")[0]),1),t("p",tt,o((P=($=(V=e.item.timestamp)==null?void 0:V.split(" "))==null?void 0:$.slice(1,4))==null?void 0:P.join(" ")),1)])]}),content:p(e=>{var a;return[u(b,{style:_(`background-color:${e.item.color}`)},{default:p(()=>[t("p",st,[t("b",null,o(e.item.status),1)])]),_:2},1032,["style"]),lt,e.item.responsible_name?(l(),n("p",at,[ot,m(" "+o((a=e.item.responsible_name)==null?void 0:a.toLowerCase()),1)])):d("",!0),e.item.value?(l(),n("p",nt,[m("Le costo a la empresa "),t("b",null,o(e.item),1)])):d("",!0),e.item.order_id?(l(),n("p",it,[m("Orden entregada "),t("b",null,o(e.item.order_id),1)])):d("",!0),e.item.notes?(l(),n("p",rt,[ut,m(" "+o(e.item.notes),1)])):d("",!0),dt,ct]}),_:1},8,["value"])]),_:1},8,["visible","header"]),u(y,{class:"mx-2",visible:K.value,"onUpdate:visible":s[8]||(s[8]=e=>K.value=e),modal:"",header:`GESTION DE LA PQR  ID:    ${v.value.pqr_request_id}`,style:{width:"50rem"}},{footer:p(()=>[t("div",ds,[u(C,{onClick:Oe,label:"Enviar",severity:"help"})])]),default:p(()=>[t("div",mt,[pt,t("p",_t,o(v.value.request_type),1),yt,t("p",ht,o(v.value.channel),1),vt,t("div",bt,[t("div",{style:_([{width:"100%","max-width":".4rem","border-radius":"45rem","box-sizing":"border-box"},`background-color:${v.value.channel_color}`])},null,4),t("div",xt,[t("p",null,o(v.value.request_content),1)])]),v.value.user_name||v.value.user_phone?(l(),n("h6",ft,wt)):d("",!0),t("div",kt,[t("div",{style:_([{width:"100%","max-width":".4rem","border-radius":"45rem","box-sizing":"border-box"},`background-color:${v.value.channel_color}`])},null,4),t("div",Vt,[v.value.user_name?(l(),n("span",St,[Tt,m(" "+o(v.value.user_name),1)])):d("",!0),v.value.user_phone?(l(),n("span",Rt,[Ct,m(" "+o(v.value.user_phone),1)])):d("",!0),v.value.user_address?(l(),n("span",qt,[jt,m(" "+o(v.value.user_address),1)])):d("",!0),v.value.order_id?(l(),n("span",$t,[Pt,m(" "+o(v.value.order_id),1)])):d("",!0)])]),Dt,t("div",Nt,[t("div",{style:_([{width:"100%","max-width":".4rem","border-radius":"45rem","box-sizing":"border-box"},`background-color:${v.value.status_history[0].color}`])},null,4),t("div",Et,[u(h,{value:v.value.status_history},{opposite:p(e=>{var a,V,$,P;return[t("div",Ot,[t("p",zt,o((a=e.item.timestamp)==null?void 0:a.split(" ")[0]),1),t("p",Lt,o((P=($=(V=e.item.timestamp)==null?void 0:V.split(" "))==null?void 0:$.slice(1,4))==null?void 0:P.join(" ")),1)])]}),content:p(e=>{var a;return[u(b,{style:_(`background-color:${e.item.color}`)},{default:p(()=>[t("p",Ut,[t("b",null,o(e.item.status),1)])]),_:2},1032,["style"]),It,e.item.responsible_name?(l(),n("p",Bt,[Ft,m(" "+o((a=e.item.responsible_name)==null?void 0:a.toLowerCase()),1)])):d("",!0),e.item.value?(l(),n("p",At,[m("Le costo a la empresa "),t("b",null,o(w(Me)(e.item.value)),1)])):d("",!0),e.item.order_id?(l(),n("p",Gt,[m("Orden entregada "),t("b",null,o(e.item.order_id),1)])):d("",!0),e.item.notes?(l(),n("p",Ht,[Mt,m(" "+o(e.item.notes),1)])):d("",!0),Qt,Xt]}),_:1},8,["value"])])]),Yt,u(x,{modelValue:g.value,"onUpdate:modelValue":s[1]||(s[1]=e=>g.value=e),options:be.value.filter(e=>e.id!=2),optionLabel:"name",optionValue:"id"},null,8,["modelValue","options"]),g.value?(l(),n("div",Jt,[g.value==4||g.value==7?(l(),n("div",Kt,[Wt,u(S,{binary:"",modelValue:B.value,"onUpdate:modelValue":s[2]||(s[2]=e=>B.value=e)},null,8,["modelValue"])])):d("",!0),g.value==4||g.value==7?(l(),n("div",Zt,[es,u(S,{modelValue:L.value,"onUpdate:modelValue":s[3]||(s[3]=e=>L.value=e),binary:""},null,8,["modelValue"])])):d("",!0),(g.value==4||g.value==7)&&L.value?(l(),n("div",ts,[ss,u(R,{modelValue:Z.value,"onUpdate:modelValue":s[4]||(s[4]=e=>Z.value=e),style:{width:"100%"}},null,8,["modelValue"])])):d("",!0),(g.value==4||g.value==7)&&B.value||L.value?(l(),n("div",ls,[as,u(R,{modelValue:O.value,"onUpdate:modelValue":s[5]||(s[5]=e=>O.value=e),style:{width:"100%"}},null,8,["modelValue"])])):d("",!0),(g.value==4||g.value==7)&&L.value||B.value?(l(),n("div",os,[ns,u(F,{modelValue:J.value,"onUpdate:modelValue":s[6]||(s[6]=e=>J.value=e),style:{width:"100%"}},null,8,["modelValue"])])):d("",!0),t("div",null,[is,u(ee,{modelValue:X.value,"onUpdate:modelValue":s[7]||(s[7]=e=>X.value=e),rows:"5",style:{resize:"none",width:"100%"}},null,8,["modelValue"])]),t("h6",rs,[m("Recuerde que esta firmando como "),t("b",null,o(w(k).rawUserData.name),1),m(" y por ende se hace responsable, "),us])])):d("",!0)])]),_:1},8,["visible","header"]),t("div",cs,[t("nav",ms,[t("ul",ps,[(l(!0),n(z,null,H(ve.value,e=>(l(),n("li",_s,[u(b,{style:_([`background-color:${e.color}`,{height:"1.3rem","aspect-ratio":"1 / 1","border-radius":"50%"}])},null,8,["style"]),m(),u(C,{onClick:()=>{ie.value=e,w(k).currentSection_pqr=ye.value[0]},class:Qe(["nav_bar--buttons-button p-2",e.id==ie.value.id?"nav_bar--buttons-button-selected":""]),label:e.name},null,8,["onClick","class","label"])]))),128))])]),t("div",ys,[t("div",{class:"my-0 px-0",style:_([w(k).currentSection_pqr.x!=0?"opacity:1":"opacity:0",{display:"flex",transition:"all ease .5s","align-items":"end",gap:"1rem"}])},[hs,u(A,{style:{"max-width":"7.5rem"},disabled:w(k).currentSection_pqr.x==0,modelValue:U.value,"onUpdate:modelValue":s[9]||(s[9]=e=>U.value=e),dateFormat:"dd-mm-yy"},null,8,["disabled","modelValue"]),vs,u(A,{style:{"max-width":"7.5rem"},disabled:!U.value||w(k).currentSection_pqr.x==0,modelValue:Y.value,"onUpdate:modelValue":s[10]||(s[10]=e=>Y.value=e),dateFormat:"dd-mm-yy"},null,8,["disabled","modelValue"]),w(k).currentSection_pqr.x==-200?(l(),n(z,{key:0},[bs,u(G,{style:{"max-width":"17rem","min-width":"15rem"},options:ae.value.filter(e=>e.show_on_web),optionLabel:"site_name",modelValue:oe.value,"onUpdate:modelValue":s[11]||(s[11]=e=>oe.value=e),placeholder:"SEDES"},null,8,["options","modelValue"])],64)):d("",!0),u(C,{style:{"min-width":"max-content"},disabled:w(k).currentSection_pqr.x==0,onClick:s[12]||(s[12]=e=>Pe(U.value,Y.value)),severity:"help",label:"Buscar",icon:"pi pi-search"},null,8,["disabled"])],4),t("div",xs,[fs,t("div",null,[u(x,{style:{width:"10rem"},optionLabel:"name",placeholder:"Avanzado",modelValue:w(k).currentSection_pqr,"onUpdate:modelValue":s[13]||(s[13]=e=>w(k).currentSection_pqr=e),options:ye.value},null,8,["modelValue","options"])]),u(C,{onClick:s[14]||(s[14]=e=>w($e).visible_add_pqr=!0),icon:"pi pi-plus",label:"Nueva PQR",severity:"help"}),t("div",gs,[u(C,{onClick:qe,label:"Descargar PQRs como Excel",icon:"pi pi-file-excel",severity:"success",class:"p-button-sm"})])])]),ws,t("div",ks,[t("div",Vs,[u(se,{style:_([`transform:translateX(${w(k).currentSection_pqr.x}%);transition: .5s all ease;`,{width:"100%"}]),paginator:!0,rows:15,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",currentPageReportTemplate:"Mostrando {first} a {last} de {totalRecords} solicitudes",rowsPerPageOptions:[5,10,25,100],scrollable:"",showGridlines:"",scrollHeight:"65vh",stripedRows:"",class:"col-12 m-auto p-2",value:I.value.filter(e=>{var a,V;return((a=e.current_status)==null?void 0:a.status)==((V=ie.value)==null?void 0:V.name)}),tableStyle:"min-width: 50rem;",filters:E.value},{header:p(()=>[t("div",Ss,[t("h4",Ts,[Rs,m(),t("b",Cs,[m("PQRS "),t("b",null,o(w(he).params.section),1)])]),t("div",qs,[u(F,{class:"",modelValue:E.value.global.value,"onUpdate:modelValue":s[15]||(s[15]=e=>E.value.global.value=e),placeholder:"Buscar Solicitud..."},null,8,["modelValue"])])])]),default:p(()=>[(l(!0),n(z,null,H(Ee.value,e=>(l(),M(Le,{header:e.columnName,style:_(`min-width:${e.size}`),field:e.columnValue,class:"my-0 py-2"},{body:p(a=>{var V,$,P,ke,Ve,Se;return[e.columnType=="date"?(l(),n("h6",js,o(((V=a.data[e.columnValue])==null?void 0:V.split("-").reverse().join("-"))||"---------"),1)):d("",!0),e.columnType=="responsible_name"?(l(),n("h6",$s,o(((ke=(P=($=a.data)==null?void 0:$.status_history)==null?void 0:P[0])==null?void 0:ke.responsible_name)||"No se ha interactuado"),1)):d("",!0),e.columnType=="max-content"?(l(),n("h6",{key:2,style:_(e.columnType=="max-content"?"min-width: max-content":""),class:"m-0 p-0"},o(a.data[e.columnValue]||"---------"),5)):d("",!0),e.columnType=="order_id"?(l(),n("h6",Ps,o(a.data[e.columnValue]||"---------"),1)):d("",!0),e.columnType=="other"?(l(),n("h6",Ds,o(a.data[e.columnValue]||"---------"),1)):d("",!0),e.columnType=="rating"?(l(),n("h6",Ns,[a.data[e.columnValue]>0?(l(),M(ze,{key:0,cancel:!1,readonly:"",modelValue:a.data[e.columnValue],"onUpdate:modelValue":le=>a.data[e.columnValue]=le},null,8,["modelValue","onUpdate:modelValue"])):(l(),n("span",Es," ------------"))])):d("",!0),e.columnType=="money"?(l(),n("h6",{key:6,style:_(e.columnType=="max-content"?"min-width: max-content":""),class:"m-0 p-0"},o(c.formatoPesosColombianos(a.data[e.columnValue])||"---------"),5)):d("",!0),e.columnValue=="current_status"?(l(),n("div",Os,[u(b,{style:_([{color:"white","text-align":"center"},`background-color:${(Ve=a.data[e.columnValue])==null?void 0:Ve.color}`])},{default:p(()=>{var le;return[m(o(((le=a.data[e.columnValue])==null?void 0:le.status)||"---------"),1)]}),_:2},1032,["style"]),t("b",null,o(((Se=a.data[e.columnValue])==null?void 0:Se.timestamp)||"---------"),1)])):d("",!0),e.columnValue=="channel"?(l(),n("div",zs,[u(b,{style:_([{color:"white","text-align":"center"},`background-color:${a.data.channel_color}`])},{default:p(()=>[m(o(a.data[e.columnValue]||"---------"),1)]),_:2},1032,["style"])])):d("",!0),e.columnValue=="tag_name"?(l(),n("div",Ls,[u(b,{style:_([{color:"white","text-align":"center"},`background-color:${a.data.tag_color}`])},{default:p(()=>[m(o(a.data[e.columnValue]),1)]),_:2},1032,["style"])])):d("",!0),e.columnValue=="restaurant"?(l(),n("div",Us,[u(b,{style:_([{color:"white"},`background-color:${a.data.restaurant_color}`])},{default:p(()=>[m(o(a.data[e.columnValue]),1)]),_:2},1032,["style"])])):d("",!0)]}),_:2},1032,["header","style","field"]))),256)),u(te,{class:"my-0 py-0 px-0 mx-0",style:{},frozen:"",alignFrozen:"right",header:"Interactuar"},{body:p(e=>[t("div",Is,[u(C,{onClick:a=>De(e.data),label:"Gestionar",severity:"help",icon:"pi pi-check p-0",class:"my-0 py-2"},null,8,["onClick"])])]),_:1})]),_:1},8,["style","value","filters"]),t("div",{style:_([`transform:translateX(${w(k).currentSection_pqr.x}%);transition: .5s all ease;`,{"min-width":"100%","max-height":"80vh",overflow:"auto",margin:"auto"}])},[t("div",Bs,[t("h4",Fs,[t("b",null,[m(" REPORTE POR ESTADO "+o(q(j.value).split("-").reverse().join("-"))+" ",1),As,m(" "+o(q(T.value).split("-").reverse().join("-")),1)])]),u(se,{rows:15,style:{"max-width":"1200px","box-shadow":"0 0 1rem #00000030","border-radius":".5rem"},scrollable:"",showGridlines:"",scrollHeight:"65vh",stripedRows:"",class:"col-12 m-auto my-4",value:ue.value,tableStyle:"min-width: 50rem;",filters:E.value},{header:p(()=>[]),default:p(()=>[(l(!0),n(z,null,H(de.value,e=>(l(),M(te,{class:"p-0 text-center",style:{"max-width":"min-content","text-transform":"uppercase"},header:e},{body:p(a=>[t("div",null,[a.data.sede=="total"?(l(),n("h6",{key:0,class:"m-0 py-1 px-2 text-xl",style:_([{display:"flex","background-color":"var(--blue-100)"},e!="sede"?"justify-content: center;":"justify-content: start;"])},[t("b",null,o(a.data[e]),1)],4)):(l(),n("h6",{key:1,class:"m-0 py-1 px-2",style:_([{display:"flex","justify-content":"center"},e!="sede"?"justify-content: center;":"justify-content: start;"])},o(a.data[e]),5))])]),_:2},1032,["header"]))),256))]),_:1},8,["value","filters"])]),t("div",Gs,[t("h4",Hs,[t("b",null,[m(" REPORTE POR RESPONSABLES "+o(q(j.value).split("-").reverse().join("-"))+" ",1),Ms,m(" "+o(q(T.value).split("-").reverse().join("-")),1)])]),u(se,{rows:15,style:{"max-width":"1200px","box-shadow":"0 0 1rem #00000030","border-radius":".5rem"},scrollable:"",showGridlines:"",scrollHeight:"65vh",stripedRows:"",class:"col-12 m-auto my-4",value:pe.value,tableStyle:"min-width: 50rem;",filters:E.value},{header:p(()=>[]),default:p(()=>[(l(!0),n(z,null,H(_e.value,e=>(l(),M(te,{class:"p-0 text-center",style:{"max-width":"min-content","text-transform":"uppercase"},header:e},{body:p(a=>[t("div",null,[a.data.responsible_name=="total"?(l(),n("h6",{key:0,class:"m-0 py-1 px-2 text-xl",style:_([{display:"flex","text-align":"center","background-color":"var(--blue-100)"},e!="responsible_name"?"justify-content: center;":"justify-content: start;"])},[t("b",null,o(a.data[e]),1)],4)):a.data.responsible_name=="pendiente"?(l(),n("h6",{key:1,class:"m-0 py-1 px-2",style:_([{display:"flex","text-align":"center",color:"var(--red-900)","background-color":"var(--red-100)"},e!="responsible_name"?"justify-content: center;":"justify-content: start;"])},[t("b",null,o(a.data[e]),1)],4)):(l(),n("h6",{key:2,class:"m-0 py-1 px-2",style:_([{display:"flex","text-align":"start"},e!="responsible_name"?"justify-content: center;":"justify-content: start;"])},o(a.data[e]),5))])]),_:2},1032,["header"]))),256))]),_:1},8,["value","filters"])]),t("div",Qs,[t("h4",Xs,[t("b",null,[m(" REPORTE POR TIPOS "+o(q(j.value).split("-").reverse().join("-"))+" ",1),Ys,m(" "+o(q(T.value).split("-").reverse().join("-")),1)])]),u(se,{rows:15,style:{"max-width":"1200px","box-shadow":"0 0 1rem #00000030","border-radius":".2rem","background-color":"white"},scrollable:"",showGridlines:"",scrollHeight:"65vh",stripedRows:"",class:"col-12 m-auto my-4",value:ce.value,tableStyle:"min-width: 50rem;",filters:E.value},{header:p(()=>[]),default:p(()=>[(l(!0),n(z,null,H(me.value,e=>(l(),M(te,{class:"p-0 text-center",style:{"max-width":"min-content","text-transform":"uppercase"},header:e},{body:p(a=>[t("div",null,[a.data.sede=="TOTAL"?(l(),n("h6",{key:0,class:"m-0 py-1 px-2 text-xl",style:_([{display:"flex","background-color":"var(--blue-100)"},e!="sede"?"justify-content: center;":"justify-content: start;"])},[t("b",null,o(a.data[e]),1)],4)):(l(),n("h6",{key:1,class:"m-0 py-1 px-2",style:_([e!="sede"?"justify-content: center;":"justify-content: start;",{display:"flex"}])},o(a.data[e]),5))])]),_:2},1032,["header"]))),256))]),_:1},8,["value","filters"])]),Js],4),t("div",{class:"p-3",style:_([`transform:translateX(${w(k).currentSection_pqr.x}%);transition: .5s all ease;`,{"min-width":"100%","max-height":"80vh",overflow:"auto",margin:"auto"}])},[t("div",Ks,[Ws,u(x,{modelValue:ne.value,"onUpdate:modelValue":s[16]||(s[16]=e=>ne.value=e),options:je,optionLabel:"name"},null,8,["modelValue"])]),u(Ue,{type:ne.value.value,data:re.value,class:"h-[10rem] p-2 h-50",style:{width:"100%","box-shadow":"0 0 10px rgba(0, 0, 0, .2)","border-radius":".5rem"}},null,8,["type","data"]),Zs],4)])]),u(We,{onReload:s[17]||(s[17]=e=>W())})])],64)}}},ul=Ie(el,[["__scopeId","data-v-3874b151"]]);export{ul as default};
