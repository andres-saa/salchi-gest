import{r as Q}from"./resumen-889cf99e.js";import{a as W,u as X}from"./site-6542b323.js";import{_ as Y,h as S,i as ee,j as $,U as G,D as b,G as oe,g as _,o as u,c as m,a as l,f as s,e as g,u as o,F as z,k as h,q as y,d as te,t as U,p as ae,m as le}from"./index-ea6ce69e.js";import{u as se}from"./orderService-2c23f09e.js";import"./ventas-f85885e1.js";const i=v=>(ae("data-v-d05af0a1"),v=v(),le(),v),ne={class:"finalizar-compra-container"},de=i(()=>l("p",{class:"title"},"FINALIZAR COMPRA",-1)),re={style:{margin:"auto","max-width":"800px"}},ie={class:"title",style:{margin:"3rem .5rem"}},ue={class:"form-grid"},ce={class:"form-column"},me=i(()=>l("span",null,"NOMBRE",-1)),pe={class:"form-group"},_e=i(()=>l("span",null,"Ubicacio'n",-1)),ye={class:"form-group"},ge=i(()=>l("span",null,"Metodo Entrega",-1)),he={class:"form-group"},ve=i(()=>l("span",null,"Direccio'n",-1)),fe={class:"form-group"},Ve=i(()=>l("span",null,"Correo Electronico",-1)),be={class:"form-group"},Ue=i(()=>l("span",null,"Telefono",-1)),xe={class:"form-group"},Ie=i(()=>l("span",null,"Placa de tu vehiculo",-1)),Se={class:"form-group"},ke={style:{display:"flex","align-items":"center",gap:"1rem"}},Ne={key:2,class:"form-group"},Ce={key:0},Ee={key:1},De=i(()=>l("span",null,"Metodo de pago",-1)),Te={class:"form-group"},Me={key:3},Oe={class:"form-group"},we=i(()=>l("span",null,"Notas",-1)),Re={__name:"pay",setup(v){const f=S(!1),Z=[{id:1,name:"Demora más de una hora",percentage:"15%"},{id:2,name:"Pedido frío",percentage:"20%"},{id:3,name:"Un pelo",percentage:"100%"},{id:4,name:"Producto dañado",percentage:"100%"},{id:5,name:"Faltante de bebida y adición",percentage:"0%"},{id:6,name:"Responderle con lo que falta",percentage:"0%"},{id:7,name:"Salsas que no son",percentage:"20%"},{id:8,name:"Si se enoja y quiere cambio",percentage:"100%"},{id:9,name:"Mala atención Call Center",percentage:"20%"},{id:10,name:"Mala atención en Punto de venta",percentage:"20%"},{id:11,name:"Influencer",percentage:"100%"},{id:12,name:"No llegó el pedido",percentage:"20%"}],V=W(),n=X(),a=se(),x=S([]),c=S([]);ee(async()=>{a.user.order_type={},c.value=await $.get(`${G}/payment_methods`),x.value=await $.get(`${G}/get_all_order_types`)}),b(()=>a.user.order_type,r=>{(r==null?void 0:r.id)==2&&(n.current_delivery=n.location.neigborhood.delivery_price,n.location.neigborhood.delivery_price=0)}),b(f,r=>{r&&alert("El esquema de comandas cambio y el modelo actual ya no es valido, la orden se envia como una orden comun")}),b(()=>{var r,t;return(t=(r=n.location)==null?void 0:r.site)==null?void 0:t.site_id},()=>{a.user.order_type=null}),b(()=>a.user.order_type,()=>{a.user.placa=null});const H=oe(()=>{var t,p;return((p=(t=n.location)==null?void 0:t.site)==null?void 0:p.site_id)===33?x.value.filter(d=>(d==null?void 0:d.id)!==3):x.value.filter(d=>(d==null?void 0:d.id)!==1)});return(r,t)=>{var N,C,E,D,T,M,O,w,R,B,q,F,L,P,j,A;const p=_("Tag"),d=_("InputText"),I=_("Dropdown"),J=_("Checkbox"),K=_("InputNumber"),k=_("Textarea");return u(),m("div",ne,[de,l("div",re,[l("div",ie,[s(p,{severity:"success",class:"advertice"},{default:g(()=>[y(" El tiempo promedio de entrega es de 60 a 75 minutos, por favor téngalo en cuenta antes de ordenar ")]),_:1})])]),l("div",ue,[l("div",ce,[me,l("div",pe,[s(d,{id:"username",placeholder:"NOMBRE",modelValue:o(a).user.name,"onUpdate:modelValue":t[0]||(t[0]=e=>o(a).user.name=e)},null,8,["modelValue"])]),_e,l("div",ye,[s(d,{onClick:t[1]||(t[1]=e=>o(n).setVisible("currentSite",!0)),modelValue:o(n).location.neigborhood.name,id:"neighborhood",placeholder:"Ubicacion",readonly:""},null,8,["modelValue"])]),ge,l("div",he,[s(I,{style:{width:"100%"},modelValue:o(a).user.order_type,"onUpdate:modelValue":t[2]||(t[2]=e=>o(a).user.order_type=e),id:"metodo_de_entrega",placeholder:"Metodo de entrega",options:H.value.filter(e=>[1,2,3].includes(e.id)),optionLabel:"name"},null,8,["modelValue","options"])]),!o(a).user.order_type||((N=o(a).user.order_type)==null?void 0:N.id)!==2?(u(),m(z,{key:0},[ve,l("div",fe,[s(d,{modelValue:o(a).user.address,"onUpdate:modelValue":t[3]||(t[3]=e=>o(a).user.address=e),id:"address",placeholder:"DIRECCION"},null,8,["modelValue"])])],64)):h("",!0),Ve,l("div",be,[s(d,{modelValue:o(a).user.email,"onUpdate:modelValue":t[4]||(t[4]=e=>o(a).user.email=e),id:"email",placeholder:"Correo Electronico"},null,8,["modelValue"])]),Ue,l("div",xe,[s(d,{modelValue:o(a).user.phone_number,"onUpdate:modelValue":t[5]||(t[5]=e=>o(a).user.phone_number=e),id:"phone_number",mask:"999 999 9999",placeholder:"TELEFONO"},null,8,["modelValue"])]),o(a).user.order_type&&((C=o(a).user.order_type)==null?void 0:C.id)===2&&((D=(E=o(n).location)==null?void 0:E.site)==null?void 0:D.site_id)===33?(u(),m(z,{key:1},[Ie,l("div",Se,[s(d,{modelValue:o(a).user.placa,"onUpdate:modelValue":t[6]||(t[6]=e=>o(a).user.placa=e),id:"placa",placeholder:"Placa de tu vehiculo"},null,8,["modelValue"])])],64)):h("",!0),l("span",ke,[s(J,{modelValue:f.value,"onUpdate:modelValue":t[7]||(t[7]=e=>f.value=e),binary:""},null,8,["modelValue"]),y(" Es una cortesía? ")]),f.value?(u(),m("div",Ne,[s(I,{style:{width:"100%"},modelValue:o(a).user.payment_method_option,"onUpdate:modelValue":t[8]||(t[8]=e=>o(a).user.payment_method_option=e),id:"payment_method",placeholder:"Porcentaje de cortesía",options:Z},{option:g(e=>[y(U(e.option.name)+" ",1),s(p,null,{default:g(()=>[y(U(e.option.percentage),1)]),_:2},1024)]),value:g(e=>[e.value?(u(),m("span",Ce,[y(U(e.value.name)+" ",1),s(p,null,{default:g(()=>[y(U(e.value.percentage),1)]),_:2},1024)])):(u(),m("span",Ee," Selecciona un porcentaje "))]),_:1},8,["modelValue"])])):h("",!0),De,l("div",Te,[s(I,{style:{width:"100%"},modelValue:o(a).user.payment_method_option,"onUpdate:modelValue":t[9]||(t[9]=e=>o(a).user.payment_method_option=e),id:"payment_method",placeholder:"METODO DE PAGO",options:((M=(T=o(n).location)==null?void 0:T.site)==null?void 0:M.site_id)===33?c.value.filter(e=>[6,8].includes(e==null?void 0:e.id)):((w=(O=o(n).location)==null?void 0:O.site)==null?void 0:w.site_id)!==33?c.value.filter(e=>![7].includes(e==null?void 0:e.id)):c.value,optionLabel:"name"},null,8,["modelValue","options"])]),((B=(R=o(a).user)==null?void 0:R.order_type)==null?void 0:B.id)!=2?(u(),m("span",Me,"Domicilio")):h("",!0),l("div",Oe,[((F=(q=o(a).user)==null?void 0:q.order_type)==null?void 0:F.id)!=2?(u(),te(K,{key:0,style:{width:"100%"},prefix:"$",min:"0",modelValue:o(n).location.neigborhood.delivery_price,"onUpdate:modelValue":t[10]||(t[10]=e=>o(n).location.neigborhood.delivery_price=e),id:"payment_method",placeholder:"Domicilio",options:((P=(L=o(n).location)==null?void 0:L.site)==null?void 0:P.site_id)===33?c.value.filter(e=>[6,8].includes(e==null?void 0:e.id)):((A=(j=o(n).location)==null?void 0:j.site)==null?void 0:A.site_id)!==33?c.value.filter(e=>![7].includes(e==null?void 0:e.id)):c.value,optionLabel:"name"},null,8,["modelValue","options"])):h("",!0)]),we,s(k,{modelValue:o(V).cart.order_notes,"onUpdate:modelValue":t[11]||(t[11]=e=>o(V).cart.order_notes=e),class:"order-notes",placeholder:"Notas adicionales"},null,8,["modelValue"]),l("template",null,[s(k,{modelValue:o(V).cart.order_notes,"onUpdate:modelValue":t[12]||(t[12]=e=>o(V).cart.order_notes=e),class:"order-notes",placeholder:"Notas"},null,8,["modelValue"])])]),s(Q,{class:"resumen-column"})])])}}},je=Y(Re,[["__scopeId","data-v-d05af0a1"]]);export{je as default};
