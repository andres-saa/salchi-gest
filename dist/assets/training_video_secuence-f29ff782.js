import{_ as V,l as L,G as N,j as h,k as R,r,aa as F,o as v,c as b,e as a,f as o,a as e,h as d,t as n,w as M,F as U,b as A,u as O,g as $,i as j,q as E,x as G,A as H,B as z}from"./index-58581f28.js";import{v as K}from"./videoTrainingService-d63d6b20.js";import{u as Y}from"./urlService-89e3f0c9.js";const l=_=>(E("data-v-4a7b45cb"),_=_(),G(),_),Z={class:"container py-2 px-2"},J={class:"video-frame"},Q=["src"],W={class:"page-hero"},X={class:"page-hero__content"},ee={class:"title-wrap"},se=l(()=>e("i",{class:"fa fa-graduation-cap"},null,-1)),te=l(()=>e("h2",null,[e("b",null,"MIS CURSOS")],-1)),ae={class:"actions-wrap"},oe={class:"p-input-icon-left search-input"},ie=l(()=>e("i",{class:"pi pi-search"},null,-1)),le=l(()=>e("div",{class:"hero-accent"},null,-1)),ne={class:"table-card shadow-2"},ce=l(()=>e("div",{class:"grid p-2 header-row"},[e("h4",{class:"px-2"},[e("i",{class:"fa fa-glasses"}),d(),e("b",null,"Cursos")])],-1)),re=l(()=>e("div",{class:"empty-state"},[e("i",{class:"fa-solid fa-layer-group bounce"}),e("p",null,[e("b",null,"No tienes cursos asignados aún")]),e("p",{class:"muted"},"Cuando te asignen cursos, aparecerán aquí.")],-1)),de={class:"name-cell"},ue={class:"name-text"},_e={class:"name-actions"},pe={class:"desc-cell"},me=l(()=>e("i",{class:"fa-regular fa-message"},null,-1)),he={class:"truncate"},ve={class:"datetime-stack"},fe=l(()=>e("i",{class:"fa-regular fa-calendar-days mr-2"},null,-1)),ge=l(()=>e("i",{class:"fa-regular fa-clock mr-2"},null,-1)),ye={class:"creator-cell"},be={class:"avatar"},we={class:"thumbs-row"},xe=["onClick"],ke=["src"],Ce=l(()=>e("div",{class:"thumb-overlay"},[e("i",{class:"fa-solid fa-play"})],-1)),Se={__name:"training_video_secuence",setup(_){const k=L();N();const f=h([]),g=h(!1),w=h(""),p=h({global:{value:null,matchMode:H.CONTAINS}}),C=(i,t)=>{z.push({name:"video-training-videos",params:{sequence_id:i,sequence_name:t}})},S=i=>{w.value=i,g.value=!0},q=(i="")=>{const t=i.match(/(?:https?:\/\/)?(?:www\.)?(?:youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/shorts\/)([a-zA-Z0-9_-]+)(?:\?.*)?/);return t!=null&&t[1]?`https://www.youtube.com/embed/${t[1]}`:""},B=(i="")=>i.split(" ").filter(Boolean).slice(0,2).map(t=>{var m;return(m=t[0])==null?void 0:m.toUpperCase()}).join("");return R(async()=>{var t;const i=(t=k.rawUserData)==null?void 0:t.id;f.value=await K.getVideoSequencesBySesionIdAndStudentId(i)}),(i,t)=>{const m=r("Dialog"),u=r("Tag"),T=r("InputText"),c=r("Column"),x=r("Button"),D=r("DataTable"),P=F("tooltip");return v(),b("div",Z,[a(m,{visible:g.value,"onUpdate:visible":t[0]||(t[0]=s=>g.value=s),class:"p-0 m-3 modern-dialog",header:"Reproductor de video",modal:"",style:{width:"min(90vw, 64rem)"}},{default:o(()=>[e("div",J,[e("iframe",{class:"p-0",width:"100%",style:{"aspect-ratio":"16 / 9"},src:q(w.value),title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",referrerpolicy:"strict-origin-when-cross-origin",allowfullscreen:""},null,8,Q)])]),_:1},8,["visible"]),e("section",W,[e("div",X,[e("div",ee,[se,te,a(u,{class:"ml-2",severity:"success"},{default:o(()=>[d(n(f.value.length)+" activos",1)]),_:1})]),e("div",ae,[e("span",oe,[ie,a(T,{modelValue:p.value.global.value,"onUpdate:modelValue":t[1]||(t[1]=s=>p.value.global.value=s),placeholder:"Buscar curso, creador, fecha…"},null,8,["modelValue"])])])]),le]),e("div",ne,[a(D,{value:f.value,dataKey:"sequence_id",paginator:!0,rows:15,rowsPerPageOptions:[5,10,25,100],scrollable:"",showGridlines:"",scrollHeight:"65vh",stripedRows:"",tableStyle:"min-width: 64rem;",filters:p.value,"onUpdate:filters":t[2]||(t[2]=s=>p.value=s),filterDisplay:"menu",globalFilterFields:["sequence_name","description","created_date","created_time","creator_name","sequence_id"],paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",currentPageReportTemplate:"Mostrando {first} a {last} de {totalRecords} cursos",class:"col-12 m-auto"},{header:o(()=>[ce]),empty:o(()=>[re]),default:o(()=>[a(c,{header:"ID",class:"px-4",field:"sequence_id",style:{"min-width":"8rem"}},{body:o(({data:s})=>[a(u,{severity:"info"},{default:o(()=>[d("#"+n(s.sequence_id),1)]),_:2},1024)]),_:1}),a(c,{header:"Nombre",class:"px-4",field:"sequence_name",style:{"min-width":"22rem"}},{body:o(({data:s})=>[e("div",de,[e("h6",ue,n(s.sequence_name),1),e("div",_e,[M(a(x,{text:"",icon:"fa-solid fa-play",onClick:y=>C(s.sequence_id,s.sequence_name)},null,8,["onClick"]),[[P,"Entrar al curso",void 0,{bottom:!0}]]),a(x,{text:"",icon:"fa-solid fa-ellipsis-vertical"})])])]),_:1}),a(c,{header:"Descripción",class:"px-4",field:"description",style:{"min-width":"28rem"}},{body:o(({data:s})=>[e("div",pe,[me,e("span",he,n((s.description||"").toLowerCase()),1)])]),_:1}),a(c,{header:"Fecha & Hora",class:"px-4",style:{"min-width":"16rem"}},{body:o(({data:s})=>[e("div",ve,[a(u,{severity:"warning",class:"mb-2"},{default:o(()=>[fe,d(" "+n(s.created_date),1)]),_:2},1024),a(u,{severity:"secondary"},{default:o(()=>[ge,d(" "+n(s.created_time),1)]),_:2},1024)])]),_:1}),a(c,{header:"Creador",class:"px-4",field:"creator_name",style:{"min-width":"16rem"}},{body:o(({data:s})=>[e("div",ye,[e("span",be,n(B(s.creator_name)),1),e("h6",null,n(s.creator_name),1)])]),_:1}),a(c,{header:"Clases",class:"px-4",style:{"min-width":"24rem"}},{body:o(({data:s})=>[e("div",we,[(v(!0),b(U,null,A((s.video_links||[]).filter(Boolean).slice(0,4),(y,I)=>(v(),b("div",{key:I,class:"thumb",onClick:qe=>S(y)},[e("img",{class:"thumb-img",src:O(Y).getThumbnail(y),alt:"Clase"},null,8,ke),Ce],8,xe))),128)),(s.video_links||[]).filter(Boolean).length>4?(v(),$(u,{key:0,severity:"info",class:"more-chip"},{default:o(()=>[d(" +"+n((s.video_links||[]).filter(Boolean).length-4)+" más ",1)]),_:2},1024)):j("",!0)])]),_:1})]),_:1},8,["value","filters"])])])}}},Pe=V(Se,[["__scopeId","data-v-4a7b45cb"]]);export{Pe as default};
