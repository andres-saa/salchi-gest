import{a as Ee}from"./site-086f15f0.js";import{u as De}from"./user-aaa83723.js";import{_ as ge,y as Se,j as v,k as be,m as j,U as L,I as ue,r as P,o as n,c as a,e as c,f as p,a as e,N as le,t as o,u as s,ad as R,h as m,g as $,i as d,d as ve,F as A,b as ne,q as fe,x as Oe,C as Pe,K as Te}from"./index-f8593e29.js";import{f as h}from"./formatoPesos-2293ab52.js";import{u as Ve}from"./ventas-9b670be4.js";const l=E=>(fe("data-v-1a9c103a"),E=E(),Oe(),E),Re=l(()=>e("h3",null,[e("b",null,"TRASLADO DE SEDE")],-1)),Ie=l(()=>e("span",{for:"responsible"},"SELECCIONE LA SEDE DESTINO",-1)),Ne=l(()=>e("h3",null,[e("b",null,"Cambiar Valor del Domicilio")],-1)),je=l(()=>e("span",null,"Valor actual del domicilio",-1)),Le=l(()=>e("span",null,"Nuevo valor del domicilio",-1)),Ae=l(()=>e("h3",null,[e("b",null,"Cancelar Orden")],-1)),Ue=l(()=>e("span",{for:"responsible"},"Responsable",-1)),ze=l(()=>e("span",{for:"reason"},"Razón",-1)),Me=l(()=>e("h3",null,[e("b",null,"Cancelar Orden")],-1)),Be=l(()=>e("span",{class:"advert",style:{"text-transform":"lowercase",color:"red","font-weight":"bold"}}," Desde el 16 de mayo de 2024, la cancelación de órdenes requerirá autorización.",-1)),Fe=l(()=>e("span",{for:"responsible"},"Responsable",-1)),He=l(()=>e("span",{for:"reason"},"Razón",-1)),qe={style:{"text-transform":"capitalize"}},Ge={class:"col-12 mb-0 pb-0 px-0 m-0",style:{display:"flex","justify-content":"space-between",gap:"1rem"}},Ke={class:""},Ye={id:"factura",style:{width:"100%"}},Ze=l(()=>e("i",{class:"pi pi-whatsapp mr-2"},null,-1)),Je=l(()=>e("br",null,null,-1)),Qe={class:"",style:{width:"auto"}},We={class:"",id:"id",style:{"font-weight":"bold","min-width":"100%",width:"max-content","text-align":"center",color:"black",margin:"0rem"}},Xe={class:"",id:"id",style:{"font-weight":"bold","min-width":"100%",width:"max-content","text-align":"center",color:"black",margin:"0rem"}},et={style:{padding:"0",color:"black","text-align":"center",margin:"auto","margin-bottom":"1rem",width:"max-content","min-width":"max-content",display:"flex","justify-content":"center","flex-direction":"column"}},tt=l(()=>e("div",{class:"",style:{"font-weight":"bold",color:"white",margin:"0","background-color":"black","align-items":"center",display:"grid","grid-template-columns":"auto auto"}},[e("div",{class:"px-2",style:{width:"100%"}},[e("b",null," productos")]),e("div",{class:"px-2"},[e("p",{style:{"text-align":"end","font-weight":"bold"}},[e("b",null," total ")])])],-1)),st={style:{display:"grid",gap:"0 1rem","grid-template-columns":"auto auto"}},rt={key:0,class:"p-0 m-0"},ot=l(()=>e("br",null,null,-1)),lt={key:1,class:"p-0 m-0"},nt=l(()=>e("br",null,null,-1)),it={key:0,style:{"text-align":"end",color:"black"}},at={key:1,style:{"text-align":"end",color:"black"}},dt={key:0,class:"p-0 m-0"},ct=l(()=>e("b",null,"COMBO INCLUYE",-1)),ut=[ct],_t={class:"p-0 m-0 ml-5",style:{}},pt={style:{display:"flex",width:"","justify-content":"space-between"},class:"p-0 m-0"},mt={class:"p-0 m-0",style:{}},bt={class:"p-0 m-0",style:{"text-align":"end"}},yt=l(()=>e("div",{style:{"background-color":"rgba(0, 0, 0, 0.286)",height:"1px"}},null,-1)),ht={class:"",style:{display:"grid","margin-top":"1rem","grid-template-columns":"auto auto"}},vt=l(()=>e("div",{class:""},[e("span",{style:{"font-weight":"bold"}},[e("b",null,"Subtotal")])],-1)),gt={class:""},ft={style:{"text-align":"end","font-weight":"bold",color:"black"}},Ot=l(()=>e("div",{class:""},[e("span",{class:"m-0",style:{"font-weight":"bold"}},[e("b",null,"Domicilio")])],-1)),wt={class:""},xt={class:"m-0 p-0",style:{"text-align":"end","font-weight":"bold",color:"black"}},kt=l(()=>e("div",{class:""},[e("span",{style:{"font-weight":"bold",color:"black"}},[e("b",null,"Total")])],-1)),Ct={class:""},$t={class:"m-0 p-0",style:{"text-align":"end",color:"black","font-weight":"bold"}},Et=l(()=>e("div",{class:""},null,-1)),Dt=l(()=>e("p",{class:"px-2",style:{"font-weight":"bold","background-color":"black",color:"white",padding:"0",margin:"0","margin-top":"0.5rem"}},[e("b",null,"Notas")],-1)),St={class:"notas p-2 m-0",style:{border:"1px solid",margin:"0",color:"black",padding:"0.5rem"}},Pt=l(()=>e("p",{class:"px-2",style:{"background-color":"black","font-weight":"bold","margin-top":"1rem",color:"white"}},[e("b",null,"cliente")],-1)),Tt={style:{display:"grid",gap:"1rem 2rem","grid-template-columns":"auto auto","align-items":"start"}},Vt=l(()=>e("div",{class:"",style:{}},[e("span",null,[e("b",null,"Nombre")])],-1)),Rt={class:""},It={style:{"text-align":"start",color:"black"}},Nt={key:0,class:"",style:{}},jt=l(()=>e("span",null,[e("b",null,"Cedula / Nit")],-1)),Lt=[jt],At={key:1,class:""},Ut={style:{"text-align":"start",color:"black"}},zt=l(()=>e("div",{class:"",style:{}},[e("span",null,[e("b",null,"Metodo de entrega")])],-1)),Mt={class:""},Bt={style:{"text-align":"start",color:"black"}},Ft={key:2,class:"",style:{}},Ht=l(()=>e("span",null,[e("b",null,"Fecha de entrega")],-1)),qt=[Ht],Gt={key:3,class:""},Kt={style:{"text-align":"start",color:"black"}},Yt={key:4,class:"",style:{}},Zt=l(()=>e("span",null,[e("b",null,"Placa del vehiculo")],-1)),Jt=[Zt],Qt={key:5,class:""},Wt={style:{"text-align":"start",color:"black"}},Xt=l(()=>e("div",{style:{}},[e("span",null,[e("b",null,"telefono")])],-1)),es={style:{"text-align":"start",color:"black"}},ts={key:6,style:{}},ss=l(()=>e("span",null,[e("b",null,"Correo")],-1)),rs=[ss],os={key:7},ls={style:{"text-align":"start",color:"black"}},ns={key:8,style:{}},is=l(()=>e("span",null,[e("b",null,"direccion ")],-1)),as=[is],ds={key:9,style:{}},cs={style:{"text-align":"start",color:"black"}},us=l(()=>e("div",null,[e("span",null,[e("b",null,"metodo de pago")])],-1)),_s={style:{"text-align":"start",color:"black"}},ps={class:"col-12 mb-0 pb-0 px-0 m-0",style:{display:"flex","justify-content":"space-between",gap:"1rem"}},ms={class:"mt-4",style:{display:"flex","align-items":"center",gap:"1rem"}},bs={class:""},ys={id:"factura",style:{width:"100%"}},hs=l(()=>e("i",{class:"pi pi-whatsapp mr-2"},null,-1)),vs=l(()=>e("br",null,null,-1)),gs={class:"",style:{width:"auto"}},fs={class:"",id:"id",style:{"font-weight":"bold","min-width":"100%",width:"max-content","text-align":"center",color:"black",margin:"0rem"}},Os={class:"",id:"id",style:{"font-weight":"bold","min-width":"100%",width:"max-content","text-align":"center",color:"black",margin:"0rem"}},ws={style:{padding:"0",color:"black","text-align":"center",margin:"auto","margin-bottom":"1rem",width:"max-content","min-width":"max-content",display:"flex","justify-content":"center","flex-direction":"column"}},xs=l(()=>e("div",{class:"",style:{"font-weight":"bold",color:"white",margin:"0","background-color":"black","align-items":"center",display:"grid",gap:"1rem","grid-template-columns":"1fr 3fr 1fr 1fr 1fr"}},[e("div",{class:"px-2",style:{width:"100%"}},[e("b",null," Cant.")]),e("div",{class:"px-0",style:{width:"100%"}},[e("b",null," producto")]),e("div",{class:"px-0",style:{width:"100%"}},[e("b",null," pres.")]),e("div",{class:"px-0",style:{width:"100%"}},[e("b",null," V. Kilo")]),e("div",{class:"px-2"},[e("p",{style:{"text-align":"end","font-weight":"bold"}},[e("b",null," total ")])])],-1)),ks={style:{display:"grid",gap:"0 1rem","grid-template-columns":"1fr 3fr 1fr 1fr 1fr"}},Cs={key:0,class:"p-0 m-0"},$s=l(()=>e("br",null,null,-1)),Es={key:1,class:"p-0 m-0"},Ds=l(()=>e("br",null,null,-1)),Ss={key:2,class:"p-0 m-0"},Ps=l(()=>e("br",null,null,-1)),Ts={key:3,class:"p-0 m-0"},Vs=l(()=>e("br",null,null,-1)),Rs={key:0,style:{"text-align":"start",color:"black"}},Is={key:1,style:{"text-align":"start",color:"black"}},Ns={key:0,style:{"text-align":"end",color:"black"}},js={key:1,style:{"text-align":"end",color:"black"}},Ls={style:{display:"flex",width:"","justify-content":"space-between"},class:"p-0 m-0"},As={class:"p-0 m-0",style:{}},Us={class:"p-0 m-0",style:{"text-align":"end"}},zs=l(()=>e("div",{style:{"background-color":"rgba(0, 0, 0, 0.286)",height:"1px"}},null,-1)),Ms={class:"",style:{display:"grid","margin-top":"1rem","grid-template-columns":"auto auto"}},Bs=l(()=>e("div",{class:""},[e("span",{style:{"font-weight":"bold"}},[e("b",null,"Subtotal")])],-1)),Fs={class:""},Hs={style:{"text-align":"end","font-weight":"bold",color:"black"}},qs=l(()=>e("div",{class:""},[e("span",{class:"m-0",style:{"font-weight":"bold"}},[e("b",null,"Domicilio")])],-1)),Gs={class:""},Ks={class:"m-0 p-0",style:{"text-align":"end","font-weight":"bold",color:"black"}},Ys=l(()=>e("div",{class:""},[e("span",{style:{"font-weight":"bold",color:"black"}},[e("b",null,"Total")])],-1)),Zs={class:""},Js={class:"m-0 p-0",style:{"text-align":"end",color:"black","font-weight":"bold"}},Qs=l(()=>e("div",{class:""},null,-1)),Ws=l(()=>e("p",{class:"px-2",style:{"font-weight":"bold","background-color":"black",color:"white",padding:"0",margin:"0","margin-top":"0.5rem"}},[e("b",null,"Notas")],-1)),Xs={class:"notas p-2 m-0",style:{border:"1px solid",margin:"0",color:"black",padding:"0.5rem"}},er=l(()=>e("p",{class:"px-2",style:{"background-color":"black","font-weight":"bold","margin-top":"1rem",color:"white"}},[e("b",null,"cliente")],-1)),tr={style:{display:"grid",gap:"1rem 2rem","grid-template-columns":"auto auto","align-items":"start"}},sr=l(()=>e("div",{class:"",style:{}},[e("span",null,[e("b",null,"Nombre")])],-1)),rr={class:""},or={style:{"text-align":"start",color:"black"}},lr={key:0,class:"",style:{}},nr=l(()=>e("span",null,[e("b",null,"Cedula / Nit")],-1)),ir=[nr],ar={key:1,class:""},dr={style:{"text-align":"start",color:"black"}},cr=l(()=>e("div",{class:"",style:{}},[e("span",null,[e("b",null,"Metodo de entrega")])],-1)),ur={class:""},_r={style:{"text-align":"start",color:"black"}},pr={key:2,class:"",style:{}},mr=l(()=>e("span",null,[e("b",null,"Fecha de entrega")],-1)),br=[mr],yr={key:3,class:""},hr={style:{"text-align":"start",color:"black"}},vr={key:4,class:"",style:{}},gr=l(()=>e("span",null,[e("b",null,"Placa del vehiculo")],-1)),fr=[gr],Or={key:5,class:""},wr={style:{"text-align":"start",color:"black"}},xr=l(()=>e("div",{style:{}},[e("span",null,[e("b",null,"telefono")])],-1)),kr={style:{"text-align":"start",color:"black"}},Cr={key:6,style:{}},$r=l(()=>e("span",null,[e("b",null,"Correo")],-1)),Er=[$r],Dr={key:7},Sr={style:{"text-align":"start",color:"black"}},Pr={key:8,style:{}},Tr=l(()=>e("span",null,[e("b",null,"direccion ")],-1)),Vr=[Tr],Rr={key:9,style:{}},Ir={style:{"text-align":"start",color:"black"}},Nr=l(()=>e("div",null,[e("span",null,[e("b",null,"metodo de pago")])],-1)),jr={style:{"text-align":"start",color:"black"}},Lr={key:10},Ar=l(()=>e("span",null,[e("b",null,"Estado del pago")],-1)),Ur=[Ar],zr={key:11},Mr=l(()=>e("span",{style:{"text-align":"start",color:"black"}}," Aprobado ",-1)),Br=[Mr],Fr={key:12},Hr=l(()=>e("span",null,[e("b",null,"Referencia de pago")],-1)),qr=[Hr],Gr={key:13},Kr={style:{"text-align":"start",color:"black"}},Yr={class:"col-12 mb-0 pb-0 px-0 m-0",style:{display:"flex","justify-content":"space-between",gap:"1rem"}},Zr={class:"mt-4",style:{display:"flex","align-items":"center",gap:"1rem"}},Jr=l(()=>e("h3",null,[e("b",null,"Cambiar Método de Pago")],-1)),Qr=l(()=>e("span",{for:"paymentMethod"},"Método de Pago actual",-1)),Wr={for:"paymentMethod"},Xr=l(()=>e("span",{for:"paymentMethod"},"Nuevo método de Pago",-1)),eo={__name:"ResumenGracias",setup(E){const t=Se(),O=v(!1),D=v(t.currentOrder.delivery_price),_e=async()=>{const _=D.value;await j.put(`${L}/changue-delivery/${t.currentOrder.order_id}`,{price:_}),O.value=!1,t.numberOders==1?t.numberOders=2:t.numberOders=1,t.visibles.currentOrder=!1},S=v(!1),I=v(null),ae=v([]);be(async()=>{try{const _=await j.get(`${L}/payment_methods`);ae.value=_}catch(_){console.error("Error al obtener métodos de pago:",_)}t.currentOrder.value=t.currentOrder,pe.value=await j.get(`${L}/sites`)});const T=async()=>{if(I.value)try{await j.put(`${L}/change-method/${t.currentOrder.order_id}/${I.value}`,`Cambiando método de pago para la orden ${t.currentOrder.order_id}`),S.value=!1,t.visibles.currentOrder=!1,console.log("Método de pago cambiado exitosamente")}catch(_){console.error("Error al cambiar el método de pago:",_)}},N=_=>{var f,u,w,k;const r=(k=(w=(u=(f=_.latest_status_timestamp)==null?void 0:f.split("T")[1])==null?void 0:u.split(":"))==null?void 0:w.slice(0,2))==null?void 0:k.join(":");switch(_.current_status){case"enviada":return`El pedido fue enviado a su domicilio a las ${r}`;case"cancelada":return`El pedido fue cancelado a las ${r}
Responsable: ${_.responsible}
Razón: ${_.reason}`;case"en preparacion":return`El pedido está en preparación desde las ${r} y será enviado en breve.`;case"generada":return`Hemos recibido su pedido a las ${r} y empezaremos a prepararlo en breve. Gracias por su espera.`;default:return""}},C=v(0),V=v(!1),we=ue(()=>t.currentOrder.pe_json.listaPedidos.reduce((_,r)=>{var u;let f=r.pedido_cantidad*r.pedido_precio;if(r.modificadorseleccionList&&r.modificadorseleccionList.length>0){const k=((u=r.modificadorseleccionList)==null?void 0:u.filter(U=>U.pedido_productoid==r.pedido_productoid)).reduce((U,z)=>U+z.modificadorseleccion_cantidad*z.pedido_precio,0);f+=k}return _+f},0));ue(()=>we.value+t.currentOrder.delivery_price);const xe=async()=>{var r;const _={order_id:t.currentOrder.order_id,responsible:(r=g.value.responsible)==null?void 0:r.name,reason:g.value.reason};await R.create_cancellling_request(_),V.value=!1,t.Notification.pause(),t.Notification.currentTime=0},de=v(!1),ke=()=>{const _=document.getElementById("factura").innerHTML,r=window.open("","_blank");r.document.write("<html><head><title>Factura</title>");const f=document.getElementsByTagName("style");for(let u=0;u<f.length;u++)r.document.write(f[u].outerHTML);r.document.write("<style>  @media print { html{height: min-content;}  *{text-transform:uppercase;align-items:center; width:100%; font-family: sans-serif;padding:0;margin:0; font-size:o.9rem !IMPORTANT} body {  -webkit-print-color-adjust: exact; /* Chrome, Safari */ color-adjust: exact; /* Firefox */ } }  </style>"),r.document.write("</head><body>"),r.document.write(_),r.document.write("</body></html>"),r.document.close(),r.print(),setTimeout(()=>{r.close()},.01)},pe=v([]);be(async()=>{t.currentOrder.value=t.currentOrder,pe.value=await j.get(`${L}/sites`)});const me=v(!1),ce=v(!1),g=v({responsible:null,reason:"Sin razon"}),ye=v([{name:"Restaurante",value:"restaurant"},{name:"Cliente",value:"client"}]),he=()=>{g.value.responsible&&R.cancelOrder(t.currentOrder.order_id,g.value.reason,g.value.responsible.name).then(_=>{_&&(me.value=!1,console.log("Order canceled successfully"))}).catch(_=>{console.error("Failed to cancel order:",_)})},Ce=async()=>{const _=t.currentOrder.order_id,r=C.value;await j.put(`${L}/traslate-order`,{site_id:r,order_id:_},`trasladando orden ${_}`),t.visibles.currentOrder=!1,ce.value=!1},$e=()=>{console.log(`Orden: ${t.currentOrder.order_id}, Nuevo Valor de Domicilio: ${D.value}`),O.value=!1};return(_,r)=>{const f=P("Dropdown"),u=P("Button"),w=P("Dialog"),k=P("Tag"),U=P("InputNumber"),z=P("Textarea");return n(),a(A,null,[c(w,{visible:ce.value,"onUpdate:visible":r[2]||(r[2]=i=>ce.value=i),closeOnEscape:"",closable:!0,modal:"",style:{width:"30rem"}},{header:p(()=>[Re]),default:p(()=>[e("form",{onSubmit:le(he,["prevent"]),style:{display:"flex",gap:"1rem","flex-direction":"column","align-items":"start"}},[Ie,c(f,{style:{width:"100%"},id:"responsible",modelValue:C.value,"onUpdate:modelValue":r[0]||(r[0]=i=>C.value=i),optionValue:"site_id",options:pe.value.filter(i=>i.show_on_web),optionLabel:"site_name",placeholder:"Seleccione la sede destino"},null,8,["modelValue","options"]),c(u,{onClick:r[1]||(r[1]=i=>Ce()),style:{width:"100%","border-radius":"0.5rem"},label:"Trasladar",type:"submit",class:"p-button-danger"})],32)]),_:1},8,["visible"]),c(w,{visible:O.value,"onUpdate:visible":r[5]||(r[5]=i=>O.value=i),closeOnEscape:"",closable:!0,modal:"",style:{width:"30rem"}},{header:p(()=>[Ne]),default:p(()=>[e("form",{onSubmit:le($e,["prevent"]),style:{display:"flex",gap:"1rem","flex-direction":"column","align-items":"start"}},[je,c(k,{class:"px-4",severity:"warning"},{default:p(()=>[e("b",null,o(s(h)(s(t).currentOrder.delivery_price)),1)]),_:1}),Le,c(U,{style:{width:"100%"},modelValue:D.value,"onUpdate:modelValue":r[3]||(r[3]=i=>D.value=i),mode:"currency",currency:"COP",locale:"es-CO",maxFractionalDigits:"0",placeholder:"Ingresa el nuevo valor",required:""},null,8,["modelValue"]),c(u,{style:{width:"100%","border-radius":"0.5rem"},label:"Cambiar",type:"submit",class:"p-button-help",onClick:r[4]||(r[4]=i=>_e())})],32)]),_:1},8,["visible"]),e("div",null,[c(w,{visible:me.value,"onUpdate:visible":r[8]||(r[8]=i=>me.value=i),closeOnEscape:"",closable:!0,modal:"",style:{width:"30rem"}},{header:p(()=>[Ae]),default:p(()=>[e("form",{onSubmit:le(he,["prevent"]),style:{display:"flex",gap:"1rem","flex-direction":"column","align-items":"start"}},[Ue,c(f,{style:{width:"100%"},id:"responsible",modelValue:g.value.responsible,"onUpdate:modelValue":r[6]||(r[6]=i=>g.value.responsible=i),options:ye.value,optionLabel:"name",placeholder:"Selecciona un responsable"},null,8,["modelValue","options"]),ze,c(z,{style:{resize:"none","text-transform":"lowercase",width:"100%"},id:"reason",modelValue:g.value.reason,"onUpdate:modelValue":r[7]||(r[7]=i=>g.value.reason=i),rows:"5",placeholder:"Escribe la razón de la cancelación"},null,8,["modelValue"]),c(u,{style:{width:"100%","border-radius":"0.5rem"},label:"cancelar",type:"submit",class:"p-button-danger"})],32)]),_:1},8,["visible"]),c(w,{visible:V.value,"onUpdate:visible":r[11]||(r[11]=i=>V.value=i),closeOnEscape:"",closable:!0,modal:"",style:{width:"30rem"}},{header:p(()=>[Me]),default:p(()=>[e("form",{onSubmit:le(xe,["prevent"]),style:{display:"flex",gap:"1rem","flex-direction":"column","align-items":"start"}},[Be,Fe,c(f,{style:{width:"100%"},id:"responsible",modelValue:g.value.responsible,"onUpdate:modelValue":r[9]||(r[9]=i=>g.value.responsible=i),options:ye.value,optionLabel:"name",placeholder:"Selecciona un responsable"},null,8,["modelValue","options"]),He,c(z,{style:{resize:"none","text-transform":"lowercase",width:"100%"},id:"reason",modelValue:g.value.reason,"onUpdate:modelValue":r[10]||(r[10]=i=>g.value.reason=i),rows:"5",placeholder:"Escribe la razón de la cancelación"},null,8,["modelValue"]),c(u,{style:{width:"100%","border-radius":"0.5rem"},label:"solicitar cancelacion",type:"submit",class:"p-button-danger"})],32)]),_:1},8,["visible"]),c(w,{closable:!1,style:{width:"30rem"},modal:"",visible:de.value,"onUpdate:visible":r[14]||(r[14]=i=>de.value=i)},{footer:p(()=>[e("div",Ge,[c(u,{text:"",size:"small",onClick:r[12]||(r[12]=()=>{s(R).deliveryZero(s(t).currentOrder.order_id),de.value=!1}),style:{"border-radius":"0.3rem",width:"100%"},severity:"danger",label:"si"}),c(u,{onClick:r[13]||(r[13]=i=>de.value=!1),size:"small",style:{"border-radius":"0.3rem",width:"100%"},severity:"danger",label:"no"})])]),default:p(()=>[e("span",qe,[m(" Esta seguro de llevar a $0.00 el valor del domicilio para la orden "),e("b",null,o(s(t).currentOrder.order_id),1),m(" del cliente "),e("b",null,o(s(t).currentOrder.user_name),1),m("? ")])]),_:1},8,["visible"]),s(t).currentOrder.site_id!=32?(n(),$(w,{key:0,class:"mx-3",closeOnEscape:"",closable:!1,visible:s(t).visibles.currentOrder,"onUpdate:visible":r[22]||(r[22]=i=>s(t).visibles.currentOrder=i),modal:"",style:{"max-height":"95vh",width:"35rem",position:"relative"}},{footer:p(()=>[e("div",ps,[s(t).currentOrder.current_status=="generada"?(n(),$(u,{key:0,size:"small",onClick:r[15]||(r[15]=i=>s(R).prepareOrder(s(t).currentOrder.order_id)),style:{"border-radius":"0.3rem",width:"100%"},severity:"success",label:"Preparar"})):d("",!0),s(t).currentOrder.current_status=="en preparacion"?(n(),$(u,{key:1,size:"small",onClick:r[16]||(r[16]=i=>s(R).sendOrder(s(t).currentOrder.order_id)),style:{"border-radius":"0.3rem",width:"100%"},severity:"success",label:"enviar"})):d("",!0),c(u,{size:"small",style:{"border-radius":"0.3rem",width:"100%"},onClick:r[17]||(r[17]=()=>ce.value=!0),severity:"warning",label:"TRASLADO"}),c(u,{size:"small",style:{"border-radius":"0.3rem",width:"100%"},onClick:r[18]||(r[18]=i=>V.value=!0),severity:"danger",label:"CANCELAR "})]),e("div",ms,[c(u,{style:{width:"100%"},icon:"pi pi-sync",onClick:r[19]||(r[19]=i=>S.value=!0),label:" metodo de pago",severity:"success"}),c(u,{icon:"pi pi-sync",onClick:r[20]||(r[20]=i=>O.value=!0),label:" Domicilio",class:"p-button-warning",style:{width:"100%"}})])]),default:p(()=>{var i,M,B,F,H,q,G,K,Y,Z,J,Q,W,X,ee,te,se,b;return[e("div",Ke,[e("div",null,[e("p",{class:ve(`estado ${(M=(i=s(t).currentOrder)==null?void 0:i.current_status)==null?void 0:M.split(" ")[0]}`)},o(N(s(t).currentOrder)),3)])]),e("div",Ye,[s(t).currentOrder.responsible_id?(n(),$(k,{key:0,style:{},class:"tag mb-2",severity:"success"},{default:p(()=>[Ze,m(" TRANSFERENCIA APROBADA")]),_:1})):d("",!0),m(),Je,s(t).currentOrder.responsible_id?(n(),$(k,{key:1,class:"tag",severity:"success"},{default:p(()=>[m(o(s(t).currentOrder.name),1)]),_:1})):d("",!0),e("div",Qe,[e("p",We," ID:"+o(s(t).currentOrder.order_id),1),e("p",Xe,o(s(t).currentOrder.user_name)+" "+o(s(t).currentOrder.second_name)+" "+o(s(t).currentOrder.first_last_name)+" "+o(s(t).currentOrder.second_last_name),1),e("p",et,[e("b",null," fecha: "+o((F=(B=s(t).currentOrder.latest_status_timestamp)==null?void 0:B.split("T")[0].split("-"))==null?void 0:F.reverse().join("-")),1),e("b",null," Hora: "+o((K=(G=(q=(H=s(t).currentOrder.latest_status_timestamp)==null?void 0:H.split("T")[1])==null?void 0:q.split(":"))==null?void 0:G.slice(0,2))==null?void 0:K.join(":")),1)]),tt,(n(!0),a(A,null,ne((J=(Z=(Y=s(t))==null?void 0:Y.currentOrder)==null?void 0:Z.pe_json)==null?void 0:J.listaPedidos,y=>{var re,oe;return n(),a("div",null,[e("div",st,[((re=s(t).currentOrder)==null?void 0:re.site_id)==32?(n(),a("p",rt,[e("b",null," ( "+o(y.pedido_cantidad)+" kg ) ",1),m(" "+o(y.pedido_nombre_producto)+" ( "+o(y.pedido_cantidad/y.presentacion)+" "+o(y.presentation_unit_measure)+") ",1),ot])):(n(),a("p",lt,[e("b",null," ( "+o(y.pedido_cantidad)+" ) ",1),m(" "+o(y.pedido_nombre_producto)+" ",1),nt])),e("div",null,[y.pedido_base_price?(n(),a("p",it,o(s(h)(y.pedido_base_price*y.pedido_cantidad)),1)):(n(),a("p",at,o(s(h)(y.pedido_precio)),1))])]),((oe=y.lista_productocombo)==null?void 0:oe.length)>0?(n(),a("p",dt,ut)):d("",!0),y.lista_productocombo?(n(!0),a(A,{key:1},ne(y.lista_productocombo,x=>(n(),a("p",_t,[m(" -- "),e("b",null,o(x.pedido_cantidad),1),m(" "+o(x.pedido_nombre),1)]))),256)):d("",!0),(n(!0),a(A,null,ne(y.modificadorseleccionList,x=>(n(),a("div",pt,[e("p",mt,[m(" - ( "+o(y.pedido_cantidad)+" ) ",1),e("b",null,o(x.modificadorseleccion_cantidad),1),m(" "+o(x.modificadorseleccion_nombre),1)]),e("p",bt,o(s(h)(x.pedido_precio*x.modificadorseleccion_cantidad*y.pedido_cantidad)),1)]))),256)),yt])}),256)),e("div",ht,[vt,e("div",gt,[e("p",ft,[e("b",null,o(s(h)(s(t).currentOrder.pe_json.delivery.delivery_pagocon-((W=(Q=s(t).currentOrder.pe_json)==null?void 0:Q.delivery)==null?void 0:W.delivery_costoenvio))),1)])]),Ot,e("div",wt,[e("p",xt,[e("b",null,o(s(h)((ee=(X=s(t).currentOrder.pe_json)==null?void 0:X.delivery)==null?void 0:ee.delivery_costoenvio)),1)])]),kt,e("div",Ct,[e("p",$t,[e("b",null,o(s(h)(s(t).currentOrder.pe_json.delivery.delivery_pagocon)),1)])]),Et]),Dt,e("p",St,o((te=s(t).currentOrder.order_notes)==null?void 0:te.toLowerCase()),1),Pt,e("div",Tt,[Vt,e("div",Rt,[e("span",It,o(s(t).currentOrder.user_name)+" "+o(s(t).currentOrder.second_name)+" "+o(s(t).currentOrder.first_last_name)+" "+o(s(t).currentOrder.second_last_name),1)]),s(t).currentOrder.site_id==32?(n(),a("div",Nt,Lt)):d("",!0),s(t).currentOrder.site_id==32?(n(),a("div",At,[e("span",Ut,o(s(t).currentOrder.cedula_nit),1)])):d("",!0),zt,e("div",Mt,[e("span",Bt,o(s(t).currentOrder.order_type),1)]),s(t).currentOrder.site_id==32?(n(),a("div",Ft,qt)):d("",!0),s(t).currentOrder.site_id==32?(n(),a("div",Gt,[e("p",Kt,o(s(t).currentOrder.pe_json.delivery.delivery_horaentrega),1)])):d("",!0),s(t).currentOrder.placa?(n(),a("div",Yt,Jt)):d("",!0),s(t).currentOrder.placa?(n(),a("div",Qt,[e("p",Wt,o(s(t).currentOrder.placa),1)])):d("",!0),Xt,e("div",null,[e("span",es,o(s(t).currentOrder.user_phone),1)]),s(t).currentOrder.site_id==32?(n(),a("div",ts,rs)):d("",!0),s(t).currentOrder.site_id==32?(n(),a("div",os,[e("span",ls,o(s(t).currentOrder.email),1)])):d("",!0),s(t).currentOrder.order_type!="Pasar a recoger"?(n(),a("div",ns,as)):d("",!0),s(t).currentOrder.order_type!="Pasar a recoger"?(n(),a("div",ds,[e("span",cs,o((se=s(t).currentOrder.user_address)==null?void 0:se.toLowerCase()),1)])):d("",!0),us,e("div",null,[e("span",_s,o((b=s(t).currentOrder.payment_method)==null?void 0:b.toLowerCase()),1)])])])]),c(u,{class:"shadow-4",onClick:r[21]||(r[21]=y=>s(t).setVisible("currentOrder",!1)),icon:"pi pi-times",rounded:"",severity:"danger",style:{position:"absolute",top:"-1rem","border-radius":"50%",right:"-1rem"}})]}),_:1},8,["visible"])):(n(),$(w,{key:1,class:"mx-3",closeOnEscape:"",closable:!1,visible:s(t).visibles.currentOrder,"onUpdate:visible":r[29]||(r[29]=i=>s(t).visibles.currentOrder=i),modal:"",style:{"max-height":"95vh",width:"50rem",position:"relative"}},{footer:p(()=>[e("div",Yr,[s(t).currentOrder.current_status=="generada"?(n(),$(u,{key:0,size:"small",onClick:r[23]||(r[23]=i=>s(R).prepareOrder(s(t).currentOrder.order_id)),style:{"border-radius":"0.3rem",width:"100%"},severity:"success",label:"Preparar"})):d("",!0),s(t).currentOrder.current_status=="en preparacion"?(n(),$(u,{key:1,size:"small",onClick:r[24]||(r[24]=i=>s(R).sendOrder(s(t).currentOrder.order_id)),style:{"border-radius":"0.3rem",width:"100%"},severity:"success",label:"enviar"})):d("",!0),c(u,{size:"small",style:{"border-radius":"0.3rem",width:"100%"},onClick:ke,severity:"warning",label:"imprimir"}),c(u,{size:"small",style:{"border-radius":"0.3rem",width:"100%"},onClick:r[25]||(r[25]=i=>V.value=!0),severity:"danger",label:"CANCELAR "})]),e("div",Zr,[c(u,{style:{width:"100%"},icon:"pi pi-sync",onClick:r[26]||(r[26]=i=>S.value=!0),label:" metodo de pago",severity:"success"}),c(u,{icon:"pi pi-sync",onClick:r[27]||(r[27]=i=>O.value=!0),label:" Domicilio",class:"p-button-warning",style:{width:"100%"}})])]),default:p(()=>{var i,M,B,F,H,q,G,K,Y,Z,J,Q,W,X,ee,te,se;return[e("div",bs,[e("div",null,[e("p",{class:ve(`estado ${(M=(i=s(t).currentOrder)==null?void 0:i.current_status)==null?void 0:M.split(" ")[0]}`)},o(N(s(t).currentOrder)),3)])]),e("div",ys,[s(t).currentOrder.responsible_id?(n(),$(k,{key:0,style:{},class:"tag mb-2",severity:"success"},{default:p(()=>[hs,m(" TRANSFERENCIA APROBADA")]),_:1})):d("",!0),m(),vs,s(t).currentOrder.responsible_id?(n(),$(k,{key:1,class:"tag",severity:"success"},{default:p(()=>[m(o(s(t).currentOrder.name),1)]),_:1})):d("",!0),e("div",gs,[e("p",fs," ID:"+o(s(t).currentOrder.order_id),1),e("p",Os,o(s(t).currentOrder.user_name)+" "+o(s(t).currentOrder.second_name)+" "+o(s(t).currentOrder.first_last_name)+" "+o(s(t).currentOrder.second_last_name),1),e("p",ws,[e("b",null," fecha: "+o((B=s(t).currentOrder.latest_status_timestamp)==null?void 0:B.split("T")[0]),1),e("b",null," Hora: "+o((G=(q=(H=(F=s(t).currentOrder.latest_status_timestamp)==null?void 0:F.split("T")[1])==null?void 0:H.split(":"))==null?void 0:q.slice(0,2))==null?void 0:G.join(":")),1)]),xs,(n(!0),a(A,null,ne((Z=(Y=(K=s(t))==null?void 0:K.currentOrder)==null?void 0:Y.pe_json)==null?void 0:Z.listaPedidos,b=>{var y,re,oe;return n(),a("div",null,[e("div",ks,[((y=s(t).currentOrder)==null?void 0:y.site_id)==32?(n(),a("p",Cs,[e("b",null," ( "+o(b.pedido_cantidad)+" "+o(b.unit_measure)+" ) ",1),$s])):d("",!0),((re=s(t).currentOrder)==null?void 0:re.site_id)==32?(n(),a("p",Es,[m(o(b.pedido_nombre_producto)+" ",1),Ds])):d("",!0),((oe=s(t).currentOrder)==null?void 0:oe.site_id)==32?(n(),a("p",Ss,[m(o(b.presentacion)+" "+o(b.unit_measure)+" ",1),Ps])):(n(),a("p",Ts,[e("b",null," ( "+o(b.pedido_cantidad)+" ) ",1),m(" "+o(b.pedido_nombre_producto)+" ",1),Vs])),e("div",null,[b.pedido_base_price?(n(),a("p",Rs,o(s(h)(b.pedido_precio)),1)):(n(),a("p",Is,o(s(h)(b.pedido_precio)),1))]),e("div",null,[b.pedido_base_price?(n(),a("p",Ns,o(s(h)(b.pedido_base_price*b.pedido_cantidad)),1)):(n(),a("p",js,o(s(h)(b.pedido_precio)),1))])]),(n(!0),a(A,null,ne(b.modificadorseleccionList,x=>(n(),a("div",Ls,[e("p",As,[m(" - ( "+o(b.pedido_cantidad)+" ) ",1),e("b",null,o(x.modificadorseleccion_cantidad),1),m(" "+o(x.modificadorseleccion_nombre),1)]),e("p",Us,o(s(h)(x.pedido_precio*x.modificadorseleccion_cantidad*b.pedido_cantidad)),1)]))),256)),zs])}),256)),e("div",Ms,[Bs,e("div",Fs,[e("p",Hs,[e("b",null,o(s(h)(s(t).currentOrder.pe_json.delivery.delivery_pagocon-((Q=(J=s(t).currentOrder.pe_json)==null?void 0:J.delivery)==null?void 0:Q.delivery_costoenvio))),1)])]),qs,e("div",Gs,[e("p",Ks,[e("b",null,o(s(h)((X=(W=s(t).currentOrder.pe_json)==null?void 0:W.delivery)==null?void 0:X.delivery_costoenvio)),1)])]),Ys,e("div",Zs,[e("p",Js,[e("b",null,o(s(h)(s(t).currentOrder.pe_json.delivery.delivery_pagocon)),1)])]),Qs]),Ws,e("p",Xs,o((ee=s(t).currentOrder.order_notes)==null?void 0:ee.toLowerCase()),1),er,e("div",tr,[sr,e("div",rr,[e("span",or,o(s(t).currentOrder.user_name)+" "+o(s(t).currentOrder.second_name)+" "+o(s(t).currentOrder.first_last_name)+" "+o(s(t).currentOrder.second_last_name),1)]),s(t).currentOrder.site_id==32?(n(),a("div",lr,ir)):d("",!0),s(t).currentOrder.site_id==32?(n(),a("div",ar,[e("span",dr,o(s(t).currentOrder.cedula_nit),1)])):d("",!0),cr,e("div",ur,[e("span",_r,o(s(t).currentOrder.order_type),1)]),s(t).currentOrder.site_id==32?(n(),a("div",pr,br)):d("",!0),s(t).currentOrder.site_id==32?(n(),a("div",yr,[e("p",hr,o(s(t).currentOrder.pe_json.delivery.delivery_horaentrega),1)])):d("",!0),s(t).currentOrder.placa?(n(),a("div",vr,fr)):d("",!0),s(t).currentOrder.placa?(n(),a("div",Or,[e("p",wr,o(s(t).currentOrder.placa),1)])):d("",!0),xr,e("div",null,[e("span",kr,o(s(t).currentOrder.user_phone),1)]),s(t).currentOrder.site_id==32?(n(),a("div",Cr,Er)):d("",!0),s(t).currentOrder.site_id==32?(n(),a("div",Dr,[e("span",Sr,o(s(t).currentOrder.email),1)])):d("",!0),s(t).currentOrder.order_type!="Pasar a recoger"?(n(),a("div",Pr,Vr)):d("",!0),s(t).currentOrder.order_type!="Pasar a recoger"?(n(),a("div",Rr,[e("span",Ir,o((te=s(t).currentOrder.user_address)==null?void 0:te.toLowerCase()),1)])):d("",!0),Nr,e("div",null,[e("span",jr,o((se=s(t).currentOrder.payment_method)==null?void 0:se.toLowerCase()),1)]),s(t).currentOrder.epayco_ref?(n(),a("div",Lr,Ur)):d("",!0),s(t).currentOrder.epayco_ref?(n(),a("div",zr,Br)):d("",!0),s(t).currentOrder.epayco_ref?(n(),a("div",Fr,qr)):d("",!0),s(t).currentOrder.epayco_ref?(n(),a("div",Gr,[e("span",Kr,o(s(t).currentOrder.epayco_ref),1)])):d("",!0)])])]),c(u,{class:"shadow-4",onClick:r[28]||(r[28]=b=>s(t).setVisible("currentOrder",!1)),icon:"pi pi-times",rounded:"",severity:"danger",style:{position:"absolute",top:"-1rem","border-radius":"50%",right:"-1rem"}})]}),_:1},8,["visible"]))]),c(w,{visible:S.value,"onUpdate:visible":r[31]||(r[31]=i=>S.value=i),closeOnEscape:"",closable:!0,modal:"",style:{width:"30rem"}},{header:p(()=>[Jr]),default:p(()=>[e("form",{onSubmit:le(T,["prevent"]),style:{display:"flex",gap:"1rem","flex-direction":"column","align-items":"start"}},[Qr,c(k,{class:"px-4",severity:"warning"},{default:p(()=>[e("span",Wr,[e("b",null,o(s(t).currentOrder.payment_method),1)])]),_:1}),Xr,c(f,{style:{width:"100%"},id:"paymentMethod",modelValue:I.value,"onUpdate:modelValue":r[30]||(r[30]=i=>I.value=i),options:ae.value,optionLabel:"name",optionValue:"id",placeholder:"Selecciona un método de pago",required:""},null,8,["modelValue","options"]),c(u,{style:{width:"100%","border-radius":"0.5rem"},label:"Cambiar",type:"submit",class:"p-button-help"})],32)]),_:1},8,["visible"])],64)}}},to=ge(eo,[["__scopeId","data-v-1a9c103a"]]);const ie=E=>(fe("data-v-4d564455"),E=E(),Oe(),E),so={class:"p-2 col-12 my-6",style:{height:"auto","min-height":"90vh",padding:".5rem",display:"flex",gap:"rem","justify-content":"center","align-items":"center"}},ro={class:"shadow-7 p-0",style:{"border-radius":"0.5rem","max-width":"500px",display:"flex","flex-direction":"column",gap:"0rem","font-size":"1.3rem"}},oo={class:"text-4xl text-center m-0",style:{"font-weight":"bold","text-align":"center"}},lo=ie(()=>e("p",{class:"text-2xl text-center m-0",style:{"font-weight":"bold","text-align":"center"}},"🔥MUCHAS GRACIAS POR TU COMPRA!🔥",-1)),no={class:"text-4xl text-center my-0",style:{"font-weight":"bold","text-transform":"uppercase","text-align":"center"}},io=ie(()=>e("span",{class:"text-2xl"},"ID DEL PEDIDO",-1)),ao=ie(()=>e("br",null,null,-1)),co=ie(()=>e("p",{class:"text-2xl text-center my-3 p-3",style:{"border-radius":".3rem","background-color":"var(--primary-color)",padding:"1rem",color:"white"}}," Hemos recibido tu pedido y en breve será despachado",-1)),uo=ie(()=>e("div",null,null,-1)),_o={id:"factura",style:{width:"100%","text-transform":"uppercase"}},po={style:{display:"flex",gap:"1rem",padding:"1rem","min-width":"100%"}},mo={style:{width:"100%"}},bo={__name:"gracias",setup(E){const t=v(""),O=Ee(),D=De(),_e=Ve(),S=Pe(),I=ue(()=>`https://salchimonster.com/pagar/${O.last_order}`);async function ae(){const T=I.value;try{await navigator.clipboard.writeText(T),S.add({severity:"success",summary:"¡Copiado!",detail:"El enlace se copió al portapapeles",life:2500})}catch{const C=document.createElement("input");C.value=T,document.body.appendChild(C),C.select(),document.execCommand("copy"),C.remove(),S.add({severity:"info",summary:"Copiado con método alternativo",detail:"Tu navegador no soporta la API moderna de portapapeles",life:3e3})}}return be(()=>{_e.setLoading(!1,"enviando tu pedido"),t.value=`Hola soy *${D.user.name.toUpperCase()}* 🤗 acabo de hacer el siguiente pedido en la página web. El número de la orden es *#${O.last_order}*.


  *Escribo para Realizar la Transferecia*


  *Muchas Gracias* 🙏`,console.log(t.value)}),ue(()=>{const T="https://api.whatsapp.com/send",N=new URLSearchParams({phone:"573053447255",text:t.value});return`${T}?${N.toString()}`}),Te(()=>{D.user={name:"",neigborhood:"",address:"",phone_number:"",payment_method_option:"",was_reserva:!1},O.cart=[]}),(T,N)=>{const C=P("InputText"),V=P("Button");return n(),a("div",so,[e("div",ro,[e("p",oo," 🤩"+o(s(D).user.name.toUpperCase())+"🤩",1),lo,e("p",no,[io,m(),ao,m(" #"+o(s(O).last_order),1)]),co,uo,e("div",_o,[c(to)]),e("div",po,[e("div",mo,[c(C,{style:{width:"100%"},value:`https://salchimonster.com/pagar/${s(O).last_order}`},null,8,["value"])]),c(V,{onClick:ae,style:{"min-width":"max-content"},label:"Copiar link ",icon:"pi pi-copy",severity:"help"})])])])}}},Oo=ge(bo,[["__scopeId","data-v-4d564455"]]);export{Oo as default};
