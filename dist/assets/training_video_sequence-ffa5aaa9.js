import{v as U}from"./videoTrainingService-2a1e1eda.js";import{u as j}from"./urlService-c835519e.js";import{u as I,a as $}from"./dataToInteract-a7d1d477.js";import{l as B,r as S,v as N,a as c,o as x,f as L,w as n,d as t,b as e,u as v,q as D,t as w,k as F,_ as O,h as G,c as V,F as H,e as M,i as Y,p as Z,g as J}from"./index-80a7e175.js";const K={style:{height:"100%"}},Q=e("h6",null,"Nombre del nuevo curso",-1),W=e("h6",null,"Descripcion u objetivo",-1),X={__name:"dialogToAddSequence",emits:["update"],setup(q,{emit:p}){const _=p,m=B(),r=I(),a=S({}),y=N(),d=async()=>{const i={...a.value,created_by:m.rawUserData.id,sesion_id:y.params.sesion_id};await U.createSequence(i),r.addSequence=!1,_("update")};return(i,u)=>{const h=c("InputText"),T=c("Textarea"),g=c("Button"),s=c("Dialog");return x(),L(s,{visible:v(r).addSequence,"onUpdate:visible":u[2]||(u[2]=l=>v(r).addSequence=l),class:"p-0 m-3",header:"Registrar nuevo curso",style:{width:"30rem"},modal:""},{footer:n(()=>[t(g,{class:"m-0",onClick:d,severity:"help",label:"Crear Curso"})]),default:n(()=>[e("div",K,[Q,t(h,{modelValue:a.value.name,"onUpdate:modelValue":u[0]||(u[0]=l=>a.value.name=l),style:{width:"100%"}},null,8,["modelValue"]),W,t(T,{modelValue:a.value.description,"onUpdate:modelValue":u[1]||(u[1]=l=>a.value.description=l),style:{width:"100%",resize:"none"},rows:"4"},null,8,["modelValue"])])]),_:1},8,["visible"])}}},ee={style:{height:"100%"}},te=e("br",null,null,-1),oe={__name:"dialogToDeleteSequence",emits:["update"],setup(q,{emit:p}){const _=p;B();const m=I(),r=$();S({});const a=async()=>{const y=r.sequenceToDelete.sequence_id;await U.deleteSequence(y),m.deleteSequence=!1,_("update")};return(y,d)=>{const i=c("Button"),u=c("Dialog");return x(),L(u,{visible:v(m).deleteSequence,"onUpdate:visible":d[0]||(d[0]=h=>v(m).deleteSequence=h),class:"p-0 m-3",header:"Borrar un curso",style:{width:"30rem"},modal:""},{footer:n(()=>[t(i,{icon:"pi pi-trash",class:"m-0",onClick:a,severity:"danger",label:"Eliminar Curso"})]),default:n(()=>{var h;return[e("div",ee,[e("h6",null,[D("Seguro que desea borrar el curso "),te,D(),e("b",null,w((h=v(r).sequenceToDelete)==null?void 0:h.sequence_name),1),D(" ? ")])])]}),_:1},8,["visible"])}}},se={style:{height:"100%"}},ae=e("h6",null,"Nombre del Curso",-1),ne=e("h6",null,"Descripcion u objetivo",-1),ie={__name:"dialogToEditSequence",emits:["update"],setup(q,{emit:p}){const _=$(),m=p;B();const r=I(),a=S({..._.sequenceToUpdate});F(()=>_.sequenceToUpdate,d=>{a.value={...d}},{deep:!0}),S({});const y=async()=>{const d=a.value.sequence_id,i={name:a.value.sequence_name,description:a.value.description};await U.updateSequence(d,i),r.updateSequence=!1,m("update")};return(d,i)=>{const u=c("InputText"),h=c("Textarea"),T=c("Button"),g=c("Dialog");return x(),L(g,{visible:v(r).updateSequence,"onUpdate:visible":i[2]||(i[2]=s=>v(r).updateSequence=s),class:"p-0 m-3",header:"Actualizar Curso",style:{width:"30rem"},modal:""},{footer:n(()=>[t(T,{class:"m-0",onClick:y,severity:"warning",label:"Actualizar CURSO"})]),default:n(()=>[e("div",se,[ae,t(u,{modelValue:a.value.sequence_name,"onUpdate:modelValue":i[0]||(i[0]=s=>a.value.sequence_name=s),style:{width:"100%"}},null,8,["modelValue"]),ne,t(h,{modelValue:a.value.description,"onUpdate:modelValue":i[1]||(i[1]=s=>a.value.description=s),style:{width:"100%",resize:"none"},rows:"4"},null,8,["modelValue"])])]),_:1},8,["visible"])}}};const E=q=>(Z("data-v-a5735f17"),q=q(),J(),q),le={class:"container py-6"},ce={style:{height:"100%"}},de=["src"],re={class:"text-center"},ue={class:"grid p-2",style:{"align-items":"center","justify-content":"space-between",display:"flex",gap:"1rem"}},pe=E(()=>e("h4",{class:"px-2"},[e("i",{class:"fa fa-glasses"}),D(),e("b",null,"Cursos")],-1)),_e={style:{display:"flex","justify-content":"start","align-items":"center"}},me={class:"",style:{"text-transform":"capitalize"}},he={class:"date"},ve={class:"date"},ye={style:{"min-width":"max-content"}},ge={class:"",style:{display:"flex",gap:"1rem","align-items":"center"}},fe=["onClick","src"],be=E(()=>e("span",{class:""},[e("b",null,[e("i",{class:"text-4xl pi pi-ellipsis-h"})])],-1)),we={__name:"training_video_sequence",setup(q){const p=$(),_=I(),m=N(),r=(s,l)=>{Y.push({name:"video-training-video-admin",params:{sequence_id:s,sequence_name:l}})},a=s=>{const l=s.match(/(?:https?:\/\/)?(?:www\.)?(?:youtube\.com\/watch\?v=|youtu\.be\/)([a-zA-Z0-9_-]+)(?:\?.*)?/);return l&&l[1]?`https://www.youtube.com/embed/${l[1]}`:(console.error("La URL del video no es vÃ¡lida: ",s),"")},y=S({}),d=S(!1),i=S([]),u=s=>{p.sequenceToDelete={},p.sequenceToDelete=s,_.deleteSequence=!0},h=s=>{y.value=s,d.value=!0},T=s=>{p.sequenceToUpdate={},p.sequenceToUpdate=s,_.updateSequence=!0},g=async()=>{i.value=await U.getVideoSequencesBySesionId(m.params.sesion_id)};return G(async()=>{g()}),(s,l)=>{const P=c("Dialog"),R=c("InputText"),C=c("Button"),z=c("Checkbox"),f=c("column"),A=c("DataTable");return x(),V("div",le,[t(X,{onUpdate:g}),t(oe,{onUpdate:g}),t(ie,{onUpdate:g}),t(P,{visible:d.value,"onUpdate:visible":l[0]||(l[0]=o=>d.value=o),class:"p-0 m-3",header:`Reproductor de video\r
    `,modal:"",style:{width:"100%","max-width":"150vh","aspect-ratio":"16  / 9"}},{default:n(()=>[e("div",ce,[e("iframe",{class:"p-0",width:"100%",style:{"aspect-ratio":"16 / 9"},src:a(y.value),title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",referrerpolicy:"strict-origin-when-cross-origin",allowfullscreen:""},null,8,de)])]),_:1},8,["visible"]),e("h2",re,[e("b",null,"GESTIONAR ESCUELA "+w(v(m).params.sesion_name),1)]),t(A,{paginator:!0,rows:15,style:{width:"100%","max-width":"1280px"},paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",currentPageReportTemplate:"Mostrando {first} a {last} de {totalRecords} Capacitaciones",showGridlines:"",rowsPerPageOptions:[5,10,25,100],scrollable:"",scrollHeight:"65vh",stripedRows:"",class:"col-12 m-auto",value:i.value,tableStyle:"min-width: 50rem;"},{header:n(()=>[e("div",ue,[pe,t(R,{class:"",style:{width:"100%","max-width":"500px"},placeholder:"Buscar Secuencia..."}),t(C,{onClick:l[1]||(l[1]=o=>v(_).addSequence=!0),severity:"help",label:"Nuevo curso"})])]),default:n(()=>[t(f,{header:"Check",class:"",field:"created_time"},{body:n(o=>[t(z)]),_:1}),t(f,{header:"Id",class:"",field:"created_time"},{body:n(o=>[e("h6",null,w(o.data.sesion_id),1)]),_:1}),t(f,{header:"Nombre",class:"",field:"created_time"},{body:n(o=>[e("h6",null,w(o.data.sequence_name),1),e("div",_e,[t(C,{severity:"help",onClick:b=>r(o.data.sequence_id,o.data.sequence_name),text:"",icon:"fa-solid fa-eye"},null,8,["onClick"]),t(C,{onClick:b=>T(o.data),text:"",icon:"fa-solid fa-pencil"},null,8,["onClick"]),t(C,{text:"",onClick:b=>u(o.data),severity:"danger",icon:"fa-solid fa-trash"},null,8,["onClick"]),t(C,{severity:"success",text:"",label:"Estudiantes",icon:"fa-solid fa-graduation-cap"})])]),_:1}),t(f,{header:"Descripcion",style:{"min-width":"30rem"},class:"px-4",field:"created_time"},{body:n(o=>{var b;return[e("h6",me,w((b=o.data.description)==null?void 0:b.toLowerCase()),1)]}),_:1}),t(f,{header:"Fecha",class:"",field:"created_time"},{body:n(o=>[e("h6",he,w(o.data.created_date),1)]),_:1}),t(f,{header:"Hora",field:"created_time"},{body:n(o=>[e("h6",ve,w(o.data.created_time),1)]),_:1}),t(f,{header:"Creador",class:"date",field:"created_time"},{body:n(o=>[e("h6",ye,w(o.data.creator_name),1)]),_:1}),t(f,{header:"Clases",class:"px-4"},{body:n(o=>{var b;return[e("div",ge,[(x(!0),V(H,null,M((b=o.data.video_links)==null?void 0:b.filter(k=>k),k=>(x(),V("img",{onClick:qe=>h(k),class:"img-courses",style:{width:"9rem",cursor:"pointer","border-radius":".3rem","aspect-ratio":"16 / 9","object-fit":"cover"},src:v(j).getThumbnail(k),alt:""},null,8,fe))),256)),D(),be])]}),_:1})]),_:1},8,["value"])])}}},De=O(we,[["__scopeId","data-v-a5735f17"]]);export{De as default};
