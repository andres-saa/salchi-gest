import"./pqrsService-f8975d4f.js";import{_ as Ge,h as r,B as Me,s as De,C as Qe,l as He,i as Xe,j as O,U as F,D as je,g as k,o as a,c as o,b as i,f as p,a as t,F as G,r as J,n as _,q as m,u as x,d as Pe,k as c,t as n,x as Ye,E as Ke,e as W,p as Je,m as We,K as Ze}from"./index-03a193b1.js";import"./editor.esm-792af7ad.js";/* empty css                                                             */import{F as et}from"./FileSaver.min-cc8488c4.js";import tt from"./pqrUser-e5f01a5f.js";import"./_commonjsHelpers-23102255.js";/* empty css                                                                */const u=Z=>(Je("data-v-09f7a89b"),Z=Z(),We(),Z),st={style:{display:"flex","flex-direction":"column"}},lt={style:{"min-width":"max-content",margin:"0",padding:"0"},class:"p-text-secondary m-0 p-0"},at={style:{"min-width":"max-content",margin:"0",padding:"0"},class:"p-text-secondary m-0 p-0"},ot={class:"m-0"},nt=u(()=>t("div",null,null,-1)),rt={key:0,class:"m-0",style:{"text-transform":"capitalize"}},it=u(()=>t("b",null,"Responsable:",-1)),ut={key:1,class:"p-0 m-0"},dt={key:2,class:"p-0 m-0"},ct={key:3},mt=u(()=>t("b",null,"Notas",-1)),pt=u(()=>t("br",null,null,-1)),_t=u(()=>t("div",{style:{display:"flex",gap:"1rem"}},null,-1)),yt={style:{display:"flex","flex-direction":"column"}},vt=u(()=>t("h6",{class:"mx-0 my-0"},[t("b",null,"TIPO")],-1)),ht={style:{display:"flex","align-items":"center",gap:"1rem"}},bt=u(()=>t("h6",{class:"mx-0 my-0"},[t("b",null,"CANAL")],-1)),ft={class:"m-0 p-0",style:{display:"flex","align-items":"center",gap:"1rem"}},xt=u(()=>t("h6",{class:"mt-3 mb-2"},[t("b",null,"CONTEXTO")],-1)),gt={style:{display:"flex",gap:"1rem"}},wt={style:{display:"flex","flex-direction":"column"}},kt={key:0,class:"mt-3 mb-3"},Vt=u(()=>t("b",null,"DATOS DEL CLIENTE",-1)),St=[Vt],Ct={style:{display:"flex",gap:"1rem"}},qt={style:{display:"flex","flex-direction":"column"}},Tt={key:0},$t=u(()=>t("b",null,"Nombre: ",-1)),Rt={key:1},Dt=u(()=>t("b",null,"Telefono: ",-1)),jt={key:2},Pt=u(()=>t("b",null,"Direccion: ",-1)),Nt={key:3},Et=u(()=>t("b",null,"Orden: ",-1)),Ot=u(()=>t("h6",null,[t("b",null,"HISTORIAL")],-1)),Ft={style:{display:"flex",gap:"1rem"}},Ut={style:{display:"flex","flex-direction":"column"}},zt={style:{display:"flex","flex-direction":"column"}},Lt={style:{"min-width":"max-content",margin:"0",padding:"0"},class:"p-text-secondary m-0 p-0"},It={style:{"min-width":"max-content",margin:"0",padding:"0"},class:"p-text-secondary m-0 p-0"},Bt={class:"m-0"},At=u(()=>t("div",null,null,-1)),Gt={key:0,class:"m-0",style:{"text-transform":"capitalize"}},Mt=u(()=>t("b",null,"Responsable:",-1)),Qt={key:1,class:"p-0 m-0"},Ht={key:2,class:"p-0 m-0"},Xt={key:3},Yt=u(()=>t("b",null,"Notas",-1)),Kt=u(()=>t("br",null,null,-1)),Jt=u(()=>t("div",{style:{display:"flex",gap:"1rem"}},null,-1)),Wt=u(()=>t("h6",null,[t("b",null,"Como desea proceder?")],-1)),Zt={key:1},es={key:0,style:{display:"flex","justify-content":"space-between",margin:"1rem 0"}},ts=u(()=>t("h6",{class:"m-0"},"Le dio una cortesia del 100% ?",-1)),ss={key:1,style:{display:"flex","justify-content":"space-between",margin:"1rem 0"}},ls=u(()=>t("h6",{class:"m-0"},"Le dio un bono de descuento?",-1)),as={key:2},os=u(()=>t("h6",{class:"m-0 my-3"},"porcentaje del descuento ",-1)),ns={key:3},rs=u(()=>t("h6",{class:"m-0 my-3"},"Valor de la orden",-1)),is={key:4},us=u(()=>t("h6",{class:"m-0 my-3"},"Id de la orden",-1)),ds=u(()=>t("h6",{class:"m-0 my-3"},"Detalles",-1)),cs={style:{"background-color":"#ff00002e"},class:"p-3"},ms=u(()=>t("b",null,"No preste sus credenciales de Salchigest, cada miembro de la empresa tiene los suyos, muchas gracias",-1)),ps={style:{display:"flex","justify-content":"end","margin-top":"2rem"}},_s={style:{}},ys={class:"nav_bar shadow-2 p-0 my-0 mx-3",style:{position:"sticky",top:"3rem","max-width":"96vw",left:"0","background-color":"white","z-index":"99"}},vs={class:"nav_bar--buttons p-0 m-1",style:{}},hs={key:"",class:"",style:{display:"flex","align-items":"center"}},bs={key:"",class:"",style:{display:"flex","align-items":"center"}},fs={style:{display:"flex","justify-content":"center","flex-direction":"column",width:"100%","max-width":"96vw","align-items":"center",gap:"1rem"},class:"mt-0 px-1"},xs=u(()=>t("h6",null,[t("b",null," Desde")],-1)),gs=u(()=>t("h6",null,[t("b",null,"Hasta")],-1)),ws=u(()=>t("h6",null,[t("b",null,"Sedes")],-1)),ks={style:{display:"flex","align-items":"center",gap:"1rem"}},Vs=u(()=>t("h6",{class:"m-0"},[t("b",null,"MODOS")],-1)),Ss={style:{"text-align":"right",margin:"1rem"}},Cs=u(()=>t("div",{class:"px-0 mt-2",style:{display:"flex",width:"100%","align-items":"center","justify-content":"end",gap:"1rem","max-width":"96vw"}},null,-1)),qs={class:"scroll-container",style:{margin:"0 auto"}},Ts={style:{display:"flex","max-width":"96vw",overflow:"hidden","align-items":"start",margin:"0 auto"}},$s={class:"grid p-3",style:{"align-items":"center","justify-content":"space-between",display:"flex",gap:"1rem"}},Rs={class:"px-2"},Ds=u(()=>t("i",{class:"fa-regular fa-bars-progress"},null,-1)),js={style:{"text-transform":"uppercase"}},Ps={style:{display:"flex",gap:"1rem"}},Ns={key:0,style:{"min-width":"max-content"},class:"m-0 p-0"},Es={key:1,style:{"min-width":"max-content"},class:"m-0 p-0"},Os={key:3,style:{"text-align":"justify","min-width":"max-content"},class:"m-0 p-0"},Fs={key:4,style:{"text-align":"justify"},class:"m-0 p-0"},Us={key:5,class:"m-0 p-0"},zs={key:1},Ls={key:7,class:"p-2",style:{display:"flex",gap:".1rem","flex-direction":"column","align-items":"center"}},Is={key:8,class:"p-2",style:{display:"flex",gap:".1rem","flex-direction":"column","align-items":"center"}},Bs={key:9,class:"p-2",style:{display:"flex",gap:".1rem","flex-direction":"column","align-items":"center"}},As={key:10,class:"p-2",style:{display:"flex",gap:".1rem","flex-direction":"column","align-items":"start"}},Gs={style:{display:"flex",gap:".4rem","justify-content":"center"},class:"px-2"},Ms={style:{"max-width":"1366px"},class:"m-auto my-6"},Qs={class:"m-0 px-0"},Hs=u(()=>t("i",{class:"pi pi-arrow-right"},null,-1)),Xs=["onClick"],Ys={style:{cursor:"pointer"}},Ks=["onClick"],Js={style:{"max-width":"1366px"},class:"mx-auto my-6"},Ws={class:"m-0 px-0"},Zs=u(()=>t("i",{class:"pi pi-arrow-right"},null,-1)),el=["onClick"],tl=["onClick"],sl=["onClick"],ll={style:{"max-width":"1366px"},class:"mx-auto my-3"},al={class:"m-0 px-0"},ol=u(()=>t("i",{class:"pi pi-arrow-right"},null,-1)),nl=["onClick"],rl={style:{cursor:"pointer"}},il=["onClick"],ul=u(()=>t("div",null,null,-1)),dl={style:{display:"flex",width:"100%",margin:"0 auto","max-width":"1200px",gap:"1rem","align-items":"center"},class:"my-4"},cl=u(()=>t("h6",{class:"m-0"},[t("b",null,"Tipo de grafica")],-1)),ml=u(()=>t("div",null,null,-1)),pl={__name:"pqrsSection",setup(Z){const me=r([]),Ne=()=>{if(!Q.value||Q.value.length===0)return alert("No hay PQRs disponibles para descargar."),null;const d=h=>{const y=new Date(h),S=y.getFullYear(),w=String(y.getMonth()+1).padStart(2,"0"),q=String(y.getDate()).padStart(2,"0");return`${S}-${w}-${q}`},s=d(M.value),v=d(Y.value),C=Q.value.filter(h=>{var B;if(!((B=h.current_status)!=null&&B.timestamp))return!1;const[y,S,w]=h.current_status.timestamp.split(" ")[0].split("-"),q=`${w}-${S}-${y}`;return q>=s&&q<=v});if(C.length===0)return alert("No hay PQRs en el rango de fechas seleccionado."),null;const $=C.filter(h=>h.tag_name&&h.tag_name.toUpperCase()!=="CORTESÍAS").reduce((h,y)=>{const S=y.site_name||"Sin Sede";return h[S]||(h[S]=[]),h[S].push(y),h},{});return{hojas:Object.keys($).map(h=>({hoja:h,title:`Reporte de PQRs - Sede: ${h}`,column_widths:{ID:15,Clasificacion:30,Descripción:60,Fecha:15,Hora:10,Estado:45,"Observación del estado":50,Responsable:50},data:$[h].sort((y,S)=>{const w=y.tag_name||"",q=S.tag_name||"";return w.localeCompare(q)}).map(y=>{var q,B,ne,re,A;let S="--------",w="--------";if((q=y.current_status)!=null&&q.timestamp){const P=y.current_status.timestamp.split(" ");P.length>=2?(S=P[0],w=P.slice(1).join(" ")):S=y.current_status.timestamp}return{ID:y.pqr_request_id,Clasificacion:y.tag_name||"Sin Clasificación",Descripción:y.request_content,Fecha:S,Hora:w,Estado:((B=y.current_status)==null?void 0:B.status)||"N/A","Observación del estado":((ne=y.current_status)==null?void 0:ne.notes)||"--------",Responsable:((A=(re=y.current_status)==null?void 0:re.responsible_name)==null?void 0:A.toUpperCase())||"--------"}})}))}},Ee=async()=>{try{const d=Ne();if(!d)return;const s=await Ze.post("https://excel-creator.salchimonster.com/crear-excel",d,{responseType:"blob"}),v=new Blob([s.data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});et.saveAs(v,"Reporte_PQRs.xlsx")}catch(d){console.error("Error al descargar el Excel:",d),alert("Ocurrió un error al intentar descargar el archivo Excel.")}},Oe=[{name:"Lineas",value:"line"},{name:"Barras",value:"bar"}],ue=r([]),de=r([]),ce=r({name:"Barras",value:"bar"}),Fe=Me(),pe=r([]);function R(d){const s=new Date(d);if(isNaN(s))throw new Error("Fecha inválida");const v=s.getFullYear(),C=String(s.getMonth()+1).padStart(2,"0"),j=String(s.getDate()).padStart(2,"0");return`${v}-${C}-${j}`}const ee=r(""),T=r(),D=r(),M=r(),Y=r(),Ue=async(d,s)=>{if(!d||!s){alert("Por favor, proporciona tanto la fecha de inicio como la fecha de fin.");return}await Se(d,s),D.value=d,T.value=s};De(()=>{T.value=new Date;const d=new Date;d.setDate(d.getDate()-15),D.value=d,M.value=D.value,Y.value=T.value});const _e=r([]),ye=r([]),ve=r([]),he=r([]),be=r([]),fe=r([]),te=r([{name:"Basico",x:0},{name:"Reportes Generales",x:-100},{name:"Reportes Graficados",x:-200}]),se=r(),xe=Qe(),ge=r([]),U=r({id:2,name:"Generada",description:"Estado inicial de la pqr",exist:!0,color:"#3498DB"}),g=He(),we=r([]),V=r(),ze=async d=>{le.value=!0,b.value=d},ke=r([]),b=r([]),Ve=r(!1),le=r(!1),z=r(null),Le=()=>{z.value={global:{value:null,matchMode:Ye.CONTAINS}}};De(()=>{Le()});const Ie=r([{columnName:"Id",columnValue:"pqr_request_id",columnType:"other",size:"1rem",vif:!0},{columnName:"Estado",columnValue:"current_status",columnType:"status",size:"15rem",vif:!0},{columnName:"Tipo",columnValue:"request_type",columnType:"other",size:"15rem",vif:!0},{columnName:"Clasificacion",columnValue:"tag_name",columnType:"tag",size:"1rem",vif:!0},{columnName:"Restaurante",columnValue:"restaurant",columnType:"restaurant",size:"1rem",vif:!0},{columnName:"Id orden",columnValue:"order_id",columnType:"order_id",size:"1rem",vif:!0},{columnName:"Canal",columnValue:"channel",columnType:"tag",size:"4rem",vif:!0},{columnName:"Sede",columnValue:"site_name",columnType:"other",size:"4rem",vif:!0},{columnName:"Red",columnValue:"red",columnType:"other",size:"4rem",vif:!0},{columnName:"Comentarios",columnValue:"request_content",columnType:"other",size:"40rem",vif:!0},{columnName:"Responsable",columnValue:"responsible_name",columnType:"responsible_name",size:"20rem",vif:!1}]);r({2:"#3498DB",4:"#2ECC71",5:"#16A085",6:"#E74C3C",7:"#F39C12"}),r({question:"",answer:""}),r({}),r({}),r(null);const Q=r([{}]);r({}),r(!1),r({});const K=r(!1),L=r(),H=r(!1),ae=async()=>{Q.value=await O.get(`${F}/get-all-pqrs`);const d=await O.get(`${F}/get-all-pqrs-status`);we.value=d,ge.value=d},Se=async(d,s)=>{if(!d||!T)return;const v=R(d),C=R(s),j=await O.get(`${F}/get-pqrs-by-date-range/${v}/${C}`),$=await O.get(`${F}/get-pqrs-by-date-range-types/${v}/${C}`),X=await O.get(`${F}/get_pqrs_by_responsible_and_state/${v}/${C}`);_e.value=j,ye.value=Object.keys(j[0]),ve.value=$,he.value=Object.keys($[0]),be.value=X,fe.value=Object.keys(X[0]),pe.value=await O.post(`${F}/get_daily_pqrs_report/${v}/${C}`,{ids:de.value.map(h=>h.site_id)})};Xe(async()=>{await ae(),ue.value=await O.get(`${F}/sites`),ue.value.filter(d=>d.show_on_web),await Se(D.value,T.value)}),je(V,()=>{Ce(D.value,T.value)});const Ce=()=>{L.value=null,ee.value="",se.value=null,K.value=!1,H.value=!1},oe=r(),Be=async()=>{const d=oe.value&&L.value?(L.value-L.value*(oe.value/100)).toFixed(2):L.value,s={pqr_request_id:b.value.pqr_request_id,status_id:V.value,responsible_id:g.rawUserData.id,value:d||null,notes:ee.value,order_id:se.value||null};try{await O.post(`${F}/change-pqr-status`,s),ae(),le.value=!1,Ce()}catch(v){console.error("Error al enviar la actualización de la PQR:",v)}};je(()=>xe.params.section_id,()=>{ae()},{deep:!0});const I=d=>{if(d.length>0)me.value=d;else return;U.value={id:60,name:"Filtradas",color:"#c55a11",exist:!0},g.currentSection_pqr=te.value[0],window.scrollTo({top:0,behavior:"smooth"})};return(d,s)=>{var qe;const v=k("Tag"),C=k("Timeline"),j=k("Dialog"),$=k("Dropdown"),X=k("Checkbox"),h=k("InputNumber"),y=k("InputText"),S=k("Textarea"),w=k("Button"),q=k("Calendar"),B=k("MultiSelect"),ne=k("Rating"),re=k("column"),A=k("Column"),P=k("DataTable"),Ae=k("Chart");return a(),o(G,null,[i(j,{class:"mx-2",visible:Ve.value,"onUpdate:visible":s[0]||(s[0]=e=>Ve.value=e),modal:"",header:`Historial de la pqr  ID   ${ke.value.pqr_request_id}`,style:{width:"40rem"}},{default:p(()=>[i(C,{value:ke.value.status_history},{opposite:p(e=>{var l,f,N,E;return[t("div",st,[t("p",lt,n((l=e.item.timestamp)==null?void 0:l.split(" ")[0]),1),t("p",at,n((E=(N=(f=e.item.timestamp)==null?void 0:f.split(" "))==null?void 0:N.slice(1,4))==null?void 0:E.join(" ")),1)])]}),content:p(e=>{var l;return[i(v,{style:_(`background-color:${e.item.color}`)},{default:p(()=>[t("p",ot,[t("b",null,n(e.item.status),1)])]),_:2},1032,["style"]),nt,e.item.responsible_name?(a(),o("p",rt,[it,m(" "+n((l=e.item.responsible_name)==null?void 0:l.toLowerCase()),1)])):c("",!0),e.item.value?(a(),o("p",ut,[m("Le costo a la empresa "),t("b",null,n(e.item),1)])):c("",!0),e.item.order_id?(a(),o("p",dt,[m("Orden entregada "),t("b",null,n(e.item.order_id),1)])):c("",!0),e.item.notes?(a(),o("p",ct,[mt,m(" "+n(e.item.notes),1)])):c("",!0),pt,_t]}),_:1},8,["value"])]),_:1},8,["visible","header"]),i(j,{class:"mx-2",visible:le.value,"onUpdate:visible":s[8]||(s[8]=e=>le.value=e),modal:"",header:`GESTION DE LA PQR  ID:    ${b.value.pqr_request_id}`,style:{width:"50rem"}},{footer:p(()=>[t("div",ps,[i(w,{onClick:Be,label:"Enviar",severity:"help"})])]),default:p(()=>[t("div",yt,[vt,t("p",ht,n(b.value.request_type),1),bt,t("p",ft,n(b.value.channel),1),xt,t("div",gt,[t("div",{style:_([{width:"100%","max-width":".4rem","border-radius":"45rem","box-sizing":"border-box"},`background-color:${b.value.channel_color}`])},null,4),t("div",wt,[t("p",null,n(b.value.request_content),1)])]),b.value.user_name||b.value.user_phone?(a(),o("h6",kt,St)):c("",!0),t("div",Ct,[t("div",{style:_([{width:"100%","max-width":".4rem","border-radius":"45rem","box-sizing":"border-box"},`background-color:${b.value.channel_color}`])},null,4),t("div",qt,[b.value.user_name?(a(),o("span",Tt,[$t,m(" "+n(b.value.user_name),1)])):c("",!0),b.value.user_phone?(a(),o("span",Rt,[Dt,m(" "+n(b.value.user_phone),1)])):c("",!0),b.value.user_address?(a(),o("span",jt,[Pt,m(" "+n(b.value.user_address),1)])):c("",!0),b.value.order_id?(a(),o("span",Nt,[Et,m(" "+n(b.value.order_id),1)])):c("",!0)])]),Ot,t("div",Ft,[t("div",{style:_([{width:"100%","max-width":".4rem","border-radius":"45rem","box-sizing":"border-box"},`background-color:${b.value.status_history[0].color}`])},null,4),t("div",Ut,[i(C,{value:b.value.status_history},{opposite:p(e=>{var l,f,N,E;return[t("div",zt,[t("p",Lt,n((l=e.item.timestamp)==null?void 0:l.split(" ")[0]),1),t("p",It,n((E=(N=(f=e.item.timestamp)==null?void 0:f.split(" "))==null?void 0:N.slice(1,4))==null?void 0:E.join(" ")),1)])]}),content:p(e=>{var l;return[i(v,{style:_(`background-color:${e.item.color}`)},{default:p(()=>[t("p",Bt,[t("b",null,n(e.item.status),1)])]),_:2},1032,["style"]),At,e.item.responsible_name?(a(),o("p",Gt,[Mt,m(" "+n((l=e.item.responsible_name)==null?void 0:l.toLowerCase()),1)])):c("",!0),e.item.value?(a(),o("p",Qt,[m("Le costo a la empresa "),t("b",null,n(x(Ke)(e.item.value)),1)])):c("",!0),e.item.order_id?(a(),o("p",Ht,[m("Orden entregada "),t("b",null,n(e.item.order_id),1)])):c("",!0),e.item.notes?(a(),o("p",Xt,[Yt,m(" "+n(e.item.notes),1)])):c("",!0),Kt,Jt]}),_:1},8,["value"])])]),Wt,i($,{modelValue:V.value,"onUpdate:modelValue":s[1]||(s[1]=e=>V.value=e),options:we.value.filter(e=>e.id!=2),optionLabel:"name",optionValue:"id"},null,8,["modelValue","options"]),V.value?(a(),o("div",Zt,[V.value==4||V.value==7?(a(),o("div",es,[ts,i(X,{binary:"",modelValue:K.value,"onUpdate:modelValue":s[2]||(s[2]=e=>K.value=e)},null,8,["modelValue"])])):c("",!0),V.value==4||V.value==7?(a(),o("div",ss,[ls,i(X,{modelValue:H.value,"onUpdate:modelValue":s[3]||(s[3]=e=>H.value=e),binary:""},null,8,["modelValue"])])):c("",!0),(V.value==4||V.value==7)&&H.value?(a(),o("div",as,[os,i(h,{modelValue:oe.value,"onUpdate:modelValue":s[4]||(s[4]=e=>oe.value=e),style:{width:"100%"}},null,8,["modelValue"])])):c("",!0),(V.value==4||V.value==7)&&K.value||H.value?(a(),o("div",ns,[rs,i(h,{modelValue:L.value,"onUpdate:modelValue":s[5]||(s[5]=e=>L.value=e),style:{width:"100%"}},null,8,["modelValue"])])):c("",!0),(V.value==4||V.value==7)&&H.value||K.value?(a(),o("div",is,[us,i(y,{modelValue:se.value,"onUpdate:modelValue":s[6]||(s[6]=e=>se.value=e),style:{width:"100%"}},null,8,["modelValue"])])):c("",!0),t("div",null,[ds,i(S,{modelValue:ee.value,"onUpdate:modelValue":s[7]||(s[7]=e=>ee.value=e),rows:"5",style:{resize:"none",width:"100%"}},null,8,["modelValue"])]),t("h6",cs,[m("Recuerde que esta firmando como "),t("b",null,n(x(g).rawUserData.name),1),m(" y por ende se hace responsable, "),ms])])):c("",!0)])]),_:1},8,["visible","header"]),t("div",_s,[t("nav",ys,[t("ul",vs,[(a(!0),o(G,null,J(ge.value,e=>(a(),o("li",hs,[i(v,{style:_([`background-color:${e.color}`,{height:"1.3rem","aspect-ratio":"1 / 1","border-radius":"50%"}])},null,8,["style"]),m(),i(w,{onClick:()=>{U.value=e,x(g).currentSection_pqr=te.value[0]},class:Pe(["nav_bar--buttons-button p-2",e.id==U.value.id?"nav_bar--buttons-button-selected":""]),label:e.name},null,8,["onClick","class","label"])]))),128)),t("li",bs,[i(v,{style:_(["background-color:#c55a11",{height:"1.3rem","aspect-ratio":"1 / 1","border-radius":"50%"}])}),m(),i(w,{onClick:s[9]||(s[9]=()=>{U.value={id:60,name:"Filtradas",color:"#c55a11",exist:!0},x(g).currentSection_pqr=te.value[0]}),class:Pe(["nav_bar--buttons-button p-2",U.value.id==60?"nav_bar--buttons-button-selected":""]),label:"Filtradas"},null,8,["class"])])])]),t("div",fs,[x(g).currentSection_pqr.x!=0?(a(),o("div",{key:0,class:"my-0 px-0",style:_([x(g).currentSection_pqr.x!=0?"opacity:1":"opacity:0",{display:"flex",transition:"all ease .5s","align-items":"end",gap:"1rem"}])},[xs,i(q,{style:{"max-width":"7.5rem"},disabled:x(g).currentSection_pqr.x==0,modelValue:M.value,"onUpdate:modelValue":s[10]||(s[10]=e=>M.value=e),dateFormat:"dd-mm-yy"},null,8,["disabled","modelValue"]),gs,i(q,{style:{"max-width":"7.5rem"},disabled:!M.value||x(g).currentSection_pqr.x==0,modelValue:Y.value,"onUpdate:modelValue":s[11]||(s[11]=e=>Y.value=e),dateFormat:"dd-mm-yy"},null,8,["disabled","modelValue"]),x(g).currentSection_pqr.x==-200?(a(),o(G,{key:0},[ws,i(B,{style:{"max-width":"17rem","min-width":"15rem"},options:ue.value.filter(e=>e.show_on_web||e.site_id==17||e.site_id==18),optionLabel:"site_name",modelValue:de.value,"onUpdate:modelValue":s[12]||(s[12]=e=>de.value=e),placeholder:"SEDES"},null,8,["options","modelValue"])],64)):c("",!0),i(w,{style:{"min-width":"max-content"},disabled:x(g).currentSection_pqr.x==0,onClick:s[13]||(s[13]=e=>Ue(M.value,Y.value)),severity:"help",label:"Buscar",icon:"pi pi-search"},null,8,["disabled"])],4)):c("",!0),t("div",ks,[Vs,t("div",null,[i($,{style:{width:"10rem"},optionLabel:"name",placeholder:"Avanzado",modelValue:x(g).currentSection_pqr,"onUpdate:modelValue":s[14]||(s[14]=e=>x(g).currentSection_pqr=e),options:te.value},null,8,["modelValue","options"])]),i(w,{onClick:s[15]||(s[15]=e=>x(Fe).visible_add_pqr=!0),icon:"pi pi-plus",label:"Nueva PQR",severity:"help"}),t("div",Ss,[i(w,{onClick:Ee,label:"Descargar PQRs como Excel",icon:"pi pi-file-excel",severity:"success",class:"p-button-sm"})])])]),Cs,t("div",qs,[t("div",Ts,[i(P,{style:_([`transform:translateX(${x(g).currentSection_pqr.x}%);transition: .5s all ease;`,{width:"100%"}]),paginator:!0,rows:15,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",currentPageReportTemplate:"Mostrando {first} a {last} de {totalRecords} solicitudes",rowsPerPageOptions:[5,10,25,100],scrollable:"",showGridlines:"",stripedRows:"",class:"col-12 p-2",value:((qe=U.value)==null?void 0:qe.name)==="Filtradas"?Q.value.filter(e=>me.value.includes(e.pqr_request_id)):Q.value.filter(e=>{var l,f;return((l=e.current_status)==null?void 0:l.status)===((f=U.value)==null?void 0:f.name)}),tableStyle:"min-width: 50rem;",filters:z.value},{header:p(()=>[t("div",$s,[t("h4",Rs,[Ds,m(),t("b",js,[m("PQRS "),t("b",null,n(x(xe).params.section),1)])]),t("div",Ps,[i(y,{class:"",modelValue:z.value.global.value,"onUpdate:modelValue":s[16]||(s[16]=e=>z.value.global.value=e),placeholder:"Buscar Solicitud..."},null,8,["modelValue"])])])]),default:p(()=>[(a(!0),o(G,null,J(Ie.value,e=>(a(),W(re,{header:e.columnName,style:_(`min-width:${e.size}`),field:e.columnValue,class:"my-0 py-2"},{body:p(l=>{var f,N,E,Te,$e,Re;return[e.columnType=="date"?(a(),o("h6",Ns,n(((f=l.data[e.columnValue])==null?void 0:f.split("-").reverse().join("-"))||"---------"),1)):c("",!0),e.columnType=="responsible_name"?(a(),o("h6",Es,n(((Te=(E=(N=l.data)==null?void 0:N.status_history)==null?void 0:E[0])==null?void 0:Te.responsible_name)||"No se ha interactuado"),1)):c("",!0),e.columnType=="max-content"?(a(),o("h6",{key:2,style:_(e.columnType=="max-content"?"min-width: max-content":""),class:"m-0 p-0"},n(l.data[e.columnValue]||"---------"),5)):c("",!0),e.columnType=="order_id"?(a(),o("h6",Os,n(l.data[e.columnValue]||"---------"),1)):c("",!0),e.columnType=="other"?(a(),o("h6",Fs,n(l.data[e.columnValue]||"---------"),1)):c("",!0),e.columnType=="rating"?(a(),o("h6",Us,[l.data[e.columnValue]>0?(a(),W(ne,{key:0,cancel:!1,readonly:"",modelValue:l.data[e.columnValue],"onUpdate:modelValue":ie=>l.data[e.columnValue]=ie},null,8,["modelValue","onUpdate:modelValue"])):(a(),o("span",zs," ------------"))])):c("",!0),e.columnType=="money"?(a(),o("h6",{key:6,style:_(e.columnType=="max-content"?"min-width: max-content":""),class:"m-0 p-0"},n(d.formatoPesosColombianos(l.data[e.columnValue])||"---------"),5)):c("",!0),e.columnValue=="current_status"?(a(),o("div",Ls,[i(v,{style:_([{color:"white","text-align":"center"},`background-color:${($e=l.data[e.columnValue])==null?void 0:$e.color}`])},{default:p(()=>{var ie;return[m(n(((ie=l.data[e.columnValue])==null?void 0:ie.status)||"---------"),1)]}),_:2},1032,["style"]),t("b",null,n(((Re=l.data[e.columnValue])==null?void 0:Re.timestamp)||"---------"),1)])):c("",!0),e.columnValue=="channel"?(a(),o("div",Is,[i(v,{style:_([{color:"white","text-align":"center"},`background-color:${l.data.channel_color}`])},{default:p(()=>[m(n(l.data[e.columnValue]||"---------"),1)]),_:2},1032,["style"])])):c("",!0),e.columnValue=="tag_name"?(a(),o("div",Bs,[i(v,{style:_([{color:"white","text-align":"center"},`background-color:${l.data.tag_color}`])},{default:p(()=>[m(n(l.data[e.columnValue]),1)]),_:2},1032,["style"])])):c("",!0),e.columnValue=="restaurant"?(a(),o("div",As,[i(v,{style:_([{color:"white"},`background-color:${l.data.restaurant_color}`])},{default:p(()=>[m(n(l.data[e.columnValue]),1)]),_:2},1032,["style"])])):c("",!0)]}),_:2},1032,["header","style","field"]))),256)),i(A,{class:"my-0 py-0 px-0 mx-0",style:{},frozen:"",alignFrozen:"right",header:"Interactuar"},{body:p(e=>[t("div",Gs,[i(w,{onClick:l=>ze(e.data),label:"Gestionar",severity:"help",icon:"pi pi-check p-0",class:"my-0 py-2"},null,8,["onClick"])])]),_:1})]),_:1},8,["style","value","filters"]),t("div",{style:_([`transform:translateX(${x(g).currentSection_pqr.x}%);transition: .5s all ease;`,{"min-width":"100%",overflow:"auto",margin:"0 auto",height:"min-content"}])},[t("div",Ms,[t("h4",Qs,[t("b",null,[m(" REPORTE POR ESTADO "+n(R(D.value).split("-").reverse().join("-"))+" ",1),Hs,m(" "+n(R(T.value).split("-").reverse().join("-")),1)])]),i(P,{rows:15,style:{"max-width":"96vw","box-shadow":"0 0 1rem #00000030","border-radius":".5rem"},scrollable:"",showGridlines:"",stripedRows:"",class:"col-12 m-auto my-4",value:_e.value,tableStyle:"min-width: 50rem;",filters:z.value},{header:p(()=>[]),default:p(()=>[(a(!0),o(G,null,J(ye.value,e=>(a(),W(A,{class:"p-0 py-1 text-center",style:{"max-width":"min-content","text-transform":"uppercase"},header:e},{body:p(l=>[t("div",null,[l.data.sede.valor=="total"?(a(),o("h6",{key:0,onClick:f=>I(l.data[e].pqrs),class:"m-0 py-1 px-2 text-xl valor2",style:_([{"text-align":"center","background-color":"var(--blue-100)"},e!="sede"?"justify-content: center;":"justify-content: start;"])},[t("b",Ys,n(l.data[e].valor),1)],12,Xs)):(a(),o("h6",{key:1,onClick:f=>I(l.data[e].pqrs),class:"m-0 py-1 px-2 valor",style:_([{"justify-content":"center",cursor:"pointer"},e!="sede"?"justify-content: start    ;":"justify-content: start;"])},n(l.data[e].valor),13,Ks))])]),_:2},1032,["header"]))),256))]),_:1},8,["value","filters"])]),t("div",Js,[t("h4",Ws,[t("b",null,[m(" REPORTE POR RESPONSABLES "+n(R(D.value).split("-").reverse().join("-"))+" ",1),Zs,m(" "+n(R(T.value).split("-").reverse().join("-")),1)])]),i(P,{rows:15,style:{"max-width":"96vw","box-shadow":"0 0 1rem #00000030","border-radius":".5rem"},scrollable:"",showGridlines:"",stripedRows:"",class:"col-12 m-auto my-4",value:be.value,tableStyle:"min-width: 50rem;",filters:z.value},{header:p(()=>[]),default:p(()=>[(a(!0),o(G,null,J(fe.value,e=>(a(),W(A,{class:"p-1 text-center",style:{"max-width":"min-content","text-transform":"uppercase"},header:e},{body:p(l=>[t("div",null,[l.data.responsible_name=="total"?(a(),o("h6",{key:0,onClick:f=>I(l.data[e].pqrs),class:"m-0 py-1 px-2 text-xl valor2",style:_([{display:"flex","text-align":"center","background-color":"var(--blue-100)"},e!="responsible_name"?"justify-content: center;":"justify-content: start;"])},[t("b",null,n(l.data[e].valor),1)],12,el)):l.data.responsible_name=="pendiente"?(a(),o("h6",{key:1,onClick:f=>I(l.data[e].pqrs),class:"m-0 py-1 px-2 valor",style:_([{display:"flex","text-align":"center",color:"var(--red-900)","background-color":"var(--red-100)"},e!="responsible_name"?"justify-content: center;":"justify-content: start;"])},[t("b",null,n(l.data[e].valor),1)],12,tl)):(a(),o("h6",{key:2,onClick:f=>I(l.data[e].pqrs),class:"m-0 py-1 px-2 valor",style:_([{display:"flex","text-align":"start"},e!="responsible_name"?"justify-content: center;":"justify-content: start;"])},n(l.data[e].valor),13,sl))])]),_:2},1032,["header"]))),256))]),_:1},8,["value","filters"])]),t("div",ll,[t("h4",al,[t("b",null,[m(" REPORTE POR TIPOS "+n(R(D.value).split("-").reverse().join("-"))+" ",1),ol,m(" "+n(R(T.value).split("-").reverse().join("-")),1)])]),i(P,{rows:15,style:{"max-width":"96vw","box-shadow":"0 0 1rem #00000030","border-radius":".2rem","background-color":"white"},scrollable:"",showGridlines:"",stripedRows:"",class:"col-12 m-auto my-4",value:ve.value,tableStyle:"min-width: 50rem;",filters:z.value},{header:p(()=>[]),default:p(()=>[(a(!0),o(G,null,J(he.value,e=>(a(),W(A,{class:"p-0 text-center",style:{"max-width":"min-content","text-transform":"uppercase"},header:e},{body:p(l=>[t("div",null,[l.data.sede.valor=="total"?(a(),o("h6",{key:0,onClick:f=>I(l.data[e].pqrs),class:"m-0 py-1 px-2 text-xl valor2",style:_([{"text-align":"center","background-color":"var(--blue-100)"},e!="sede"?"justify-content: center;":"justify-content: start;"])},[t("b",rl,n(l.data[e].valor),1)],12,nl)):(a(),o("h6",{key:1,onClick:f=>I(l.data[e].pqrs),class:"m-0 py-1 px-2 valor",style:_([{"justify-content":"center",cursor:"pointer"},e!="sede"?"justify-content: start    ;":"justify-content: start;"])},n(l.data[e].valor),13,il))])]),_:2},1032,["header"]))),256))]),_:1},8,["value","filters"])]),ul],4),t("div",{class:"p-3",style:_([`transform:translateX(${x(g).currentSection_pqr.x}%);transition: .5s all ease;`,{"min-width":"100%",overflow:"auto",height:"min-content",margin:"0 auto"}])},[t("div",dl,[cl,i($,{modelValue:ce.value,"onUpdate:modelValue":s[17]||(s[17]=e=>ce.value=e),options:Oe,optionLabel:"name"},null,8,["modelValue"])]),i(Ae,{type:ce.value.value,data:pe.value,class:"h-[10rem] p-2 h-50",style:{width:"100%",margin:"0 auto","max-width":"1200px","box-shadow":"0 0 10px rgba(0, 0, 0, .2)","border-radius":".5rem"}},null,8,["type","data"]),ml],4)])]),i(tt,{onReload:s[18]||(s[18]=e=>ae())})])],64)}}},wl=Ge(pl,[["__scopeId","data-v-09f7a89b"]]);export{wl as default};
