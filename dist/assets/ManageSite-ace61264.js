import{_ as j,j as _,cm as z,G as D,I as F,k as K,H as U,r as q,o as i,c as o,a as t,t as g,u as m,e as p,F as h,b as x,i as I,B as $,a6 as A,cn as C,d as H,q as G,x as T,U as J}from"./index-9852904f.js";import{s as V}from"./siteService-85c66ecb.js";const O="/images/files.jpg";const B=l=>(G("data-v-ab0b3d14"),l=l(),T(),l),P={class:"mx-auto md:p-5 px-2 main-container"},Q={class:"text-4xl text-center col-12 m-auto p-0 header"},W=B(()=>t("div",{class:"header-bar-left"},null,-1)),X={class:"header-middle"},Y={class:"p-0 header-title"},Z=B(()=>t("div",{class:"header-bar-right"},null,-1)),ee={class:"search-wrap"},te={class:"grid"},se={class:"mb-5 m-auto col-12 sites-container"},ae={class:"p-3 sites-list",role:"list","aria-label":"Lista de sedes"},ie=["aria-pressed","onClick","onKeydown"],oe=["src","alt"],re={class:"site-name"},ne={key:0,class:"empty-sites"},ce={class:"m-auto p-0 col-12 router-view-container"},de={key:0,class:"col-12 background-image",src:O,alt:"Archivos",loading:"lazy",decoding:"async"},le={__name:"ManageSite",setup(l){const r=_([]),v=_(!0),c=_(""),n=z(),u=D(),E=_({}),S=F(()=>{var a;if(!((a=c.value)!=null&&a.trim()))return r.value;const e=c.value.toLowerCase();return r.value.filter(d=>String(d.site_name||"").toLowerCase().includes(e))}),y=e=>String(u.params.site_id)===String(e),R=e=>`${J}/read-product-image/96/site-${e}`,L=e=>{e.target.src="/images/files.jpg"},M=async()=>{if(!r.value.length)return;u.params.site_id||await $.replace(`/site/${r.value[0].site_id}/documentos`)},f=async e=>{var a;if(e){if(!((a=n.currentSite)!=null&&a.site_id)||String(n.currentSite.site_id)!==String(e)){const d=await V.getSiteById(e);n.setSite(d)}E.value=n.currentSite}},w=async e=>{n.setSite(e),await $.push(`/site/${e.site_id}/documentos`)},N=(e,a)=>{(e.key==="Enter"||e.key===" ")&&(e.preventDefault(),w(a))};return K(async()=>{var e;v.value=!0;try{r.value=await V.getSites(),await M(),await f(u.params.site_id||((e=r.value[0])==null?void 0:e.site_id))}finally{v.value=!1}}),U(()=>u.params.site_id,async e=>{await f(e)}),(e,a)=>{var b;const d=q("RouterView");return i(),o("div",P,[t("div",Q,[W,t("div",X,[t("p",Y,g(((b=m(n).currentSite)==null?void 0:b.site_name)||"SEDE"),1)]),Z]),t("div",ee,[p(m(A),{class:"w-full md:w-30rem",modelValue:c.value,"onUpdate:modelValue":a[0]||(a[0]=s=>c.value=s),placeholder:"Buscar sede..."},null,8,["modelValue"])]),t("div",te,[t("div",se,[t("div",ae,[v.value?(i(),o(h,{key:0},x(6,s=>t("div",{key:s,class:"site-item"},[p(m(C),{height:"4rem",width:"8rem",class:"mb-2 border-round"}),p(m(C),{height:"1.2rem",width:"6rem",class:"border-round"})])),64)):(i(),o(h,{key:1},[(i(!0),o(h,null,x(S.value,s=>(i(),o("div",{class:H(["p-1 site-item",{"site-item-active":y(s.site_id)}]),key:s.site_id,role:"listitem"},[t("div",{class:"site-link",tabindex:"0",role:"button","aria-pressed":y(s.site_id),onClick:k=>w(s),onKeydown:k=>N(k,s)},[t("img",{class:"site-image",src:R(s.site_id),loading:"lazy",decoding:"async",alt:`Imagen de ${s.site_name}`,onError:L},null,40,oe),t("p",re,g(s.site_name),1)],40,ie)],2))),128)),S.value.length?I("",!0):(i(),o("div",ne," No se encontraron sedes para “"+g(c.value)+"”. ",1))],64))])]),t("div",ce,[!e.$route.path.includes("recibos")&&!e.$route.path.includes("documentos")?(i(),o("img",de)):I("",!0),p(d)])])])}}},me=j(le,[["__scopeId","data-v-ab0b3d14"]]);export{me as default};
