import{_ as H}from"./fire-bbb69f2b.js";import{c as k}from"./contestService-5fae5eac.js";import{_ as J,r as p,l as X,h as K,a as P,o as s,c as i,d as y,w as f,b as t,F as C,e as I,s as L,u as c,U as j,q as _,t as o,f as S,m as v,p as Q,g as Y}from"./index-c49b58e1.js";import{f as R}from"./formatDate-262296cf.js";import{f as T}from"./formatoPesos-374ef498.js";import{f as Z}from"./format-36e25dfb.js";import{e as ee}from"./es-e43b915c.js";const n=D=>(Q("data-v-daf0c6a2"),D=D(),Y(),D),te={class:"py-2",style:{display:"flex",gap:"1rem","overflow-x":"auto",width:"50rem"}},le={style:{display:"flex","flex-direction":"column",gap:"1rem","justify-content":"end","align-items":"center"}},se=n(()=>t("img",{style:{width:"2rem","aspect-ratio":"1 / 1","border-radius":"50%",border:"3px solid yellow"},src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRC-buhde5C1FxyNtkRvkUTCe6gq73eLIv_JOycF3WMvg&s",alt:""},null,-1)),ie={class:"py-2",style:{"overflow-x":"auto",display:"flex","flex-direction":"column",width:"20rem"}},oe=["src"],ae=n(()=>t("b",null,"Nombre:",-1)),ne=n(()=>t("b",null,"Participaciones:",-1)),re={style:{"font-weight":"bold"}},de=n(()=>t("span",{style:{"font-weight":"bold"}},"Fecha:",-1)),ce=n(()=>t("p",{class:"p-0 m-0 mt-3"},[t("b",null,"Instrucciones:")],-1)),ue={class:"px-0 mx-0"},pe=["src"],_e={key:1},ve={key:2},ye={key:3},me={class:"py-3",style:{display:"flex",width:"100%","justify-content":"space-between",gap:"1rem"}},he={style:{height:"60vh"}},fe=n(()=>t("b",null,"MIS EVIDENCIAS ",-1)),we={class:"p-3",style:{display:"flex","flex-direction":"column",gap:".5rem"}},ge={style:{},class:""},be={class:"p-0 m-0"},xe=["href"],ke={key:1,style:{color:"var(--primary-color)"}},Ce={key:2,style:{color:"var(--primary-color)"}},De=["src"],Ue=n(()=>t("div",{style:{position:"fixed",left:"-2rem","z-index":"-1",filter:"blur(3px)"},class:"col-12"},[t("img",{style:{width:"120%",left:"0rem",height:"100vh"},src:"https://backend.salchimonster.com/read-product-image/600/site-4",alt:""})],-1)),$e={class:"container mx-auto p-2",style:{"max-width":"700px","z-index":"99"}},Pe=n(()=>t("p",{class:"text-white text-4xl text-center",style:{"font-weight":"bold"}}," PROXIMOS CONCURSOS",-1)),Ie={class:"container_contests",style:{display:"flex","flex-direction":"column",gap:"2rem"}},Se={class:"container_contest_item p-2",style:{display:"flex","flex-direction":"column",gap:"1rem","background-color":"#00000090",border:"3px solid var(--primary-color)","border-radius":"0.5rem"}},Ve={class:"col-12 p-0",style:{display:"flex","flex-direction":"column"}},Fe={class:"gridd",style:{display:"flex",gap:"1rem"}},Me=n(()=>t("img",{class:"p-0",style:{width:"30%","aspect-ratio":"3 / 3","object-fit":"cover"},src:"https://www.mundodeportivo.com/urbantecno/hero/2022/08/Como-anadirle-subtitulos-a-un-video-de-TikTok.jpg?width=1200",alt:""},null,-1)),Ee={class:"m-0 text-2xl",style:{"font-weight":"bold",color:"#fff"}},Ne={class:"m-0",style:{color:"#fff"}},je=n(()=>t("img",{src:"",alt:""},null,-1)),Re={class:"text-white"},Te=n(()=>t("span",{style:{color:"var(--primary-color)"}},[t("b",null,"Desde"),_(":")],-1)),ze=n(()=>t("br",null,null,-1)),Ae=n(()=>t("span",{style:{color:"var(--primary-color)"}},[t("b",null,"Hasta"),_(":")],-1)),Be={class:"text-white text-xl py-0 my-0"},Le={class:"text-2xl",style:{color:"var(--primary-color)","font-weight":"bold"}},Oe={style:{display:"flex",gap:"1rem"}},qe={style:{"justify-content":"center","overflow-x":"auto",width:"100%",gap:"0rem",display:"flex","flex-direction":"column"},class:"px-0 overflow pb-1",c:""},We=n(()=>t("div",{style:{display:"flex","justify-content":"end","align-items":"center"}},null,-1)),Ge={class:"py-2",style:{display:"flex",gap:"1rem","overflow-x":"auto",width:"100%"}},He={style:{display:"flex","flex-direction":"column",gap:"1rem","justify-content":"end","align-items":"center",width:"100%",position:"relative"}},Je={key:0,class:"text-white pt-4 my-0"},Xe={key:1,class:"text-white pt-4 my-0"},Ke=["onClick","src"],Qe={key:0,style:{width:"100%",position:"absolute","z-index":"10",bottom:"0"},src:H,alt:""},Ye=n(()=>t("div",{style:{display:"flex","flex-direction":"column",gap:".5rem","justify-content":"end",height:"100%"}},null,-1)),Ze={__name:"FutureConcursos",setup(D){const w=p({showMyEvidenceDialog:!1,showParticipantDetail:!1}),g=p({}),V=p({}),F=p([]),z=p(!1),M=p([]),b=p(null),O=()=>{const a=x.value.files[0];a&&(b.value=URL.createObjectURL(a))},q=(a,l)=>{g.value=a,V.value=l,w.value.showParticipantDetail=!0},m=p(""),E=X(),U=p(!1),x=p(null),A=a=>{x.value=null,U.value=!0,u.value=a},u=p({}),W=async(a,l,r)=>{if(a===null){alert("debe cargar una evidaencia");return}if(r==3&&!a.includes(".")){alert("debe ser una URL valida");return}const h={evidence_type_id:r,evidence_entry:`${a}`||"0",contest_id:l},N={participant_id:E.rawUserData.id,contest_id:l},$=await k.sendEvidence({evidence:h,Contest_entry:N});if(r===1){if(!x.value.files.length){alert("Por favor, selecciona una imagen.");return}const e=x.value.files[0];await k.sendContestImage(E.rawUserData.id,l,$,e)}U.value=!1,m.value="",F.value=await k.getAllContest()},B=async(a,l)=>{M.value=[],w.value.showMyEvidenceDialog=!0,M.value=await k.getParticipationByUserId(a,l)},G=a=>{const l=new Date(a).getDate()-new Date().getDate();let r="";switch(l){case 1:r="Finaliza acaba Manana";break;case 2:r="Finaliza pasado Manana";break;default:r=`Finaliza en  ${l} dias`;break}return r};return K(async()=>{F.value=await k.getAllContest()}),(a,l)=>{const r=P("Dialog"),h=P("Button"),N=P("inputNumber"),$=P("inputText");return s(),i(C,null,[y(r,{class:"p-2",style:{"max-width":"100vw"},modal:"",visible:z.value,"onUpdate:visible":l[0]||(l[0]=e=>z.value=e)},{default:f(()=>[t("div",te,[(s(),i(C,null,I([1,2,3,4,5,6,7,8,9,0,4,5,6,7],(e,d)=>t("div",le,[se,t("div",{class:"py-2",style:L([`height:${(12-d+1)/2}rem`,{width:"2rem","background-color":"var(--primary-color)","border-radius":"3rem 3rem 0 0"}])},null,4)])),64))])]),_:1},8,["visible"]),y(r,{class:"p-2",style:{"max-width":"min-content"},modal:"",visible:w.value.showParticipantDetail,"onUpdate:visible":l[2]||(l[2]=e=>w.value.showParticipantDetail=e)},{default:f(()=>[t("div",ie,[t("img",{style:{width:"100%","border-radius":".5rem","aspect-ratio":"1 / 1","object-fit":"cover"},src:`${c(j)}/read-product-image/600/employer-${g.value.dni}`,alt:""},null,8,oe),t("p",null,[ae,_(" "+o(g.value.name),1)]),t("p",null,[ne,_(" "+o(`${V.value.evidence_type_id==4?c(T)(g.value.total_entries):g.value.total_entries}`),1)]),y(h,{onClick:l[1]||(l[1]=e=>B(V.value.id,g.value.employer_id)),severity:"help",size:"small",label:"VER PARTICIPACIONES"})])]),_:1},8,["visible"]),y(r,{close:b.value=null,class:"p-2",header:"Cargar Evidencia",style:{width:"30rem"},modal:"",visible:U.value,"onUpdate:visible":l[8]||(l[8]=e=>U.value=e)},{footer:f(()=>[t("div",me,[u.value.evidence_type_id==1?(s(),S(h,{key:0,class:"m-0",severity:b.value?"warning":"help",onClick:l[6]||(l[6]=e=>x.value.click()),style:{width:"100%"},label:b.value?"Cambiar archivo":"Subir Archivo"},null,8,["severity","label"])):v("",!0),y(h,{severity:"help",class:"m-0",style:{width:"100%"},label:"Guardar",onClick:l[7]||(l[7]=e=>W(m.value,u.value.id,u.value.evidence_type_id))})])]),default:f(()=>[t("div",null,[t("p",re,o(u.value.name),1),t("span",null,[de,_(" "+o(c(Z)(new Date,"dd-MMMM-yyyy",{locale:c(ee)})),1)]),ce,t("p",ue,o(u.value.instructions),1),u.value.evidence_type_id==1&&b.value?(s(),i("img",{key:0,class:"",style:{width:"100%"},src:b.value,alt:""},null,8,pe)):v("",!0),u.value.evidence_type_id==4?(s(),i("div",_e,[y(N,{modelValue:m.value,"onUpdate:modelValue":l[3]||(l[3]=e=>m.value=e),style:{width:"100%"}},null,8,["modelValue"])])):v("",!0),u.value.contest_winner_type_id==1&&u.value.evidence_type_id==2?(s(),i("div",ve,[y($,{modelValue:m.value,"onUpdate:modelValue":l[4]||(l[4]=e=>m.value=e),style:{width:"100%"}},null,8,["modelValue"])])):v("",!0),u.value.evidence_type_id==3?(s(),i("div",ye,[y($,{modelValue:m.value,"onUpdate:modelValue":l[5]||(l[5]=e=>m.value=e),style:{width:"100%"}},null,8,["modelValue"])])):v("",!0),t("input",{onChange:O,ref_key:"inputFile",ref:x,style:{display:"none"},type:"file",accept:"image/*"},null,544)])]),_:1},8,["close","visible"]),y(r,{class:"p-2",header:"Listado de evidencias",style:{width:"30rem","background-color":"#fff"},modal:"",visible:w.value.showMyEvidenceDialog,"onUpdate:visible":l[9]||(l[9]=e=>w.value.showMyEvidenceDialog=e)},{default:f(()=>[t("div",he,[fe,t("ol",we,[(s(!0),i(C,null,I(M.value,e=>(s(),i("li",ge,[t("p",be,[t("b",null,o(c(R)(e.timestamp)),1)]),e.evidence_type_id==3&&(e.evidence_entry.startsWith("http://")||e.evidence_entry.startsWith("https://"))?(s(),i("a",{key:0,style:{color:"var(--primary-color)"},href:e.evidence_entry},o(e.evidence_entry),9,xe)):e.evidence_type_id==3||e.evidence_type_id==2?(s(),i("p",ke,o(e.evidence_entry),1)):v("",!0),e.evidence_type_id==4?(s(),i("span",Ce,o(c(T)(e.evidence_entry)),1)):v("",!0),e.evidence_type_id==1?(s(),i("img",{key:3,style:{width:"100%","border-radius":".5rem"},src:`${c(j)}${e.evidence_entry}`,alt:""},null,8,De)):v("",!0)]))),256))])])]),_:1},8,["visible"]),Ue,t("div",$e,[Pe,t("div",Ie,[(s(!0),i(C,null,I(F.value.filter(e=>!e.started),e=>(s(),i("div",Se,[t("div",Ve,[t("div",Fe,[Me,t("div",null,[t("p",Ee,o(e.name),1),t("p",Ne,o(e.description),1),je,t("p",Re,[Te,_(" "+o(c(R)(e.start_date))+" ",1),ze,_(),Ae,_(" "+o(c(R)(e.end_date)),1)]),t("p",Be,[t("b",null,o(e.rbq.length)+" Personas participando",1)]),t("p",Le,o(G(e.end_date)),1),t("div",Oe,[e.entry_exists?(s(),S(h,{key:1,onClick:d=>A(e),severity:"help",style:{"background-color":"var(--primary-color)"}},{default:f(()=>[_("Subir evidencia")]),_:2},1032,["onClick"])):(s(),S(h,{key:0,onClick:d=>A(e),severity:"help",style:{"background-color":"var(--primary-color)"}},{default:f(()=>[_("Participar")]),_:2},1032,["onClick"])),e.entry_exists?(s(),S(h,{key:2,onClick:d=>B(e.id,c(E).rawUserData.id),severity:"help",style:{border:"2px solid var(--primary-color)"}},{default:f(()=>[_("Mis evidencias")]),_:2},1032,["onClick"])):v("",!0)])])]),t("div",qe,[We,t("div",Ge,[(s(!0),i(C,null,I(e.rbq.filter(d=>d.total_entries),(d,et)=>(s(),i("div",He,[e.contest_winner_type_id==2?(s(),i("p",Je,o(c(T)(d.total_entries)),1)):(s(),i("p",Xe,o(d.total_entries),1)),t("img",{class:"min-user-img",onClick:tt=>q(d,e),style:{width:"100%","max-width":"5rem","background-color":"#fff","aspect-ratio":"1 / 1","border-radius":"50%","object-fit":"cover"},src:`${c(j)}/read-product-image/96/employer-${d.dni}`,alt:""},null,8,Ke),t("div",{class:"py-2",style:L([`height:${d.total_entries/e.max_entries*10}rem; width:${100/e.rbq.length}%`,{"min-width":"3rem","max-width":"5rem","background-color":"var(--primary-color)",overflow:"hidden","border-radius":"3rem 3rem 0 0",position:"relative"}])},[d.total_entries==e.max_entries?(s(),i("img",Qe)):v("",!0),Ye],4)]))),256))])])])]))),256))])])],64)}}},dt=J(Ze,[["__scopeId","data-v-daf0c6a2"]]);export{dt as default};
