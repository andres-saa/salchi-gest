import{_ as N,f as r,u as C,g as b,h as I,r as a,o as B,c as D,d as l,w as y,a as i,q as k,F as E,U as g,y as R,p as T,e as $}from"./index-de8de9e2.js";const _=c=>(T("data-v-11a69361"),c=c(),$(),c),L={class:"p-fluid"},j={class:"p-field"},q=_(()=>i("label",{for:"name"},"Nombre del Barrio",-1)),A={class:"p-field"},F=_(()=>i("label",{for:"delivery_price"},"Precio de Domicilio",-1)),O={class:"p-field"},P=_(()=>i("label",{for:"site"},"Sede",-1)),z={class:"p-field"},G=_(()=>i("label",{for:"city"},"Ciudad",-1)),J={style:{"max-width":"900px"},class:"m-auto"},M={style:{display:"flex",gap:"1rem","align-items":"center"}},H={__name:"domicilios",setup(c){const u=r([]),n=r({}),p=r(!1),s=r({neighborhood_id:0,name:"",delivery_price:0,site_id:0,city_id:0}),V=r([]);async function w(){try{if(!(await fetch(`${g}/neighborhoods`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s.value)})).ok)throw new Error("Error al crear el barrio");p.value=!1,console.log("Barrio agregado con Ã©xito")}catch(o){console.error("Error al agregar el barrio:",o)}}const m=C();b(n,(o,e)=>{o&&o.site_id!==void 0&&R.push(`/domicilios/${o.site_id}`)},{deep:!0}),b(()=>m.path,()=>{const o=m.params.site_id;f().then(e=>{u.value=e,n.value=e.filter(d=>d.site_id==o)[0]})});const f=async()=>{try{const o=await fetch(`${g}/sites`);if(o.ok)return await o.json()}catch{}};return I(async()=>{const o=m.params.site_id;f().then(e=>{u.value=e,n.value=e.filter(d=>d.site_id==o)[0]})}),(o,e)=>{const d=a("InputText"),S=a("InputNumber"),v=a("Dropdown"),h=a("Button"),x=a("Dialog"),U=a("RouterView");return B(),D(E,null,[l(x,{visible:p.value,"onUpdate:visible":e[5]||(e[5]=t=>p.value=t),header:"Agregar Nuevo Barrio",modal:!0,closable:!1},{footer:y(()=>[l(h,{label:"Cancelar",icon:"pi pi-times",onClick:e[4]||(e[4]=t=>p.value=!1),class:"p-button-text"}),l(h,{label:"Guardar",icon:"pi pi-check",onClick:w,class:"p-button-text"})]),default:y(()=>[i("div",L,[i("div",j,[q,l(d,{id:"name",modelValue:s.value.name,"onUpdate:modelValue":e[0]||(e[0]=t=>s.value.name=t)},null,8,["modelValue"])]),i("div",A,[F,l(S,{id:"delivery_price",modelValue:s.value.delivery_price,"onUpdate:modelValue":e[1]||(e[1]=t=>s.value.delivery_price=t),mode:"currency",currency:"USD",locale:"en-US"},null,8,["modelValue"])]),i("div",O,[P,l(v,{id:"site",modelValue:s.value.site_id,"onUpdate:modelValue":e[2]||(e[2]=t=>s.value.site_id=t),options:u.value,optionLabel:"site_name",placeholder:"Selecciona una Sede"},null,8,["modelValue","options"])]),i("div",z,[G,l(v,{id:"city",modelValue:s.value.city_id,"onUpdate:modelValue":e[3]||(e[3]=t=>s.value.city_id=t),options:V.value,optionLabel:"name",placeholder:"Selecciona una Ciudad"},null,8,["modelValue","options"])])])]),_:1},8,["visible"]),i("div",J,[i("div",M,[l(v,{style:{width:"100%","min-width":"20rem"},filter:"",modelValue:n.value,"onUpdate:modelValue":e[6]||(e[6]=t=>n.value=t),options:u.value,placeholder:"SEDE",optionLabel:"site_name",required:"true",class:k({"p-invalid":o.submitted&&!o.currentUser.position})},null,8,["modelValue","options","class"])]),l(U)])],64)}}},Q=N(H,[["__scopeId","data-v-11a69361"]]);export{Q as default};
