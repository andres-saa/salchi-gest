import{p as S}from"./ProductService-419de875.js";import{_ as j,r as f,y as C,a as y,o as a,c as r,b as t,d as c,B as D,C as T,n as B,m as V,t as l,u as v,v as E,h as I,k as b,q as L,F as k,e as M,D as N}from"./index-80a7e175.js";import{f as F}from"./formatoPesos-87dbb5ee.js";import{u as z}from"./productStore-419d65d3.js";import{u as q}from"./site-2cfdb8c2.js";const O={class:"container p-shadow col-12 shadow-2 p-3",style:{"border-radius":"0.5rem","background-color":"white",height:"100%",position:"relative"}},R={style:{display:"flex",position:"absolute",right:"-1rem",top:"-1rem",gap:"0.2rem","z-index":"9"}},U={class:"imagen",style:{overflow:"hidden"}},W=["src"],A={key:0,style:{width:"100%",display:"flex","justify-content":"center","align-items":"center","aspect-ratio":"1 / 1","background-color":"rgb(255, 255, 255)","object-fit":"contain","border-radius":"0.5rem"}},G={class:"texto",style:{}},H={style:{display:"flex",gap:"1rem",height:"100%","flex-direction":"column","justify-content":"space-between"}},J={style:{display:"grid","grid-template-columns":"auto auto",width:"100%","justify-content":"space-between","align-items":"center"}},K={style:{"text-transform":"uppercase"}},Q={style:{display:"flex","justify-content":"space-between","align-items":"c"}},X={style:{display:"flex","align-items":"center",gap:"1rem"}},Y={class:"text-xl"},Z={__name:"TarjetaMenu",props:{product:{type:Object,default:{}}},setup(x){const o=z(),e=x,n=f(!1),h=()=>{n.value=!0},d=i=>{o.visibles.dialogEditProduct=!0,o.currentProductToEdit=i},u=i=>{o.visibles.dialogDeleteProduct=!0,o.currentProductToDelete=i},p=async i=>{try{const s=await S.updateProductInstanceStatus(e.product.id,i);s&&console.log("Status updated:",s)}catch(s){console.error("Failed to update status:",s)}},m=C(()=>e.product.product_description.substring(0,100)+"...");return(i,s)=>{var w;const g=y("Button"),P=y("ProgressSpinner"),$=y("InputSwitch");return a(),r("div",O,[t("div",R,[c(g,{class:"shadow-2",onClick:s[0]||(s[0]=_=>u(e.product)),severity:"danger",style:{width:"2rem",height:"2rem",right:"0",top:"0"},rounded:"",icon:"pi pi-times"}),c(g,{class:"shadow-2",onClick:s[1]||(s[1]=_=>d(e.product)),severity:"warning",style:{"font-weight":"bold",width:"2rem",height:"2rem",right:"0",top:"0"},rounded:"",icon:"pi pi-pencil"})]),t("div",U,[D(t("img",{onLoad:h,class:B([n.value?"cargado":"sin-cargar",""]),style:{width:"100%","aspect-ratio":"1 / 1","background-color":"rgb(255, 255, 255)","object-fit":"contain","border-radius":"0.2rem"},src:`https://backend.salchimonster.com/read-product-image/300/${e.product.product_name}`,alt:""},null,42,W),[[T,n.value]]),n.value?V("",!0):(a(),r("div",A,[c(P,{style:{width:"60px",height:"60px"},strokeWidth:"8",animationDuration:".2s","aria-label":"Custom ProgressSpinner"})]))]),t("div",G,[t("div",H,[t("div",J,[t("span",null,[t("b",K,l(e.product.product_name),1)]),c(g,{class:"elipsis",text:"",style:{color:"black"},icon:"pi pi-ellipsis-v p-0 text-xl"})]),t("span",null,l((w=m.value)==null?void 0:w.toLocaleLowerCase()),1),t("div",Q,[c($,{modelValue:e.product.status,"onUpdate:modelValue":[s[2]||(s[2]=_=>e.product.status=_),s[3]||(s[3]=_=>p(e.product.status))]},null,8,["modelValue"]),t("div",X,[t("span",Y,[t("b",null,l(v(F)(e.product.price)),1)])])])])])])}}},tt=j(Z,[["__scopeId","data-v-fecd3d4e"]]),et={class:"text-center text-3xl col-12",style:{"font-weight":"bold",display:"flex",gap:"1rem","align-items":"center"}},st=t("div",{style:{width:"100%",height:"3px","background-color":"#ff6200"}},null,-1),ot={class:"text-3xl",style:{width:"min-content"}},it={style:{"min-width":"max-content"}},nt=t("div",{style:{width:"100%",height:"3px","background-color":"#ff6200"}},null,-1),at={key:0,class:"grid p-1 pb-8",style:{"max-width":"900px",margin:"auto"}},rt={key:1,style:{"font-weight":"bold"},class:"text-4xl text-center my-8 p-0"},mt={__name:"sesion",setup(x){const o=q(),e=E(),n=f([]),h=f(!1);I(async()=>{d()});const d=async()=>{let u=e.params.category_id,p=o.site.site_id;n.value=await S.getProductsByCategorySite(u,p)};return b(()=>e.params.category_id,async()=>{d()},{deep:!0}),b(()=>o.site,async()=>{o.site&&(d(),await N())},{deep:!0}),(u,p)=>(a(),r(k,null,[t("p",et,[st,t("span",ot,[t("p",it,l(v(e).params.menu_name)+" DE",1),L(" "+l(v(o).site.site_name),1)]),nt]),h.value?(a(),r("p",rt," Selecciona una sede y una categoria. ")):(a(),r("div",at,[(a(!0),r(k,null,M(n.value,(m,i)=>(a(),r("div",{key:m.id,class:"col-12 md:col-4 lg:col-3 sm:col-6"},[c(tt,{style:{width:"100%"},id:`tarjeta-${i}`,product:m},null,8,["id","product"])]))),128))]))],64))}};export{mt as default};
