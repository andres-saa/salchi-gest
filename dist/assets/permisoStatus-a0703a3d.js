import{_ as M,u as J,f as p,g as z,h as Z,r as N,o as v,c as C,a as t,A as $,F as I,b as G,d as u,w as i,q as K,U as g,n as Q,t as l,m as d,C as D,p as W,e as X}from"./index-bb5ca796.js";const Y="/images/empty.avif";const o=x=>(W("data-v-88b53491"),x=x(),X(),x),tt={class:"col-12 m-auto p-0"},et={key:0,class:"col-12 p-0",style:{position:"relative",display:"flex","align-items":"center","justify-content":"center"}},st=o(()=>t("img",{src:Y,alt:"",srcset:"",style:{width:"100%",height:"50vh","object-fit":"cover","border-radius":"1rem"}},null,-1)),ot=o(()=>t("span",{class:"text-6xl",style:{"font-weight":"bold",position:"absolute"}}," Nada por aquí",-1)),at=[st,ot],lt={class:"grid p-3 m-0"},nt={class:"col-12 md:col-6 xl:col-4 px-0 md:px-3 m-0"},it={class:"col-12 p-0 m-auto pb-4",style:{"background-color":"white","box-shadow":"0 0 10px rgba(0, 0, 0, 0.137)",height:"100%","border-radius":"1rem","max-width":"400px",overflow:"hidden"}},ct={class:"text-2xl",style:{"font-weight":"bold","text-transform":"capitalize",color:"white"}},rt={class:"col-12 grid m-0 p-1"},dt=o(()=>t("p",{class:"col-6 my-0 py-0",style:{"font-weight":"bold"}},[t("span",null,"ID del permiso")],-1)),pt={class:"col-6 my-0 py-0 text-right"},ut={class:"col-12 grid m-0 p-1"},ht=o(()=>t("p",{class:"col-6 my-0 py-0",style:{"font-weight":"bold"}},[t("span",null,"ID del empleado")],-1)),_t={class:"col-6 my-0 py-0 text-right"},mt={class:"col-12 grid m-0 p-1"},yt=o(()=>t("p",{class:"col-6 my-0 py-0",style:{"font-weight":"bold"}},[t("span",null,"Desde")],-1)),vt={class:"col-6 my-0 py-0 text-right"},bt={class:"col-12 grid m-0 p-1"},ft=o(()=>t("p",{class:"col-6 my-0 py-0",style:{"font-weight":"bold"}},[t("span",null,"Hasta")],-1)),gt={class:"col-6 my-0 py-0 text-right"},xt={class:"col-12 grid m-0 p-1",style:{"background-color":"rgb(252, 255, 172)"}},wt=o(()=>t("p",{class:"col-6 my-0 py-0",style:{"font-weight":"bold"}},[t("span",null,[d("Estado "),t("br"),d(" Fecha")])],-1)),kt={class:"col-6 my-0 py-0 text-right"},St=o(()=>t("br",null,null,-1)),Ct={class:"col-12 grid m-0 p-1 mt-4"},jt=o(()=>t("p",{class:"col-12 my-0 py-0",style:{"font-weight":"bold"}},[t("span",null,"Observaciones")],-1)),At={class:"col-12 my-0 py-0"},Et={class:"px-3 mt-4",style:{display:"flex",gap:"1rem","justify-content":"space-around",position:"relative",bottom:"0"}},Rt=o(()=>t("span",{class:"text-sm text-center"},"REVISAR",-1)),zt=o(()=>t("span",{class:"text-sm"},"APROBAR",-1)),$t=o(()=>t("span",{class:"text-sm"}," RECHAZAR",-1)),Nt=o(()=>t("div",null,null,-1)),It={class:"a4-size p-0 lg:p-6 mi-clase mt-4"},Dt=o(()=>t("img",{class:"m-auto",src:"https://salchimonster.com/images/logo.png",style:{width:"10%"},alt:""},null,-1)),Pt={style:{"font-size":"11pt","font-weight":"normal",color:"black","font-family":"Arial, Helvetica, sans-serif"}},Ot=o(()=>t("h6",{class:"text-center",style:{"font-size":"11pt","font-weight":"bold",color:"black","font-family":"Arial, Helvetica, sans-serif"}}," INVERSIONES SALCHIMONSTER SAS ",-1)),Tt=o(()=>t("h6",{style:{"font-size":"11pt","font-weight":"normal",color:"black","font-family":"Arial, Helvetica, sans-serif"},class:"text-center"},"NIT: 901.420.874-0",-1)),Ut={class:"text-center py-4",style:{"font-weight":"bold","text-transform":"uppercase"}},Ht=o(()=>t("span",{style:{"text-transform":"capitalize"}},null,-1)),Bt={class:"text-l",style:{"font-size":"11pt","font-weight":"normal",color:"black","font-family":"Arial, Helvetica, sans-serif"}},Ft={class:"p-0 m-0"},Lt=o(()=>t("span",{style:{"font-weight":"bold"}},"Fecha de la solicitud: ",-1)),Vt={style:{"border-bottom":"1px solid","padding-bottom":"0","padding-right":"2rem"}},qt={class:"p-0 m-0",style:{width:"100%"}},Mt=o(()=>t("span",{style:{"font-weight":"bold"}},"Nombre: ",-1)),Jt={style:{width:"100%","border-bottom":"1px solid","padding-bottom":"0","padding-right":"3rem"}},Zt={class:"p-0 m-0"},Gt=o(()=>t("span",{style:{"font-weight":"bold"}},"Cargo: ",-1)),Kt={style:{"border-bottom":"1px solid","padding-bottom":"0","padding-right":"2rem"}},Qt={class:"p-0 m-0"},Wt=o(()=>t("span",{style:{"font-weight":"bold"}},"Identificación No: ",-1)),Xt={style:{"border-bottom":"1px solid","padding-bottom":"0","padding-right":"2rem"}},Yt={style:{display:"flex","justify-content":"start",gap:"2rem",border:"1px solid","margin-top":"2rem"},class:"p-2"},te={style:{display:"flex","flex-direction":"column"},class:""},ee=o(()=>t("div",{style:{"font-weight":"bold"}}," Desde ",-1)),se={style:{display:"flex","flex-direction":"column"}},oe=o(()=>t("div",{style:{"font-weight":"bold"}}," Hasta ",-1)),ae={style:{display:"flex","justify-content":"start",gap:"2rem",border:"1px solid","margin-top":"2rem"},class:"p-2"},le={style:{display:"flex","flex-direction":"column"},class:""},ne=o(()=>t("div",{class:"mb-2",style:{"font-weight":"bold"}}," Observaciones ",-1)),ie={class:"col-12 text-xl"},ce={class:"col-12 md:col-6 m-auto p-0",style:{display:"flex",gap:"1rem",overflow:"hidden","justify-content":"space-around",position:"absolute",top:"0rem",right:"0","background-color":"rgba(255, 255, 255, 0)te"}},re=o(()=>t("span",{class:"p-input-icon-left",style:{width:"100%"}},[t("i",{class:"pi pi-pencil"})],-1)),de=o(()=>t("span",{class:"text-center col-12 p-0"},"Si, continuar",-1)),pe=o(()=>t("span",{class:"text-center col-12 p-0"},"No, talvez luego",-1)),ue=o(()=>t("span",{class:"p-input-icon-left",style:{width:"100%"}},[t("i",{class:"pi pi-pencil"})],-1)),he=o(()=>t("span",{class:"text-center col-12 p-0"},"Si, continuar",-1)),_e=o(()=>t("span",{class:"text-center col-12 p-0"},"No, talvez luego",-1)),me={__name:"permisoStatus",setup(x){const _=J(),P=p(_.params.status),m=p(_.params.tipo),b=p(_.params.status),j=p(!1),A=p("2029-12-21 16:19"),c=p(),h=p({}),y=p({}),w=p(!1),k=p(!1);z(()=>_.params.status,e=>{P.value=e}),z(()=>_.params.tipo,e=>{m.value=e,console.log(m),f(e,b.value).then(s=>h.value=s)}),z(()=>_.params.status,e=>{b.value=e,f(m.value,e).then(s=>h.value=s)});const O=async e=>{j.value=!0,c.value=e,R(e.employer_id)},T=e=>{w.value=!0,c.value=e,R(e.employer_id)},U=e=>{k.value=!0,c.value=e,R(e.employer_id)};function H(e){e.status={status:"aprobado",timestamp:A.value},e.history.push({...e.status}),fetch(`${g}/permission/${e.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(s=>{s.json(),w.value=!1,f(m.value,b.value).then(n=>h.value=n)}).then(s=>console.log("Permiso aprobado:",s)).catch(s=>console.error("Error:",s))}function B(e){e.status={status:"rechazado",timestamp:A.value},e.history.push({...e.status}),fetch(`${g}/permission/${e.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(s=>{s.json(),k.value=!1,f(m.value,b.value).then(n=>h.value=n)}).then(s=>console.log("Permiso rechazado:",s)).catch(s=>console.error("Error:",s))}function E(e){var s=new Date(e),n={day:"numeric",month:"long",year:"numeric"};return s.toLocaleDateString("es-ES",n)}const F=async()=>{fetch(`${g}/server_time`).then(e=>{if(!e.ok)throw new Error("Network response was not ok");return e.json()}).then(e=>{console.log("Employer data:",e),A.value=e}).catch(e=>{console.error("There has been a problem with your fetch operation:",e),mensaje.value="error"})};function L(e){e||(e="2029-12-21 16:19");const s=["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"];let[n,r]=e.split(" "),[a,S,V]=n.split("-").map(Number),q=s[S-1];return`${V} de ${q} de ${a}`}const R=async e=>{fetch(`${g}/employer/${e}`).then(s=>{if(!s.ok)throw new Error("Network response was not ok");return s.json()}).then(s=>{console.log("Employer data:",s),y.value=s}).catch(s=>{console.error("There has been a problem with your fetch operation:",s)})};async function f(e,s){const n=`${g}/permissions/status/${s}/type/${e}`;try{const r=await fetch(n);if(!r.ok)throw new Error(`Error al obtener los permisos: ${r.status}`);return await r.json()}catch(r){throw console.error("Error en getPermissions:",r),r}}return Z(()=>{f(m.value,b.value).then(e=>h.value=e),F()}),(e,s)=>{const n=N("Button"),r=N("Dialog");return v(),C(I,null,[t("div",tt,[h.value.length<=0?(v(),C("div",et,at)):$("",!0),t("div",lt,[(v(!0),C(I,null,G(h.value,a=>(v(),C("div",nt,[t("div",it,[t("div",{class:Q(["col-12 m-0 mb-3",a.tipo]),style:{}},[t("p",ct,l(a.tipo)+" ID #"+l(a.id),1)],2),t("div",rt,[dt,t("p",pt,l(a.id),1)]),t("div",ut,[ht,t("p",_t,l(a.employer_id),1)]),t("div",mt,[yt,t("p",vt,l(a.start_date),1)]),t("div",bt,[ft,t("p",gt,l(a.end_date),1)]),t("div",xt,[wt,t("p",kt,[d(l(a.status.status)+" ",1),St,d(" "+l(a.status.timestamp.split(" ")[0]),1)])]),t("div",Ct,[jt,t("p",At,l(a.observations),1)]),t("div",Et,[u(n,{outlined:"",severity:"info",label:"Small",onClick:S=>O(a),style:{width:"100%",display:"flex","justify-content":"center"}},{default:i(()=>[Rt]),_:2},1032,["onClick"]),a.status.status!="aprobado"?(v(),D(n,{key:0,outlined:"",severity:"success",label:"Small",class:"",onClick:S=>T(a),style:{width:"100%",display:"flex","justify-content":"center"}},{default:i(()=>[zt]),_:2},1032,["onClick"])):$("",!0),a.status.status!="rechazado"&&a.status.status!="aprobado"?(v(),D(n,{key:1,outlined:"",severity:"danger",label:"Small",onClick:S=>U(a),style:{width:"100%",display:"flex","justify-content":"center"}},{default:i(()=>[$t]),_:2},1032,["onClick"])):$("",!0)])])]))),256))]),Nt]),u(r,{style:K([{border:"none","box-shadow":"none"},{width:"700px"}]),visible:j.value,"onUpdate:visible":s[0]||(s[0]=a=>j.value=a),header:"Revizar permiso",modal:!0,class:"p-fluid m-2 pt-8"},{default:i(()=>[t("div",It,[Dt,t("h6",Pt,l(L(c.value.status.timestamp)),1),Ot,Tt,t("h6",Ut,[d("FORMATO SOLICITUD DE PERMISO "+l(c.value.tipo)+" ",1),Ht]),t("h5",Bt,[t("p",Ft,[Lt,d(),t("span",Vt,l(E(c.value.start_date)),1)]),t("p",qt,[Mt,d(),t("span",Jt,l(y.value.name),1)]),t("p",Zt,[Gt,d(),t("span",Kt,l(y.value.position),1)]),t("p",Qt,[Wt,d(),t("span",Xt,l(y.value.dni),1)]),t("div",Yt,[t("div",te,[ee,t("div",null,l(E(c.value.start_date)),1)]),t("div",se,[oe,t("div",null,l(E(c.value.end_date)),1)])]),t("div",ae,[t("div",le,[ne,t("h6",ie,l(c.value.observations),1)])])])]),t("div",ce,[u(n,{style:{"background-color":"rgb(105, 255, 157)",color:"rgba(0, 0, 0, 0.864)",border:"none"}},{default:i(()=>[d(" APROBAR")]),_:1}),u(n,{style:{"background-color":"rgb(255, 125, 125)",color:"rgba(0, 0, 0, 0.864)",border:"none"}},{default:i(()=>[d(" RECHAZAR")]),_:1})])]),_:1},8,["visible"]),u(r,{header:"Confirmacion",visible:w.value,"onUpdate:visible":s[2]||(s[2]=a=>w.value=a),style:{width:"350px"},modal:!0},{default:i(()=>[t("h5",null,"Seguro que desea aceptar el permiso de "+l(y.value.name),1),re,u(n,{onClick:s[1]||(s[1]=a=>H(c.value)),style:{margin:"auto","background-color":"rgb(105, 255, 157)",color:"black",border:"none"},class:"m-auto my-4 text-center"},{default:i(()=>[de]),_:1}),u(n,{style:{"background-color":"rgb(255, 156, 156)",color:"rgba(0, 0, 0, 0.864)",border:"none"},class:"m-auto my-4 ml-4 text-center"},{default:i(()=>[pe]),_:1})]),_:1},8,["visible"]),u(r,{header:"Confirmacion",visible:k.value,"onUpdate:visible":s[4]||(s[4]=a=>k.value=a),style:{width:"350px"},modal:!0},{default:i(()=>[t("h5",null,"Seguro que desea Rechazar el permiso de "+l(y.value.name),1),ue,u(n,{onClick:s[3]||(s[3]=a=>B(c.value)),style:{margin:"auto","background-color":"rgb(105, 255, 157)",color:"black",border:"none"},class:"m-auto my-4 text-center"},{default:i(()=>[he]),_:1}),u(n,{style:{"background-color":"rgb(255, 156, 156)",color:"rgba(0, 0, 0, 0.864)",border:"none"},class:"m-auto my-4 ml-4 text-center"},{default:i(()=>[_e]),_:1})]),_:1},8,["visible"])],64)}}},ve=M(me,[["__scopeId","data-v-88b53491"]]);export{ve as default};
