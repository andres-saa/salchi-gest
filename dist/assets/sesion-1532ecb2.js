import{u as j,p as S}from"./ProductService-32159c14.js";import{_ as C,r as f,y as D,a as y,o as i,c as r,b as t,g as c,B as T,C as B,n as V,f as E,t as l,u as v,v as I,m as L,k as b,q as M,F as k,d as N,D as F}from"./index-cbaa55ab.js";import{f as z}from"./formatoPesos-8aa989a0.js";import{u as q}from"./site-bc4c1749.js";const O={class:"container p-shadow col-12 shadow-2 p-3",style:{"border-radius":"0.5rem","background-color":"white",height:"100%",position:"relative"}},R={style:{display:"flex",position:"absolute",right:"-1rem",top:"-1rem",gap:"0.2rem","z-index":"9"}},U={class:"imagen",style:{overflow:"hidden"}},W=["src"],A={key:0,style:{width:"100%",display:"flex","justify-content":"center","align-items":"center","aspect-ratio":"1 / 1","background-color":"rgb(255, 255, 255)","object-fit":"contain","border-radius":"0.5rem"}},G={class:"texto",style:{}},H={style:{display:"flex",gap:"1rem",height:"100%","flex-direction":"column","justify-content":"space-between"}},J={style:{display:"grid","grid-template-columns":"auto auto",width:"100%","justify-content":"space-between","align-items":"center"}},K={style:{"text-transform":"uppercase"}},Q={style:{display:"flex","justify-content":"space-between","align-items":"c"}},X={style:{display:"flex","align-items":"center",gap:"1rem"}},Y={class:"text-xl"},Z={__name:"TarjetaMenu",props:{product:{type:Object,default:{}}},setup(x){const o=j(),e=x,a=f(!1),h=()=>{a.value=!0},d=n=>{o.visibles.dialogEditProduct=!0,o.currentProductToEdit=n},u=n=>{o.visibles.dialogDeleteProduct=!0,o.currentProductToDelete=n},p=async n=>{try{const s=await S.updateProductInstanceStatus(e.product.id,n);s&&console.log("Status updated:",s)}catch(s){console.error("Failed to update status:",s)}},m=D(()=>e.product.product_description.substring(0,100)+"...");return(n,s)=>{var w;const g=y("Button"),P=y("ProgressSpinner"),$=y("InputSwitch");return i(),r("div",O,[t("div",R,[c(g,{class:"shadow-2",onClick:s[0]||(s[0]=_=>u(e.product)),severity:"danger",style:{width:"2rem",height:"2rem",right:"0",top:"0"},rounded:"",icon:"pi pi-times"}),c(g,{class:"shadow-2",onClick:s[1]||(s[1]=_=>d(e.product)),severity:"warning",style:{"font-weight":"bold",width:"2rem",height:"2rem",right:"0",top:"0"},rounded:"",icon:"pi pi-pencil"})]),t("div",U,[T(t("img",{onLoad:h,class:V([a.value?"cargado":"sin-cargar",""]),style:{width:"100%","aspect-ratio":"1 / 1","background-color":"rgb(255, 255, 255)","object-fit":"contain","border-radius":"0.2rem"},src:`https://backend.salchimonster.com/read-product-image/300/${e.product.product_name}`,alt:""},null,42,W),[[B,a.value]]),a.value?E("",!0):(i(),r("div",A,[c(P,{style:{width:"60px",height:"60px"},strokeWidth:"8",animationDuration:".2s","aria-label":"Custom ProgressSpinner"})]))]),t("div",G,[t("div",H,[t("div",J,[t("span",null,[t("b",K,l(e.product.product_name),1)]),c(g,{class:"elipsis",text:"",style:{color:"black"},icon:"pi pi-ellipsis-v p-0 text-xl"})]),t("span",null,l((w=m.value)==null?void 0:w.toLocaleLowerCase()),1),t("div",Q,[c($,{modelValue:e.product.status,"onUpdate:modelValue":[s[2]||(s[2]=_=>e.product.status=_),s[3]||(s[3]=_=>p(e.product.status))]},null,8,["modelValue"]),t("div",X,[t("span",Y,[t("b",null,l(v(z)(e.product.price)),1)])])])])])])}}},tt=C(Z,[["__scopeId","data-v-fecd3d4e"]]),et={class:"text-center text-3xl col-12",style:{"font-weight":"bold",display:"flex",gap:"1rem","align-items":"center"}},st=t("div",{style:{width:"100%",height:"3px","background-color":"#ff6200"}},null,-1),ot={class:"text-3xl",style:{width:"min-content"}},nt={style:{"min-width":"max-content"}},at=t("div",{style:{width:"100%",height:"3px","background-color":"#ff6200"}},null,-1),it={key:0,class:"grid p-1 pb-8",style:{"max-width":"900px",margin:"auto"}},rt={key:1,style:{"font-weight":"bold"},class:"text-4xl text-center my-8 p-0"},pt={__name:"sesion",setup(x){const o=q(),e=I(),a=f([]),h=f(!1);L(async()=>{d()});const d=async()=>{let u=e.params.category_id,p=o.site.site_id;a.value=await S.getProductsByCategorySite(u,p)};return b(()=>e.params.category_id,async()=>{d()},{deep:!0}),b(()=>o.site,async()=>{o.site&&(d(),await F())},{deep:!0}),(u,p)=>(i(),r(k,null,[t("p",et,[st,t("span",ot,[t("p",nt,l(v(e).params.menu_name)+" DE",1),M(" "+l(v(o).site.site_name),1)]),at]),h.value?(i(),r("p",rt," Selecciona una sede y una categoria. ")):(i(),r("div",it,[(i(!0),r(k,null,N(a.value,(m,n)=>(i(),r("div",{key:m.id,class:"col-12 md:col-4 lg:col-3 sm:col-6"},[c(tt,{style:{width:"100%"},id:`tarjeta-${n}`,product:m},null,8,["id","product"])]))),128))]))],64))}};export{pt as default};
