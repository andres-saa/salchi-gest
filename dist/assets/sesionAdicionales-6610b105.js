import{_ as se,x as oe,f as d,u as te,g as F,h as D,r as E,o as g,c as v,a as l,t as c,l as i,d as n,w as p,F as z,b as P,y as B,U as b,k as u,z as le,q as ne,P as ie,p as re,e as ce}from"./index-faf47748.js";import{f as L}from"./formatoPesos-2a38d2e7.js";const M=j=>(re("data-v-ce965543"),j=j(),ce(),j),de={class:"col-12 m-0 p-0",style:{"background-color":"transparent",border:"none"}},pe={class:"p-0 lg:p-6",style:{border:"none"}},ue={class:"text-2xl titulo my-3",style:{"text-transform":"capitalize","font-weight":"bold"}},me={class:"col-12 grid m-0 p-0",style:{}},ge={class:"col-12 md:col-12 p-0 m-0 mb-4",style:{"background-color":""}},ve={style:{"text-transform":"capitalize"},class:"text-xl mb-4 col-12"},fe={style:{"text-transform":"capitalize","border-right":"2px solid rgba(0, 0, 0, 0.144)"},class:"grid col-12 lg:col-6 mx-0 px-0",st:""},he={class:"col-9 text-left py-0"},_e={class:"col-3 text-right py-0"},ye={class:"card col-12 p-4"},be={style:{"text-transform":"capitalize"},class:"text-xl mb-6 mt-3"},xe={class:"grid"},$e={style:{"text-transform":"lowercase"},class:"grid lg:col-6 col-12 px-0 py-3 mx-0"},we={style:{},class:"col-6 text-left py-0"},Ce={class:"col-6 text-right py-0"},ke={class:"col-12",style:{display:"flex","justify-content":"center"}},Ae=M(()=>l("h5",null,"Nombre del grupo",-1)),Ve={style:{display:"flex"}},Ee={class:"grid col-12 p-0 pl-2"},ze={class:"col-6"},je={class:"col-6 text-right"},Se={class:"flex align-items-center justify-content-center"},Te=M(()=>l("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1)),Ue={__name:"sesionAdicionales",setup(j){const S=oe(),G=d(),R=d(),J=d([]),o=te(),C=d(!1),k=d(!1),O=d(),T=d(),f=d({}),A=d(!1),x=d({price:0}),U=d({lista:{}}),m=d({grupo:[]}),q=t=>{T.value=!0,f.value=t},H=t=>{N[o.params.adicionales];const e=`${b}/${o.params.adicionales}/${t}`;fetch(e,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(f.value)}).then(a=>a.json()).then(a=>{T.value=!1,$(),w().then(r=>r.map(h=>V(h[_[o.params.adicionales]])))}).catch(a=>console.error("Error:",a))};F(()=>U.value.lista,t=>{for(const e in t){const a=parseInt(e);if(t[e])m.value.grupo.includes(a)||m.value.grupo.push(a);else{const r=m.value.grupo.indexOf(a);r!==-1&&m.value.grupo.splice(r,1)}}},{deep:!0});const K=t=>{O.value=t,A.value=!0},Q=()=>{A.value=!1},W=async()=>{const t=`${b}/${o.params.adicionales}`;fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(x.value)}).then(e=>e.json()).then(e=>{C.value=!1,$()}).catch(e=>console.error("Error:",e))},X=async()=>{const t=`${b}/grupo-${o.params.adicionales}`,e={};e.name=m.value.name,e[Z[o.params.adicionales]]=m.value.grupo,fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(a=>a.json()).then(a=>{console.log(a),k.value=!1,$(),w().then(r=>r.map(h=>V(h[_[o.params.adicionales]])))}).catch(a=>console.error("Error:",a))},Y=async t=>{const e=`${b}/grupo-${o.params.adicionales}/${t}`;fetch(e,{method:"DELETE",headers:{"Content-Type":"application/json"}}).then(a=>{if(a.ok)return A.value=!1,a.json();throw new Error("Something went wrong")}).then(a=>{$(),w().then(r=>r.map(h=>V(h[_[o.params.adicionales]])))}).catch(a=>console.error("Error:",a))},_={salsas:"grupo_salsa_id",toppings:"grupo_topping_id",cambios:"grupo_cambio_id",acompanantes:"grupo_acompanante_id",adicionales:"grupo_id"},N={salsas:"salsa_id",toppings:"topping_id",cambios:"cambio_id",acompanantes:"acompanante_id",adicionales:"adicional_id"},Z={salsas:"salsas",toppings:"toppings",cambios:"cambios",acompanantes:"acompanantes",adicionales:"adicionales"},$=async()=>{try{S.setLoading(!0,`cargando ${o.params.adicionales}`);const e=await(await fetch(`${b}/${o.params.adicionales}`)).json();G.value=e,S.setLoading(!1,`cargando ${o.params.adicionales}`)}catch(t){console.error("Error fetching data: ",t)}},w=async()=>{try{S.setLoading(!0,`cargando grupo de ${o.params.adicionales}`);const e=await(await fetch(`${b}/grupo-${o.params.adicionales}`)).json();return R.value=e,S.setLoading(!1,`cargando ${o.params.adicionales}`),e}catch(t){console.error("Error fetching data: ",t)}},V=async t=>{try{const a=await(await fetch(`${b}/grupo-${o.params.adicionales}/${t}/${o.params.adicionales}`)).json();return J.value[t]=a,a}catch(e){console.error("Error fetching data: ",e)}};F(()=>o.params.adicionales,(t,e)=>{t!==e&&($(),w().then(a=>a.map(r=>V(r[_[o.params.adicionales]]))))}),D($),D(w),D(async()=>{w().then(t=>t.map(e=>V(e[_[o.params.adicionales]])))});const ee={adicionales:"success",salsas:"warning",toppings:"danger",cambios:"info",acompanantes:"help"};return(t,e)=>{const a=E("Button"),r=E("inputText"),h=E("inputNumber"),I=E("Dialog"),ae=E("Checkbox");return g(),v(z,null,[l("div",de,[l("div",pe,[l("p",ue,"grupos de "+c(i(o).params.adicionales),1),n(a,{size:"small",severity:ee[i(o).params.adicionales],class:"mb-6",style:{"text-transform":"capitalize"},onClick:e[0]||(e[0]=s=>k.value=!k.value)},{default:p(()=>[u("Nuevo grupo de "+c(i(o).params.adicionales),1)]),_:1},8,["severity"]),l("div",me,[(g(!0),v(z,null,P(R.value,s=>(g(),v("div",ge,[l("div",{class:"card m-0 grid col-12 p-1",style:B([`background-color:${i(le)[i(o).params.adicionales]}`,{position:"relative"}])},[l("p",ve,[l("b",null,c(s.name),1)]),n(a,{size:"small",severity:"danger",onClick:y=>K(s),class:"add-cart-btn text-xl",style:{cursor:"pointer",position:"absolute",top:"-1rem",right:"0rem",width:"2.5rem",height:"2.5rem","border-radius":"50%",display:"flex","align-items":"center","justify-content":"center",border:"none"}},{default:p(()=>[l("i",{class:ne(["icono text-2xl p-0 m-0",i(ie).TIMES])},null,2)]),_:2},1032,["onClick"]),(g(!0),v(z,null,P(J.value[s[_[i(o).params.adicionales]]],(y,Ne)=>(g(),v("div",fe,[l("span",he,[u(c(y.name)+" ",1),n(a,{onClick:Ie=>q(y),class:"p-0",size:"small",text:"",label:"Editar"},null,8,["onClick"])]),l("span",_e,c(i(L)(y.price)),1)]))),256))],4)]))),256))]),l("div",ye,[l("p",be,[l("b",null,"Todas las "+c(i(o).params.adicionales),1)]),l("div",xe,[(g(!0),v(z,null,P(G.value,s=>(g(),v("div",$e,[l("span",we,[u(c(s.name)+" ",1),n(a,{onClick:y=>q(s),class:"p-0",size:"small",text:"",label:"Editar"},null,8,["onClick"])]),l("span",Ce,c(i(L)(s.price)),1)]))),256))]),l("div",ke,[n(a,{severity:"info",size:"small",style:{"text-transform":"capitalize"},onClick:e[1]||(e[1]=s=>C.value=!C.value)},{default:p(()=>[u("Agregar")]),_:1})])])])]),n(I,{visible:C.value,"onUpdate:visible":e[4]||(e[4]=s=>C.value=s),modal:"true",style:B([{width:"500px",height:"max-content"},{"background-color":"white","border-radius":"1rem"}]),header:"Agregar",class:"p-fluid p-2 m-3"},{default:p(()=>[n(r,{class:"mb-4",modelValue:x.value.name,"onUpdate:modelValue":e[2]||(e[2]=s=>x.value.name=s)},null,8,["modelValue"]),n(h,{class:"mb-4",modelValue:x.value.price,"onUpdate:modelValue":e[3]||(e[3]=s=>x.value.price=s)},null,8,["modelValue"]),u(" "+c(x.value)+" ",1),n(a,{size:"small",severity:"info",style:{"text-transform":"capitalize"},onClick:W},{default:p(()=>[u("Agregar")]),_:1})]),_:1},8,["visible"]),n(I,{visible:T.value,"onUpdate:visible":e[8]||(e[8]=s=>T.value=s),modal:"true",style:B([{width:"500px",height:"max-content"},{"background-color":"white","border-radius":"1rem"}]),header:`EDITAR ${f.value.name}`,class:"p-fluid p-2 m-3"},{default:p(()=>[n(r,{class:"mb-4",modelValue:f.value.name,"onUpdate:modelValue":e[5]||(e[5]=s=>f.value.name=s)},null,8,["modelValue"]),n(h,{class:"mb-4",modelValue:f.value.price,"onUpdate:modelValue":e[6]||(e[6]=s=>f.value.price=s)},null,8,["modelValue"]),n(a,{style:{"text-transform":"capitalize"},onClick:e[7]||(e[7]=s=>H(f.value[N[i(o).params.adicionales]]))},{default:p(()=>[u("Guardar")]),_:1})]),_:1},8,["visible","header"]),n(I,{visible:k.value,"onUpdate:visible":e[10]||(e[10]=s=>k.value=s),modal:"true",style:B([{width:"500px",height:"max-content"},{"background-color":"white","border-radius":"1rem"}]),header:"Agregar",class:"p-fluid p-2 m-3"},{default:p(()=>[Ae,n(r,{class:"mb-4",modelValue:m.value.name,"onUpdate:modelValue":e[9]||(e[9]=s=>m.value.name=s)},null,8,["modelValue"]),(g(!0),v(z,null,P(G.value,s=>(g(),v("div",Ve,[n(ae,{modelValue:U.value.lista[s[N[i(o).params.adicionales]]],"onUpdate:modelValue":y=>U.value.lista[s[N[i(o).params.adicionales]]]=y,binary:"",value:!1},null,8,["modelValue","onUpdate:modelValue"]),l("div",Ee,[l("div",ze,c(s.name),1),l("div",je,c(i(L)(s.price)),1)])]))),256)),n(a,{style:{"text-transform":"capitalize"},onClick:X},{default:p(()=>[u("Crear Grupo")]),_:1}),u(" "+c(U.value)+" "+c(m.value),1)]),_:1},8,["visible"]),n(I,{header:"Confirmation",visible:A.value,"onUpdate:visible":e[12]||(e[12]=s=>A.value=s),style:{width:"350px"},modal:!0},{footer:p(()=>[n(a,{label:"No",icon:"pi pi-times",onClick:Q,class:"p-button-text"}),n(a,{label:"Si",icon:"pi pi-check",onClick:e[11]||(e[11]=s=>Y(O.value[[_[i(o).params.adicionales]]])),class:"p-button-text",autofocus:""})]),default:p(()=>[l("div",Se,[Te,l("span",null,[u("Seguro que desea eliminar "),l("b",null,c(O.value.name),1)])])]),_:1},8,["visible"])],64)}}},Ge=se(Ue,[["__scopeId","data-v-ce965543"]]);export{Ge as default};
