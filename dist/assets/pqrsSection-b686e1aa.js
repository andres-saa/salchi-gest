import"./pqrUser.vue_vue_type_style_index_0_scoped_15cf65bc_lang-a9ef4789.js";import{_ as ye,M as ve,r as d,A as he,l as be,q as fe,i as ge,D as te,a as y,o as s,c as l,g as r,w as _,b as t,F as U,d as se,s as xe,j as $,U as E,t as a,k as v,m as c,f as n,u as I,N as Ve,n as ke,e as le,p as we,h as Te}from"./index-87ceccd5.js";import"./editor.esm-e5954097.js";/* empty css                                                             */import Ce from"./pqrUser-dc253a59.js";const i=T=>(we("data-v-9da607bc"),T=T(),Te(),T),qe={style:{display:"flex","flex-direction":"column"}},Ne={style:{"min-width":"max-content",margin:"0",padding:"0"},class:"p-text-secondary m-0 p-0"},ze={style:{"min-width":"max-content",margin:"0",padding:"0"},class:"p-text-secondary m-0 p-0"},Pe={class:"m-0"},Re=i(()=>t("div",null,null,-1)),Se={key:0,class:"m-0",style:{"text-transform":"capitalize"}},De=i(()=>t("b",null,"Responsable:",-1)),Ie={key:1,class:"p-0 m-0"},Le={key:2,class:"p-0 m-0"},Ue={key:3},$e=i(()=>t("b",null,"Notas",-1)),Ee=i(()=>t("br",null,null,-1)),Oe=i(()=>t("div",{style:{display:"flex",gap:"1rem"}},null,-1)),je=i(()=>t("div",null,[t("h4",{class:"mt-0 py-0"})],-1)),Be={style:{display:"flex","flex-direction":"column"}},Fe=i(()=>t("h6",{class:"mx-0 my-0"},[t("b",null,"TIPO")],-1)),Ae={style:{display:"flex","align-items":"center",gap:"1rem"}},Me=i(()=>t("h6",{class:"mx-0 my-0"},[t("b",null,"CANAL")],-1)),Ge={class:"m-0 p-0",style:{display:"flex","align-items":"center",gap:"1rem"}},He=i(()=>t("h6",{class:"mt-3 mb-2"},[t("b",null,"CONTEXTO")],-1)),Qe={style:{display:"flex",gap:"1rem"}},Xe={style:{display:"flex","flex-direction":"column"}},Je={key:0,class:"mt-3 mb-3"},Ke=i(()=>t("b",null,"DATOS DEL CLIENTE",-1)),We=[Ke],Ye={style:{display:"flex",gap:"1rem"}},Ze={style:{display:"flex","flex-direction":"column"}},et={key:0},tt=i(()=>t("b",null,"Nombre: ",-1)),st={key:1},lt=i(()=>t("b",null,"Telefono: ",-1)),ot={key:2},at=i(()=>t("b",null,"Direccion: ",-1)),nt={key:3},it=i(()=>t("b",null,"Orden: ",-1)),ut=i(()=>t("h6",null,[t("b",null,"HISTORIAL")],-1)),rt={style:{display:"flex",gap:"1rem"}},dt={style:{display:"flex","flex-direction":"column"}},ct={style:{display:"flex","flex-direction":"column"}},mt={style:{"min-width":"max-content",margin:"0",padding:"0"},class:"p-text-secondary m-0 p-0"},_t={style:{"min-width":"max-content",margin:"0",padding:"0"},class:"p-text-secondary m-0 p-0"},pt={class:"m-0"},yt=i(()=>t("div",null,null,-1)),vt={key:0,class:"m-0",style:{"text-transform":"capitalize"}},ht=i(()=>t("b",null,"Responsable:",-1)),bt={key:1,class:"p-0 m-0"},ft={key:2,class:"p-0 m-0"},gt={key:3},xt=i(()=>t("b",null,"Notas",-1)),Vt=i(()=>t("br",null,null,-1)),kt=i(()=>t("div",{style:{display:"flex",gap:"1rem"}},null,-1)),wt=i(()=>t("h6",null,[t("b",null,"Como desea proceder?")],-1)),Tt={key:1},Ct={key:0,style:{display:"flex","justify-content":"space-between",margin:"1rem 0"}},qt=i(()=>t("h6",{class:"m-0"},"Le dio una cortesia del 100% ?",-1)),Nt={key:1,style:{display:"flex","justify-content":"space-between",margin:"1rem 0"}},zt=i(()=>t("h6",{class:"m-0"},"Le dio un bono de descuento?",-1)),Pt={key:2},Rt=i(()=>t("h6",{class:"m-0 my-3"},"porcentaje del descuento ",-1)),St={key:3},Dt=i(()=>t("h6",{class:"m-0 my-3"},"Valor de la orden",-1)),It={key:4},Lt=i(()=>t("h6",{class:"m-0 my-3"},"Id de la orden",-1)),Ut=i(()=>t("h6",{class:"m-0 my-3"},"Detalles",-1)),$t={style:{"background-color":"#ff00002e"},class:"p-3"},Et=i(()=>t("b",null,"No preste sus credenciales de Salchigest, cada miembro de la empresa tiene los suyos, muchas gracias",-1)),Ot={style:{display:"flex","justify-content":"end","margin-top":"2rem"}},jt={class:"nav_bar shadow-2 p-0 my-0 mx-2",style:{position:"sticky",top:"3rem","max-width":"900px","border-radius":"10rem","background-color":"white","z-index":"99"}},Bt={class:"nav_bar--buttons p-0 m-1",style:{}},Ft={key:"",class:"",style:{display:"flex","align-items":"center"}},At={class:"grid p-3",style:{"align-items":"center","justify-content":"space-between",display:"flex",gap:"1rem"}},Mt={class:"px-2"},Gt=i(()=>t("i",{class:"fa-regular fa-bars-progress"},null,-1)),Ht={style:{"text-transform":"uppercase"}},Qt={style:{display:"flex",gap:"1rem"}},Xt={key:0,style:{"min-width":"max-content"},class:"m-0 p-0"},Jt={key:1,style:{"min-width":"max-content"},class:"m-0 p-0"},Kt={key:3,style:{"text-align":"justify","min-width":"max-content"},class:"m-0 p-0"},Wt={key:4,style:{"text-align":"justify"},class:"m-0 p-0"},Yt={key:5,class:"m-0 p-0"},Zt={key:1},es={key:7,class:"p-2",style:{display:"flex",gap:".1rem","flex-direction":"column","align-items":"center"}},ts={key:8,class:"p-2",style:{display:"flex",gap:".1rem","flex-direction":"column","align-items":"center"}},ss={key:9,class:"p-2",style:{display:"flex",gap:".1rem","flex-direction":"column","align-items":"center"}},ls={key:10,class:"p-2",style:{display:"flex",gap:".1rem","flex-direction":"column","align-items":"start"}},os={style:{display:"flex",gap:".4rem","justify-content":"center"},class:"px-2"},as={__name:"pqrsSection",setup(T){const oe=ve(),C=d(""),q=d(),O=he(),j=d([]),L=d({id:2,name:"Generada",description:"Estado inicial de la pqr",exist:!0,color:"#3498DB"}),B=be(),F=d([]),p=d(),ae=async f=>{N.value=!0,m.value=f},A=d([]),m=d([]),M=d(!1),N=d(!1),z=d(null),ne=()=>{z.value={global:{value:null,matchMode:xe.CONTAINS}}};fe(()=>{ne()});const ie=d([{columnName:"Id",columnValue:"pqr_request_id",columnType:"other",size:"1rem",vif:!0},{columnName:"Tipo",columnValue:"request_type",columnType:"other",size:"15rem",vif:!0},{columnName:"Clasificacion",columnValue:"tag_name",columnType:"tag",size:"1rem",vif:!0},{columnName:"Restaurante",columnValue:"restaurant",columnType:"restaurant",size:"1rem",vif:!0},{columnName:"Id orden",columnValue:"order_id",columnType:"order_id",size:"1rem",vif:!0},{columnName:"Canal",columnValue:"channel",columnType:"tag",size:"4rem",vif:!0},{columnName:"Sede",columnValue:"site_name",columnType:"other",size:"4rem",vif:!0},{columnName:"Red",columnValue:"red",columnType:"other",size:"4rem",vif:!0},{columnName:"Calificacion",columnValue:"rating",columnType:"rating",size:"10rem",vif:!0},{columnName:"Comentarios",columnValue:"request_content",columnType:"other",size:"40rem",vif:!0},{columnName:"Responsable",columnValue:"responsible_name",columnType:"responsible_name",size:"20rem",vif:!1},{columnName:"Estado",columnValue:"current_status",columnType:"status",size:"15rem",vif:!0}]);d({2:"#3498DB",4:"#2ECC71",5:"#16A085",6:"#E74C3C",7:"#F39C12"}),d({question:"",answer:""}),d({}),d({}),d(null);const G=d([{}]);d({}),d(!1),d({});const w=d(!1),V=d(),k=d(!1),P=async()=>{G.value=await $.get(`${E}/get-all-pqrs`);const f=await $.get(`${E}/get-all-pqrs-status`);F.value=f,j.value=f};ge(async()=>{P()}),te(p,()=>{H()});const H=()=>{V.value=null,C.value="",q.value=null,w.value=!1,k.value=!1},R=d(),ue=async()=>{const f=R.value&&V.value?(V.value-V.value*(R.value/100)).toFixed(2):V.value,u={pqr_request_id:m.value.pqr_request_id,status_id:p.value,responsible_id:B.rawUserData.id,value:f||null,notes:C.value,order_id:q.value||null};try{await $.post(`${E}/change-pqr-status`,u),P(),N.value=!1,H()}catch(b){console.error("Error al enviar la actualizaciÃ³n de la PQR:",b)}};return te(()=>O.params.section_id,()=>{P()},{deep:!0}),(f,u)=>{const b=y("Tag"),Q=y("Timeline"),X=y("Dialog"),re=y("Dropdown"),J=y("Checkbox"),K=y("InputNumber"),W=y("InputText"),de=y("Textarea"),S=y("Button"),ce=y("Rating"),me=y("column"),_e=y("Column"),pe=y("DataTable");return s(),l(U,null,[r(X,{class:"mx-2",visible:M.value,"onUpdate:visible":u[0]||(u[0]=e=>M.value=e),modal:"",header:`Historial de la pqr  ID   ${A.value.pqr_request_id}`,style:{width:"40rem"}},{default:_(()=>[r(Q,{value:A.value.status_history},{opposite:_(e=>{var o,h,g,x;return[t("div",qe,[t("p",Ne,a((o=e.item.timestamp)==null?void 0:o.split(" ")[0]),1),t("p",ze,a((x=(g=(h=e.item.timestamp)==null?void 0:h.split(" "))==null?void 0:g.slice(1,4))==null?void 0:x.join(" ")),1)])]}),content:_(e=>{var o;return[r(b,{style:v(`background-color:${e.item.color}`)},{default:_(()=>[t("p",Pe,[t("b",null,a(e.item.status),1)])]),_:2},1032,["style"]),Re,e.item.responsible_name?(s(),l("p",Se,[De,c(" "+a((o=e.item.responsible_name)==null?void 0:o.toLowerCase()),1)])):n("",!0),e.item.value?(s(),l("p",Ie,[c("Le costo a la empresa "),t("b",null,a(e.item),1)])):n("",!0),e.item.order_id?(s(),l("p",Le,[c("Orden entregada "),t("b",null,a(e.item.order_id),1)])):n("",!0),e.item.notes?(s(),l("p",Ue,[$e,c(" "+a(e.item.notes),1)])):n("",!0),Ee,Oe]}),_:1},8,["value"])]),_:1},8,["visible","header"]),je,r(X,{class:"mx-2",visible:N.value,"onUpdate:visible":u[8]||(u[8]=e=>N.value=e),modal:"",header:`GESTION DE LA PQR  ID:    ${m.value.pqr_request_id}`,style:{width:"50rem"}},{footer:_(()=>[t("div",Ot,[r(S,{onClick:ue,label:"Enviar",severity:"help"})])]),default:_(()=>[t("div",Be,[Fe,t("p",Ae,a(m.value.request_type),1),Me,t("p",Ge,a(m.value.channel),1),He,t("div",Qe,[t("div",{style:v([{width:"100%","max-width":".4rem","border-radius":"45rem","box-sizing":"border-box"},`background-color:${m.value.channel_color}`])},null,4),t("div",Xe,[t("p",null,a(m.value.request_content),1)])]),m.value.user_name||m.value.user_phone?(s(),l("h6",Je,We)):n("",!0),t("div",Ye,[t("div",{style:v([{width:"100%","max-width":".4rem","border-radius":"45rem","box-sizing":"border-box"},`background-color:${m.value.channel_color}`])},null,4),t("div",Ze,[m.value.user_name?(s(),l("span",et,[tt,c(" "+a(m.value.user_name),1)])):n("",!0),m.value.user_phone?(s(),l("span",st,[lt,c(" "+a(m.value.user_phone),1)])):n("",!0),m.value.user_address?(s(),l("span",ot,[at,c(" "+a(m.value.user_address),1)])):n("",!0),m.value.order_id?(s(),l("span",nt,[it,c(" "+a(m.value.order_id),1)])):n("",!0)])]),ut,t("div",rt,[t("div",{style:v([{width:"100%","max-width":".4rem","border-radius":"45rem","box-sizing":"border-box"},`background-color:${m.value.status_history[0].color}`])},null,4),t("div",dt,[r(Q,{value:m.value.status_history},{opposite:_(e=>{var o,h,g,x;return[t("div",ct,[t("p",mt,a((o=e.item.timestamp)==null?void 0:o.split(" ")[0]),1),t("p",_t,a((x=(g=(h=e.item.timestamp)==null?void 0:h.split(" "))==null?void 0:g.slice(1,4))==null?void 0:x.join(" ")),1)])]}),content:_(e=>{var o;return[r(b,{style:v(`background-color:${e.item.color}`)},{default:_(()=>[t("p",pt,[t("b",null,a(e.item.status),1)])]),_:2},1032,["style"]),yt,e.item.responsible_name?(s(),l("p",vt,[ht,c(" "+a((o=e.item.responsible_name)==null?void 0:o.toLowerCase()),1)])):n("",!0),e.item.value?(s(),l("p",bt,[c("Le costo a la empresa "),t("b",null,a(I(Ve)(e.item.value)),1)])):n("",!0),e.item.order_id?(s(),l("p",ft,[c("Orden entregada "),t("b",null,a(e.item.order_id),1)])):n("",!0),e.item.notes?(s(),l("p",gt,[xt,c(" "+a(e.item.notes),1)])):n("",!0),Vt,kt]}),_:1},8,["value"])])]),wt,r(re,{modelValue:p.value,"onUpdate:modelValue":u[1]||(u[1]=e=>p.value=e),options:F.value.filter(e=>e.id!=2),optionLabel:"name",optionValue:"id"},null,8,["modelValue","options"]),p.value?(s(),l("div",Tt,[p.value==4||p.value==7?(s(),l("div",Ct,[qt,r(J,{binary:"",modelValue:w.value,"onUpdate:modelValue":u[2]||(u[2]=e=>w.value=e)},null,8,["modelValue"])])):n("",!0),p.value==4||p.value==7?(s(),l("div",Nt,[zt,r(J,{modelValue:k.value,"onUpdate:modelValue":u[3]||(u[3]=e=>k.value=e),binary:""},null,8,["modelValue"])])):n("",!0),(p.value==4||p.value==7)&&k.value?(s(),l("div",Pt,[Rt,r(K,{modelValue:R.value,"onUpdate:modelValue":u[4]||(u[4]=e=>R.value=e),style:{width:"100%"}},null,8,["modelValue"])])):n("",!0),(p.value==4||p.value==7)&&w.value||k.value?(s(),l("div",St,[Dt,r(K,{modelValue:V.value,"onUpdate:modelValue":u[5]||(u[5]=e=>V.value=e),style:{width:"100%"}},null,8,["modelValue"])])):n("",!0),(p.value==4||p.value==7)&&k.value||w.value?(s(),l("div",It,[Lt,r(W,{modelValue:q.value,"onUpdate:modelValue":u[6]||(u[6]=e=>q.value=e),style:{width:"100%"}},null,8,["modelValue"])])):n("",!0),t("div",null,[Ut,r(de,{modelValue:C.value,"onUpdate:modelValue":u[7]||(u[7]=e=>C.value=e),rows:"5",style:{resize:"none",width:"100%"}},null,8,["modelValue"])]),t("h6",$t,[c("Recuerde que esta firmando como "),t("b",null,a(I(B).rawUserData.name),1),c(" y por ende se hace responsable, "),Et])])):n("",!0)])]),_:1},8,["visible","header"]),t("nav",jt,[t("ul",Bt,[(s(!0),l(U,null,se(j.value,e=>(s(),l("li",Ft,[r(b,{style:v([`background-color:${e.color}`,{height:"1.3rem","aspect-ratio":"1 / 1","border-radius":"50%"}])},null,8,["style"]),c(),r(S,{onClick:()=>L.value=e,class:ke(["nav_bar--buttons-button p-2",e.id==L.value.id?"nav_bar--buttons-button-selected":""]),label:e.name},null,8,["onClick","class","label"])]))),128))])]),r(pe,{paginator:!0,rows:15,style:{width:"100%"},paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",currentPageReportTemplate:"Mostrando {first} a {last} de {totalRecords} solicitudes",rowsPerPageOptions:[5,10,25,100],scrollable:"",showGridlines:"",scrollHeight:"65vh",stripedRows:"",class:"col-12 m-auto",value:G.value.filter(e=>{var o,h;return((o=e.current_status)==null?void 0:o.status)==((h=L.value)==null?void 0:h.name)}),tableStyle:"min-width: 50rem;",filters:z.value},{header:_(()=>[t("div",At,[t("h4",Mt,[Gt,c(),t("b",Ht,[c("PQRS "),t("b",null,a(I(O).params.section),1)])]),t("div",Qt,[r(W,{class:"",modelValue:z.value.global.value,"onUpdate:modelValue":u[9]||(u[9]=e=>z.value.global.value=e),placeholder:"Buscar Solicitud..."},null,8,["modelValue"]),r(S,{onClick:u[10]||(u[10]=e=>I(oe).visible_add_pqr=!0),label:"Nueva PQR",severity:"help"})])])]),default:_(()=>[(s(!0),l(U,null,se(ie.value,e=>(s(),le(me,{header:e.columnName,style:v(`min-width:${e.size}`),field:e.columnValue,class:"my-0 py-2"},{body:_(o=>{var h,g,x,Y,Z,ee;return[e.columnType=="date"?(s(),l("h6",Xt,a(((h=o.data[e.columnValue])==null?void 0:h.split("-").reverse().join("-"))||"---------"),1)):n("",!0),e.columnType=="responsible_name"?(s(),l("h6",Jt,a(((Y=(x=(g=o.data)==null?void 0:g.status_history)==null?void 0:x[0])==null?void 0:Y.responsible_name)||"No se ha interactuado"),1)):n("",!0),e.columnType=="max-content"?(s(),l("h6",{key:2,style:v(e.columnType=="max-content"?"min-width: max-content":""),class:"m-0 p-0"},a(o.data[e.columnValue]||"---------"),5)):n("",!0),e.columnType=="order_id"?(s(),l("h6",Kt,a(o.data[e.columnValue]||"---------"),1)):n("",!0),e.columnType=="other"?(s(),l("h6",Wt,a(o.data[e.columnValue]||"---------"),1)):n("",!0),e.columnType=="rating"?(s(),l("h6",Yt,[o.data[e.columnValue]>0?(s(),le(ce,{key:0,cancel:!1,readonly:"",modelValue:o.data[e.columnValue],"onUpdate:modelValue":D=>o.data[e.columnValue]=D},null,8,["modelValue","onUpdate:modelValue"])):(s(),l("span",Zt," ------------"))])):n("",!0),e.columnType=="money"?(s(),l("h6",{key:6,style:v(e.columnType=="max-content"?"min-width: max-content":""),class:"m-0 p-0"},a(f.formatoPesosColombianos(o.data[e.columnValue])||"---------"),5)):n("",!0),e.columnValue=="current_status"?(s(),l("div",es,[r(b,{style:v([{color:"white","text-align":"center"},`background-color:${(Z=o.data[e.columnValue])==null?void 0:Z.color}`])},{default:_(()=>{var D;return[c(a(((D=o.data[e.columnValue])==null?void 0:D.status)||"---------"),1)]}),_:2},1032,["style"]),t("b",null,a(((ee=o.data[e.columnValue])==null?void 0:ee.timestamp)||"---------"),1)])):n("",!0),e.columnValue=="channel"?(s(),l("div",ts,[r(b,{style:v([{color:"white","text-align":"center"},`background-color:${o.data.channel_color}`])},{default:_(()=>[c(a(o.data[e.columnValue]||"---------"),1)]),_:2},1032,["style"])])):n("",!0),e.columnValue=="tag_name"?(s(),l("div",ss,[r(b,{style:v([{color:"white","text-align":"center"},`background-color:${o.data.tag_color}`])},{default:_(()=>[c(a(o.data[e.columnValue]),1)]),_:2},1032,["style"])])):n("",!0),e.columnValue=="restaurant"?(s(),l("div",ls,[r(b,{style:v([{color:"white"},`background-color:${o.data.restaurant_color}`])},{default:_(()=>[c(a(o.data[e.columnValue]),1)]),_:2},1032,["style"])])):n("",!0)]}),_:2},1032,["header","style","field"]))),256)),r(_e,{class:"my-0 py-0 px-0 mx-0",style:{},frozen:"",alignFrozen:"right",header:"Interactuar"},{body:_(e=>[t("div",os,[r(S,{onClick:o=>ae(e.data),label:"Gestionar",severity:"help",icon:"pi pi-check p-0",class:"my-0 py-2"},null,8,["onClick"])])]),_:1})]),_:1},8,["value","filters"]),r(Ce,{onReload:u[11]||(u[11]=e=>P())})],64)}}},cs=ye(as,[["__scopeId","data-v-9da607bc"]]);export{cs as default};
