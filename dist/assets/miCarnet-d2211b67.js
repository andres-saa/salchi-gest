import{f as d,U as m,b_ as p,h as $,r as x,o as u,c as h,a as e,d as g,n as _,t as a,l as b,w as j,F as N,W as w,q as I,P as z,k as R}from"./index-3944118f.js";import{a as T}from"./html2canvas.esm-6e01b359.js";const A="/images/logo blanco.png",B={key:0,class:"col-12",style:{display:"flex","flex-direction":"column","pointer-events":"none","align-items":"center","justify-content":"center",position:"fixed","z-index":"1000",left:"0",top:"0",height:"100%","background-color":"rgba(0, 0, 0, 0.5)"}},O=e("p",{class:"text-3xl",style:{"font-weight":"bold",color:"white","text-shadow":"0 0 10px rgba(0, 0, 0, 0.551)"}},"GENERANDO CARNET",-1),q={style:{display:"flex"}},V={class:"col-12",style:{display:"flex","justify-content":"center","flex-direction":"column","align-items":"center"}},W=e("p",{class:"px-3 py-0 mt-3 text-center text-4xl col-12",style:{"font-weight":"bold"}},"Mi carnet",-1),F={class:"carnet mb-8 mt-8 p-3",style:{"background-color":"rgba(255, 255, 255, 0)",display:"flex",width:"min-content","justify-content":"center","align-items":"center",transform:"scale(1.4)","border-radius":"0.7rem"}},G={class:"p-0 content",style:{"border-radius":"0.7rem"}},L={class:"P-7",style:{width:"5.5cm","max-width":"100%",height:"8.5cm","box-shadow":"0 0 10px rgba(0, 0, 0, 0.281)","border-radius":"0.5rem",display:"flex","justify-content":"center",overflow:"hidden",position:"relative"}},M=e("div",{style:{width:"11cm",height:"11cm","border-radius":"50%","background-color":"rgba(255,98,0,255)","box-shadow":"0 0 10px rgba(0, 0, 0, 0.288)",position:"absolute",bottom:"5cm"}},null,-1),J={style:{position:"absolute",width:"3cm",height:"3cm","z-index":"99","border-radius":"50%",top:"1.5cm",overflow:"hidden","box-shadow":"0 0 10px rgba(0, 0, 0, 0.2)"}},H=["src"],K=e("div",{style:{position:"absolute",display:"flex","align-items":"center",top:"0.5cm"}},[e("img",{style:{width:"0.8cm","object-fit":"contain"},src:A,alt:""}),e("span",{class:"ml-2 text-white",style:{"font-weight":"bold"}}," Salchimonster")],-1),Q={class:"info",style:{position:"absolute",top:"4.8cm"}},X={class:"px-3 py-0 my-0 text-center text-sm",style:{"font-weight":"bold","text-transform":"uppercase"}},Y={class:"px-3 py-0 mb-2 text-center text-sm",style:{"text-transform":"capitalize"}},Z={class:"px-3 py-0 my-0 text-center",style:{"font-size":"0.7rem"}},ee={class:"px-3 py-0 my-0 text-center",style:{"font-size":"0.7rem"}},te={class:"px-3 py-0 mt-0 text-center text-sm",style:{"font-weight":"bold"}},oe={key:1,class:"col-12",style:{display:"flex","justify-content":"center"}},se={class:"col-12",style:{display:"flex","justify-content":"center"}},le={__name:"miCarnet",setup(ne){const y=d(!0),n=d({}),c=d(!1),v=async o=>{fetch(`${m}/employer/dni/${o}`).then(t=>{if(!t.ok)throw new Error("Network response was not ok");return t.json()}).then(t=>{console.log("Employer data:",t),n.value=t,y.value=!1}).catch(t=>{console.error("There has been a problem with your fetch operation:",t),n.value={}})},k=async()=>{c.value=!0;try{const o=document.querySelector(".carnet"),t=document.querySelector(".content");if(!o){console.error("Elemento carnet no encontrado");return}const s=document.querySelector(".fotoPerfil");if(!s){console.error("Elemento fotoPerfil no encontrado");return}s.src=U,t.style.border="1px solid  rgba(255,98,0,255)",await new Promise((D,S)=>{s.onload=D,s.onerror=S});const l=(await T(o,{scale:2,useCORS:!0,allowTaint:!1})).toDataURL("image/png").replace("image/png","image/octet-stream"),r=document.createElement("a");r.download=`carnet-${w()}.png`,r.href=l,document.body.appendChild(r),r.click(),document.body.removeChild(r),t.style.border="none",c.value=!1}catch(o){console.error("Error al descargar el carnet:",o)}};function C(o){return`https://api.allorigins.win/raw?url=${encodeURIComponent(o)}`}const P=`${m}/read-product-image/600/employer-${p()}`,U=C(P),E=()=>{const o=new Date().getTime();return`${m}/read-product-image/600/employer-${p()}?timestamp=${o}`};return $(()=>{v(p())}),(o,t)=>{var i,l;const s=x("ProgressSpinner"),f=x("Button");return u(),h(N,null,[y.value?(u(),h("div",B,[O,e("div",q,[g(s,{style:{width:"100px",height:"100px"},strokeWidth:"4",fill:"var(--surface-ground)",animationDuration:".5s","aria-label":"Custom ProgressSpinner"})])])):_("",!0),e("div",V,[W,e("div",F,[e("div",G,[e("div",L,[M,e("div",J,[e("img",{class:"fotoPerfil",style:{"object-fit":"cover",width:"100%","background-color":"white"},src:E(),alt:""},null,8,H)]),K,e("div",Q,[e("p",X,a(n.value.name),1),e("p",Y,a(n.value.position),1),e("p",Z,"Email: "+a(((i=n.value)==null?void 0:i.email)||""),1),e("p",ee,"Telefono: "+a(((l=n.value)==null?void 0:l.phone)||""),1),e("p",te,"ID "+a(b(w)()),1)])])])])]),c.value?(u(),h("div",oe,[g(s,{style:{width:"50px",height:"50px"},strokeWidth:"8",fill:"var(--surface-ground)",animationDuration:".5s","aria-label":"Custom ProgressSpinner"})])):_("",!0),e("div",se,[g(f,{onClick:t[0]||(t[0]=r=>k())},{default:j(()=>[e("i",{class:I([b(z).DOWNLOAD,"mr-2"])},null,2),R(" Descargar")]),_:1})])],64)}}};export{le as default};
