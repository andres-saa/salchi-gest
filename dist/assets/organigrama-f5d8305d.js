import{_ as x,o as n,c as l,F as h,b,a as o,l as y,U as w,t as c,n as g,I as v,p as k,e as I,f as p,h as _,d as S}from"./index-29fab08c.js";import{a as B}from"./userServices-f77ee8c7.js";import{g as C}from"./dropDownAux-20f78ced.js";const m=i=>(k("data-v-bc52ddfd"),i=i(),I(),i),$={class:"list-unstyled pt-0 5 m-0 mt-5 px-0",style:{position:"",display:"flex","list-style":"none"}},E={class:"py-3 mx-6 py-3 px-0"},N=m(()=>o("i",{class:""},null,-1)),O={class:"tex-center p-0",style:{height:"auto",position:"relative","min-width":"max-content","background-color":"rgba(255, 255, 255, 0)",border:"2px",display:"flex","justify-content":"center"}},U=["src","onError"],V=m(()=>o("div",{style:{position:"absolute",height:"82px",bottom:"100%","background-color":"rgb(0, 0, 0)",width:"5px"}},null,-1)),j={class:"p-0 text-center",style:{width:"",overflow:"hidden",position:"absolute",height:"auto",bottom:"115%","max-width":"400px","background-color":"rgb(255, 255, 255)"}},A={cla:"",class:"text-center p-0 text-sm p-0 m-0",style:{"min-width":"max-content","font-weight":"bold",color:"black",width:"100%"}},F={cla:"",class:"text-center p-0 text-sm p-0",style:{"min-width":"max-content",width:"100%","text-transform":"uppercase"}},L={key:0,style:{width:"100%",top:"27px",height:"5px","border-radius":"10rem","background-color":"rgb(0, 0, 0)",position:"absolute"}},z={__name:"OrganigramaItem",props:{items:{type:Array,default:()=>[]}},setup(i){const d=(r,a)=>{const t={masculino:"/images/male-avatar.png",femenino:"/images/female-avatar.png",default:"/images/who.png"};!r||r==""||r=="N/A"?a.target.src=t.default:a.target.src=t[r.trim().toLowerCase()]};return(r,a)=>(n(),l("ul",$,[(n(!0),l(h,null,b(i.items,t=>{var s;return n(),l("li",{class:"px-0",key:t.position},[o("div",E,[N,o("div",O,[o("img",{style:{width:"1.5cm","z-index":"100","background-color":"white",height:"1.5cm","border-radius":"50%","object-fit":"cover",border:"5px solid rgb(0, 0, 0)"},src:`${y(w)}/read-product-image/96/employer-${t.dni}`,onError:e=>d(t.gender,e),class:"shadow-2 img-profile"},null,40,U),V,o("div",j,[o("p",A,c(t.subordinates?t.position.slice(0,30):t.position.slice(0,15))+" "+c(!t.subordinates&&t.position.length>10||t.subordinates&&t.position.length>20?"...":""),1),o("p",F,c(t.subordinates?t.name.slice(0,30):t.name.slice(0,15))+" "+c(!t.subordinates&&t.name.length>10||t.subordinates&&t.name.length>20?"...":""),1)]),((s=t.subordinates)==null?void 0:s.length)>1?(n(),l("div",L)):g("",!0)])]),t.subordinates&&t.subordinates.length?(n(),v(f,{key:0,items:t.subordinates},null,8,["items"])):g("",!0)])}),128))]))}},f=x(z,[["__scopeId","data-v-bc52ddfd"]]),D={class:"text-5xl mb-6",style:{"font-weight":"bold",position:"absolute"}},M={class:"py-8",style:{}},H={__name:"organigrama",setup(i){p(),p(null),_(()=>{}),_(async()=>{const a=await C();for(const t of a){const s=await B(t.site_id),e=r(s);console.log(e),d.value.push({site:t,organigrama:e})}});const d=p([]);function r(a,t=null){const s=[];for(const e of a)if(e.boss_id===t){const u=r(a,e.id);u.length>0&&(e.subordinates=u),s.push(e)}return s}return(a,t)=>(n(!0),l(h,null,b(d.value.filter(s=>{var e;return((e=s==null?void 0:s.site)==null?void 0:e.site_name)!="prueba"}),s=>{var e;return n(),l("div",{ref_for:!0,ref:"scrollContainer mt-8",class:"m-auto col",style:{"overflow-x":"auto","background-color":"rgb(255, 255, 255)","border-top":"4px solid rgb(0, 0, 0)"}},[o("p",D,c((e=s==null?void 0:s.site)==null?void 0:e.site_name),1),o("div",M,[S(f,{class:"pt-8",items:s.organigrama,ref_for:!0,ref:"organigramaItem"},null,8,["items"])])],512)}),256))}};export{H as default};
