import"./pqrsService-0c99c64a.js";import{_ as st,j as d,E as lt,G as at,l as nt,I as me,z as ot,k as rt,m as U,U as I,H as Le,r as w,o as a,c as o,e as u,f as y,a as e,F as K,b as ne,n as v,u as g,d as Be,i as f,h as m,t as r,A as it,p as ye,g as oe,q as ut,x as ct,ab as dt}from"./index-58581f28.js";import{F as pt}from"./FileSaver.min-cc8488c4.js";import _t from"./pqrUser-b5571268.js";import"./_commonjsHelpers-23102255.js";/* empty css                                                                */const p=re=>(ut("data-v-5d66750c"),re=re(),ct(),re),mt=p(()=>e("header",{class:"topbar",style:{background:`radial-gradient(1200px 500px at 10% -10%, rgba(0, 4, 255, 0.1), transparent 60%),\r
      radial-gradient(1200px 500px at 90% -10%, rgba(0, 255, 170, 0.1), transparent 60%),\r
      linear-gradient(180deg, #f8fafc, #f9fafb)`}},[e("div",{class:"topbar-text",style:{padding:"1rem"}},[e("h1",{class:"title"},"PQRS"),e("p",{class:"blurb"},"peticiones, quejas, reclamos o sugerencias.")])],-1)),yt={style:{display:"flex","flex-direction":"column"}},vt={class:"p-text-secondary m-0 p-0",style:{"min-width":"max-content"}},ht={class:"p-text-secondary m-0 p-0",style:{"min-width":"max-content"}},ft={class:"m-0"},bt={key:0,class:"m-0",style:{"text-transform":"capitalize"}},xt=p(()=>e("b",null,"Responsable:",-1)),gt={key:1,class:"m-0"},kt={key:2,class:"m-0"},Vt={key:3},wt=p(()=>e("b",null,"Notas",-1)),St=p(()=>e("br",null,null,-1)),Ct={style:{display:"flex","flex-direction":"column"}},$t=p(()=>e("h6",{class:"mx-0 my-0"},[e("b",null,"TIPO")],-1)),Rt={style:{display:"flex","align-items":"center",gap:"1rem"}},Tt=p(()=>e("h6",{class:"mx-0 my-0"},[e("b",null,"CANAL")],-1)),qt={class:"m-0 p-0",style:{display:"flex","align-items":"center",gap:"1rem"}},Dt=p(()=>e("h6",{class:"mt-3 mb-2"},[e("b",null,"CONTEXTO")],-1)),Nt={style:{display:"flex",gap:"1rem"}},Pt={style:{display:"flex","flex-direction":"column"}},jt={key:0,class:"mt-3 mb-3"},Ot=p(()=>e("b",null,"DATOS DEL CLIENTE",-1)),Et=[Ot],Ft={style:{display:"flex",gap:"1rem"}},Ut={style:{display:"flex","flex-direction":"column"}},It={key:0},zt=p(()=>e("b",null,"Nombre: ",-1)),Lt={key:1},Bt=p(()=>e("b",null,"Teléfono: ",-1)),At={key:2},Gt=p(()=>e("b",null,"Dirección: ",-1)),Mt={key:3},Qt=p(()=>e("b",null,"Orden: ",-1)),Ht=p(()=>e("h6",{class:"mt-3"},[e("b",null,"HISTORIAL")],-1)),Xt={style:{display:"flex",gap:"1rem"}},Yt={style:{display:"flex","flex-direction":"column"}},Jt={style:{display:"flex","flex-direction":"column"}},Kt={class:"p-text-secondary m-0 p-0",style:{"min-width":"max-content"}},Wt={class:"p-text-secondary m-0 p-0",style:{"min-width":"max-content"}},Zt={class:"m-0"},es={key:0,class:"m-0",style:{"text-transform":"capitalize"}},ts=p(()=>e("b",null,"Responsable:",-1)),ss={key:1,class:"m-0"},ls={key:2,class:"m-0"},as={key:3},ns=p(()=>e("b",null,"Notas",-1)),os=p(()=>e("br",null,null,-1)),rs=p(()=>e("h6",{class:"mt-3"},[e("b",null,"¿Cómo desea proceder?")],-1)),is={key:1,class:"mt-3",style:{display:"flex","flex-direction":"column",gap:"1rem"}},us={key:0,style:{display:"flex","justify-content":"space-between"}},cs=p(()=>e("h6",{class:"m-0"},"¿Se dio cortesía del 100%?",-1)),ds={key:1,style:{display:"flex","justify-content":"space-between"}},ps=p(()=>e("h6",{class:"m-0"},"¿Se entregó bono de descuento?",-1)),_s={key:2},ms=p(()=>e("h6",{class:"m-0 my-1"},"Porcentaje de descuento",-1)),ys={key:3},vs=p(()=>e("h6",{class:"m-0 my-1"},"Valor de la orden",-1)),hs={key:4},fs=p(()=>e("h6",{class:"m-0 my-1"},"ID de la orden",-1)),bs=p(()=>e("h6",{class:"m-0 my-1"},"Detalles",-1)),xs={style:{"background-color":"#ff00002e"},class:"p-3"},gs={style:{display:"flex","justify-content":"end",gap:".5rem"}},ks={class:"nav_bar shadow-2 p-0 my-0 mx-3",style:{position:"sticky",top:"3rem","max-width":"96vw",left:"0","background-color":"white","z-index":"99"}},Vs={class:"nav_bar--buttons p-0 m-1"},ws={style:{display:"flex","align-items":"center"}},Ss={style:{display:"flex","justify-content":"center","flex-direction":"column",width:"100%","max-width":"96vw","align-items":"center",gap:"1rem"},class:"mt-0 px-1"},Cs=p(()=>e("h6",null,[e("b",null,"Desde")],-1)),$s=p(()=>e("h6",null,[e("b",null,"Hasta")],-1)),Rs=p(()=>e("h6",null,[e("b",null,"Sedes")],-1)),Ts={style:{display:"flex","align-items":"center",gap:"1rem"}},qs=p(()=>e("h6",{class:"m-0"},[e("b",null,"MODOS")],-1)),Ds={style:{"text-align":"right",margin:"1rem"}},Ns=p(()=>e("div",{class:"px-0 mt-2",style:{display:"flex",width:"100%","align-items":"center","justify-content":"end",gap:"1rem","max-width":"96vw"}},null,-1)),Ps={class:"scroll-container",style:{margin:"0 auto"}},js={style:{display:"flex","max-width":"96vw",overflow:"hidden","align-items":"start",margin:"0 auto"}},Os={class:"grid p-3",style:{"align-items":"center","justify-content":"space-between",display:"flex",gap:"1rem"}},Es={class:"px-2"},Fs=p(()=>e("i",{class:"fa-regular fa-bars-progress"},null,-1)),Us={style:{"text-transform":"uppercase"}},Is={style:{display:"flex",gap:"1rem"}},zs={key:0,class:"m-0 p-0",style:{"min-width":"max-content"}},Ls={key:1,class:"m-0 p-0",style:{"min-width":"max-content"}},Bs={key:2,class:"m-0 p-0",style:{"min-width":"max-content"}},As={key:3,class:"m-0 p-0",style:{"text-align":"justify","min-width":"max-content"}},Gs={key:4,class:"m-0 p-0",style:{"text-align":"justify"}},Ms={key:5,class:"m-0 p-0"},Qs={key:1},Hs={key:6,class:"m-0 p-0",style:{"min-width":"max-content"}},Xs={key:7,class:"p-2",style:{display:"flex",gap:".1rem","flex-direction":"column","align-items":"center"}},Ys={key:8,class:"p-2",style:{display:"flex",gap:".1rem","flex-direction":"column","align-items":"center"}},Js={key:9,class:"p-2",style:{display:"flex",gap:".1rem","flex-direction":"column","align-items":"center"}},Ks={key:10,class:"p-2",style:{display:"flex",gap:".1rem","flex-direction":"column","align-items":"start"}},Ws={key:11},Zs={style:{display:"flex",gap:".4rem","justify-content":"center"},class:"px-2"},el={style:{"max-width":"1366px"},class:"m-auto my-6"},tl={class:"m-0 px-0"},sl=p(()=>e("i",{class:"pi pi-arrow-right"},null,-1)),ll=["onClick"],al={style:{cursor:"pointer"}},nl=["onClick"],ol={style:{"max-width":"1366px"},class:"mx-auto my-6"},rl={class:"m-0 px-0"},il=p(()=>e("i",{class:"pi pi-arrow-right"},null,-1)),ul=["onClick"],cl=["onClick"],dl=["onClick"],pl={style:{"max-width":"1366px"},class:"mx-auto my-3"},_l={class:"m-0 px-0"},ml=p(()=>e("i",{class:"pi pi-arrow-right"},null,-1)),yl=["onClick"],vl={style:{cursor:"pointer"}},hl=["onClick"],fl={style:{display:"flex",width:"100%",margin:"0 auto","max-width":"1200px",gap:"1rem","align-items":"center"},class:"my-4"},bl=p(()=>e("h6",{class:"m-0"},[e("b",null,"Tipo de gráfica")],-1)),xl={__name:"pqrsSection",setup(re){const Ae=d([]),Ge=lt(),Me=[{name:"Líneas",value:"line"},{name:"Barras",value:"bar"}],ve=d([]),de=d([]),pe=d({name:"Barras",value:"bar"}),he=d([]),ie=d(""),z=d(),L=d(),B=d(),W=d(),fe=d([]),be=d([]),xe=d([]),ge=d([]),ke=d([]),Ve=d([]),_e=d([{name:"Basico",x:0},{name:"Reportes Generales",x:-100},{name:"Reportes Graficados",x:-200}]),Z=d(),we=at(),Se=d([]),D=d({id:2,name:"Generada",description:"Estado inicial de la pqr",exist:!0,color:"#3498DB"}),$=nt(),Ce=d([]),A=d(null),$e=d([]),b=d([]),Re=d(!1),ee=d(!1),G=d(null),te=d([{}]),O=d(!1),E=d(null),T=d(!1),M=d(null),ue=n=>{if(!n||typeof n!="string")return{fecha:"—",hora:"—"};const[l,...c]=n.split(" ");return{fecha:l||"—",hora:c.join(" ")||"—"}},Q=me(()=>[4,7].includes(Number(A.value))),Qe=me(()=>{if(A.value==null)return!1;if(Q.value){if(!O.value&&!T.value)return!0;if((O.value||T.value)&&(!E.value||!Z.value)||T.value&&(M.value==null||M.value<0||M.value>100))return!1}return!0}),He=me(()=>{var l;const n=te.value??[];return((l=D==null?void 0:D.value)==null?void 0:l.name)==="Filtradas"?n.filter(c=>Ae.value.includes(c.pqr_request_id)):n.filter(c=>{var x,S;return((x=c==null?void 0:c.current_status)==null?void 0:x.status)===((S=D==null?void 0:D.value)==null?void 0:S.name)})}),Xe=()=>{if(!te.value||te.value.length===0)return alert("No hay PQRs disponibles para descargar."),null;const n=h=>{const _=new Date(h);if(isNaN(_))return null;const k=_.getFullYear(),V=String(_.getMonth()+1).padStart(2,"0"),N=String(_.getDate()).padStart(2,"0");return`${k}-${V}-${N}`},l=n(B.value),c=n(W.value);if(!l||!c)return alert("Selecciona un rango de fechas válido."),null;const x=te.value.filter(h=>{var X,q;const _=(X=h==null?void 0:h.current_status)==null?void 0:X.timestamp;if(!_)return!1;const[k,V,N]=((q=_.split(" ")[0])==null?void 0:q.split("-"))||[];if(!N)return!1;const H=`${N}-${V}-${k}`;return H>=l&&H<=c});if(x.length===0)return alert("No hay PQRs en el rango de fechas seleccionado."),null;const R=x.filter(h=>h.tag_name&&h.tag_name.toUpperCase()!=="CORTESÍAS").reduce((h,_)=>{const k=_.site_name||"Sin Sede";return h[k]||(h[k]=[]),h[k].push(_),h},{});return{hojas:Object.keys(R).map(h=>({hoja:h,title:`Reporte de PQRs - Sede: ${h}`,column_widths:{ID:15,Clasificacion:30,Descripción:60,Fecha:15,Hora:10,Estado:45,"Observación del estado":50,Responsable:50},data:R[h].sort((_,k)=>(_.tag_name||"").localeCompare(k.tag_name||"")).map(_=>{var N,H,X,q,Y;let k="--------",V="--------";if((N=_==null?void 0:_.current_status)!=null&&N.timestamp){const se=_.current_status.timestamp.split(" ");se.length>=2?(k=se[0],V=se.slice(1).join(" ")):k=_.current_status.timestamp}return{ID:_.pqr_request_id,Clasificacion:_.tag_name||"Sin Clasificación",Descripción:_.request_content,Fecha:k,Hora:V,Estado:((H=_.current_status)==null?void 0:H.status)||"N/A","Observación del estado":((X=_.current_status)==null?void 0:X.notes)||"--------",Responsable:((Y=(q=_.current_status)==null?void 0:q.responsible_name)==null?void 0:Y.toUpperCase())||"--------"}})}))}},Ye=async()=>{try{const n=Xe();if(!n)return;const l=await dt.post("https://excel-creator.salchimonster.com/crear-excel",n,{responseType:"blob"}),c=new Blob([l.data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});pt.saveAs(c,"Reporte_PQRs.xlsx")}catch(n){console.error("Error al descargar el Excel:",n),alert("Ocurrió un error al intentar descargar el archivo Excel.")}};function F(n){const l=new Date(n);if(isNaN(l))return"—";const c=l.getFullYear(),x=String(l.getMonth()+1).padStart(2,"0"),S=String(l.getDate()).padStart(2,"0");return`${c}-${x}-${S}`}const Je=(n,l)=>n instanceof Date&&l instanceof Date&&!isNaN(n)&&!isNaN(l),Ke=async n=>{ee.value=!0,b.value=n},We=()=>{G.value={global:{value:null,matchMode:it.CONTAINS}}};ot(()=>{We(),z.value=new Date;const n=new Date;n.setDate(n.getDate()-15),L.value=n,B.value=L.value,W.value=z.value});const ce=async()=>{te.value=await U.get(`${I}/get-all-pqrs`);const n=await U.get(`${I}/get-all-pqrs-status`);Ce.value=n,Se.value=n},Ze=async(n,l)=>{if(!n||!l){alert("Por favor, proporciona tanto la fecha de inicio como la fecha de fin.");return}await Te(n,l),L.value=n,z.value=l},Te=async(n,l)=>{if(!Je(n,l))return;const c=F(n),x=F(l),S=await U.get(`${I}/get-pqrs-by-date-range/${c}/${x}`),R=await U.get(`${I}/get-pqrs-by-date-range-types/${c}/${x}`),P=await U.get(`${I}/get_pqrs_by_responsible_and_state/${c}/${x}`);fe.value=S||[],be.value=S!=null&&S[0]?Object.keys(S[0]):[],xe.value=R||[],ge.value=R!=null&&R[0]?Object.keys(R[0]):[],ke.value=P||[],Ve.value=P!=null&&P[0]?Object.keys(P[0]):[],he.value=await U.post(`${I}/get_daily_pqrs_report/${c}/${x}`,{ids:de.value.map(h=>h.site_id)})};rt(async()=>{await ce();const n=await U.get(`${I}/sites`);ve.value=Array.isArray(n)?n:[],await Te(L.value,z.value)}),Le(A,()=>{qe()});const qe=()=>{E.value=null,ie.value="",Z.value=null,O.value=!1,T.value=!1,M.value=null},et=async()=>{let n=null;if(Q.value)if(O.value)n=0;else if(T.value&&E.value!=null){const c=Number(E.value)||0,x=Number(M.value)||0;n=Math.max(0,c-c*x/100)}else!T.value&&E.value!=null&&(n=Number(E.value));const l={pqr_request_id:b.value.pqr_request_id,status_id:A.value,responsible_id:$.rawUserData.id,value:n,notes:ie.value,order_id:Z.value||null};try{await U.post(`${I}/change-pqr-status`,l),await ce(),ee.value=!1,qe()}catch(c){console.error("Error al enviar la actualización de la PQR:",c)}};Le(()=>we.params.section_id,()=>{ce()},{deep:!0});const tt=d([{columnName:"Id",columnValue:"pqr_request_id",columnType:"other",size:"1rem",vif:!0},{columnName:"Estado",columnValue:"current_status",columnType:"status",size:"15rem",vif:!0},{columnName:"Tipo",columnValue:"request_type",columnType:"other",size:"15rem",vif:!0},{columnName:"Clasificacion",columnValue:"tag_name",columnType:"tag",size:"1rem",vif:!0},{columnName:"Restaurante",columnValue:"restaurant",columnType:"restaurant",size:"1rem",vif:!0},{columnName:"Id orden",columnValue:"order_id",columnType:"order_id",size:"1rem",vif:!0},{columnName:"Canal",columnValue:"channel",columnType:"tag",size:"4rem",vif:!0},{columnName:"Sede",columnValue:"site_name",columnType:"other",size:"4rem",vif:!0},{columnName:"Red",columnValue:"red",columnType:"other",size:"4rem",vif:!0},{columnName:"Comentarios",columnValue:"request_content",columnType:"other",size:"40rem",vif:!0},{columnName:"Responsable",columnValue:"responsible_name",columnType:"responsible_name",size:"20rem",vif:!1}]);return(n,l)=>{var De,Ne;const c=w("Tag"),x=w("Timeline"),S=w("Dialog"),R=w("Dropdown"),P=w("Checkbox"),h=w("InputNumber"),_=w("InputText"),k=w("Textarea"),V=w("Button"),N=w("Calendar"),H=w("MultiSelect"),X=w("Rating"),q=w("Column"),Y=w("DataTable"),se=w("Chart");return a(),o(K,null,[mt,u(S,{class:"mx-2",visible:Re.value,"onUpdate:visible":l[0]||(l[0]=s=>Re.value=s),modal:"",header:`Historial de la PQR · ID ${((De=$e.value)==null?void 0:De.pqr_request_id)??""}`,style:{width:"40rem"}},{default:y(()=>{var s;return[u(x,{value:((s=$e.value)==null?void 0:s.status_history)||[]},{opposite:y(({item:t})=>[e("div",yt,[e("p",vt,r(ue(t==null?void 0:t.timestamp).fecha),1),e("p",ht,r(ue(t==null?void 0:t.timestamp).hora),1)])]),content:y(({item:t})=>[u(c,{style:v(`background-color:${(t==null?void 0:t.color)||"#64748b"}`)},{default:y(()=>[e("p",ft,[e("b",null,r((t==null?void 0:t.status)||"—"),1)])]),_:2},1032,["style"]),t!=null&&t.responsible_name?(a(),o("p",bt,[xt,m(" "+r(((t==null?void 0:t.responsible_name)||"").toLowerCase()),1)])):f("",!0),(t==null?void 0:t.value)!=null?(a(),o("p",gt,[m(" Le costó a la empresa "),e("b",null,r(g(ye)(t.value)),1)])):f("",!0),t!=null&&t.order_id?(a(),o("p",kt,[m("Orden entregada "),e("b",null,r(t.order_id),1)])):f("",!0),t!=null&&t.notes?(a(),o("p",Vt,[wt,m(" "+r(t.notes),1)])):f("",!0),St]),_:1},8,["value"])]}),_:1},8,["visible","header"]),u(S,{class:"mx-2",visible:ee.value,"onUpdate:visible":l[9]||(l[9]=s=>ee.value=s),modal:"",header:`Gestión de la PQR · ID ${((Ne=b.value)==null?void 0:Ne.pqr_request_id)??""}`,style:{width:"50rem"}},{footer:y(()=>[e("div",gs,[u(V,{label:"Cancelar",text:"",onClick:l[8]||(l[8]=s=>ee.value=!1)}),u(V,{label:"Enviar",severity:"help",disabled:!Qe.value,onClick:et},null,8,["disabled"])])]),default:y(()=>{var s,t,C,j,le,ae,J,Pe,je,Oe,Ee,Fe,Ue,Ie,ze;return[e("div",Ct,[$t,e("p",Rt,r((s=b.value)==null?void 0:s.request_type),1),Tt,e("p",qt,r((t=b.value)==null?void 0:t.channel),1),Dt,e("div",Nt,[e("div",{style:v([{width:".4rem","max-width":".4rem","border-radius":"45rem"},`background-color:${((C=b.value)==null?void 0:C.channel_color)||"#64748b"}`])},null,4),e("div",Pt,[e("p",null,r((j=b.value)==null?void 0:j.request_content),1)])]),(le=b.value)!=null&&le.user_name||(ae=b.value)!=null&&ae.user_phone?(a(),o("h6",jt,Et)):f("",!0),e("div",Ft,[e("div",{style:v([{width:".4rem","max-width":".4rem","border-radius":"45rem"},`background-color:${((J=b.value)==null?void 0:J.channel_color)||"#64748b"}`])},null,4),e("div",Ut,[(Pe=b.value)!=null&&Pe.user_name?(a(),o("span",It,[zt,m(r(b.value.user_name),1)])):f("",!0),(je=b.value)!=null&&je.user_phone?(a(),o("span",Lt,[Bt,m(r(b.value.user_phone),1)])):f("",!0),(Oe=b.value)!=null&&Oe.user_address?(a(),o("span",At,[Gt,m(r(b.value.user_address),1)])):f("",!0),(Ee=b.value)!=null&&Ee.order_id?(a(),o("span",Mt,[Qt,m(r(b.value.order_id),1)])):f("",!0)])]),Ht,e("div",Xt,[e("div",{style:v([{width:".4rem","max-width":".4rem","border-radius":"45rem"},`background-color:${((Ie=(Ue=(Fe=b.value)==null?void 0:Fe.status_history)==null?void 0:Ue[0])==null?void 0:Ie.color)||"#64748b"}`])},null,4),e("div",Yt,[u(x,{value:((ze=b.value)==null?void 0:ze.status_history)||[]},{opposite:y(({item:i})=>[e("div",Jt,[e("p",Kt,r(ue(i==null?void 0:i.timestamp).fecha),1),e("p",Wt,r(ue(i==null?void 0:i.timestamp).hora),1)])]),content:y(({item:i})=>[u(c,{style:v(`background-color:${(i==null?void 0:i.color)||"#64748b"}`)},{default:y(()=>[e("p",Zt,[e("b",null,r((i==null?void 0:i.status)||"—"),1)])]),_:2},1032,["style"]),i!=null&&i.responsible_name?(a(),o("p",es,[ts,m(" "+r(((i==null?void 0:i.responsible_name)||"").toLowerCase()),1)])):f("",!0),(i==null?void 0:i.value)!=null?(a(),o("p",ss,[m(" Le costó a la empresa "),e("b",null,r(g(ye)(i.value)),1)])):f("",!0),i!=null&&i.order_id?(a(),o("p",ls,[m("Orden entregada "),e("b",null,r(i.order_id),1)])):f("",!0),i!=null&&i.notes?(a(),o("p",as,[ns,m(" "+r(i.notes),1)])):f("",!0),os]),_:1},8,["value"])])]),rs,u(R,{modelValue:A.value,"onUpdate:modelValue":l[1]||(l[1]=i=>A.value=i),options:Ce.value.filter(i=>i.id!==2),optionLabel:"name",optionValue:"id",placeholder:"Selecciona un estado",style:{"max-width":"20rem"}},null,8,["modelValue","options"]),A.value?(a(),o("div",is,[Q.value?(a(),o("div",us,[cs,u(P,{binary:"",modelValue:O.value,"onUpdate:modelValue":l[2]||(l[2]=i=>O.value=i)},null,8,["modelValue"])])):f("",!0),Q.value?(a(),o("div",ds,[ps,u(P,{binary:"",modelValue:T.value,"onUpdate:modelValue":l[3]||(l[3]=i=>T.value=i)},null,8,["modelValue"])])):f("",!0),Q.value&&T.value?(a(),o("div",_s,[ms,u(h,{modelValue:M.value,"onUpdate:modelValue":l[4]||(l[4]=i=>M.value=i),min:0,max:100,suffix:" %",style:{width:"100%"}},null,8,["modelValue"])])):f("",!0),Q.value&&(O.value||T.value)?(a(),o("div",ys,[vs,u(h,{modelValue:E.value,"onUpdate:modelValue":l[5]||(l[5]=i=>E.value=i),mode:"currency",currency:"COP",locale:"es-CO",min:0,style:{width:"100%"}},null,8,["modelValue"])])):f("",!0),Q.value&&(O.value||T.value)?(a(),o("div",hs,[fs,u(_,{modelValue:Z.value,"onUpdate:modelValue":l[6]||(l[6]=i=>Z.value=i),style:{width:"100%"}},null,8,["modelValue"])])):f("",!0),e("div",null,[bs,u(k,{modelValue:ie.value,"onUpdate:modelValue":l[7]||(l[7]=i=>ie.value=i),rows:"5",style:{resize:"none",width:"100%"}},null,8,["modelValue"])]),e("h6",xs,[m(" Recuerde que está firmando como "),e("b",null,r(g($).rawUserData.name),1),m(". No preste sus credenciales. ")])])):f("",!0)])]}),_:1},8,["visible","header"]),e("div",null,[e("nav",ks,[e("ul",Vs,[(a(!0),o(K,null,ne(Se.value,s=>(a(),o("li",{key:s.id,style:{display:"flex","align-items":"center"}},[u(c,{style:v([`background-color:${s.color}`,{height:"1.3rem","aspect-ratio":"1/1","border-radius":"50%"}])},null,8,["style"]),u(V,{onClick:()=>{D.value=s,g($).currentSection_pqr=_e.value[0]},class:Be(["nav_bar--buttons-button p-2",s.id===D.value.id?"nav_bar--buttons-button-selected":""]),label:s.name},null,8,["onClick","class","label"])]))),128)),e("li",ws,[u(c,{style:v(["background-color:#c55a11",{height:"1.3rem","aspect-ratio":"1/1","border-radius":"50%"}])}),u(V,{onClick:l[10]||(l[10]=()=>{D.value={id:60,name:"Filtradas",color:"#c55a11",exist:!0},g($).currentSection_pqr=_e.value[0]}),class:Be(["nav_bar--buttons-button p-2",D.value.id===60?"nav_bar--buttons-button-selected":""]),label:"Filtradas"},null,8,["class"])])])]),e("div",Ss,[g($).currentSection_pqr.x!==0?(a(),o("div",{key:0,class:"my-0 px-0",style:v([g($).currentSection_pqr.x!==0?"opacity:1":"opacity:0",{display:"flex",transition:"all ease .5s","align-items":"end",gap:"1rem"}])},[Cs,u(N,{style:{"max-width":"7.5rem"},modelValue:B.value,"onUpdate:modelValue":l[11]||(l[11]=s=>B.value=s),dateFormat:"dd-mm-yy"},null,8,["modelValue"]),$s,u(N,{style:{"max-width":"7.5rem"},disabled:!B.value,modelValue:W.value,"onUpdate:modelValue":l[12]||(l[12]=s=>W.value=s),dateFormat:"dd-mm-yy"},null,8,["disabled","modelValue"]),g($).currentSection_pqr.x===-200?(a(),o(K,{key:0},[Rs,u(H,{style:{"max-width":"17rem","min-width":"15rem"},options:ve.value.filter(s=>s.show_on_web||s.site_id===17||s.site_id===18),optionLabel:"site_name",modelValue:de.value,"onUpdate:modelValue":l[13]||(l[13]=s=>de.value=s),placeholder:"SEDES"},null,8,["options","modelValue"])],64)):f("",!0),u(V,{style:{"min-width":"max-content"},disabled:!B.value||!W.value,onClick:l[14]||(l[14]=s=>Ze(B.value,W.value)),severity:"help",label:"Buscar",icon:"pi pi-search"},null,8,["disabled"])],4)):f("",!0),e("div",Ts,[qs,e("div",null,[u(R,{style:{width:"10rem"},optionLabel:"name",placeholder:"Avanzado",modelValue:g($).currentSection_pqr,"onUpdate:modelValue":l[15]||(l[15]=s=>g($).currentSection_pqr=s),options:_e.value},null,8,["modelValue","options"])]),u(V,{onClick:l[16]||(l[16]=s=>g(Ge).visible_add_pqr=!0),icon:"pi pi-plus",label:"Nueva PQR",severity:"help"}),e("div",Ds,[u(V,{onClick:Ye,label:"Descargar PQRs como Excel",icon:"pi pi-file-excel",severity:"success",class:"p-button-sm"})])])]),Ns,e("div",Ps,[e("div",js,[u(Y,{style:v([`transform:translateX(${g($).currentSection_pqr.x}%);transition:.5s all ease;`,{width:"100%"}]),paginator:!0,rows:15,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",currentPageReportTemplate:"Mostrando {first} a {last} de {totalRecords} solicitudes",rowsPerPageOptions:[5,10,25,100],scrollable:"",showGridlines:"",stripedRows:"",class:"col-12 p-2",value:He.value,tableStyle:"min-width:50rem",filters:G.value},{header:y(()=>[e("div",Os,[e("h4",Es,[Fs,e("b",Us,[m("PQRS "),e("b",null,r(g(we).params.section),1)])]),e("div",Is,[u(_,{modelValue:G.value.global.value,"onUpdate:modelValue":l[17]||(l[17]=s=>G.value.global.value=s),placeholder:"Buscar Solicitud..."},null,8,["modelValue"])])])]),default:y(()=>[(a(!0),o(K,null,ne(tt.value,s=>(a(),oe(q,{key:s.columnValue,field:s.columnValue,header:s.columnName,style:v(`min-width:${s.size}`)},{body:y(({data:t})=>{var C,j,le,ae;return[s.columnType==="date"?(a(),o("h6",zs,r((t[s.columnValue]||"---------").split("-").reverse().join("-")),1)):s.columnType==="responsible_name"?(a(),o("h6",Ls,r(((j=(C=t==null?void 0:t.status_history)==null?void 0:C[0])==null?void 0:j.responsible_name)||"No se ha interactuado"),1)):s.columnType==="max-content"?(a(),o("h6",Bs,r(t[s.columnValue]||"---------"),1)):s.columnType==="order_id"?(a(),o("h6",As,r(t[s.columnValue]||"---------"),1)):s.columnType==="other"?(a(),o("h6",Gs,r(t[s.columnValue]||"---------"),1)):s.columnType==="rating"?(a(),o("h6",Ms,[t[s.columnValue]>0?(a(),oe(X,{key:0,cancel:!1,readonly:"",modelValue:t[s.columnValue],"onUpdate:modelValue":J=>t[s.columnValue]=J},null,8,["modelValue","onUpdate:modelValue"])):(a(),o("span",Qs,"------------"))])):s.columnType==="money"?(a(),o("h6",Hs,r(t[s.columnValue]!=null?g(ye)(t[s.columnValue]):"---------"),1)):s.columnValue==="current_status"?(a(),o("div",Xs,[u(c,{style:v([{color:"white","text-align":"center"},`background-color:${((le=t==null?void 0:t.current_status)==null?void 0:le.color)||"#64748b"}`])},{default:y(()=>{var J;return[m(r(((J=t==null?void 0:t.current_status)==null?void 0:J.status)||"---------"),1)]}),_:2},1032,["style"]),e("b",null,r(((ae=t==null?void 0:t.current_status)==null?void 0:ae.timestamp)||"---------"),1)])):s.columnValue==="channel"?(a(),o("div",Ys,[u(c,{style:v([{color:"white","text-align":"center"},`background-color:${(t==null?void 0:t.channel_color)||"#64748b"}`])},{default:y(()=>[m(r((t==null?void 0:t.channel)||"---------"),1)]),_:2},1032,["style"])])):s.columnValue==="tag_name"?(a(),o("div",Js,[u(c,{style:v([{color:"white","text-align":"center"},`background-color:${(t==null?void 0:t.tag_color)||"#64748b"}`])},{default:y(()=>[m(r((t==null?void 0:t.tag_name)||"---------"),1)]),_:2},1032,["style"])])):s.columnValue==="restaurant"?(a(),o("div",Ks,[u(c,{style:v([{color:"white"},`background-color:${(t==null?void 0:t.restaurant_color)||"#64748b"}`])},{default:y(()=>[m(r((t==null?void 0:t.restaurant)||"---------"),1)]),_:2},1032,["style"])])):(a(),o("span",Ws,r(t[s.columnValue]??"---------"),1))]}),_:2},1032,["field","header","style"]))),128)),u(q,{frozen:"",alignFrozen:"right",header:"Interactuar",class:"my-0 py-0 px-0 mx-0"},{body:y(({data:s})=>[e("div",Zs,[u(V,{onClick:t=>Ke(s),label:"Gestionar",severity:"help",icon:"pi pi-check p-0",class:"my-0 py-2"},null,8,["onClick"])])]),_:1})]),_:1},8,["style","value","filters"]),e("div",{style:v([`transform:translateX(${g($).currentSection_pqr.x}%);transition:.5s all ease;`,{"min-width":"100%",overflow:"auto",margin:"0 auto",height:"min-content"}])},[e("div",el,[e("h4",tl,[e("b",null,[m(" REPORTE POR ESTADO "+r(F(L.value).split("-").reverse().join("-"))+" ",1),sl,m(" "+r(F(z.value).split("-").reverse().join("-")),1)])]),u(Y,{rows:15,style:{"max-width":"96vw","box-shadow":"0 0 1rem #00000030","border-radius":".5rem"},scrollable:"",showGridlines:"",stripedRows:"",class:"col-12 m-auto my-4",value:fe.value,tableStyle:"min-width:50rem",filters:G.value},{default:y(()=>[(a(!0),o(K,null,ne(be.value,s=>(a(),oe(q,{key:s,class:"p-0 py-1 text-center",style:{"max-width":"min-content","text-transform":"uppercase"},header:s},{body:y(({data:t})=>{var C;return[e("div",null,[((C=t.sede)==null?void 0:C.valor)==="total"?(a(),o("h6",{key:0,onClick:j=>n.setFilters(t[s].pqrs),class:"m-0 py-1 px-2 text-xl valor2",style:v([{"text-align":"center","background-color":"var(--blue-100)"},s!=="sede"?"justify-content:center;":"justify-content:start;"])},[e("b",al,r(t[s].valor),1)],12,ll)):(a(),o("h6",{key:1,onClick:j=>n.setFilters(t[s].pqrs),class:"m-0 py-1 px-2 valor",style:v([{"justify-content":"center",cursor:"pointer"},"justify-content:start;"])},r(t[s].valor),13,nl))])]}),_:2},1032,["header"]))),128))]),_:1},8,["value","filters"])]),e("div",ol,[e("h4",rl,[e("b",null,[m(" REPORTE POR RESPONSABLES "+r(F(L.value).split("-").reverse().join("-"))+" ",1),il,m(" "+r(F(z.value).split("-").reverse().join("-")),1)])]),u(Y,{rows:15,style:{"max-width":"96vw","box-shadow":"0 0 1rem #00000030","border-radius":".5rem"},scrollable:"",showGridlines:"",stripedRows:"",class:"col-12 m-auto my-4",value:ke.value,tableStyle:"min-width:50rem",filters:G.value},{default:y(()=>[(a(!0),o(K,null,ne(Ve.value,s=>(a(),oe(q,{key:s,class:"p-1 text-center",style:{"max-width":"min-content","text-transform":"uppercase"},header:s},{body:y(({data:t})=>[e("div",null,[t.responsible_name==="total"?(a(),o("h6",{key:0,onClick:C=>n.setFilters(t[s].pqrs),class:"m-0 py-1 px-2 text-xl valor2",style:v([{display:"flex","text-align":"center","background-color":"var(--blue-100)"},s!=="responsible_name"?"justify-content:center;":"justify-content:start;"])},[e("b",null,r(t[s].valor),1)],12,ul)):t.responsible_name==="pendiente"?(a(),o("h6",{key:1,onClick:C=>n.setFilters(t[s].pqrs),class:"m-0 py-1 px-2 valor",style:v([{display:"flex","text-align":"center",color:"var(--red-900)","background-color":"var(--red-100)"},s!=="responsible_name"?"justify-content:center;":"justify-content:start;"])},[e("b",null,r(t[s].valor),1)],12,cl)):(a(),o("h6",{key:2,onClick:C=>n.setFilters(t[s].pqrs),class:"m-0 py-1 px-2 valor",style:v([{display:"flex","text-align":"start"},s!=="responsible_name"?"justify-content:center;":"justify-content:start;"])},r(t[s].valor),13,dl))])]),_:2},1032,["header"]))),128))]),_:1},8,["value","filters"])]),e("div",pl,[e("h4",_l,[e("b",null,[m(" REPORTE POR TIPOS "+r(F(L.value).split("-").reverse().join("-"))+" ",1),ml,m(" "+r(F(z.value).split("-").reverse().join("-")),1)])]),u(Y,{rows:15,style:{"max-width":"96vw","box-shadow":"0 0 1rem #00000030","border-radius":".2rem","background-color":"white"},scrollable:"",showGridlines:"",stripedRows:"",class:"col-12 m-auto my-4",value:xe.value,tableStyle:"min-width:50rem",filters:G.value},{default:y(()=>[(a(!0),o(K,null,ne(ge.value,s=>(a(),oe(q,{key:s,class:"p-0 text-center",style:{"max-width":"min-content","text-transform":"uppercase"},header:s},{body:y(({data:t})=>{var C;return[e("div",null,[((C=t.sede)==null?void 0:C.valor)==="total"?(a(),o("h6",{key:0,onClick:j=>n.setFilters(t[s].pqrs),class:"m-0 py-1 px-2 text-xl valor2",style:v([{"text-align":"center","background-color":"var(--blue-100)"},s!=="sede"?"justify-content:center;":"justify-content:start;"])},[e("b",vl,r(t[s].valor),1)],12,yl)):(a(),o("h6",{key:1,onClick:j=>n.setFilters(t[s].pqrs),class:"m-0 py-1 px-2 valor",style:v([{"justify-content":"center",cursor:"pointer"},"justify-content:start;"])},r(t[s].valor),13,hl))])]}),_:2},1032,["header"]))),128))]),_:1},8,["value","filters"])])],4),e("div",{class:"p-3",style:v([`transform:translateX(${g($).currentSection_pqr.x}%);transition:.5s all ease;`,{"min-width":"100%",overflow:"auto",height:"min-content",margin:"0 auto"}])},[e("div",fl,[bl,u(R,{modelValue:pe.value,"onUpdate:modelValue":l[18]||(l[18]=s=>pe.value=s),options:Me,optionLabel:"name"},null,8,["modelValue"])]),u(se,{type:pe.value.value,data:he.value,class:"h-[10rem] p-2 h-50",style:{width:"100%",margin:"0 auto","max-width":"1200px","box-shadow":"0 0 10px rgba(0,0,0,.2)","border-radius":".5rem"}},null,8,["type","data"])],4)])]),u(_t,{onReload:l[19]||(l[19]=s=>ce())})])],64)}}},$l=st(xl,[["__scopeId","data-v-5d66750c"]]);export{$l as default};
