import{_ as ae,z as oe,f as d,u as se,g as F,h as D,r as E,o as g,c as v,a as l,t as r,l as c,d as n,w as p,F as j,b as P,v as B,U as x,k as u,x as te,q as le,P as ne,p as ie,e as re}from"./index-0b69e6d4.js";import{f as L}from"./formatoPesos-2a38d2e7.js";const M=S=>(ie("data-v-fba85274"),S=S(),re(),S),ce={class:"col-12 px-4 m-0",style:{"background-color":"transparent",border:"none"}},de={class:"card p-0 lg:p-6",style:{"background-color":"transparent",border:"none"}},pe={class:"text-2xl titulo my-6",style:{"text-transform":"capitalize","font-weight":"bold"}},ue={class:"col-12 grid m-0 p-0"},me={class:"col-12 md:col-12 p-0 m-0 mb-4",style:{}},ge={style:{"text-transform":"capitalize"},class:"text-xl mb-4 col-12"},ve=["onClick"],fe={style:{"text-transform":"capitalize","border-right":"2px solid rgba(0, 0, 0, 0.144)"},class:"grid col-12 lg:col-6 mx-0 px-0",st:""},he={class:"col-9 text-left py-0"},_e={class:"col-3 text-right py-0"},be={class:"card col-12 p-4",style:{"box-shadow":"0 0 20px rgba(0, 0, 0, 0.172)",border:"none"}},xe={style:{"text-transform":"capitalize"},class:"text-xl mb-6 mt-3"},ye={class:"grid"},we={style:{"text-transform":"lowercase"},class:"grid lg:col-6 col-12 px-0 py-3 mx-0"},$e={style:{},class:"col-6 text-left py-0"},Ce={class:"col-6 text-right py-0"},ke={class:"col-12",style:{display:"flex","justify-content":"center"}},Ae=M(()=>l("h5",null,"Nombre del grupo",-1)),Ve={style:{display:"flex"}},Ee={class:"grid col-12 p-0 pl-2"},je={class:"col-6"},Se={class:"col-6 text-right"},ze={class:"flex align-items-center justify-content-center"},Te=M(()=>l("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1)),Ue={__name:"sesionAdicionales",setup(S){const z=oe(),G=d(),R=d(),J=d([]),s=se(),C=d(!1),k=d(!1),O=d(),T=d(),f=d({}),A=d(!1),y=d({price:0}),U=d({lista:{}}),m=d({grupo:[]}),q=t=>{T.value=!0,f.value=t},H=t=>{N[s.params.adicionales];const e=`${x}/${s.params.adicionales}/${t}`;fetch(e,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(f.value)}).then(a=>a.json()).then(a=>{T.value=!1,w(),$().then(i=>i.map(h=>V(h[_[s.params.adicionales]])))}).catch(a=>console.error("Error:",a))};F(()=>U.value.lista,t=>{for(const e in t){const a=parseInt(e);if(t[e])m.value.grupo.includes(a)||m.value.grupo.push(a);else{const i=m.value.grupo.indexOf(a);i!==-1&&m.value.grupo.splice(i,1)}}},{deep:!0});const K=t=>{O.value=t,A.value=!0},Q=()=>{A.value=!1},W=async()=>{const t=`${x}/${s.params.adicionales}`;fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(y.value)}).then(e=>e.json()).then(e=>{C.value=!1,w()}).catch(e=>console.error("Error:",e))},X=async()=>{const t=`${x}/grupo-${s.params.adicionales}`,e={};e.name=m.value.name,e[Z[s.params.adicionales]]=m.value.grupo,fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(a=>a.json()).then(a=>{console.log(a),k.value=!1,w(),$().then(i=>i.map(h=>V(h[_[s.params.adicionales]])))}).catch(a=>console.error("Error:",a))},Y=async t=>{const e=`${x}/grupo-${s.params.adicionales}/${t}`;fetch(e,{method:"DELETE",headers:{"Content-Type":"application/json"}}).then(a=>{if(a.ok)return A.value=!1,a.json();throw new Error("Something went wrong")}).then(a=>{w(),$().then(i=>i.map(h=>V(h[_[s.params.adicionales]])))}).catch(a=>console.error("Error:",a))},_={salsas:"grupo_salsa_id",toppings:"grupo_topping_id",cambios:"grupo_cambio_id",acompanantes:"grupo_acompanante_id",adicionales:"grupo_id"},N={salsas:"salsa_id",toppings:"topping_id",cambios:"cambio_id",acompanantes:"acompanante_id",adicionales:"adicional_id"},Z={salsas:"salsas",toppings:"toppings",cambios:"cambios",acompanantes:"acompanantes",adicionales:"adicionales"},w=async()=>{try{z.setLoading(!0,`cargando ${s.params.adicionales}`);const e=await(await fetch(`${x}/${s.params.adicionales}`)).json();G.value=e,z.setLoading(!1,`cargando ${s.params.adicionales}`)}catch(t){console.error("Error fetching data: ",t)}},$=async()=>{try{z.setLoading(!0,`cargando grupo de ${s.params.adicionales}`);const e=await(await fetch(`${x}/grupo-${s.params.adicionales}`)).json();return R.value=e,z.setLoading(!1,`cargando ${s.params.adicionales}`),e}catch(t){console.error("Error fetching data: ",t)}},V=async t=>{try{const a=await(await fetch(`${x}/grupo-${s.params.adicionales}/${t}/${s.params.adicionales}`)).json();return J.value[t]=a,a}catch(e){console.error("Error fetching data: ",e)}};return F(()=>s.params.adicionales,(t,e)=>{t!==e&&(w(),$().then(a=>a.map(i=>V(i[_[s.params.adicionales]]))))}),D(w),D($),D(async()=>{$().then(t=>t.map(e=>V(e[_[s.params.adicionales]])))}),(t,e)=>{const a=E("Button"),i=E("inputText"),h=E("inputNumber"),I=E("Dialog"),ee=E("Checkbox");return g(),v(j,null,[l("div",ce,[l("div",de,[l("p",pe,"grupos de "+r(c(s).params.adicionales),1),n(a,{class:"mb-6",style:{"text-transform":"capitalize"},onClick:e[0]||(e[0]=o=>k.value=!k.value)},{default:p(()=>[u("Nuevo grupo")]),_:1}),l("div",ue,[(g(!0),v(j,null,P(R.value,o=>(g(),v("div",me,[l("div",{class:"card m-0 grid col-12",style:B([`background-color:${c(te)[c(s).params.adicionales]}`,{position:"relative","box-shadow":"0 0 20px rgba(0, 0, 0, 0.144)",border:"none"}])},[l("p",ge,[l("b",null,r(o.name),1)]),l("button",{onClick:b=>K(o),class:"add-cart-btn text-xl",style:{cursor:"pointer",position:"absolute",top:"-1rem",right:"-1rem","background-color":"var(--red-400)",width:"2.5rem",height:"2.5rem","border-radius":"50%",display:"flex","align-items":"center","justify-content":"center",border:"none"}},[l("i",{style:{color:"white"},class:le(["icono text-2xl p-0 m-0",c(ne).TIMES])},null,2)],8,ve),(g(!0),v(j,null,P(J.value[o[_[c(s).params.adicionales]]],(b,Ne)=>(g(),v("div",fe,[l("span",he,[u(r(b.name)+" ",1),n(a,{onClick:Ie=>q(b),class:"p-0",size:"small",text:"",label:"Editar"},null,8,["onClick"])]),l("span",_e,r(c(L)(b.price)),1)]))),256))],4)]))),256))]),l("div",be,[l("p",xe,[l("b",null,"Todas las "+r(c(s).params.adicionales),1)]),l("div",ye,[(g(!0),v(j,null,P(G.value,o=>(g(),v("div",we,[l("span",$e,[u(r(o.name)+" ",1),n(a,{onClick:b=>q(o),class:"p-0",size:"small",text:"",label:"Editar"},null,8,["onClick"])]),l("span",Ce,r(c(L)(o.price)),1)]))),256))]),l("div",ke,[n(a,{class:"",style:{"text-transform":"capitalize"},onClick:e[1]||(e[1]=o=>C.value=!C.value)},{default:p(()=>[u("Agregar")]),_:1})])])])]),n(I,{visible:C.value,"onUpdate:visible":e[4]||(e[4]=o=>C.value=o),modal:"true",style:B([{width:"500px",height:"max-content"},{"background-color":"white","border-radius":"1rem"}]),header:"Agregar",class:"p-fluid p-2 m-3"},{default:p(()=>[n(i,{class:"mb-4",modelValue:y.value.name,"onUpdate:modelValue":e[2]||(e[2]=o=>y.value.name=o)},null,8,["modelValue"]),n(h,{class:"mb-4",modelValue:y.value.price,"onUpdate:modelValue":e[3]||(e[3]=o=>y.value.price=o)},null,8,["modelValue"]),u(" "+r(y.value)+" ",1),n(a,{style:{"text-transform":"capitalize"},onClick:W},{default:p(()=>[u("Agregar")]),_:1})]),_:1},8,["visible"]),n(I,{visible:T.value,"onUpdate:visible":e[8]||(e[8]=o=>T.value=o),modal:"true",style:B([{width:"500px",height:"max-content"},{"background-color":"white","border-radius":"1rem"}]),header:`EDITAR ${f.value.name}`,class:"p-fluid p-2 m-3"},{default:p(()=>[n(i,{class:"mb-4",modelValue:f.value.name,"onUpdate:modelValue":e[5]||(e[5]=o=>f.value.name=o)},null,8,["modelValue"]),n(h,{class:"mb-4",modelValue:f.value.price,"onUpdate:modelValue":e[6]||(e[6]=o=>f.value.price=o)},null,8,["modelValue"]),n(a,{style:{"text-transform":"capitalize"},onClick:e[7]||(e[7]=o=>H(f.value[N[c(s).params.adicionales]]))},{default:p(()=>[u("Guardar")]),_:1})]),_:1},8,["visible","header"]),n(I,{visible:k.value,"onUpdate:visible":e[10]||(e[10]=o=>k.value=o),modal:"true",style:B([{width:"500px",height:"max-content"},{"background-color":"white","border-radius":"1rem"}]),header:"Agregar",class:"p-fluid p-2 m-3"},{default:p(()=>[Ae,n(i,{class:"mb-4",modelValue:m.value.name,"onUpdate:modelValue":e[9]||(e[9]=o=>m.value.name=o)},null,8,["modelValue"]),(g(!0),v(j,null,P(G.value,o=>(g(),v("div",Ve,[n(ee,{modelValue:U.value.lista[o[N[c(s).params.adicionales]]],"onUpdate:modelValue":b=>U.value.lista[o[N[c(s).params.adicionales]]]=b,binary:"",value:!1},null,8,["modelValue","onUpdate:modelValue"]),l("div",Ee,[l("div",je,r(o.name),1),l("div",Se,r(c(L)(o.price)),1)])]))),256)),n(a,{style:{"text-transform":"capitalize"},onClick:X},{default:p(()=>[u("Crear Grupo")]),_:1}),u(" "+r(U.value)+" "+r(m.value),1)]),_:1},8,["visible"]),n(I,{header:"Confirmation",visible:A.value,"onUpdate:visible":e[12]||(e[12]=o=>A.value=o),style:{width:"350px"},modal:!0},{footer:p(()=>[n(a,{label:"No",icon:"pi pi-times",onClick:Q,class:"p-button-text"}),n(a,{label:"Si",icon:"pi pi-check",onClick:e[11]||(e[11]=o=>Y(O.value[[_[c(s).params.adicionales]]])),class:"p-button-text",autofocus:""})]),default:p(()=>[l("div",ze,[Te,l("span",null,[u("Seguro que desea eliminar "),l("b",null,r(O.value.name),1)])])]),_:1},8,["visible"])],64)}}},Ge=ae(Ue,[["__scopeId","data-v-fba85274"]]);export{Ge as default};
