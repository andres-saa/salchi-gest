import{u as M,f as g,g as h,h as F,i as u,s as p,j as R,r as i,o as v,c as f,a as o,d as n,w as l,k as r,l as c,m as k,F as x,b as A,n as q,U as w,q as S,P as C,t as b,v as E}from"./index-a549dd16.js";import"./jspdf.es.min-e999fa87.js";import"./dropDownAux-708d0cb4.js";import"./userServices-2239b3ea.js";/* empty css                                                             */import"./dialogoEditarProducto.vue_vue_type_style_index_0_scoped_886cb754_lang-3302ba6d.js";import"./formatoPesos-2a38d2e7.js";const H=o("p",{class:"mb-2 text-4xl text-center px-4",style:{"font-weight":"bold"}},[o("i",{class:"fa-solid fa-utensils"}),r(" MenÃº ")],-1),z={class:"col-12 m-auto grid p-0",style:{"max-width":"800px"}},G={style:{display:"flex","overflow-x":"auto","align-items":"center"},class:"col-12 px-2 my-3 pb-4 md:p-0"},K={style:{"min-width":"max-content"}},Q={class:"",style:{"min-width":"max-content"}},W={class:"grid col-12 mt-3 m-0 p-0",style:{"max-width":"1000px"}},X={class:"col p-2"},Y={style:{width:"100%"},sclass:"text-center"},Z={class:"col-12 lg:col-9 mr-auto ml-auto m-0 p-0 mt-8",style:{width:"100%"}},ee=["src"],te={class:"col-12 m-auto p-0 m-0",style:{"max-width":"800px"}},oe=o("h5",null,"Nombre de la nueva categoria",-1),ae={class:"p-input-icon-left",style:{width:"100%"}},se=o("i",{class:"pi pi-pencil"},null,-1),ne=o("span",{class:"text-center col-12 p-0"},"Agregar Categoria",-1),ge={__name:"MenuTienda",setup(le){const V=M(),d=g(!1),_=g([]),y=g(),N=g(V.path),L=async()=>{try{return await(await fetch(`${w}/categories`)).json()}catch(e){console.error("Error fetching data: ",e)}};h(()=>V.path,e=>{N.value=e}),h(u,(e,t)=>{e!==t&&(console.log(t,e),localStorage.setItem("categoryValue",JSON.stringify(e)),e.category_name!="Nueva categoria"?E.push({path:`/tienda-menu/productos/${e.category_name}`,query:{category:e.category_id}}):d.value=!0)}),h(p,(e,t)=>{e!==t&&(console.log(t,e),localStorage.setItem("siteDropValue",JSON.stringify(e)))});const O=async()=>{const e=`${w}/categories`,t={category_name:y.value};try{const s=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!s.ok)throw d.value=!1,new Error(`HTTP error! status: ${s.status}`);const m=await s.json();console.log("Success:",m),d.value=!1,D(),E.push({path:"/tienda-menu/"})}catch(s){console.error("Error:",s)}},P=[{name:"Adiciones",to:"adicionales",severity:"success",icon:"fa-solid fa-bowl-rice"},{name:"Salsas",to:"salsas",severity:"warning",icon:"fa-solid fa-pepper-hot"},{name:"Topping",to:"toppings",severity:"danger",icon:"fa-solid fa-candy-cane"},{name:"Cambios",to:"cambios",severity:"info",icon:"fa-solid fa-dice"},{name:"Acompanantes",to:"acompanantes",severity:"help"}],$=async()=>{try{return(await fetch(`${w}/sites`)).json()}catch(e){console.log(e)}},D=()=>{L().then(e=>{_.value=e,_.value.push({category_name:"Nueva categoria"})})};return F(async()=>{const e=localStorage.getItem("categoryValue");e&&(u.value=JSON.parse(e));const t=localStorage.getItem("siteDropValue");t&&(p.value=JSON.parse(t)),$().then(s=>R.value=s),D()}),(e,t)=>{const s=i("SPan"),m=i("Dropdown"),T=i("Button"),U=i("RouterLink"),j=i("RouterView"),B=i("InputText"),J=i("Dialog");return v(),f(x,null,[H,o("div",z,[o("div",G,[o("div",K,[n(s,{class:"mr-4",style:{"font-weight":"bold"}},{default:l(()=>[r(" SEDE: ")]),_:1}),r(),n(m,{style:{"min-width":"max-content"},class:"col md:col-6 p-0",modelValue:c(p),"onUpdate:modelValue":t[0]||(t[0]=a=>k(p)?p.value=a:null),options:c(R),optionLabel:"site_name",placeholder:"sede"},null,8,["modelValue","options"])]),o("div",Q,[n(s,{class:"mx-4",style:{"font-weight":"bold"}},{default:l(()=>[r(" CATEGORIA: ")]),_:1}),n(m,{style:{outline:"none","max-width":"min-content"},class:"col-6 p-0",primary:"",modelValue:c(u),"onUpdate:modelValue":t[1]||(t[1]=a=>k(u)?u.value=a:null),options:_.value,placeholder:"Productos"},{value:l(a=>{var I;return[o("div",null,[o("i",{class:S([c(C).STAR_FILL,"mr-2"])},null,2),r(b((I=a.value)!=null&&I.category_name?a.value.category_name:{}),1)])]}),option:l(a=>[o("div",null,[o("span",null,[o("i",{class:S([a.option.category_name=="Nueva categoria"?c(C).PLUS_CIRCLE:c(C).TRASH,"mr-3"])},null,2)]),r(b(a.option.category_name),1)])]),_:1},8,["modelValue","options"])])]),o("div",W,[(v(),f(x,null,A(P,a=>o("div",X,[n(U,{to:`/tienda-menu/${a.to}`},{default:l(()=>[n(T,{style:{height:"2.5rem"},severity:a.severity,class:"outlined col-12 text-center",Secondary:""},{default:l(()=>[o("i",{class:S([a.icon,"mr-2"])},null,2),r(),o("span",Y,b(a.name),1)]),_:2},1032,["severity"])]),_:2},1032,["to"])])),64))]),N.value=="/tienda-menu/"?(v(),f(x,{key:0},A([1,2,3,4,5,6],a=>o("div",Z,[o("img",{style:{width:"100%"},src:`/images/carta/${a}.jpeg`,alt:""},null,8,ee)])),64)):q("",!0)]),o("div",te,[n(j)]),n(J,{header:"Confirmation",visible:d.value,"onUpdate:visible":t[4]||(t[4]=a=>d.value=a),style:{width:"350px"},modal:!0},{default:l(()=>[oe,o("span",ae,[se,n(B,{modelValue:y.value,"onUpdate:modelValue":t[2]||(t[2]=a=>y.value=a),class:"w-100",style:{width:"100%"},type:"text"},null,8,["modelValue"])]),n(T,{onClick:t[3]||(t[3]=a=>O()),style:{margin:"auto"},class:"m-auto my-4 text-center"},{default:l(()=>[ne]),_:1})]),_:1},8,["visible"])],64)}}};export{ge as default};
