import{_ as w,l as c,r as f,a as n,o as g,c as y,b as d,d as r,a1 as v,U as p,j as l,p as x,g as b,K as k,h as I}from"./index-ec97dab3.js";const V=c(),S=e=>{const t=c();return I.get(`${p}/validate-token`,{headers:{Authorization:`Bearer ${e}`}}).then(o=>(o.data.access_token&&t.setUserData(o.data),o.data)).catch(o=>{throw console.error("Error durante la validación del token:",o),o})},U=()=>{const e=c();setInterval(async()=>{const t=e.userData.access_token;if(!t){l.push("/auth/login");return}try{await S(t)}catch(o){console.error("La sesión ha expirado o el token es inválido:",o),e.userData={},l.push("/auth/login")}},6e4)},B={setup(){const e=f({username:"",password:""});return{credentials:e,login:async()=>{const o=new URLSearchParams;o.append("username",e.value.username),o.append("password",e.value.password);try{const a=await fetch(`${p}/token-employer`,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:o});if(!a.ok)throw new Error("Network response was not ok");const i=await a.json();V.setUserData(i),U(),l.push("/")}catch(a){console.error(a)}}}}},u=e=>(x("data-v-5cbc8dca"),e=e(),b(),e),T={style:{display:"flex",position:"relative","background-size":"cover",height:"100vh",width:"100vw",overflow:"hidden"},class:"p-0 fondo"},D=u(()=>d("img",{src:k,alt:"",style:{width:"48px"},class:"m-3"},null,-1)),L=u(()=>d("p",{class:"text-2xl",style:{"font-weight":"bold"}},"Iniciar sesión",-1));function P(e,t,o,a,i,z){const m=n("InputText"),h=n("Password"),_=n("Button");return g(),y("div",T,[d("form",{class:"col-12 m-auto",onSubmit:t[2]||(t[2]=v((...s)=>a.login&&a.login(...s),["prevent"])),style:{"max-width":"min-content",display:"flex","border-radius":"0.5rem","box-shadow":"0 0 10px rgba(0, 0, 0, 0.389)","flex-direction":"column","background-color":"rgb(255, 255, 255)","align-items":"center"}},[D,L,r(m,{class:"my-3 m-0",modelValue:a.credentials.username,"onUpdate:modelValue":t[0]||(t[0]=s=>a.credentials.username=s),type:"text",placeholder:"identificación",style:{width:"100%"}},null,8,["modelValue"]),r(h,{class:"",toggleMask:"",modelValue:a.credentials.password,"onUpdate:modelValue":t[1]||(t[1]=s=>a.credentials.password=s),placeholder:"Clave"},null,8,["modelValue"]),r(_,{size:"samll",style:{width:"100%","background-color":"rgb(255, 98, 0)",border:"none",color:"#fff"},label:"Iniciar sesion",class:"my-3",type:"submit"})],32)])}const E=w(B,[["render",P],["__scopeId","data-v-5cbc8dca"]]);export{E as default};
