import{_ as I,r,q as R,s as V,U as x,a as n,o as m,b as f,i as t,h as a,d as s,F as S,e as j,u,t as l,j as h,x as k,y as E,p as N,m as L}from"./index-e0d1eab6.js";const U=c=>(N("data-v-9ef00d8c"),c=c(),L(),c),F={class:"dialog-sites-discount",style:{display:"flex","flex-direction":"column",gap:"1rem"}},M={style:{display:"flex",gap:"1rem","align-items":"center","justify-content":"space-between","border-radius":".3rem"}},q=["src"],A={style:{display:"flex","justify-content":"end",padding:"0",margin:"0"}},z={class:"container"},G=U(()=>s("h1",null,[s("b",null,"Descuentos")],-1)),H={style:{"text-align":"end",width:"100%"}},J={style:{"text-align":"end",width:"100%"}},K={style:{display:"flex","flex-direction":"column",gap:".5rem"}},O={__name:"discounts",setup(c){const p=r(null),v=r({});R(async()=>{v.value=await V.get(`${x}/discount/get-discounts`)});const _=r({currentSites:!1}),y=r([]),w=d=>{y.value=d,_.value.currentSites=d},C=d=>{p.value.toggle(d)};return(d,g)=>{var b;const i=n("Button"),T=n("Dialog"),o=n("Column"),D=n("Tag"),$=n("RouterLink"),B=n("DataTable");return m(),f(S,null,[t(T,{header:`sedes para el descuento ${(b=y.value)==null?void 0:b.discount_name}`,visible:_.value.currentSites,"onUpdate:visible":g[0]||(g[0]=e=>_.value.currentSites=e),modal:""},{footer:a(()=>[s("div",A,[t(i,{style:{margin:"0"},severity:"help",label:"Agregar Sede"})])]),default:a(()=>[s("div",F,[(m(!0),f(S,null,j(y.value.sites,e=>(m(),f("div",M,[s("img",{style:{width:"3rem","aspect-ratio":"1 / 1","object-fit":"cover","border-radius":".5rem"},src:`${u(x)}/read-product-image/300/site-${e.site_id}`,alt:""},null,8,q),s("h5",null,l(e.site_name),1),t(i,{label:"Eliminar sede",severity:"danger"})]))),256))])]),_:1},8,["header","visible"]),s("div",z,[G,t(B,{value:v.value,stripedRows:""},{default:a(()=>[t(o,{class:"py-1",header:"Nombre",field:"discount_name"}),t(o,{class:"py-1",header:"Codigo",field:"code"}),t(o,{class:"py-1",header:"Tipo",field:"amount"},{body:a(e=>[h(l(e.data.type.name),1)]),_:1}),t(o,{class:"py-1",header:"Monto",field:"amount"},{body:a(e=>[h(l(e.data.amount?u(k)(e.data.amount):`${e.data.percent}%`),1)]),_:1}),t(o,{class:"py-1",header:"Estado",field:"amount"},{body:a(e=>[t(D,{style:{padding:".5 1rem",color:"white","text-transform":"uppercase"},severity:e.data.status=="active"?"success":"danger"},{default:a(()=>[h(l(e.data.status),1)]),_:2},1032,["severity"])]),_:1}),t(o,{class:"py-1",header:"Sedes",field:"amount",'"':""},{body:a(e=>[t(i,{text:"",style:{padding:".5rem",color:"black"},onClick:Q=>w(e.data),icon:"pi pi-home",severity:"help",label:e.data.sites.length},null,8,["onClick","label"])]),_:1}),t(o,{class:"py-1",header:"Tedenciones de 30 dias",field:"amount",style:{}},{body:a(e=>[s("p",H,l(e.data.redent),1)]),_:1}),t(o,{class:"py-1",header:"Ventas de 30 dias",field:"amount",'"':""},{body:a(e=>[s("p",J,l(u(k)(e.data.sell)),1)]),_:1}),t(o,{class:"py-1",header:"",field:"",'"':""},{body:a(e=>[t(i,{onClick:C,cli:"",ref_key:"op",ref:p,text:"",icon:"pi pi-ellipsis-v",severity:"help",style:{color:"black"}},null,512),t(u(E),{ref_key:"op",ref:p},{default:a(()=>[s("div",K,[t(i,{disabled:"",icon:"pi pi-play",label:"Reactivar cupon",severity:"help"}),t($,{to:`/marketing/discounts/${e.data.id}/edit`},{default:a(()=>[t(i,{style:{width:"100%"},icon:"pi pi-pencil",label:"Editar cupon",severity:"help"})]),_:2},1032,["to"])])]),_:2},1536)]),_:1})]),_:1},8,["value"])])],64)}}},X=I(O,[["__scopeId","data-v-9ef00d8c"]]);export{X as default};
