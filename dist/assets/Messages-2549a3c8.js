import{I as et,z as tt,i as te,G as U,h as n,D as Q,C as ot,J as Re,M as at,g as B,o as a,c as r,f as y,e as x,a as i,F as V,q as oe,k as d,t as E,n as p,u as h,d as C,r as He,L as ze,b as st,H as q,j as fe,p as it,m as rt,N as Ie,_ as lt}from"./index-dbb24084.js";import{c as nt,u as dt,P as ct}from"./Messages.vue_vue_type_style_index_0_scoped_be494e09_lang-23da957b.js";const u=F=>(it("data-v-be494e09"),F=F(),rt(),F),ut={key:0},mt=["src"],_t=["src"],pt=["href"],ht=u(()=>i("i",{class:"pi pi-file"},null,-1)),ft={style:{color:"white",margin:"0","font-weight":"300"}},vt=["innerHTML"],gt=["innerHTML"],yt={style:{color:"white",margin:"0","font-weight":"300",position:"absolute",bottom:".5rem",right:"1rem","min-width":"max-content",display:"flex",gap:".5rem"}},wt={style:{opacity:".5"}},kt={key:0,class:"fa-solid fa-check-double",style:{color:"greenyellow"}},bt={key:1,class:"fa-solid fa-check",style:{color:"greenyellow"}},xt={key:2,class:"fa-solid fa-check",style:{color:"gray"}},Ct=u(()=>i("path",{opacity:"0.13",fill:"#0000000",d:"M1.533,3.568L8,12.193V1H2.812C1.042,1,0.474,2.156,1.533,3.568z"},null,-1)),$t=u(()=>i("path",{fill:"currentColor",d:"M1.533,2.568L8,11.193V0L2.812,0C1.042,0,0.474,1.156,1.533,2.568z"},null,-1)),Mt=[Ct,$t],Tt=u(()=>i("path",{opacity:"0.13",d:"M5.188,1H0v11.193l6.467-8.625C7.526,2.156,6.958,1,5.188,1z"},null,-1)),Lt=u(()=>i("path",{fill:"currentColor",d:"M5.188,0H0v11.193l6.467-8.625C7.526,1.156,6.958,0,5.188,0z"},null,-1)),Et=[Tt,Lt],At={style:{display:"flex",gap:"1rem","flex-direction":"column",padding:"1rem  0rem"}},St={style:{display:"flex"}},jt=u(()=>i("i",{class:"fa fa-laugh-wink emoji-picker"},null,-1)),Dt={key:0,style:{position:"absolute",inset:"0",background:"#00000080","z-index":"500000",display:"flex","align-items":"center","justify-content":"center",color:"#fff","font-size":"1.6rem","pointer-events":"none"}},Rt={style:{position:"relative",height:"100%",width:"100%"}},Ht={style:{margin:"0",color:"white","font-weight":"400"}},zt=u(()=>i("i",{class:"fa-solid fa-message text-xl p-1"},null,-1)),It=u(()=>i("i",{class:"fa-solid fa-copy text-xl p-1"},null,-1)),Ut=u(()=>i("i",{class:"fa-solid fa-send text-xl p-1"},null,-1)),Bt=u(()=>i("i",{class:"fa-solid fa-message text-xl p-1"},null,-1)),Vt=u(()=>i("i",{class:"fa-solid fa-copy text-xl p-1"},null,-1)),Ft=u(()=>i("i",{class:"fa-solid fa-send text-xl p-1"},null,-1)),Ot=["src","onClick"],Nt=["src"],Pt=["href"],Wt=u(()=>i("i",{class:"pi pi-file"},null,-1)),Qt=["src","onClick"],qt=["src"],Gt=["href"],Jt=u(()=>i("i",{class:"pi pi-file"},null,-1)),Yt=["innerHTML"],Zt=["innerHTML"],Kt=["onClick"],Xt=["innerHTML"],eo=["innerHTML"],to=["onClick"],oo={style:{color:"white",margin:"0","font-weight":"300",position:"absolute",bottom:".5rem",right:"1rem","min-width":"max-content",display:"flex",gap:".5rem"}},ao={key:0,class:"fa-solid fa-check-double",style:{color:"greenyellow"}},so={key:1,class:"fa-solid fa-check",style:{color:"greenyellow"}},io={key:2,class:"fa-solid fa-check",style:{color:"gray"}},ro=u(()=>i("path",{opacity:"0.13",fill:"#0000000",d:"M1.533,3.568L8,12.193V1H2.812C1.042,1,0.474,2.156,1.533,3.568z"},null,-1)),lo=u(()=>i("path",{fill:"currentColor",d:"M1.533,2.568L8,11.193V0L2.812,0C1.042,0,0.474,1.156,1.533,2.568z"},null,-1)),no=[ro,lo],co=u(()=>i("path",{opacity:"0.13",d:"M5.188,1H0v11.193l6.467-8.625C7.526,2.156,6.958,1,5.188,1z"},null,-1)),uo=u(()=>i("path",{fill:"currentColor",d:"M5.188,0H0v11.193l6.467-8.625C7.526,1.156,6.958,0,5.188,0z"},null,-1)),mo=[co,uo],_o={key:1,style:{height:"100%",width:"3rem","min-width":"3rem","aspect-ratio":"1/1","background-color":"rgb(3 88 95 / 53%)","border-radius":"50%",display:"flex","align-items":"center","justify-content":"center","text-transform":"uppercase"}},po={style:{margin:"0",color:"white","font-weight":"400"}},ho={key:0,style:{display:"flex",gap:"1rem","justify-content":"end",width:"100%"}},fo={style:{"background-color":"#0a3744","max-width":"20rem",width:"100%","border-radius":".5rem",height:"4rem"}},vo={style:{color:"white",margin:"0","font-weight":"300",display:"flex","align-items":"center",gap:".5rem",height:"100%",padding:"1rem 1rem 1rem 1rem"}},go=u(()=>i("i",{class:"pi pi-send",style:{color:"white"}},null,-1)),yo=u(()=>i("div",{style:{height:"100%",width:"3rem","min-width":"3rem","aspect-ratio":"1/1","background-color":"rgb(3 88 95 / 53%)","border-radius":"50%",display:"flex","align-items":"center","justify-content":"center","text-transform":"uppercase",padding:".5rem"}},[i("img",{style:{height:"2rem",width:"2rem","aspect-ratio":"1/1","object-fit":"contain"},src:"https://backend.salchimonster.com/read-photo-product/xai0dVnL",alt:""})],-1)),wo={key:0,style:{"text-align":"center",opacity:"0.6"}},ko={key:1,style:{"max-height":"60vh","overflow-y":"auto"}},bo={key:0,style:{position:"relative","border-radius":".3rem"}},xo=["src"],Co={key:1,style:{position:"relative"}},$o=["src"],Mo={key:2,style:{position:"relative"}},To=u(()=>i("img",{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/8/87/PDF_file_icon.svg/1200px-PDF_file_icon.svg.png",style:{width:"10rem"}},null,-1)),Lo={style:{flex:"1 1 auto"}},Eo={style:{width:"100%","justify-content":"end",display:"flex"}},Ao={key:0,style:{"background-color":"#00000080",position:"fixed",width:"100vw",height:"100vh",left:"0",top:"0","z-index":"1000000",display:"flex","align-items":"center","justify-content":"center",opacity:"1"}},So={style:{"max-height":"90vh",position:"relative","max-width":"90vw"}},jo=["src"],Do=et({__name:"Messages",props:{send_function:{type:Function,default:()=>{}},change_expiration:{type:Function,default:()=>{}},send_text:{type:Function,default:()=>{}}},emits:["down"],setup(F,{expose:Ue,emit:Ro}){const f=nt(),ve=tt(),ge=e=>{e.target.closest(".emoji-picker")||(A.value=!1)};te(()=>{document.addEventListener("click",ge)}),U(()=>{document.removeEventListener("click",ge)});const G=e=>{const o=e.message_data.content??"";navigator.clipboard.writeText(o).then(()=>{ve.add({severity:"success",summary:"Copiado",detail:"El texto ha sido copiado al portapapeles",life:2e3})}).catch(s=>{ve.add({severity:"error",summary:"Error",detail:"No se pudo copiar el texto",life:2e3}),console.error("Error copiando al portapapeles:",s)})},A=n(!1),O=n(null),N=n(!1),Be=dt();function J(e){var s;Array.from(((s=e.clipboardData)==null?void 0:s.items)||[]).forEach(c=>{if(c.kind==="file"){const _=c.getAsFile();if(!_)return;v.value.push({file:_,name:_.name||`pasted-${Date.now()}.${_.type.split("/")[1]||"bin"}`,type:_.type,caption:"",preview:URL.createObjectURL(_)}),S.value=!0}})}const ae=F;te(()=>window.addEventListener("paste",J)),U(()=>window.removeEventListener("paste",J)),te(()=>{window.addEventListener("paste",J)}),U(()=>{window.removeEventListener("paste",J)});const Ve=e=>{R.value+=e.i,A.value=!1},Y=n(!1),v=n([]),S=n(!1),se=n(!1),ye=n(""),ie=e=>{se.value=!0,ye.value=`${e}?size=visual`};function re(e){const o=v.value.splice(e,1);o.length&&o[0].preview&&URL.revokeObjectURL(o[0].preview)}function Fe(){alert("removeAllfiles"),v.value.forEach(e=>e.preview&&URL.revokeObjectURL(e.preview)),v.value=[]}function Oe(e){e.currentTarget===e.target&&(Y.value=!1)}function j(e){return`${q}/files/${e.file_type}s/${e.file_id}?size=thumbnail`}function we(){v.value.forEach(e=>e.preview&&URL.revokeObjectURL(e.preview)),v.value=[]}Q(S,e=>{e||we()}),U(()=>{we()});const Ne=async e=>{if(!(e.message_data.current_status_id>=3||e._marking)){e._marking=!0;try{await fe.post(`${q}/read-message/${e.message_data.user_id}/${w.params.restaurant_id}`,!1),e.message_data.current_status_id=3}catch(o){console.error("No se pudo marcar como leÃ­do",o)}}},ke=()=>{R.value="",A.value=!1},Pe=e=>{ae.send_text(e,l.value),R.value="",N.value=!1},be=e=>{e.preventDefault(),Y.value=!1,Array.from(e.dataTransfer.files||[]).forEach(s=>{const c={file:s,name:s.name,type:s.type,caption:"",preview:""};s.type.startsWith("image/")&&(c.preview=URL.createObjectURL(s)),v.value.push(c)}),v.value.length&&(S.value=!0)},We=()=>{const e=[...v.value];S.value=!1,v.value.forEach(o=>o.preview&&URL.revokeObjectURL(o.preview)),v.value=[],ae.send_function(e)},Qe=()=>{if(!m.value)return;const e=m.value.getBoundingClientRect();$.value.forEach((o,s)=>{if(o.message_data.employer_id||o.message_data.current_status_id>=3)return;const c=m.value.children[s];if(!c)return;const _=c.getBoundingClientRect();_.top>=e.top&&_.bottom<=e.bottom&&Ne(o)})};Q(N,e=>{e||ke()}),n(!1);const w=ot(),xe=e=>{if(!e)return"";const o=e.split(" "),s=Array.from(o[0])[0],c=o[1]?Array.from(o[1])[0]:"";return s+c};let g=null,Z=null,le=!0;const ne=n(!0),$=n([]),de=n({}),m=n(null),D=n(!1),T=n(0),R=n(""),K=n(0),Ce=n(20),H=n(!1),ce=n(!1),P=n(!1),ue=n({}),l=n({message_data:{id:3559,user_id:10,restaurant_id:1,content:`final del mensaje
`,created_at:"2025-05-03T02:16:30.361038+00:00",current_status_id:1,employer_id:1082,employer_name:"ANDRES FELIPE ARrECHEA",wa_id:"wamid.HBgMNTczMjI2ODkyOTg4FQIAERgSQzg4QzYyQzg0MDg0RkY2OEVDAA==",wa_timestamp:"1746238590",context_message_id:"wamid.HBgMNTczMjI2ODkyOTg4FQIAERgSNDIyNUIxQkZEMkE1MTA4RDA3AA==",local_dt:"2025-05-02T21:16:30",file_type:null,file_id:null},time:"09:16 PM",date:"02/05/2025",day_label:"hoy",contest:{message_data:{id:3490,user_id:10,restaurant_id:1,content:"fsfs",created_at:"2025-05-03T01:28:04.499413+00:00",current_status_id:1,employer_id:1082,employer_name:"ANDRES FELIPE ARrECHEA",wa_id:"wamid.HBgMNTczMjI2ODkyOTg4FQIAERgSNDIyNUIxQkZEMkE1MTA4RDA3AA==",wa_timestamp:"1746235684",context_message_id:"null",file_type:null,file_id:null,local_dt:"2025-05-02T20:28:04",time:"08:28 PM",date:"02/05/2025",day_label:"hoy"},time:"08:28 PM",date:"02/05/2025",day_label:"hoy"}});n({});const $e=e=>{N.value=!0,l.value=e},me=e=>{ue.value[e]=!ue.value[e]},W=e=>!!ue.value[e];function z(e){if(!e)return"";let o=e.replace(/\n/g,"<br/>");return o=o.replace(/\*([^*]+)\*/g,"<strong>$1</strong>"),o=o.replace(/((https?:\/\/|www\.)[^\s<]+)/g,s=>`<a href="${s.startsWith("http")?s:`https://${s}`}" target="_blank" style="color:#42a5f5;text-decoration:underline;">${s}</a>`),o}const qe=Re(()=>({position:"absolute",zIndex:"300000",height:"3rem",width:"3rem",borderRadius:"50%",bottom:"5rem",right:"2rem",backgroundColor:P.value?"rgb(33, 150, 243)":"rgba(255, 255, 255,.1)",color:"white",border:"none",padding:"0.5rem 1rem",cursor:"pointer"})),Ge=Re(()=>({position:"absolute",zIndex:"300000",height:"2rem",display:"flex",alignItems:"center",justifyContent:"center",width:"2rem",borderRadius:"50%",bottom:"5rem",right:"1rem",backgroundColor:"rgb(156, 39, 176)",color:"white",border:"none",padding:"0.5rem 1rem",cursor:"pointer"})),I=(e,o="thumbnail")=>`${q}/files/images/${e.message_data.file_id}?size=${o}`,_e=async(e=!0)=>{var s,c,_;if(he.value=!1,H.value=!0,(s=O.value)==null||s.abort(),O.value=new AbortController,K.value=0,ce.value=!1,!w.params.user_id||!w.params.restaurant_id)return;const o=await fe.get(`${q}/conversation/${w.params.restaurant_id}/${w.params.user_id}/${K.value}/20`,!1,{signal:O.value.signal});$.value=((c=o==null?void 0:o[0])==null?void 0:c.messages)||[],de.value=((_=o==null?void 0:o[0])==null?void 0:_.user)||{},setTimeout(()=>{he.value=!0},0),ne.value&&(ne.value=!1),H.value=!1};Q(P,e=>{e||(T.value=0)});const Je=async e=>{const o=$.value.findIndex(s=>s.message_data.wa_id===e.message_data.wa_id);o!==-1?$.value[o]=e:w.params.user_id===e.message_data.wa_user_id&&($.value.push(e),e.message_data.employer_id||(D.value=!0,T.value++)),await Ie()},Ye=async()=>{var _;if(H.value||ce.value)return;H.value=!0;const e=m.value?m.value.scrollHeight:0,o=K.value+Ce.value,s=await fe.get(`${q}/conversation/${w.params.restaurant_id}/${w.params.user_id}/${o}/${Ce.value}`,!1),c=((_=s==null?void 0:s[0])==null?void 0:_.messages)||[];if(c.length===0)ce.value=!0;else{$.value=[...c,...$.value],K.value=o,await Ie();const ee=m.value.scrollHeight;m.value.scrollTop=ee-e}H.value=!1},Me=()=>{if(Qe(),!m.value)return;const{scrollTop:e,scrollHeight:o,clientHeight:s}=m.value;e<50&&Ye(),e+s>=o-50?(D.value=!1,P.value=!1):D.value=!0},Ze=()=>{m.value&&(m.value.scrollTo({bottom:0}),D.value=!1,P.value=!1),T.value=0},X=()=>{m.value&&(setTimeout(()=>{m.value.scrollTo({top:m.value.scrollHeight})},100),D.value=!1,P.value=!1),T.value=0};function Te(){Z&&(clearTimeout(Z),Z=null),g&&(le=!1,g.close(1e3,"routeâ€‘change"),g.onopen=g.onmessage=g.onerror=g.onclose=null,g=null)}function pe(){if(!w.params.user_id)return;const e=`wss://sockets-service.salchimonster.com/ws/${w.params.user_id}`;g=new WebSocket(e),le=!0,g.onopen=()=>{console.log("ðŸŸ¢ Conectado a",e)},g.onmessage=o=>{const s=JSON.parse(o.data);s&&(Je(s),ae.change_expiration(!1))},g.onerror=o=>console.error("WebSocket error",o),g.onclose=o=>{console.log("ðŸ”´ Socket cerrado",o.reason||o.code),le&&(Z=window.setTimeout(pe,5e3))}}te(()=>{_e(),pe(),m.value&&m.value.addEventListener("scroll",Me)}),U(()=>{g&&g.close(),m.value&&m.value.removeEventListener("scroll",Me)}),Q(()=>w.params,()=>{ne.value=!0,$.value=[],Te(),_e(),X(),pe(),T.value=0}),U(()=>{var e;(e=O.value)==null||e.abort(),Te()}),at((e,o,s)=>{var c;(c=O.value)==null||c.abort(),s()});const he=n(!0);return Q(()=>w.params,()=>{_e()}),Ue({scrollToBottom:Ze,scrollToBottomNoSmooth:X,getAllFiles:()=>v.value.map(e=>e.file)}),(e,o)=>{const s=B("Button"),c=B("Textarea"),_=B("Dialog"),ee=B("ProgressSpinner"),Ke=B("progressSpinner"),Xe=B("InputText");return a(),r(V,null,[y(_,{visible:N.value,"onUpdate:visible":o[5]||(o[5]=t=>N.value=t),close:()=>ke,header:"Acciones del mensaje",modal:!0,style:p([{width:"90vw",maxWidth:" 50rem"},{"background-color":"rgb(0, 1, 22)",display:"flex"}]),closable:!0,dismissableMask:!1},{default:x(()=>{var t,k,b;return[i("div",{style:p([l.value.message_data.employer_id?"background-color:#0a3744;border-radius:.5rem 0 .5rem .5rem;":"background-color:#2f2f41;border-radius:0 .5rem .5rem .5rem;",{padding:"1rem 1rem 1rem 1rem","overflow-wrap":"break-word","word-break":"break-word","max-width":"100%","min-width":"10rem",position:"relative",display:"flex","flex-direction":"column",gap:".5rem"}])},[l.value.message_data.file_type?(a(),r(V,{key:0},[l.value.message_data.file_type==="image"?(a(),r("div",ut,[i("img",{class:"img-fluid",src:I(l.value),onClick:o[0]||(o[0]=L=>ie(I(l.value))),style:{"border-radius":".3rem",width:"18rem","object-fit":"contain","aspect-ratio":"1 / 1",cursor:"pointer"}},null,8,mt)])):l.value.message_data.file_type==="audio"?(a(),r("audio",{key:1,src:j(l.value.message_data),controls:"",style:{width:"100%","min-width":"20rem","max-width":"100%","background-color":"white","border-radius":".5rem"}},null,8,_t)):(a(),r("a",{key:2,href:j(l.value.message_data),target:"_blank",style:{color:"#2196f3","text-decoration":"none","align-self":"flex-start",display:"flex","align-items":"center",gap:".5rem"}},[ht,oe(" Descargar archivo ")],8,pt))],64)):d("",!0),i("h6",ft,[W(l.value.message_data.id)?(a(),r("span",{key:1,innerHTML:z(l.value.message_data.content)},null,8,gt)):(a(),r("span",{key:0,innerHTML:z(((t=l.value.message_data.content)==null?void 0:t.substring(0,200))+(((k=l.value.message_data.content)==null?void 0:k.length)>200?"â€¦":""))},null,8,vt)),((b=l.value.message_data.content)==null?void 0:b.length)>200?(a(),r("button",{key:2,onClick:o[1]||(o[1]=L=>me(e.message.message_data.id)),style:{background:"none",border:"none",color:"#2196f3",cursor:"pointer",padding:"0 .5rem"}}," Ver "+E(W(l.value.message_data.id)?"menos":"mÃ¡s"),1)):d("",!0)]),i("h6",yt,[i("span",wt,E(l.value.time),1),l.value.message_data.current_status_id==3&&l.value.message_data.employer_id?(a(),r("i",kt)):l.value.message_data.current_status_id==2&&l.value.message_data.employer_id?(a(),r("i",bt)):l.value.message_data.current_status_id==1&&l.value.message_data.employer_id?(a(),r("i",xt)):d("",!0)]),l.value.message_data.employer_id?(a(),r("svg",{key:2,style:p([{position:"absolute",right:"-8px",top:"0"},l.value.message_data.employer_id?`${h(f).current_chat_theme.pico_user}`:`${h(f).current_chat_theme.pico_employer}`]),viewBox:"0 0 8 13",height:"13",width:"8"},Et,4)):(a(),r("svg",{key:1,style:p([{position:"absolute",left:"-8px",top:"0"},l.value.message_data.employer_id?`${h(f).current_chat_theme.pico_user}`:`${h(f).current_chat_theme.pico_employer}`]),viewBox:"0 0 8 13",height:"13",width:"8"},Mt,4))],4),i("div",At,[i("div",null,[A.value?(a(),C(h(ct),{key:0,class:"emoji-picker",native:!0,style:{position:"absolute",bottom:"4rem","z-index":"1000"},onSelect:Ve})):d("",!0),y(s,{style:{position:"absolute",right:"-1rem"}})]),y(c,{modelValue:R.value,"onUpdate:modelValue":o[2]||(o[2]=L=>R.value=L),autoResize:"",rows:"4",placeholder:"Escribe un mensajeâ€¦",style:{width:"100%","background-color":""}},null,8,["modelValue"]),i("div",St,[y(s,{class:"emoji-picker",text:"",style:{"font-size":"2rem"},onClick:o[3]||(o[3]=L=>A.value=!A.value)},{default:x(()=>[jt]),_:1}),y(s,{label:"Responder",icon:"pi pi-send",severity:"help",style:{width:"100%"},onClick:o[4]||(o[4]=L=>Pe(R.value))})])])]}),_:1},8,["visible","close"]),i("div",{style:{height:"100%",position:"relative",display:"flex","justify-content":"center"},onDragover:o[8]||(o[8]=ze(()=>{},["prevent"])),onDragenter:o[9]||(o[9]=t=>Y.value=!0),onDragleave:Oe,onDrop:be,class:st(he.value?"container-messages":".container-oculto")},[Y.value?(a(),r("div",Dt," Suelte aquÃ­ ")):d("",!0),H.value?(a(),C(ee,{key:1,style:{width:"50px",height:"50px",position:"absolute","z-index":"100",color:"white"},strokeWidth:"8",fill:"transparent",animationDuration:".3s","aria-label":"Custom ProgressSpinner"})):d("",!0),i("div",Rt,[i("div",{ref_key:"messagesContainer",ref:m,style:{padding:"1rem",display:"flex","flex-direction":"column",gap:"0rem","overflow-y":"auto",height:"100%","padding-bottom":"4rem"}},[(a(!0),r(V,null,He($.value,t=>{var k,b,L,Le,Ee,Ae,Se,je,De;return a(),r("div",{key:t.message_data.id},[i("div",{class:"message",style:p([t.message_data.employer_id?"justify-content: end;":"justify-content: start;",{width:"100%",display:"flex",gap:"1rem","padding-bottom":"1rem"}])},[t.message_data.employer_id?d("",!0):(a(),r("div",{key:0,style:p([`background-color:${(k=de.value)==null?void 0:k.color}`,{height:"100%",width:"3rem","aspect-ratio":"1/1","border-radius":"50%",display:"flex","align-items":"center","justify-content":"center","text-transform":"uppercase"}])},[i("h5",Ht,E(xe((b=de.value)==null?void 0:b.name)),1)],4)),i("div",{style:p([t.message_data.employer_id?`${h(f).current_chat_theme.m_employer};border-radius:.5rem 0 .5rem .5rem;`:`${h(f).current_chat_theme.m_user} ; border-radius:0 .5rem .5rem .5rem;`,{padding:"1rem 1rem 2.5rem 1rem","overflow-wrap":"break-word","word-break":"break-word","max-width":"60%","min-width":"15rem",position:"relative",display:"flex","flex-direction":"column",gap:"1rem"}])},[i("div",null,[(L=t==null?void 0:t.message_data)!=null&&L.employer_id?(a(),C(s,{key:0,class:"options",style:{color:"white"},onClick:M=>$e(t)},{default:x(()=>[zt]),_:2},1032,["onClick"])):d("",!0),t.message_data.employer_id?(a(),C(s,{key:1,class:"options-variant",onClick:M=>G(t),style:{color:"white",left:"-6rem","background-color":"#2196f3"}},{default:x(()=>[It]),_:2},1032,["onClick"])):d("",!0),t.message_data.employer_id?(a(),C(s,{key:2,class:"options-variant-template",onClick:M=>G(t),style:{color:"white",left:"-9rem","background-color":"orangered"}},{default:x(()=>[Ut]),_:2},1032,["onClick"])):d("",!0)]),i("div",null,[t.message_data.employer_id?d("",!0):(a(),C(s,{key:0,class:"options2",style:{color:"white"},onClick:M=>$e(t)},{default:x(()=>[Bt]),_:2},1032,["onClick"])),t.message_data.employer_id?d("",!0):(a(),C(s,{key:1,class:"options2-variant",onClick:M=>G(t),style:{color:"white",right:"-6rem","background-color":"#2196f3"}},{default:x(()=>[Vt]),_:2},1032,["onClick"])),t.message_data.employer_id?d("",!0):(a(),C(s,{key:2,class:"options-variant-template2",onClick:M=>G(t),style:{color:"white",right:"-9rem","background-color":"orangered"}},{default:x(()=>[Ft]),_:2},1032,["onClick"]))]),t.message_data.file_type?(a(),r(V,{key:0},[t.message_data.file_type==="image"?(a(),r("img",{key:0,class:"img-fluid",src:I(t),onClick:M=>ie(I(t)),style:{"max-width":"38rem","border-radius":".3rem",width:"18rem","object-fit":"cover","aspect-ratio":"1 / 1",cursor:"pointer"}},null,8,Ot)):t.message_data.file_type==="audio"?(a(),r("audio",{key:1,src:j(t.message_data),controls:"",style:{width:"100%","min-width":"20rem","max-width":"100%","background-color":"white","border-radius":".5rem"}},null,8,Nt)):(a(),r("a",{key:2,href:j(t.message_data),target:"_blank",style:{color:"#2196f3","text-decoration":"none","align-self":"flex-start",display:"flex","align-items":"center",gap:".5rem"}},[Wt,oe(" Descargar archivo ")],8,Pt))],64)):d("",!0),t.contest?(a(),r("div",{key:1,class:"message",style:p([t.message_data.employer_id?"justify-content: end;":"justify-content: start;",{width:"100%",display:"flex",gap:"1rem"}])},[i("div",{style:p([t.message_data.employer_id?`${h(f).current_chat_theme.m_employer};border-radius:.5rem 0 .5rem .5rem;`:`${h(f).current_chat_theme.m_user} ; border-radius:0 .5rem .5rem .5rem;`,{"overflow-wrap":"break-word","word-break":"break-word","max-width":"100%","min-width":"10rem",position:"relative",display:"flex",opacity:".5","flex-direction":"column",gap:".5rem"}])},[t.contest.message_data.file_type?(a(),r(V,{key:0},[t.contest.message_data.file_type==="image"?(a(),r("img",{key:0,class:"img-fluid",src:I(t.contest),onClick:M=>ie(I(t.contest)),style:{"max-width":"38rem","border-radius":".3rem",width:"18rem","object-fit":"cover",cursor:"pointer"}},null,8,Qt)):t.contest.message_data.file_type==="audio"?(a(),r("audio",{key:1,src:j(t.contest.message_data),controls:"",style:{width:"100%","min-width":"20rem","max-width":"100%","background-color":"white","border-radius":".5rem"}},null,8,qt)):(a(),r("a",{key:2,href:j(t.contest.message_data),target:"_blank",style:{color:"#2196f3","text-decoration":"none","align-self":"flex-start",display:"flex","align-items":"center",gap:".5rem"}},[Jt,oe(" Descargar archivo ")],8,Gt))],64)):d("",!0),i("h6",{style:p([{color:"white",margin:"0","font-weight":"300"},h(f).current_chat_theme.text])},[W(t.message_data.id)?(a(),r("span",{key:1,innerHTML:z(t.contest.message_data.content)},null,8,Zt)):(a(),r("span",{key:0,innerHTML:z(((Le=t.contest.message_data.content)==null?void 0:Le.substring(0,200))+(((Ee=t.contest.message_data.content)==null?void 0:Ee.length)>30?"â€¦":""))},null,8,Yt)),((Ae=t.contest.message_data.content)==null?void 0:Ae.length)>30?(a(),r("button",{key:2,onClick:M=>me(t.contest.message_data.id),style:{background:"none",border:"none",color:"#2196f3",cursor:"pointer",padding:"0 .5rem"}},null,8,Kt)):d("",!0)],4)],4)],4)):d("",!0),i("h6",{style:p([{color:"white",margin:"0","font-weight":"300"},h(f).current_chat_theme.text])},[W(t.message_data.id)?(a(),r("span",{key:1,innerHTML:z(t.message_data.content)},null,8,eo)):(a(),r("span",{key:0,innerHTML:z(((Se=t.message_data.content)==null?void 0:Se.substring(0,200))+(((je=t.message_data.content)==null?void 0:je.length)>200?"â€¦":""))},null,8,Xt)),((De=t.message_data.content)==null?void 0:De.length)>200?(a(),r("button",{key:2,onClick:M=>me(t.message_data.id),style:{background:"none",border:"none",color:"#2196f3",cursor:"pointer",padding:"0 .5rem"}}," Ver "+E(W(t.message_data.id)?"menos":"mÃ¡s"),9,to)):d("",!0)],4),i("h6",oo,[i("span",{style:p([{opacity:".5"},h(f).current_chat_theme.text])},E(t.date)+" - "+E(t.time),5),t.message_data.current_status_id==3&&t.message_data.employer_id?(a(),r("i",ao)):t.message_data.current_status_id==2&&t.message_data.employer_id?(a(),r("i",so)):t.message_data.current_status_id==1&&t.message_data.employer_id?(a(),r("i",io)):d("",!0)]),t.message_data.employer_id?(a(),r("svg",{key:3,style:p([{position:"absolute",right:"-8px",top:"0"},t.message_data.employer_id?`${h(f).current_chat_theme.pico_user}`:`${h(f).current_chat_theme.pico_employer}`]),viewBox:"0 0 8 13",height:"13",width:"8"},mo,4)):(a(),r("svg",{key:2,style:p([{position:"absolute",left:"-8px",top:"0"},t.message_data.employer_id?`${h(f).current_chat_theme.pico_user}`:`${h(f).current_chat_theme.pico_employer}`]),viewBox:"0 0 8 13",height:"13",width:"8"},no,4))],4),t.message_data.employer_id?(a(),r("div",_o,[i("h5",po,E(xe(t.message_data.employer_name)),1)])):d("",!0)],4)])}),128)),h(Be).sending?(a(),r("div",ho,[i("div",fo,[i("h6",vo,[go,oe(),y(Ke,{style:{width:"1.5rem",height:"1.5rem",color:"white"},strokeWidth:"8",fill:"transparent",animationDuration:".3s","aria-label":"Custom ProgressSpinner"})])]),yo])):d("",!0)],512),D.value||T.value>0?(a(),C(s,{key:0,icon:"pi pi-angle-down",onClick:X,style:p(qe.value)},null,8,["style"])):d("",!0),T.value>0?(a(),C(s,{key:1,label:T.value,onClick:X,style:p(Ge.value)},null,8,["label","style"])):d("",!0)]),y(_,{visible:S.value,"onUpdate:visible":o[6]||(o[6]=t=>S.value=t),header:"Archivos a enviar",modal:!0,style:p([{width:"90vw",maxWidth:"40rem"},{"background-color":"rgb(0, 1, 22)",display:"flex"}]),onDragover:o[7]||(o[7]=ze(()=>{},["prevent"])),onDrop:be,close:Fe,closable:!0,dismissableMask:!1},{footer:x(()=>[i("div",Eo,[y(s,{label:"Enviar",icon:"pi pi-check",severity:"success",onClick:We,disabled:v.value.length===0},null,8,["disabled"])])]),default:x(()=>[v.value.length===0?(a(),r("div",wo," Arrastra archivos aquÃ­ ")):(a(),r("div",ko,[(a(!0),r(V,null,He(v.value,(t,k)=>(a(),r("div",{key:k,style:{display:"flex","align-items":"center","flex-direction":"column",position:"relative",gap:"1rem","margin-bottom":"1rem",padding:"1rem"}},[t.type.startsWith("image/")?(a(),r("div",bo,[i("img",{src:t.preview,style:{width:"30rem","box-shadow":"0 0 1rem #00000090","object-fit":"cover","border-radius":".3rem"}},null,8,xo),y(s,{icon:"pi pi-times",severity:"danger",onClick:b=>re(k),style:{position:"absolute",width:"1.5rem",height:"1.5rem",right:"0","border-radius":".3rem"}},null,8,["onClick"])])):t.type.startsWith("audio/")?(a(),r("div",Co,[i("audio",{src:t.preview,controls:"",style:{width:"100%"}},null,8,$o),y(s,{icon:"pi pi-times",severity:"danger",onClick:b=>re(k),style:{position:"absolute",width:"1.5rem",height:"1.5rem",right:"0","border-radius":".3rem"}},null,8,["onClick"])])):(a(),r("div",Mo,[To,y(s,{icon:"pi pi-times",severity:"danger",onClick:b=>re(k),style:{position:"absolute",width:"1.5rem",height:"1.5rem",right:"0","border-radius":".3rem"}},null,8,["onClick"])])),i("span",Lo,E(t.name),1),y(Xe,{modelValue:t.caption,"onUpdate:modelValue":b=>t.caption=b,placeholder:"Texto opcionalâ€¦",style:{flex:"1 1 auto",width:"100%","background-color":"#ffffff20"}},null,8,["modelValue","onUpdate:modelValue"])]))),128))]))]),_:1},8,["visible"])],34),se.value?(a(),r("div",Ao,[i("div",So,[i("img",{style:{height:"90vh","max-width":"100%"},src:ye.value},null,8,jo),y(s,{onClick:o[10]||(o[10]=()=>se.value=!1),style:{position:"absolute",right:"-1rem",top:"-1rem",border:"3px solid black"},icon:"pi pi-times",severity:"danger",rounded:""})])])):d("",!0)],64)}}}),Uo=lt(Do,[["__scopeId","data-v-be494e09"]]);export{Uo as default};
