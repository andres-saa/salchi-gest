import{D as j}from"./DialogoPedido-bf500098.js";import{N as D,a as b,o,c as n,d as i,w as v,q as a,t as _,b as e,F as w,e as O,f,y as p,H as U,u as x,_ as L,r as N,O as M,i as R,Q as F,m as V,R as T,p as q,g as z}from"./index-0e06375c.js";import{s as H}from"./siteService-ea8a6ef3.js";import"./formatoPesos-2a38d2e7.js";const J={style:{display:"flex","align-items":"center","justify-content":"space-between"}},Q={style:{display:"flex","align-items":"center"}},W={style:{"min-width":"max-content",color:"black"}},Y={style:{width:"3rem",height:"100%"}},Z={style:{position:"relative"}},G=["src"],K={style:{display:"flex",gap:"1rem","align-items":"center"}},X={style:{"min-width":"max-content",color:"black"}},ee={key:1,style:{"font-weight":"bold"}},te=e("b",null,"RESPONSABLE:",-1),se={key:4},oe=e("b",null,"OBSERVACIONES:",-1),re=e("i",{class:"pi pi-whatsapp mr-2"},null,-1),le=e("br",null,null,-1),E={__name:"OrderItem",props:{order:{type:Object,default:{}}},setup(g){const u=D(),l=()=>{u.setVisible("currentOrder",!0),u.setOrder(t.order)},y={generada:"warning","en preparacion":"info",enviada:"success",cancelada:"danger"},t=g;return(m,C)=>{var d,S,A,s,$,P;const h=b("Tag"),B=b("Button"),c=b("ProgressSpinner"),r=b("P");return o(),n("div",{onClick:l,class:"col-12",style:U([x(u).currentSearchingOrder.order_id==t.order.order_id?"border:3px solid var(--primary-color)":"",{"background-color":"rgba(255, 255, 255, 0.506)","border-radius":"0.5rem",cursor:"pointer"}])},[i(h,{class:"text-l",severity:t.order.user_phone=="1111111111"?"danger":"help"},{default:v(()=>[a(_(t.order.user_phone=="1111111111"?"ES UNA PRUEBA, RELAJATE":t.order.user_name),1)]),_:1},8,["severity"]),e("div",J,[e("div",Q,[e("b",W," #"+_((d=t.order)==null?void 0:d.order_id),1),(o(!0),n(w,null,O(t.order.products.slice(0,3),k=>(o(),n("div",Y,[e("div",Z,[e("img",{style:{width:"100%"},src:`https://backend.salchimonster.com/read-product-image/96/${k.name}`,alt:""},null,8,G),i(B,{severity:"danger",class:"p-0",rounded:"",label:k.quantity,style:{width:"1.5rem",position:"absolute",top:"-.5rem",right:"-.5rem","z-index":"99",height:"1.5rem","border-radius":"1rem"}},null,8,["label"])])]))),256))]),e("span",K,[e("b",X,_((P=($=(s=(A=(S=t.order)==null?void 0:S.latest_status_timestamp)==null?void 0:A.split("T")[1])==null?void 0:s.split(".")[0])==null?void 0:$.split(":").slice(0,2))==null?void 0:P.join(":")),1),t.order.current_status!="en preparacion"?(o(),f(h,{key:0,severity:y[t.order.current_status]},{default:v(()=>[a(_(t.order.current_status),1)]),_:1},8,["severity"])):p("",!0),t.order.current_status=="en preparacion"?(o(),f(c,{key:1,style:{width:"50px",height:"50px"},strokeWidth:"8",animationDuration:".5s","aria-label":"Custom ProgressSpinner"})):p("",!0)])]),t.order.calcel_sol_state!=null?(o(),f(h,{key:0,severity:t.order.calcel_sol_state?"success":"danger"},{default:v(()=>[a(_(t.order.calcel_sol_state?"REVISADO":" EN REVISION..."),1)]),_:1},8,["severity"])):p("",!0),a(),t.order.calcel_sol_state?(o(),n("span",ee," Y ")):p("",!0),t.order.calcel_sol_state?(o(),f(h,{key:2,severity:t.order.calcel_sol_asnwer?"success":"danger"},{default:v(()=>[a(_(t.order.calcel_sol_asnwer?"APROBADO":"RECHAZADO"),1)]),_:1},8,["severity"])):p("",!0),t.order.calcel_sol_state?(o(),f(r,{key:3,class:"m-0"},{default:v(()=>{var k;return[te,a(" "+_((k=t.order.cancelation_solve_responsible)==null?void 0:k.split(" ").slice(0,3).join(" ")),1)]}),_:1})):p("",!0),t.order.responsible_observation?(o(),n("span",se,[e("p",null,[oe,a(" "+_(t.order.responsible_observation||"sin observaciones"),1)])])):p("",!0),t.order.responsible_id?(o(),f(h,{key:5,severity:"success"},{default:v(()=>[re,a(" TRANSFERENCIA APROBADA")]),_:1})):p("",!0),a(),le,a(),t.order.responsible_id?(o(),f(h,{key:6,severity:"success"},{default:v(()=>[a(_(t.order.name),1)]),_:1})):p("",!0)],4)}}};const I=g=>(q("data-v-c8833b83"),g=g(),z(),g),ne={class:"grid xl:mx-0 mx-0 py-0 mt-6 px-0"},ae={class:"col-12 py-0 px-2 shadow-2 my-0"},ie={class:""},ce={class:"pb-0 p-0",style:{display:"flex","flex-wrap":"wrap",gap:"1rem","list-style":"none","overflow-x":"auto"}},de={style:{display:"flex",gap:"1rem"}},_e={class:"md:px-2 xl:pt-5 p-0 col-12 xl:col-4 top"},pe={class:"shadow-4 contenedor pb-2",style:{overflow:"hidden","background-color":"#ffad53"}},ue={style:{height:"100%",width:"100%"}},he=I(()=>e("p",{class:"col-12 text-center shadow-4",style:{"background-color":"#ffffff61"}},[e("span",{class:"text-center text-2xl",style:{color:"black","font-weight":"bold"}},[e("i",{class:"pi pi-envelope text-2xl"}),a(" RECIBIDOS")])],-1)),ye={class:"lg:pb-8",style:{height:"100%","overflow-y":"auto"}},me={class:"px-3 py-2"},ve={class:"md:px-2 xl:pt-5 p-0 col-12 xl:col-4 top"},fe={class:"shadow-4 contenedor pb-2",style:{overflow:"hidden","background-color":"#8e3693"}},xe={style:{height:"100%",width:"100%"}},be=I(()=>e("p",{class:"col-12 text-center shadow-4",style:{"background-color":"#ffffff61"}},[e("span",{class:"text-center text-2xl",style:{color:"black","font-weight":"bold"}},[e("i",{class:"pi pi-clock text-2xl"}),a(" EN PREPARACION")])],-1)),ge={class:"lg:pb-8",style:{height:"100%","overflow-y":"auto"}},we={class:"px-3 py-2"},Oe={class:"md:px-2 xl:pt-5 p-0 col-12 xl:col-4 top"},ke={class:"shadow-4 contenedor pb-2",style:{overflow:"hidden","background-color":"#00bf7a"}},Se={class:"lg:pb-8",style:{height:"100%",width:"100%"}},Ae=I(()=>e("p",{class:"col-12 text-center shadow-4",style:{"background-color":"#ffffff61"}},[e("span",{class:"text-center text-2xl",style:{color:"black","font-weight":"bold"}},[e("i",{class:"pi pi-send text-2xl"}),a(" ENVIADOS")])],-1)),Ee={style:{height:"100%","overflow-y":"auto"}},Ie={class:"px-3 py-2"},Be={class:"md:px-2 xl:pt-5 p-0 col-12 xl:col-4 top"},$e={class:"shadow-4 contenedor pb-2",style:{overflow:"hidden","background-color":"red"}},Ne={class:"lg:pb-8",style:{height:"100%",width:"100%"}},Ve=I(()=>e("p",{class:"col-12 text-center shadow-4",style:{"background-color":"#ffffff61"}},[e("span",{class:"text-center text-2xl",style:{color:"black","font-weight":"bold"}},[e("i",{class:"pi pi-times text-2xl"}),a(" CANCELADOS")])],-1)),Ce={style:{height:"100%","overflow-y":"auto"}},Pe={class:"px-3 py-2"},Re={__name:"pedidos",setup(g){const u=N([]),l=D(),y=M(),t=N(""),m=N("");R(()=>{l.startOrderUpdates()}),F(()=>{l.stopOrderUpdates()}),R(async()=>{u.value=await H.getSites(),l.getTodayOrders()}),V(()=>y.site,()=>{l.getTodayOrders()}),V(t,()=>{m.value=""}),V(m,()=>{t.value=""});const C=()=>{var c;if(t.value!="")h(t.value);else if(m.value!="")B((c=m.value)==null?void 0:c.split(" ").join(""));else return},h=async c=>{const r=await T.getOrderById(c);r!=null&&r.order_id?(l.setVisible("currentOrder",!0),l.setOrder(r),y.site=u.value.filter(d=>d.site_id==r.site_id)[0],l.currentSearchingOrder=r):alert("Orden no encontrada")},B=async c=>{const r=await T.getOrderByPhone(c);r!=null&&r.order_id?(l.setVisible("currentOrder",!0),l.setOrder(r),y.site=u.value.filter(d=>d.site_id==r.site_id)[0],l.currentSearchingOrder=r):alert("Orden no encontrada")};return(c,r)=>{const d=b("Button"),S=b("InputText"),A=b("InputMask");return o(),n("div",ne,[e("div",ae,[e("nav",ie,[e("ul",ce,[(o(!0),n(w,null,O(u.value.filter(s=>s.show_on_web),s=>(o(),n("li",null,[i(d,{class:"p-2 mb-2",onClick:$=>x(y).site=s,style:U([x(y).site.site_id==s.site_id?"box-shadow:0 5px 0px var(--primary-color)":"",{"min-width":"max-content","border-radius":"0",color:"black"}]),text:"",label:s.site_name},null,8,["onClick","style","label"])]))),256)),e("li",de,[i(S,{style:{},modelValue:t.value,"onUpdate:modelValue":r[0]||(r[0]=s=>t.value=s),modelModifiers:{trim:!0},placeholder:"Buscar por id (sin #)"},null,8,["modelValue"]),a(),i(A,{modelValue:m.value,"onUpdate:modelValue":r[1]||(r[1]=s=>m.value=s),prefix:"+57",id:"basic",mask:"999 999 9999",placeholder:"Buscar por telefono"},null,8,["modelValue"]),i(d,{onClick:r[2]||(r[2]=s=>C()),severity:"help",icon:"pi pi-search",label:"Buscar"})])])])]),i(j),e("div",_e,[e("div",pe,[e("div",ue,[he,e("div",ye,[(o(!0),n(w,null,O(x(l).TodayOrders.filter(s=>s.current_status=="generada"),s=>(o(),n("div",me,[i(E,{order:s},null,8,["order"])]))),256))])])])]),e("div",ve,[e("div",fe,[e("div",xe,[be,e("div",ge,[(o(!0),n(w,null,O(x(l).TodayOrders.filter(s=>s.current_status=="en preparacion"),s=>(o(),n("div",we,[i(E,{order:s},null,8,["order"])]))),256))])])])]),e("div",Oe,[e("div",ke,[e("div",Se,[Ae,e("div",Ee,[(o(!0),n(w,null,O(x(l).TodayOrders.filter(s=>s.current_status=="enviada"),s=>(o(),n("div",Ie,[i(E,{order:s},null,8,["order"])]))),256))])])])]),e("div",Be,[e("div",$e,[e("div",Ne,[Ve,e("div",Ce,[(o(!0),n(w,null,O(x(l).TodayOrders.filter(s=>s.current_status=="cancelada"),s=>(o(),n("div",Pe,[i(E,{order:s},null,8,["order"])]))),256))])])])])])}}},Le=L(Re,[["__scopeId","data-v-c8833b83"]]);export{Le as default};
