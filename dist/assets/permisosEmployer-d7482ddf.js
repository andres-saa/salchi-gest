import{_ as ie,f as c,u as re,O as de,g as U,h as W,V as ce,r as f,o as F,c as M,a as e,d as l,n as G,w as n,v as ue,F as pe,Q as me,U as C,k as d,t as i,q as P,l as L,P as V,p as he,e as _e,W as Q}from"./index-18c971f1.js";const a=z=>(he("data-v-655952b4"),z=z(),_e(),z),fe={class:"col-12 m-auto p-0"},ye={key:0,class:"col-12",style:{display:"flex","flex-direction":"column","pointer-events":"none","align-items":"center","justify-content":"center",position:"fixed","z-index":"1000",left:"0",top:"0",height:"100%","background-color":"rgba(0, 0, 0, 0.5)"}},ve=a(()=>e("p",{class:"text-3xl",style:{"font-weight":"bold",color:"white","text-shadow":"0 0 10px rgba(0, 0, 0, 0.551)"}},"CARGANDO PERMISOS",-1)),be={style:{display:"flex"}},ge={class:"flex flex-column md:flex-row md:justify-content-between md:align-items-center"},xe=a(()=>e("p",{class:"m-0 text-2xl my-4"},"permisos ",-1)),we={class:"block mt-2 md:mt-0 p-input-icon-left"},ke=a(()=>e("i",{class:"pi pi-search"},null,-1)),Se=a(()=>e("span",{class:"p-column-title"},"Code",-1)),Ce=a(()=>e("span",{class:"p-column-title"},"Code",-1)),Pe=a(()=>e("span",{class:"p-column-title"},"Code",-1)),ze=a(()=>e("span",{class:"p-column-title"},"Code",-1)),Ee=a(()=>e("span",{class:"p-column-title"},"Code",-1)),Re=a(()=>e("span",{class:"p-column-title"},"Code",-1)),je=a(()=>e("span",{class:"p-column-title"},"Code",-1)),Ie=a(()=>e("span",{class:"p-column-title"},"Code",-1)),Ne={style:{display:"flex",gap:"1rem"}},Te=a(()=>e("div",null,null,-1)),$e={class:"a4-size p-0 lg:p-6 mi-clase mt-4"},Ae=a(()=>e("img",{class:"m-auto",src:"https://salchimonster.com/images/logo.png",style:{width:"10%"},alt:""},null,-1)),De={style:{"font-size":"11pt","font-weight":"normal",color:"black","font-family":"Arial, Helvetica, sans-serif"}},Oe=a(()=>e("h6",{class:"text-center",style:{"font-size":"11pt","font-weight":"bold",color:"black","font-family":"Arial, Helvetica, sans-serif"}}," INVERSIONES SALCHIMONSTER SAS ",-1)),Ue=a(()=>e("h6",{style:{"font-size":"11pt","font-weight":"normal",color:"black","font-family":"Arial, Helvetica, sans-serif"},class:"text-center"},"NIT: 901.420.874-0",-1)),Fe={class:"text-center py-4",style:{"font-weight":"bold","text-transform":"uppercase"}},Me=a(()=>e("span",{style:{"text-transform":"capitalize"}},null,-1)),Le={class:"text-l",style:{"font-size":"11pt","font-weight":"normal",color:"black","font-family":"Arial, Helvetica, sans-serif"}},Ve={class:"p-0 m-0"},Be=a(()=>e("span",{style:{"font-weight":"bold"}},"Fecha de la solicitud: ",-1)),He={style:{"border-bottom":"1px solid","padding-bottom":"0","padding-right":"2rem"}},qe={class:"p-0 m-0",style:{width:"100%"}},Je=a(()=>e("span",{style:{"font-weight":"bold"}},"Nombre: ",-1)),Ke={style:{width:"100%","border-bottom":"1px solid","padding-bottom":"0","padding-right":"3rem"}},We={class:"p-0 m-0"},Ge=a(()=>e("span",{style:{"font-weight":"bold"}},"Cargo: ",-1)),Qe={style:{"border-bottom":"1px solid","padding-bottom":"0","padding-right":"2rem"}},Ye={class:"p-0 m-0"},Ze=a(()=>e("span",{style:{"font-weight":"bold"}},"IdentificaciÃ³n No: ",-1)),Xe={style:{"border-bottom":"1px solid","padding-bottom":"0","padding-right":"2rem"}},et={style:{display:"flex","justify-content":"start",gap:"2rem",border:"1px solid","margin-top":"2rem"},class:"p-2"},tt={style:{display:"flex","flex-direction":"column"},class:""},st=a(()=>e("div",{style:{"font-weight":"bold"}}," Desde ",-1)),ot={style:{display:"flex","flex-direction":"column"}},at=a(()=>e("div",{style:{"font-weight":"bold"}}," Hasta ",-1)),lt={style:{display:"flex","justify-content":"start",gap:"2rem",border:"1px solid","margin-top":"2rem"},class:"p-2"},nt={style:{display:"flex","flex-direction":"column"},class:""},it={style:{display:"flex","flex-direction":"column"}},rt=a(()=>e("div",{style:{"font-weight":"bold"}}," Observaciones ",-1)),dt={style:{display:"flex","justify-content":"start",gap:"2rem",border:"1px solid","margin-top":"2rem"},class:"p-2"},ct={style:{display:"flex","flex-direction":"column"},class:""},ut={style:{display:"flex","flex-direction":"column"}},pt=a(()=>e("div",{class:"mb-2",style:{"font-weight":"bold"}}," Estado actual ",-1)),mt={class:"mb-1"},ht=a(()=>e("span",{style:{"font-weight":"bold"}},"Resumen:",-1)),_t={class:"mb-1"},ft=a(()=>e("span",{style:{"font-weight":"bold"}},"Fecha:",-1)),yt={class:"mb-1"},vt=a(()=>e("span",{style:{"font-weight":"bold"}}," Responsable :",-1)),bt={key:0},gt=a(()=>e("span",{style:{"font-weight":"bold"}},"Motivos del rechazo:",-1)),xt={class:"col-12 md:col-6 m-auto p-0 botonera",style:{display:"flex",gap:"1rem",overflow:"hidden","justify-content":"space-around",position:"absolute",top:"0rem",right:"0","background-color":"rgba(255, 255, 255, 0)te"}},wt=a(()=>e("span",{class:"p-input-icon-left",style:{width:"100%"}},[e("i",{class:"pi pi-pencil"})],-1)),kt=a(()=>e("span",{class:"text-center col-12 p-0"},"Si, continuar",-1)),St=a(()=>e("span",{class:"text-center col-12 p-0"},"No, talvez luego",-1)),Ct=a(()=>e("h6",null,"Razones para rechazar este permiso ",-1)),Pt=a(()=>e("span",{class:"p-input-icon-left",style:{width:"100%"}},[e("i",{class:"pi pi-pencil"})],-1)),zt=a(()=>e("span",{class:"text-center col-12 p-0"},"Si, continuar",-1)),Et=a(()=>e("span",{class:"text-center col-12 p-0"},"No, talvez luego",-1)),Rt={__name:"permisosEmployer",setup(z){const Y=c(null),y=re(),Z=c(y.params.status),v=c(y.params.tipo),x=c(y.params.status),T=c(""),X=()=>{E.value={global:{value:null,matchMode:me.CONTAINS}}},w=c(!1),$=c("2029-12-21 16:19"),r=c(),E=c(null),b=c([]),g=c({}),R=c(!1),j=c(!1),B=c([]),H=c(!0);de(()=>{X()}),U(()=>y.params.status,s=>{Z.value=s}),U(()=>y.params.tipo,s=>{v.value=s,console.log(v),k(s,x.value).then(t=>b.value=t)}),U(()=>y.params.status,s=>{x.value=s,k(v.value).then(t=>b.value=t)});const ee=async s=>{w.value=!0,r.value=s,D(s.employer_id)},q=s=>{R.value=!0,r.value=s,D(s.employer_id)},J=s=>{j.value=!0,r.value=s,D(s.employer_id)};function te(s){s.status={status:"aprobado",timestamp:$.value,responsable:Q()},s.history.push({...s.status}),fetch(`${C}/permission/${s.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}).then(t=>{t.json(),w.value=!1,R.value=!1,k(v.value,x.value).then(_=>b.value=_)}).then(t=>console.log("Permiso aprobado:",t)).catch(t=>console.error("Error:",t))}function se(s){s.status={status:"rechazado",timestamp:$.value,razones:T.value,responsable:Q()},s.history.push({...s.status}),fetch(`${C}/permission/${s.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}).then(t=>{t.json(),j.value=!1,w.value=!1,k(v.value,x.value).then(_=>b.value=_)}).then(t=>console.log("Permiso rechazado:",t)).catch(t=>console.error("Error:",t))}const A=c([]);W(()=>{ce().then(s=>A.value=s)});function oe(s){var t=new Date(s),_={day:"numeric",month:"long",year:"numeric"};return t.toLocaleDateString("es-ES",_)}const ae=async()=>{fetch(`${C}/server_time`).then(s=>{if(!s.ok)throw new Error("Network response was not ok");return s.json()}).then(s=>{console.log("Employer data:",s),$.value=s}).catch(s=>{console.error("There has been a problem with your fetch operation:",s),mensaje.value="error"})};function I(s){s||(s="2029-12-21 16:19");const t=["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"];let[_,K]=s.split(" "),[u,p,O]=_.split("-").map(Number),S=t[p-1];return`${O} de ${S} de ${u}`}const D=async s=>{fetch(`${C}/employer/${s}`).then(t=>{if(!t.ok)throw new Error("Network response was not ok");return t.json()}).then(t=>{console.log("Employer data:",t),g.value=t}).catch(t=>{console.error("There has been a problem with your fetch operation:",t)})};async function k(){const s=`${C}/permissions/  `;try{const t=await fetch(s);if(!t.ok)throw new Error(`Error al obtener los permisos: ${t.status}`);return H.value=!1,await t.json()}catch(t){throw console.error("Error en getPermissions:",t),t}}W(()=>{k(v.value,x.value).then(s=>b.value=s),ae()});const le=()=>{window.print()};return(s,t)=>{const _=f("ProgressSpinner"),K=f("InputText"),u=f("Column"),p=f("Button"),O=f("DataTable"),S=f("Dialog"),ne=f("Textarea");return F(),M(pe,null,[e("div",fe,[H.value?(F(),M("div",ye,[ve,e("div",be,[l(_,{style:{width:"100px",height:"100px"},strokeWidth:"4",fill:"var(--surface-ground)",animationDuration:".5s","aria-label":"Custom ProgressSpinner"})])])):G("",!0),l(O,{ref_key:"dt",ref:Y,value:b.value,selection:B.value,"onUpdate:selection":t[1]||(t[1]=o=>B.value=o),dataKey:"id",paginator:!0,rows:10,filters:E.value,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25,100],currentPageReportTemplate:"Mostrando {first} a {last} de {totalRecords} permisoes",responsiveLayout:"scroll",scrollable:"","scroll-height":"62vh"},{header:n(()=>[e("div",ge,[xe,e("span",we,[ke,l(K,{class:"",modelValue:E.value.global.value,"onUpdate:modelValue":t[0]||(t[0]=o=>E.value.global.value=o),placeholder:"Buscar..."},null,8,["modelValue"])])])]),default:n(()=>[l(u,{class:"p-2",selectionMode:"multiple",headerStyle:"width: 3rem; ",frozen:""}),l(u,{class:"p-2",field:"id",header:"Id",sortable:!0,headerStyle:"width:3rem; min-width:min-content; "},{body:n(o=>[Se,d(i(o.data.id),1)]),_:1}),l(u,{class:"p-2",field:"tipo",header:"Tipo",sortable:!0,headerStyle:"width:10rem; min-width:min-content; "},{body:n(o=>[Ce,d(i(o.data.tipo),1)]),_:1}),l(u,{class:"p-2",field:"fecha",header:"Fecha de solicitud",sortable:!0,headerStyle:"width:10rem; min-width:min-content; "},{body:n(o=>{var h,m;return[Pe,d(i((m=(h=o.data.history)==null?void 0:h.filter(N=>N.status=="generado")[0].timestamp)==null?void 0:m.split(" ")[0]),1)]}),_:1}),l(u,{class:"p-2",field:"employer_id",header:" Empleado",sortable:!0,headerStyle:"width:20rem; min-width:max-content; "},{body:n(o=>{var h;return[ze,d(i((h=A.value.filter(m=>m.id==o.data.employer_id)[0])==null?void 0:h.name),1)]}),_:1}),l(u,{class:"p-2",field:"start_date",header:"Fecha de inicio",sortable:!0,headerStyle:"width:10rem; min-width:10rem; "},{body:n(o=>[Ee,d(i(o.data.start_date),1)]),_:1}),l(u,{class:"p-2",field:"end_date",header:"Fecha finalizacion",sortable:!0,headerStyle:"width:15rem; min-width:max-content; "},{body:n(o=>[Re,d(i(o.data.end_date),1)]),_:1}),l(u,{class:"p-2",field:"observations",header:"Observaciones del empleado",sortable:!0,headerStyle:"width:30rem; min-width:max-content; "},{body:n(o=>[je,d(i(o.data.observations),1)]),_:1}),l(u,{class:"p-2",field:"status.status",header:"Estado",sortable:!0,headerStyle:"width:10rem; min-width:max-content; "},{body:n(o=>[Ie,e("div",{class:P(["p-2",o.data.status.status]),style:{"border-radius":"10rem"}},i(o.data.status.status),3)]),_:1}),l(u,{class:"p-2",field:"location",header:"Acciones",sortable:!0,frozen:"",alignFrozen:"right",headerStyle:"width:min-content; min-width:min-content; "},{body:n(o=>[e("div",Ne,[l(p,{class:"p-0",outlined:"",severity:"info",label:"Small",onClick:h=>ee(o.data),text:""},{default:n(()=>[e("i",{class:P(["text-xl",L(V).EYE]),style:{"font-weight":"bold"}},null,2)]),_:2},1032,["onClick"]),l(p,{class:"p-0",disabled:o.data.status.status=="aprobado",outlined:"",severity:"success",label:"Small",text:"",onClick:h=>q(o.data),style:{display:"flex","justify-content":"center"}},{default:n(()=>[e("i",{class:P(["text-xl",L(V).CHECK]),style:{"font-weight":"bold"}},null,2)]),_:2},1032,["disabled","onClick"]),l(p,{class:"p-0",disabled:o.data.status.status=="rechazado"&&o.data.status.status!="aprobado",outlined:"",severity:"danger",label:"Small",onClick:h=>J(o.data),style:{display:"flex","justify-content":"center"},text:""},{default:n(()=>[e("i",{class:P(["text-xl",L(V).TIMES]),style:{"font-weight":"bold"}},null,2)]),_:2},1032,["disabled","onClick"])])]),_:1})]),_:1},8,["value","selection","filters"]),Te]),l(S,{style:ue([{border:"none","box-shadow":"none"},{width:"700px"}]),visible:w.value,"onUpdate:visible":t[4]||(t[4]=o=>w.value=o),modal:!0,class:"p-fluid m-2 pt-8"},{default:n(()=>{var o,h;return[e("div",$e,[Ae,e("h6",De,i(I(r.value.history.filter(m=>m.status=="generado")[0].timestamp)),1),Oe,Ue,e("h6",Fe,[d("FORMATO SOLICITUD DE PERMISO "+i(r.value.tipo)+" ",1),Me]),e("h5",Le,[e("p",Ve,[Be,d(),e("span",He,i(I(r.value.history.filter(m=>m.status=="generado")[0].timestamp)),1)]),e("p",qe,[Je,d(),e("span",Ke,i(g.value.name),1)]),e("p",We,[Ge,d(),e("span",Qe,i(g.value.position),1)]),e("p",Ye,[Ze,d(),e("span",Xe,i(g.value.dni),1)]),e("div",et,[e("div",tt,[st,e("div",null,i(I(r.value.start_date)),1)]),e("div",ot,[at,e("div",null,i(I(r.value.end_date)),1)])]),e("div",lt,[e("div",nt,[e("div",it,[rt,e("div",null,i(r.value.observations),1)])])]),e("div",dt,[e("div",ct,[e("div",ut,[pt,e("div",mt,[ht,d(),e("span",{style:{"border-radius":"0 1rem 1rem 0"},class:P(["col-12 p-0",r.value.status.status])},i(r.value.status.status),3)]),e("div",_t,[ft,d(" "+i(oe(r.value.status.timestamp)),1)]),e("div",yt,[vt,d(" "+i((o=A.value.filter(m=>{var N;return m.id==((N=r.value.status)==null?void 0:N.responsable)})[0])==null?void 0:o.name),1)]),r.value.status.status=="rechazado"?(F(),M("div",bt,[gt,d(" "+i((h=r.value.status)==null?void 0:h.razones),1)])):G("",!0)])])])])]),e("div",xt,[l(p,{class:"text-center",onClick:t[2]||(t[2]=m=>q(r.value)),severity:"success",style:{border:"none",display:"flex","justify-content":"center"}},{default:n(()=>[d(" APROBAR ")]),_:1}),l(p,{onClick:t[3]||(t[3]=m=>J(r.value)),severity:"danger",style:{border:"none",display:"flex","justify-content":"center"}},{default:n(()=>[d(" RECHAZAR")]),_:1}),l(p,{onClick:le,severity:"warning",style:{border:"none",display:"flex","justify-content":"center"}},{default:n(()=>[d(" imprimir")]),_:1})])]}),_:1},8,["visible"]),l(S,{header:"Confirmacion",visible:R.value,"onUpdate:visible":t[6]||(t[6]=o=>R.value=o),style:{width:"350px"},modal:!0},{default:n(()=>[e("h5",null,"Seguro que desea aceptar el permiso de "+i(g.value.name),1),wt,l(p,{onClick:t[5]||(t[5]=o=>te(r.value)),style:{margin:"auto","background-color":"rgb(105, 255, 157)",color:"black",border:"none"},class:"m-auto my-4 text-center"},{default:n(()=>[kt]),_:1}),l(p,{style:{"background-color":"rgb(255, 156, 156)",color:"rgba(0, 0, 0, 0.864)",border:"none"},class:"m-auto my-4 ml-4 text-center"},{default:n(()=>[St]),_:1})]),_:1},8,["visible"]),l(S,{header:"Confirmacion",visible:j.value,"onUpdate:visible":t[9]||(t[9]=o=>j.value=o),style:{width:"350px"},modal:!0},{default:n(()=>[e("h5",null,"Seguro que desea Rechazar el permiso de "+i(g.value.name)+"?",1),Ct,l(ne,{modelValue:T.value,"onUpdate:modelValue":t[7]||(t[7]=o=>T.value=o),style:{"max-width":"100%","min-width":"100%","min-height":"100px"},class:"col-12"},null,8,["modelValue"]),Pt,l(p,{onClick:t[8]||(t[8]=o=>se(r.value)),style:{margin:"auto","background-color":"rgb(105, 255, 157)",color:"black",border:"none"},class:"m-auto my-4 text-center"},{default:n(()=>[zt]),_:1}),l(p,{style:{"background-color":"rgb(255, 156, 156)",color:"rgba(0, 0, 0, 0.864)",border:"none"},class:"m-auto my-4 ml-4 text-center"},{default:n(()=>[Et]),_:1})]),_:1},8,["visible"])],64)}}},It=ie(Rt,[["__scopeId","data-v-655952b4"]]);export{It as default};
