import{v as U}from"./videoTrainingService-423ff8cf.js";import{u as T}from"./urlService-c835519e.js";import{u as $,a as I}from"./dataToInteract-aaee29fa.js";import{l as B,r as V,v as q,a as r,o as C,f as L,w as n,d as o,b as t,u,c as P,m as N,q as k,t as f,k as z,_ as E,h as A,p as M,g as Y}from"./index-f909ff43.js";const F={style:{height:"100%"}},H=t("h6",null,"Nombre de la nueva Clase",-1),G=t("h6",{style:{}},[k("Link del video (YouTube) "),t("i",{class:"pi pi-youtube"})],-1),O=["src"],Z=t("h6",null,"Descripcion u objetivo",-1),J={__name:"dialogToAddVideo",emits:["update"],setup(g,{emit:v}){const y=v,p=B(),c=$(),e=V({}),b=q(),_=async()=>{const s={...e.value,created_by:p.rawUserData.id,sequence_id:b.params.sequence_id};await U.createVideo(s),c.addVideo=!1,y("update")};return(s,i)=>{const m=r("InputText"),D=r("Textarea"),d=r("Button"),l=r("Dialog");return C(),L(l,{visible:u(c).addVideo,"onUpdate:visible":i[3]||(i[3]=h=>u(c).addVideo=h),class:"p-0 m-3",header:"Registrar nueva Clase",style:{width:"30rem"},modal:""},{footer:n(()=>[o(d,{class:"m-0",onClick:_,severity:"help",label:"Crear Clase"})]),default:n(()=>[t("div",F,[H,o(m,{modelValue:e.value.name,"onUpdate:modelValue":i[0]||(i[0]=h=>e.value.name=h),style:{width:"100%"}},null,8,["modelValue"]),G,o(m,{modelValue:e.value.link,"onUpdate:modelValue":i[1]||(i[1]=h=>e.value.link=h),style:{width:"100%"}},null,8,["modelValue"]),e.value.link&&u(T).getThumbnail(e.value.link)?(C(),P("img",{key:0,class:"my-3",style:{width:"100%","border-radius":".3rem","aspect-ratio":"16 / 9","object-fit":"cover"},src:u(T).getThumbnail(e.value.link),alt:""},null,8,O)):N("",!0),Z,o(D,{modelValue:e.value.description,"onUpdate:modelValue":i[2]||(i[2]=h=>e.value.description=h),style:{width:"100%",resize:"none"},rows:"4"},null,8,["modelValue"])])]),_:1},8,["visible"])}}},K={style:{height:"100%"}},Q=t("br",null,null,-1),W={__name:"dialogToDeleteVideo",emits:["update"],setup(g,{emit:v}){const y=v;B();const p=$(),c=I();V({});const e=async()=>{const b=c.videoToDelete.video_id;await U.deleteVideo(b),p.deleteVideo=!1,y("update")};return(b,_)=>{const s=r("Button"),i=r("Dialog");return C(),L(i,{visible:u(p).deleteVideo,"onUpdate:visible":_[0]||(_[0]=m=>u(p).deleteVideo=m),class:"p-0 m-3",header:"Registrar nueva escuela",style:{width:"30rem"},modal:""},{footer:n(()=>[o(s,{icon:"pi pi-trash",class:"m-0",onClick:e,severity:"danger",label:"Eliminar escuela"})]),default:n(()=>{var m;return[t("div",K,[t("h6",null,[k("Seguro que desea borrar la clase "),Q,k(),t("b",null,f((m=u(c).videoToDelete)==null?void 0:m.video_name),1),k(" ? ")])])]}),_:1},8,["visible"])}}},X={style:{height:"100%"}},ee=t("h6",null,"Nombre del video",-1),te=t("h6",{style:{}},[k("Link del video (YouTube) "),t("i",{class:"pi pi-youtube"})],-1),oe=["src"],ae=t("h6",null,"Descripcion u objetivo",-1),se={__name:"dialogToEditVideo",emits:["update"],setup(g,{emit:v}){const y=I(),p=v;B();const c=$(),e=V({...y.videoToUpdate});z(()=>y.videoToUpdate,_=>{e.value={..._}},{deep:!0}),V({});const b=async()=>{if(!T.ValidateThumbnail(e.value.video_link)){alert("url invalida debe ser una url valida de youtube");return}const _=e.value.video_id,s={name:e.value.video_name,link:e.value.video_link,description:e.value.description};await U.updateVideo(_,s),c.updateVideo=!1,p("update")};return(_,s)=>{const i=r("InputText"),m=r("Textarea"),D=r("Button"),d=r("Dialog");return C(),L(d,{visible:u(c).updateVideo,"onUpdate:visible":s[3]||(s[3]=l=>u(c).updateVideo=l),class:"p-0 m-3",header:"Actualizar Curso",style:{width:"30rem"},modal:""},{footer:n(()=>[o(D,{class:"m-0",onClick:b,severity:"warning",label:"Actualizar escuela"})]),default:n(()=>[t("div",X,[ee,o(i,{modelValue:e.value.video_name,"onUpdate:modelValue":s[0]||(s[0]=l=>e.value.video_name=l),style:{width:"100%"}},null,8,["modelValue"]),te,o(i,{modelValue:e.value.video_link,"onUpdate:modelValue":s[1]||(s[1]=l=>e.value.video_link=l),style:{width:"100%"}},null,8,["modelValue"]),e.value.video_link&&u(T).getThumbnail(e.value.video_link)?(C(),P("img",{key:0,class:"my-3",style:{width:"100%","border-radius":".3rem","aspect-ratio":"16 / 9","object-fit":"cover"},src:u(T).getThumbnail(e.value.video_link),alt:""},null,8,oe)):N("",!0),ae,o(m,{modelValue:e.value.description,"onUpdate:modelValue":s[2]||(s[2]=l=>e.value.description=l),style:{width:"100%",resize:"none"},rows:"4"},null,8,["modelValue"])])]),_:1},8,["visible"])}}};const ie=g=>(M("data-v-87ccb4fd"),g=g(),Y(),g),le={class:"container py-6"},ne={style:{"text-transform":"uppercase"},class:"text-center"},de={style:{height:"100%"}},re=["src"],ce={class:"grid p-2",style:{"align-items":"center","justify-content":"space-between",display:"flex",gap:"1rem"}},ue=ie(()=>t("h4",{class:"px-2"},[t("i",{class:"fa fa-book"}),k(),t("b",null,"Clases")],-1)),pe={style:{}},_e={style:{"text-transform":"capitalize"}},me={style:{display:"flex","justify-content":"start","align-items":"center"}},ve={style:{"text-transform":"capitalize"}},he={style:{display:"flex",gap:".5rem"}},ye=["onClick","src"],be={class:"date",style:{}},fe={class:"date",style:{}},ge={style:{"min-width":"max-content"}},we={__name:"training_videos",setup(g){const v=I(),y=q(),p=V(!1),c=$(),e=V([]),b=V({}),_=d=>{const l=d.match(/(?:https?:\/\/)?(?:www\.)?(?:youtube\.com\/watch\?v=|youtu\.be\/)([a-zA-Z0-9_-]+)(?:\?.*)?/);return l&&l[1]?`https://www.youtube.com/embed/${l[1]}`:(console.error("La URL del video no es vÃ¡lida: ",d),"")},s=d=>{b.value=d,p.value=!0};A(async()=>{i()});const i=async()=>{const d=y.params.sequence_id;e.value=await U.getVideosBySequenceId(d)},m=d=>{v.videoToDelete={},v.videoToDelete=d,c.deleteVideo=!0},D=d=>{v.videoToUpdate={},v.videoToUpdate=d,c.updateVideo=!0};return(d,l)=>{const h=r("Dialog"),R=r("InputText"),S=r("Button"),w=r("column"),j=r("DataTable");return C(),P("div",le,[o(J,{onUpdate:i}),o(W,{onUpdate:i}),o(se,{onUpdate:i}),t("h2",ne,[t("b",null,"curso "+f(u(y).params.sequence_name),1)]),o(h,{visible:p.value,"onUpdate:visible":l[0]||(l[0]=a=>p.value=a),class:"p-0 m-3",header:`Reproductor de video\r
    `,modal:"",style:{width:"100%","max-width":"150vh","aspect-ratio":"16  / 9"}},{default:n(()=>[t("div",de,[t("iframe",{class:"p-0",width:"100%",style:{"aspect-ratio":"16 / 9"},src:_(b.value.video_link),title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",referrerpolicy:"strict-origin-when-cross-origin",allowfullscreen:""},null,8,re)])]),_:1},8,["visible"]),o(j,{paginator:!0,rows:15,style:{width:"100%","max-width":"1280px"},paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",currentPageReportTemplate:"Mostrando {first} a {last} de {totalRecords} Secuencias",rowsPerPageOptions:[5,10,25,100],scrollable:"",showGridlines:"",scrollHeight:"65vh",stripedRows:"",class:"col-12 m-auto",value:e.value,tableStyle:"min-width: 50rem;"},{header:n(()=>[t("div",ce,[ue,o(R,{class:"",style:{width:"100%","max-width":"500px"},placeholder:"Buscar Secuencia..."}),o(S,{onClick:l[1]||(l[1]=a=>u(c).addVideo=!0),severity:"help",label:"Nueva Clase"})])]),default:n(()=>[o(w,{header:"Id",class:"px-4",field:"id"},{body:n(a=>[t("h6",pe,f(a.data.video_id),1)]),_:1}),o(w,{header:"Nombre",style:{"min-width":"20rem"},class:"px-4",field:"created_time"},{body:n(a=>[t("h6",_e,f(a.data.video_name.toLowerCase()),1),t("div",me,[o(S,{onClick:x=>s(a.data),text:"",icon:"fa-solid fa-play"},null,8,["onClick"]),o(S,{onClick:x=>D(a.data),text:"",icon:"fa-solid fa-pencil"},null,8,["onClick"]),o(S,{onClick:x=>m(a.data),text:"",severity:"danger",icon:"fa-solid fa-trash"},null,8,["onClick"]),o(S,{severity:"success",text:"",label:"Estudiantes",icon:"fa-solid fa-graduation-cap"})])]),_:1}),o(w,{header:"Descripcion",style:{"max-width":"20rem"},class:"px-4",field:"created_time"},{body:n(a=>{var x;return[t("h6",ve,f((x=a.data.description)==null?void 0:x.toLowerCase()),1)]}),_:1}),o(w,{header:"Miniatura",class:"px-4"},{body:n(a=>[t("div",he,[t("img",{onClick:x=>s(a.data),style:{width:"9rem",cursor:"pointer","border-radius":".3rem","aspect-ratio":"16 / 9","object-fit":"cover"},src:u(T).getThumbnail(a.data.video_link),alt:""},null,8,ye)])]),_:1}),o(w,{header:"Fecha",class:"px-4",field:"created_time"},{body:n(a=>[t("h6",be,f(a.data.created_date),1)]),_:1}),o(w,{header:"Hora",class:"px-4",field:"created_time"},{body:n(a=>[t("h6",fe,f(a.data.created_time),1)]),_:1}),o(w,{header:"Creador",class:"px-4",field:"created_time"},{body:n(a=>[t("h6",ge,f(a.data.creator_name),1)]),_:1})]),_:1},8,["value"])])}}},Ce=E(we,[["__scopeId","data-v-87ccb4fd"]]);export{Ce as default};
