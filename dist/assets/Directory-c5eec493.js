import{s as L}from"./siteService-355767f4.js";import{_ as ae,r as f,l as ee,q as te,U as h,a as O,o as c,c as u,d as e,f as a,w as v,t as m,j as $,g as se,D as b,T as ke,F as P,p as le,i as ie,y as Le,s as N,e as R,k as Se}from"./index-e35d9410.js";import{u as ne}from"./directorio-fd6c96a8.js";const oe=j=>(le("data-v-96e5c673"),j=j(),ie(),j),Ce={class:"p-0",style:{"border-radius":"1rem"}},Ve={class:"p-1"},De=oe(()=>e("span",{class:"p-column-title"},"Code",-1)),$e=oe(()=>e("span",{class:"p-column-title"},"Code",-1)),Ee={class:"col-12 px-1",style:{display:"flex",position:"relative","align-items":"center",gap:"0.5rem","justify-content":"end"}},Ue={key:0,class:"fa-solid fa-pen-to-square mr-2"},Ne={key:1,class:"fa-solid fa-rotate-right mr-2"},je=oe(()=>e("i",{class:"fa-solid fa-floppy-disk mr-2"},null,-1)),Te={__name:"horarios",setup(j){const S=f(!1),r=()=>{S.value&&W().then(w=>B.value=w),S.value=!S.value},l=f(!1),B=f([]),q=f(!1),y=ne();ee(()=>{W().then(w=>B.value=w)}),te(()=>y.currentSite,w=>{W().then(p=>B.value=p)});const W=async()=>{q.value=!0,localStorage.getItem("siteId");try{const w=await fetch(`${h}/site-schedule/${y.currentSite.site_id}/`);if(!w.ok)throw"paila";const p=await w.json();return p.forEach(_=>{_.opening_time=new Date(`1970-01-01T${_.opening_time}`),_.closing_time=new Date(`1970-01-01T${_.closing_time}`)}),q.value=!1,p}catch(w){q.value=!1,console.log(w)}};f("");const Y=async()=>{l.value=!0;try{const w=B.value.map(_=>{const C=_.opening_time instanceof Date?_.opening_time.toLocaleTimeString():_.opening_time,J=_.closing_time instanceof Date?_.closing_time.toLocaleTimeString():_.closing_time;return{..._,opening_time:C.split(" ")[0],closing_time:J.split(" ")[0]}});if(!(await fetch(`${h}/site-schedule/`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(w)})).ok)throw"Error al enviar los datos";S.value=!1,l.value=!1}catch(w){console.log(w),l.value=!1}},Z=f(["Domingo","Lunes","Martes","Miercoles","Jueves","Viernes","Sabado"]);return(w,p)=>{const _=O("Column"),C=O("Calendar"),J=O("DataTable"),G=O("Button");return c(),u(P,null,[e("div",Ce,[a(J,{ref:"dt",class:"",value:B.value,dataKey:"id",style:{border:"1rem",overflow:"hidden"},rows:7,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25,100],currentPageReportTemplate:"Mostrando {first} a {last} de {totalRecords} scheldules",responsiveLayout:"scroll",scrollable:""},{default:v(()=>[a(_,{class:"p-0",field:"day_of_week",header:"Dia",headerStyle:"width:1rem; min-width:1rem;"},{body:v(T=>{var D;return[e("span",Ve,m((D=Z.value[T.data.day_of_week-1])==null?void 0:D.slice(0,3)),1)]}),_:1}),a(_,{class:"p-0",field:"opening_time",header:"Abre",headerStyle:"width:2rem; min-width:2rem;"},{body:v(T=>[De,a(C,{class:"p-0",disabled:!S.value,hourFormat:"12",timeOnly:"",modelValue:T.data.opening_time,"onUpdate:modelValue":D=>T.data.opening_time=D},null,8,["disabled","modelValue","onUpdate:modelValue"])]),_:1}),a(_,{class:"p-1",field:"closing_time",header:"Cierra",headerStyle:"width:2rem; min-width:2rem;"},{body:v(T=>[$e,a(C,{disabled:!S.value,hourFormat:"12",timeOnly:"",modelValue:T.data.closing_time,"onUpdate:modelValue":D=>T.data.closing_time=D},null,8,["disabled","modelValue","onUpdate:modelValue"])]),_:1})]),_:1},8,["value"])]),e("div",Ee,[a(G,{severity:S.value?"help":"info",onClick:r,size:"small",class:"",style:{transition:"all  .5s","min-width":"max-content","align-items":"","font-weight":"bold","border-radius":"0.5rem"}},{default:v(()=>[S.value?(c(),u("i",Ne)):(c(),u("i",Ue)),$(" "+m(S.value?"Restablecer":"Modificar horario"),1)]),_:1},8,["severity","onClick"]),a(ke,{name:"fade"},{default:v(()=>[S.value?(c(),se(G,{key:0,size:"small",severity:"success",onClick:Y,style:{"font-weight":"bold","min-height":"max-content","border-radius":"0.5rem"},class:""},{default:v(()=>[je,$(" Guardar")]),_:1})):b("",!0)]),_:1})])],64)}}},Ae=ae(Te,[["__scopeId","data-v-96e5c673"]]);const n=j=>(le("data-v-8ae797d2"),j=j(),ie(),j),Pe=n(()=>e("p",{class:"m-0",for:"siteName"},"Nombre de la sede",-1)),Oe=n(()=>e("p",{class:"m-0",for:"siteAddress"},"Dirección",-1)),qe=n(()=>e("p",{class:"m-0",for:"sitePhone"},"Teléfono",-1)),Ie=n(()=>e("p",{class:"m-0",for:"emailAddress"},"Correo electrónico",-1)),Be=n(()=>e("p",{class:"m-0",for:"whatsappLink"},"Enlace de WhatsApp",-1)),Re=n(()=>e("p",{class:"m-0",for:"mapsLink"},"Enlace de maps",-1)),Fe={class:"col-12 p-0",style:{display:"flex","justify-content":"end"}},We={class:"field col-12 pb-0 px-0"},Je=n(()=>e("label",{for:"appName"},"Nombre de la aplicación",-1)),Me={class:"field col-12 pb-0 px-0"},ze=n(()=>e("label",{for:"username"},"Nombre de usuario",-1)),Ge={class:"field col-12 pb-0 px-0"},He=n(()=>e("label",{for:"password"},"Contraseña",-1)),Ke={class:"field col-12 pb-0 px-0"},Qe=n(()=>e("label",{for:"pageName"},"Nombre de la página",-1)),Xe={class:"field col-12 pb-0 px-0"},Ye=n(()=>e("label",{for:"username"},"Nombre de usuario",-1)),Ze={class:"field col-12 pb-0 px-0"},et=n(()=>e("label",{for:"password"},"Contraseña",-1)),tt={class:"field col-12 pb-0 px-0"},st=n(()=>e("label",{for:"uniqueCode"},"Código único",-1)),ot={class:"field col-12 pb-0 px-0"},at=n(()=>e("label",{for:"externalCode"},"Código externo",-1)),lt={class:"field col-12 pb-0 px-0"},it=n(()=>e("label",{for:"wifiUsername"},"Nombre de usuario",-1)),nt={class:"field col-12 pb-0 px-0"},rt=n(()=>e("label",{for:"wifiPassword"},"Contraseña",-1)),dt={class:"field col-12 pb-0 px-0"},ct=n(()=>e("label",{for:"username"},"Nombre de usuario",-1)),ut={class:"field col-12 pb-0 px-0"},pt=n(()=>e("label",{for:"password"},"Contraseña",-1)),mt={class:"field col-12 pb-0 px-0"},ft=n(()=>e("label",{for:"boxName"},"Nombre de la caja",-1)),vt={class:"field col-12 pb-0 px-0"},_t=n(()=>e("label",{for:"password"},"Contraseña",-1)),ht={class:"col-12 mx-auto md:shadow-3 py-6 md:p-3 p-0 px-2 mb-8",style:{"max-width":"900px","background-color":"white","border-radius":"0.5rem"}},yt=n(()=>e("p",{class:"p-3 text-2xl text-center",style:{"font-weight":"bold"}},[e("i",{class:"fa-solid fa-folder-open"}),$(" Directorio")],-1)),gt={class:"p-0",style:{overflow:"hidden"}},bt={class:"col-12 p-0 my-5"},wt=["src"],xt={class:"field col-12 pb-0 px-0 col-12 mt-2 mb-6 p-0",style:{display:"flex","justify-content":"end",gap:"1rem"}},kt=n(()=>e("i",{class:"fa-solid fa-camera"},null,-1)),Lt=n(()=>e("i",{class:"fa-solid fa-spinner"},null,-1)),St=n(()=>e("i",{class:"fa-solid fa-floppy-disk"},null,-1)),Ct={class:"grid p-0 m-0",style:{}},Vt=n(()=>e("p",{class:"text-xl mb-1 col-12",style:{"font-weight":"bold"}},[e("i",{class:"fa-solid fa-circle-info mr-3"}),$(" INFORMACION BASICA")],-1)),Dt={style:{"overflow-x":"auto"},class:"py-3 md:py-0"},$t={class:"p-0"},Et={style:{"font-weight":"bold","min-width":"10rem"}},Ut={key:0,class:"",style:{"min-width":"max-content"}},Nt=["href"],jt={class:"col-12 p-1 my-4",style:{display:"flex",gap:"1rem","justify-content":"start","align-items":"center"}},Tt=n(()=>e("div",{style:{"background-color":"#a855f7",height:"0.3rem","border-radius":"0 1rem 1rem 0",width:"100%"}},null,-1)),At={class:"col-12 mt-4 mb-1 col-12",style:{"background-color":"#f6f7c1","border-radius":"0.5rem",position:"relative"}},Pt={class:"text-xl p-0 mb-1 col-12",style:{display:"flex","justify-content":"space-between"}},Ot=n(()=>e("p",{style:{"font-weight":"bold"}},[e("i",{class:"fa-solid fa-video mr-3"}),$(" CAMARAS")],-1)),qt=n(()=>e("i",{class:"fa-solid fa-plus text-xl"},null,-1)),It={style:{display:"flex","align-items":"center",gap:"1rem"}},Bt={class:"p-0"},Rt={style:{"font-weight":"bold","min-width":"10rem"}},Ft={key:0,class:"",style:{"min-width":"max-content"}},Wt={style:{display:"flex","align-items":"center",gap:"1rem"}},Jt={class:"p-0"},Mt={style:{"font-weight":"bold","min-width":"10rem"}},zt={key:0,class:"",style:{"min-width":"max-content"}},Gt={class:"col-12 mt-4 mb-1 col-12",style:{"background-color":"#84e4ff",position:"relative","border-radius":"0.5rem"}},Ht={class:"text-xl p-0 mb-1 col-12",style:{display:"flex","justify-content":"space-between"}},Kt=n(()=>e("p",{style:{"font-weight":"bold"}},[e("i",{class:"fa-solid fa-shield mr-3"}),$(" CAJAS FUERTES")],-1)),Qt=n(()=>e("i",{class:"fa-solid fa-plus text-xl"},null,-1)),Xt={style:{"overflow-x":"auto"}},Yt={style:{display:"flex","align-items":"center",gap:"1rem"}},Zt={class:"p-0"},es={style:{"font-weight":"bold","min-width":"10rem"}},ts={key:0,class:"",style:{"min-width":"max-content"}},ss={style:{display:"flex","align-items":"center",gap:"1rem"}},os={class:"p-0"},as={style:{"font-weight":"bold","min-width":"10rem"}},ls={key:0,class:"",style:{"min-width":"max-content"}},is={class:"col-12 mt-4 mb-1 col-12",style:{"background-color":"#d0f5be",position:"relative","border-radius":"0.5rem"}},ns={class:"text-xl p-0 mb-1 col-12",style:{display:"flex","justify-content":"space-between"}},rs=n(()=>e("p",{style:{"font-weight":"bold"}},[e("i",{class:"fa-solid fa-wifi mr-3"}),$(" WIFI'S")],-1)),ds=n(()=>e("i",{class:"fa-solid fa-plus text-xl"},null,-1)),cs={style:{"overflow-x":"auto"}},us={style:{display:"flex","align-items":"center",gap:"1rem"}},ps=n(()=>e("div",{class:"p-0"},[e("p",{style:{"font-weight":"bold","min-width":"10rem"}},"Nombre:")],-1)),ms={key:0,class:"",style:{"min-width":"max-content"}},fs={style:{display:"flex","align-items":"center",gap:"1rem"}},vs=n(()=>e("div",{class:"p-0"},[e("p",{style:{"font-weight":"bold","min-width":"10rem"}},"Clave:")],-1)),_s={key:0,class:"",style:{"min-width":"max-content"}},hs={class:"col-12 mt-4 mb-1 col-12",style:{"background-color":"#e7ceff",position:"relative","border-radius":"0.5rem"}},ys={class:"text-xl p-0 mb-1 col-12",style:{display:"flex","justify-content":"space-between"}},gs=n(()=>e("p",{style:{"font-weight":"bold"}},[e("i",{class:"fa-regular fa-credit-card mr-3"}),$(" DATAFONOS")],-1)),bs=n(()=>e("i",{class:"fa-solid fa-plus text-xl"},null,-1)),ws={style:{display:"flex","align-items":"center",gap:"1rem"}},xs={class:"p-0"},ks={style:{"font-weight":"bold","min-width":"10rem"}},Ls={key:0,class:"",style:{"min-width":"max-content"}},Ss={style:{display:"flex","align-items":"center",gap:"1rem"}},Cs={class:"p-0"},Vs={style:{"font-weight":"bold","min-width":"10rem"}},Ds={key:0,class:"",style:{"min-width":"max-content"}},$s={class:"col-12 mt-4 mb-1 col-12",style:{"background-color":"rgb(237 120 85 / 43%)","border-radius":"0.5rem",position:"relative"}},Es={class:"text-xl p-0 mb-1 col-12",style:{display:"flex","justify-content":"space-between"}},Us=n(()=>e("p",{style:{"font-weight":"bold"}},[e("i",{class:"fa-solid fa-paper-plane mr-3"}),$(" PAGINAS WEB")],-1)),Ns=n(()=>e("i",{class:"fa-solid fa-plus text-xl"},null,-1)),js={style:{display:"flex","align-items":"center",gap:"1rem"}},Ts=n(()=>e("div",{class:"p-0"},[e("p",{style:{"font-weight":"bold","min-width":"10rem"}},"Nombre :")],-1)),As={key:0,class:"",style:{"min-width":"max-content"}},Ps={style:{display:"flex","align-items":"center",gap:"1rem"}},Os=n(()=>e("div",{class:"p-0"},[e("p",{style:{"font-weight":"bold","min-width":"10rem"}},"Usuario:")],-1)),qs={key:0,class:"",style:{"min-width":"max-content"}},Is={style:{display:"flex","align-items":"center",gap:"1rem"}},Bs=n(()=>e("div",{class:"p-0"},[e("p",{style:{"font-weight":"bold","min-width":"10rem"}},"Clave:")],-1)),Rs={key:0,class:"",style:{"min-width":"max-content"}},Fs={class:"col-12 mt-4 mb-1 col-12",style:{"background-color":"#ddedea","border-radius":"0.5rem",position:"relative"}},Ws={class:"text-xl p-0 mb-1 col-12",style:{display:"flex","justify-content":"space-between"}},Js=n(()=>e("p",{style:{"font-weight":"bold"}},[e("i",{class:"fa-brands fa-app-store-ios mr-3"}),$("APLICACIONES")],-1)),Ms=n(()=>e("i",{class:"fa-solid fa-plus text-xl"},null,-1)),zs={style:{display:"flex","align-items":"center",gap:"1rem"}},Gs=n(()=>e("div",{class:"p-0"},[e("p",{style:{"font-weight":"bold","min-width":"10rem"}},"Nombre :")],-1)),Hs={key:0,class:"",style:{"min-width":"max-content"}},Ks={style:{display:"flex","align-items":"center",gap:"1rem"}},Qs=n(()=>e("div",{class:"p-0"},[e("p",{style:{"font-weight":"bold","min-width":"10rem"}},"Usuario:")],-1)),Xs={key:0,class:"",style:{"min-width":"max-content"}},Ys={style:{display:"flex","align-items":"center",gap:"1rem"}},Zs=n(()=>e("div",{class:"p-0"},[e("p",{style:{"font-weight":"bold","min-width":"10rem"}},"Clave:")],-1)),eo={key:0,class:"",style:{"min-width":"max-content"}},to=n(()=>e("div",{class:"col-12 p-0 my-4",style:{display:"flex","justify-content":"start","align-items":"center"}},[e("div",{style:{"background-color":"#ef4444",height:"0.3rem","border-radius":"0 1rem 1rem 0",width:"100%"}})],-1)),so=n(()=>e("p",{class:"text-xl mb-1 col-12",style:{"font-weight":"bold"}},[e("i",{class:"fa-solid fa-clock mr-3"}),$(" HORARIO")],-1)),oo={class:"col-12"},ao={__name:"Directory",setup(j){const S=f(),r=ne();f(r.currentSite);const l=Le();ee(()=>{y.value={...r.currentSite}});const B=()=>{const i=`${h}/site/${r.currentSite.site_id}`;Se.put(i,y.value).then(t=>{console.log("Actualización exitosa:",t.data),q.value=!1,r.currentSite={...y.value}}).catch(t=>{console.error("Error en la actualización:",t.response.data)})},q=f(!1),y=f({site_name:"",site_address:"",site_phone:"",email_address:"",wsp_link:"",maps:""});te(()=>r.currentSite,(i,t)=>{i!==t&&(y.value={...i})},{deep:!0,immediate:!0});const W=i=>{confirm("¿Estás seguro de que quieres eliminar esta red Wi-Fi?")&&Y(i)},Y=i=>{l.setLoading(!0,"borrando");const t=`${h}/site/${r.currentSite.site_id}/wifi-network/${i}`;fetch(t,{method:"DELETE",headers:{"Content-Type":"application/json"}}).then(o=>{if(!o.ok)throw l.setLoading(!1,"borrando"),new Error("Network response was not ok");return o.json()}).then(()=>{l.setLoading(!1,"borrando"),L.siteDirectory(r.currentSite.site_id).then(o=>p.value=o)}).catch(o=>{l.setLoading(!1,"borrando"),console.error("Error:",o)})},Z=i=>{confirm("¿Estás seguro de que quieres eliminar esta caja fuerte?")&&w(i)},w=i=>{l.setLoading(!0,"borrando");const t=`${h}/site/${r.currentSite.site_id}/safe-box/${i}`;fetch(t,{method:"DELETE",headers:{"Content-Type":"application/json"}}).then(o=>{if(!o.ok)throw l.setLoading(!1,"enviando"),new Error("Network response was not ok");return o.json()}).then(()=>{l.setLoading(!1,"enviando"),L.siteDirectory(r.currentSite.site_id).then(o=>p.value=o)}).catch(o=>{l.setLoading(!1,"enviando"),console.error("Error:",o)})},p=f({}),_=f(!1),C=f({username:"",password:""}),J=()=>{if(l.setLoading(!0,"enviando"),!C.value.username||!C.value.password){alert("Por favor, completa todos los campos.");return}const i={site_id:r.currentSite.site_id,username:C.value.username,password:C.value.password},t=`${h}/site/camera`;fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}).then(o=>{if(!o.ok)throw new Error("Network response was not ok");return l.setLoading(!1,"enviando"),o.json()}).then(o=>{console.log("Success:",o),_.value=!1,L.siteDirectory(r.currentSite.site_id).then(d=>p.value=d),l.setLoading(!1,"enviando")}).catch(o=>{l.setLoading(!1,"enviando"),console.error("Error:",o)})},G=i=>{confirm("¿Estás seguro de que quieres eliminar este datáfono?")&&T(i)},T=i=>{l.setLoading(!0,"borrando");const t=`${h}/site/${r.currentSite.site_id}/dataphone/${i}`;fetch(t,{method:"DELETE",headers:{"Content-Type":"application/json"}}).then(o=>{if(!o.ok)throw l.setLoading(!1,"borrando"),new Error("Network response was not ok");return o.json()}).then(()=>{l.setLoading(!1,"enviando"),L.siteDirectory(r.currentSite.site_id).then(o=>p.value=o)}).catch(o=>{l.setLoading(!1,"enviando"),console.error("Error:",o)})},D=f(!1),E=f({boxName:"",password:""}),re=i=>{confirm("¿Estás seguro de que quieres eliminar esta aplicación?")&&de(i)},de=i=>{l.setLoading(!0,"borrando");const t=`${h}/site/${r.currentSite.site_id}/application/${i}`;fetch(t,{method:"DELETE",headers:{"Content-Type":"application/json"}}).then(o=>{if(!o.ok)throw new Error("Network response was not ok");return l.setLoading(!1,"enviando"),o.json()}).then(()=>{l.setLoading(!1,"enviando"),L.siteDirectory(r.currentSite.site_id).then(o=>p.value=o)}).catch(o=>{console.error("Error:",o)})},I=f(null),F=f(""),ce=i=>{const t=i.target.files[0];t&&(console.log("Archivo seleccionado:",t),I.value=t,F.value=URL.createObjectURL(t))},ue=()=>{if(l.setLoading(!0,"enviando"),!E.value.boxName||!E.value.password){alert("Por favor, completa todos los campos.");return}const i={site_id:r.currentSite.site_id,box_name:E.value.boxName,password:E.value.password},t=`${h}/site/safe-box`;fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}).then(o=>{if(l.setLoading(!1,"enviando"),!o.ok)throw new Error("Network response was not ok");return o.json()}).then(o=>{l.setLoading(!1,"enviando"),console.log("Success:",o),L.siteDirectory(r.currentSite.site_id).then(d=>p.value=d),D.value=!1,E.value.boxName="",E.value.password=""}).catch(o=>{l.setLoading(!1,"enviando"),console.error("Error:",o)})},H=f(!1),U=f({username:"",password:""}),pe=()=>{if(l.setLoading(!0,"enviando"),!U.value.username||!U.value.password){alert("Por favor, completa todos los campos.");return}const i={site_id:r.currentSite.site_id,username:U.value.username,password:U.value.password},t=`${h}/site/wifi-network`;fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}).then(o=>{if(!o.ok)throw l.setLoading(!1,"enviando"),new Error("Network response was not ok");return o.json()}).then(o=>{l.setLoading(!1,"enviando"),console.log("Success:",o),H.value=!1,U.value.username="",U.value.password="",L.siteDirectory(r.currentSite.site_id).then(d=>p.value=d)}).catch(o=>{l.setLoading(!1,"enviando"),console.error("Error:",o)})},me=i=>{confirm("¿Estás seguro de que quieres eliminar esta página web?")&&fe(i)},fe=i=>{l.setLoading(!0,"borrando");const t=`${h}/site/${r.currentSite.site_id}/web-page/${i}`;fetch(t,{method:"DELETE",headers:{"Content-Type":"application/json"}}).then(o=>{if(!o.ok)throw l.setLoading(!1,"borrando"),new Error("Network response was not ok");return o.json()}).then(()=>{l.setLoading(!1,"borrando"),L.siteDirectory(r.currentSite.site_id).then(o=>p.value=o)}).catch(o=>{l.setLoading(!1,"borrando"),console.error("Error:",o)})},K=f(!1),A=f({unique_code:"",external_code:""}),ve=()=>{if(l.setLoading(!0,"enviando"),!A.value.unique_code){alert("Por favor, completa todos los campos.");return}const i={site_id:r.currentSite.site_id,unique_code:A.value.unique_code,external_code:A.value.external_code},t=`${h}/site/dataphone`;fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}).then(o=>{if(!o.ok)throw l.setLoading(!1,"borrando"),new Error("Network response was not ok");return o.json()}).then(o=>{l.setLoading(!1,"borrando"),console.log("Success:",o),K.value=!1,L.siteDirectory(r.currentSite.site_id).then(d=>p.value=d)}).catch(o=>{l.setLoading(!1,"borrando"),console.error("Error:",o)}),A.value.unique_code="",A.value.external_code=""},_e=i=>{confirm("¿Estás seguro de que quieres eliminar esta cámara?")&&he(i)},he=i=>{l.setLoading(!0,"borrando");const t=`${h}/site/${r.currentSite.site_id}/camera/${i}`;fetch(t,{method:"DELETE",headers:{"Content-Type":"application/json"}}).then(o=>{if(!o.ok)throw l.setLoading(!1,"enviando"),new Error("Network response was not ok");return o.json()}).then(()=>{l.setLoading(!1,"enviando"),L.siteDirectory(r.currentSite.site_id).then(o=>p.value=o)}).catch(o=>{console.error("Error:",o)})},Q=f(!1),x=f({page:"",username:"",password:""}),ye=()=>{if(l.setLoading(!0,"enviando"),!x.value.page||!x.value.username||!x.value.password){alert("Por favor, completa todos los campos.");return}const i={site_id:r.currentSite.site_id,page:x.value.page,username:x.value.username,password:x.value.password},t=`${h}/siteweb-page`;fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}).then(o=>{if(!o.ok)throw l.setLoading(!1,"borrando"),new Error("Network response was not ok");return o.json()}).then(o=>{l.setLoading(!1,"borrando"),console.log("Success:",o),Q.value=!1,L.siteDirectory(r.currentSite.site_id).then(d=>p.value=d)}).catch(o=>{l.setLoading(!1,"borrando"),console.error("Error:",o)}),x.value.page="",x.value.username="",x.value.password=""},X=f(!1),k=f({name:"",username:"",password:""}),ge=()=>{if(l.setLoading(!0,"enviando"),!k.value.name||!k.value.username||!k.value.password){alert("Por favor, completa todos los campos.");return}const i={site_id:r.currentSite.site_id,name:k.value.name,username:k.value.username,password:k.value.password},t=`${h}/site/application`;fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}).then(o=>{if(l.setLoading(!1,"borrando"),!o.ok)throw new Error("Network response was not ok");return o.json()}).then(o=>{l.setLoading(!1,"borrando"),console.log("Success:",o),X.value=!1,L.siteDirectory(r.currentSite.site_id).then(d=>p.value=d)}).catch(o=>{l.setLoading(!1,"borrando"),console.error("Error:",o)}),k.value.name="",k.value.username="",k.value.password=""},be=[{label:"Nombre",value:"site_name"},{label:"Direccion",value:"site_address"},{label:"Telefono",value:"site_phone"},{label:"Correo",value:"email_address"},{label:"Link de WhatsApp",value:"wsp_link",isLink:!0},{label:"Link de Maps",value:"maps",isLink:!0}];ee(async()=>{await L.getSites().then(i=>S.value=i),await L.siteDirectory(r.currentSite.site_id).then(i=>p.value=i),r.currentSite||r.setSite(S.value[0]),F.value=`${h}/read-product-image/600/site-${r.currentSite.site_id}`,I.value=""});function we(i,t){const o=`${h}/upload-product-image/site-${t}`;l.setLoading(!0,"sibiendo imagen");const d=new FormData;d.append("file",i),fetch(o,{method:"POST",body:d}).then(V=>{V.ok?(console.log("Archivo photo cargado con éxito"),I.value="",l.setLoading(!1,"sibiendo imagen")):(console.error("Error al cargar foto de perfil:",V.status,V.statusText),l.setLoading(!1,"sibiendo imagen"))}).catch(V=>{console.error("Error en la solicitud:",V),l.setLoading(!1,"sibiendo imagen")})}return te(()=>r.currentSite,i=>{l.setLoading(!0,`cargando información de ${i.site_name}`),l.setLoading(!1),L.siteDirectory(r.currentSite.site_id).then(t=>p.value=t),F.value=`${h}/read-product-image/600/site-${r.currentSite.site_id}`,I.value=""}),(i,t)=>{const o=O("InputText"),d=O("Button"),V=O("Dialog"),xe=O("Dropdown"),M=O("Divider");return c(),u(P,null,[a(V,{class:"mx-2",header:"Actualizar datos de la sede",visible:q.value,"onUpdate:visible":t[6]||(t[6]=s=>q.value=s),modal:!0,style:{width:"500px"}},{default:v(()=>[Pe,a(o,{class:"mb-3",style:{width:"100%"},id:"siteName",modelValue:y.value.site_name,"onUpdate:modelValue":t[0]||(t[0]=s=>y.value.site_name=s)},null,8,["modelValue"]),Oe,a(o,{class:"mb-3",style:{width:"100%"},id:"siteAddress",modelValue:y.value.site_address,"onUpdate:modelValue":t[1]||(t[1]=s=>y.value.site_address=s)},null,8,["modelValue"]),qe,a(o,{class:"mb-3",style:{width:"100%"},id:"sitePhone",modelValue:y.value.site_phone,"onUpdate:modelValue":t[2]||(t[2]=s=>y.value.site_phone=s)},null,8,["modelValue"]),Ie,a(o,{class:"mb-3",style:{width:"100%"},id:"emailAddress",modelValue:y.value.email_address,"onUpdate:modelValue":t[3]||(t[3]=s=>y.value.email_address=s)},null,8,["modelValue"]),Be,a(o,{class:"mb-3",style:{width:"100%"},id:"whatsappLink",modelValue:y.value.wsp_link,"onUpdate:modelValue":t[4]||(t[4]=s=>y.value.wsp_link=s)},null,8,["modelValue"]),Re,a(o,{class:"mb-3",style:{width:"100%"},id:"mapsLink",modelValue:y.value.maps,"onUpdate:modelValue":t[5]||(t[5]=s=>y.value.maps=s)},null,8,["modelValue"]),e("div",Fe,[a(d,{class:"mt-4",label:"Guardar cambios",onClick:B,severity:"success"})])]),_:1},8,["visible"]),a(V,{header:"Agregar nueva aplicación",visible:X.value,"onUpdate:visible":t[10]||(t[10]=s=>X.value=s),modal:"",style:{width:"450px"}},{default:v(()=>[e("div",We,[Je,a(o,{class:"col-12",id:"appName",modelValue:k.value.name,"onUpdate:modelValue":t[7]||(t[7]=s=>k.value.name=s)},null,8,["modelValue"])]),e("div",Me,[ze,a(o,{class:"col-12",id:"username",modelValue:k.value.username,"onUpdate:modelValue":t[8]||(t[8]=s=>k.value.username=s)},null,8,["modelValue"])]),e("div",Ge,[He,a(o,{class:"col-12",id:"password",type:"password",modelValue:k.value.password,"onUpdate:modelValue":t[9]||(t[9]=s=>k.value.password=s)},null,8,["modelValue"])]),a(d,{label:"Agregar",severity:"success",onClick:ge})]),_:1},8,["visible"]),a(V,{header:"Agregar nueva página web",visible:Q.value,"onUpdate:visible":t[14]||(t[14]=s=>Q.value=s),modal:"",style:{width:"450px"}},{default:v(()=>[e("div",Ke,[Qe,a(o,{class:"col-12",id:"pageName",modelValue:x.value.page,"onUpdate:modelValue":t[11]||(t[11]=s=>x.value.page=s)},null,8,["modelValue"])]),e("div",Xe,[Ye,a(o,{class:"col-12",id:"username",modelValue:x.value.username,"onUpdate:modelValue":t[12]||(t[12]=s=>x.value.username=s)},null,8,["modelValue"])]),e("div",Ze,[et,a(o,{class:"col-12",id:"password",type:"password",modelValue:x.value.password,"onUpdate:modelValue":t[13]||(t[13]=s=>x.value.password=s)},null,8,["modelValue"])]),a(d,{label:"Agregar",severity:"success",onClick:ye})]),_:1},8,["visible"]),a(V,{header:"Agregar nuevo datáfono",visible:K.value,"onUpdate:visible":t[17]||(t[17]=s=>K.value=s),modal:"",style:{width:"450px"}},{default:v(()=>[e("div",tt,[st,a(o,{class:"col-12",id:"uniqueCode",modelValue:A.value.unique_code,"onUpdate:modelValue":t[15]||(t[15]=s=>A.value.unique_code=s)},null,8,["modelValue"])]),e("div",ot,[at,a(o,{class:"col-12",id:"externalCode",modelValue:A.value.external_code,"onUpdate:modelValue":t[16]||(t[16]=s=>A.value.external_code=s)},null,8,["modelValue"])]),a(d,{label:"Agregar",severity:"success",onClick:ve})]),_:1},8,["visible"]),a(V,{header:"Agregar nueva red WiFi",visible:H.value,"onUpdate:visible":t[20]||(t[20]=s=>H.value=s),modal:"",style:{width:"450px"}},{default:v(()=>[e("div",lt,[it,a(o,{class:"col-12",id:"wifiUsername",modelValue:U.value.username,"onUpdate:modelValue":t[18]||(t[18]=s=>U.value.username=s)},null,8,["modelValue"])]),e("div",nt,[rt,a(o,{class:"col-12",id:"wifiPassword",modelValue:U.value.password,"onUpdate:modelValue":t[19]||(t[19]=s=>U.value.password=s),type:"password"},null,8,["modelValue"])]),a(d,{label:"Agregar",severity:"success",onClick:pe})]),_:1},8,["visible"]),a(V,{header:"Agregar nueva cámara",visible:_.value,"onUpdate:visible":t[23]||(t[23]=s=>_.value=s),modal:"",style:{width:"450px"},closable:!0,showHeader:!0},{default:v(()=>[e("div",dt,[ct,a(o,{class:"col-12",id:"username",modelValue:C.value.username,"onUpdate:modelValue":t[21]||(t[21]=s=>C.value.username=s)},null,8,["modelValue"])]),e("div",ut,[pt,a(o,{class:"col-12",id:"password",modelValue:C.value.password,"onUpdate:modelValue":t[22]||(t[22]=s=>C.value.password=s)},null,8,["modelValue"])]),a(d,{label:"Agregar",severity:"success",onClick:J})]),_:1},8,["visible"]),a(V,{header:"Agregar nueva caja fuerte",visible:D.value,"onUpdate:visible":t[26]||(t[26]=s=>D.value=s),modal:"",style:{width:"450px"}},{default:v(()=>[e("div",mt,[ft,a(o,{class:"col-12",id:"boxName",modelValue:E.value.boxName,"onUpdate:modelValue":t[24]||(t[24]=s=>E.value.boxName=s)},null,8,["modelValue"])]),e("div",vt,[_t,a(o,{class:"col-12",id:"password",modelValue:E.value.password,"onUpdate:modelValue":t[25]||(t[25]=s=>E.value.password=s),type:"password"},null,8,["modelValue"])]),a(d,{label:"Agregar",severity:"success",onClick:ue})]),_:1},8,["visible"]),e("div",ht,[yt,e("div",gt,[a(xe,{modelValue:N(r).currentSite,"onUpdate:modelValue":t[27]||(t[27]=s=>N(r).currentSite=s),options:S.value,optionLabel:"site_name",style:{"max-width":"30rem"},class:"col-12 p-0",placeholder:"Sede"},null,8,["modelValue","options"]),e("div",bt,[e("img",{class:"img-profile-add p-0",style:{width:"100%","border-radius":"0.5rem","object-fit":"cover","aspect-ratio":"4 / 2","background-color":"#84e4ff"},src:F.value?F.value:`${N(h)}/read-product-image/600/site-${N(r).currentSite.site_id}`,alt:""},null,8,wt),e("div",xt,[e("input",{ref:"fileInput",type:"file",accept:"image/*",onChange:ce,style:{display:"none"}},null,544),a(d,{severity:"info",class:"",style:{width:"min-content"},onClick:t[28]||(t[28]=s=>{i.$refs.fileInput.click()})},{default:v(()=>[kt]),_:1}),I.value?(c(),se(d,{key:0,severity:"help",class:"",style:{width:"min-content"},onClick:t[29]||(t[29]=()=>{F.value=`${N(h)}/read-product-image/600/site-${N(r).currentSite.site_id}`,I.value=""})},{default:v(()=>[Lt]),_:1})):b("",!0),I.value?(c(),se(d,{key:1,severity:"success",class:"",style:{width:"min-content"},onClick:t[30]||(t[30]=s=>we(I.value,N(r).currentSite.site_id))},{default:v(()=>[St]),_:1})):b("",!0)])]),e("div",Ct,[Vt,e("div",Dt,[(c(),u(P,null,R(be,(s,g)=>e("div",{key:g,class:"my-0 p-3 py-0",style:{display:"flex","align-items":"center",gap:"1rem"}},[e("div",$t,[e("p",Et,m(s.label)+":",1)]),s.isLink?(c(),u("a",{key:1,class:"",style:{"min-width":"max-content"},href:N(r).currentSite[s.value]},m(N(r).currentSite[s.value]),9,Nt)):(c(),u("div",Ut,m(N(r).currentSite[s.value]),1))])),64))]),e("div",jt,[a(d,{severity:"help",style:{height:"min-content","min-width":"max-content"},label:"Actualizar informacion basica",onClick:t[31]||(t[31]=s=>q.value=!0)}),Tt]),e("div",At,[e("div",Pt,[Ot,a(d,{onClick:t[32]||(t[32]=s=>_.value=!0),class:"p-0",rounded:"",style:{"aspect-ratio":"1 / 1",display:"flex","align-items":"center","justify-content":"center",width:"3rem",height:"3rem"},severity:"warning"},{default:v(()=>[qt]),_:1})]),(c(!0),u(P,null,R(p.value.cameras,(s,g)=>(c(),u("div",{key:g,class:"my-0 col-12 py-0",style:{}},[a(d,{text:"",style:{position:"absolute",right:"1rem"},icon:"fa-solid fa-trash-can",class:"p-button-rounded p-button-danger p-0 text-2xl text-2xl",onClick:z=>_e(s.camera_id)},null,8,["onClick"]),e("div",It,[e("div",Bt,[e("p",Rt,"Usuario "+m(g+1)+":",1)]),s.isLink?b("",!0):(c(),u("div",Ft,m(s.username),1))]),e("div",Wt,[e("div",Jt,[e("p",Mt,"Clave "+m(g+1)+":",1)]),s.isLink?b("",!0):(c(),u("div",zt,m(s.password),1))]),a(M,{class:"p-0 m-1"})]))),128))]),e("div",Gt,[e("div",Ht,[Kt,a(d,{onClick:t[33]||(t[33]=s=>D.value=!0),class:"p-0",rounded:"",style:{"aspect-ratio":"1 / 1",display:"flex","align-items":"center","justify-content":"center",width:"3rem",height:"3rem"},severity:"warning"},{default:v(()=>[Qt]),_:1})]),e("div",Xt,[(c(!0),u(P,null,R(p.value.safe_boxes,(s,g)=>(c(),u("div",{key:g,class:"my-0 col-12 py-0",style:{}},[a(d,{style:{position:"absolute",right:"1rem"},icon:"fa-solid fa-trash-can",text:"",class:"p-button-rounded p-button-danger p-0 text-2xl",onClick:z=>Z(s.safe_box_id)},null,8,["onClick"]),e("div",Yt,[e("div",Zt,[e("p",es,"Usuario "+m(g+1)+":",1)]),s.isLink?b("",!0):(c(),u("div",ts,m(s.box_name),1))]),e("div",ss,[e("div",os,[e("p",as,"Clave "+m(g+1)+":",1)]),s.isLink?b("",!0):(c(),u("div",ls,m(s.password),1))]),a(M,{class:"p-0 m-1"})]))),128))])]),e("div",is,[e("div",ns,[rs,a(d,{onClick:t[34]||(t[34]=s=>H.value=!0),class:"p-0",rounded:"",style:{"aspect-ratio":"1 / 1",display:"flex","align-items":"center","justify-content":"center",width:"3rem",height:"3rem"},severity:"warning"},{default:v(()=>[ds]),_:1})]),e("div",cs,[(c(!0),u(P,null,R(p.value.wifi_networks,(s,g)=>(c(),u("div",{style:{},key:g,class:"my-0 col-12 py-0"},[a(d,{style:{position:"absolute",right:"1rem"},icon:"fa-solid fa-trash-can",text:"",class:"p-button-rounded p-button-danger p-0 text-2xl",onClick:z=>W(s.wifi_id)},null,8,["onClick"]),e("div",us,[ps,s.isLink?b("",!0):(c(),u("div",ms,m(s.username),1))]),e("div",fs,[vs,s.isLink?b("",!0):(c(),u("div",_s,m(s.password),1))]),a(M,{class:"p-0 m-1"})]))),128))])]),e("div",hs,[e("div",ys,[gs,a(d,{onClick:t[35]||(t[35]=s=>K.value=!0),class:"p-0",rounded:"",style:{"aspect-ratio":"1 / 1",display:"flex","align-items":"center","justify-content":"center",width:"3rem",height:"3rem"},severity:"warning"},{default:v(()=>[bs]),_:1})]),(c(!0),u(P,null,R(p.value.dataphones,(s,g)=>(c(),u("div",{key:g,class:"my-0 col-12 py-0",style:{}},[a(d,{style:{position:"absolute",right:"1rem"},icon:"fa-solid fa-trash-can",text:"",class:"p-button-rounded p-button-danger p-0 text-2xl",onClick:z=>G(s.dataphone_id)},null,8,["onClick"]),e("div",ws,[e("div",xs,[e("p",ks,"Codigo unico "+m(g+1)+":",1)]),s.isLink?b("",!0):(c(),u("div",Ls,m(s.unique_code),1))]),e("div",Ss,[e("div",Cs,[e("p",Vs,"Codigo externo "+m(g+1)+":",1)]),s.isLink?b("",!0):(c(),u("div",Ds,m(s.external_code),1))]),a(M,{class:"p-0 m-1"})]))),128))]),e("div",$s,[e("div",Es,[Us,a(d,{onClick:t[36]||(t[36]=s=>Q.value=!0),class:"p-0",rounded:"",style:{"aspect-ratio":"1 / 1",display:"flex","align-items":"center","justify-content":"center",width:"3rem",height:"3rem"},severity:"warning"},{default:v(()=>[Ns]),_:1})]),(c(!0),u(P,null,R(p.value.web_pages,(s,g)=>(c(),u("div",{key:g,class:"my-0 col-12 py-0",style:{}},[a(d,{style:{position:"absolute",right:"1rem"},icon:"fa-solid fa-trash-can",text:"",class:"p-button-rounded p-button-danger p-0 text-2xl",onClick:z=>me(s.web_page_id)},null,8,["onClick"]),e("div",js,[Ts,s.isLink?b("",!0):(c(),u("div",As,m(s.page),1))]),e("div",Ps,[Os,s.isLink?b("",!0):(c(),u("div",qs,m(s.username),1))]),e("div",Is,[Bs,s.isLink?b("",!0):(c(),u("div",Rs,m(s.password),1))]),a(M,{class:"p-0 m-1",style:{color:"red","background-color":"red"}})]))),128))]),e("div",Fs,[e("div",Ws,[Js,a(d,{onClick:t[37]||(t[37]=s=>X.value=!0),class:"p-0",rounded:"",style:{"aspect-ratio":"1 / 1",display:"flex","align-items":"center","justify-content":"center",width:"3rem",height:"3rem"},severity:"warning"},{default:v(()=>[Ms]),_:1})]),(c(!0),u(P,null,R(p.value.applications,(s,g)=>(c(),u("div",{key:g,class:"my-0 col-12 py-0",style:{}},[a(d,{style:{position:"absolute",right:"1rem"},icon:"fa-solid fa-trash-can",text:"",class:"p-button-rounded p-button-danger p-0 text-2xl",onClick:z=>re(s.application_id)},null,8,["onClick"]),e("div",zs,[Gs,s.isLink?b("",!0):(c(),u("div",Hs,m(s.name),1))]),e("div",Ks,[Qs,s.isLink?b("",!0):(c(),u("div",Xs,m(s.username),1))]),e("div",Ys,[Zs,s.isLink?b("",!0):(c(),u("div",eo,m(s.password),1))])]))),128))]),to,so,e("div",oo,[a(Ae)])])])])],64)}}},ro=ae(ao,[["__scopeId","data-v-8ae797d2"]]);export{ro as default};
