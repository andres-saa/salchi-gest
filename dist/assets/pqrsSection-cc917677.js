import"./pqrsService-cc8e3a70.js";import{_ as Ie,g as i,B as Fe,q as Ce,C as Be,l as Ae,h as Ge,i as O,U as L,D as qe,e as f,o as l,c as o,b as u,f as p,a as t,F as B,r as Y,u as x,n as _,j as d,m,t as n,s as Me,E as Qe,d as He,x as K,p as Xe,k as Ye,K as Ke}from"./index-ba39b5e2.js";import"./editor.esm-850fb708.js";/* empty css                                                             */import{F as Je}from"./FileSaver.min-cc8488c4.js";import We from"./pqrUser-6bfff007.js";import"./_commonjsHelpers-23102255.js";/* empty css                                                                */const r=J=>(Xe("data-v-8a5ec3cc"),J=J(),Ye(),J),Ze={style:{display:"flex","flex-direction":"column"}},et={style:{"min-width":"max-content",margin:"0",padding:"0"},class:"p-text-secondary m-0 p-0"},tt={style:{"min-width":"max-content",margin:"0",padding:"0"},class:"p-text-secondary m-0 p-0"},st={class:"m-0"},lt=r(()=>t("div",null,null,-1)),at={key:0,class:"m-0",style:{"text-transform":"capitalize"}},ot=r(()=>t("b",null,"Responsable:",-1)),nt={key:1,class:"p-0 m-0"},it={key:2,class:"p-0 m-0"},rt={key:3},ut=r(()=>t("b",null,"Notas",-1)),dt=r(()=>t("br",null,null,-1)),ct=r(()=>t("div",{style:{display:"flex",gap:"1rem"}},null,-1)),mt={style:{display:"flex","flex-direction":"column"}},pt=r(()=>t("h6",{class:"mx-0 my-0"},[t("b",null,"TIPO")],-1)),_t={style:{display:"flex","align-items":"center",gap:"1rem"}},yt=r(()=>t("h6",{class:"mx-0 my-0"},[t("b",null,"CANAL")],-1)),ht={class:"m-0 p-0",style:{display:"flex","align-items":"center",gap:"1rem"}},vt=r(()=>t("h6",{class:"mt-3 mb-2"},[t("b",null,"CONTEXTO")],-1)),bt={style:{display:"flex",gap:"1rem"}},ft={style:{display:"flex","flex-direction":"column"}},xt={key:0,class:"mt-3 mb-3"},gt=r(()=>t("b",null,"DATOS DEL CLIENTE",-1)),wt=[gt],kt={style:{display:"flex",gap:"1rem"}},Vt={style:{display:"flex","flex-direction":"column"}},St={key:0},Tt=r(()=>t("b",null,"Nombre: ",-1)),Rt={key:1},Ct=r(()=>t("b",null,"Telefono: ",-1)),qt={key:2},Dt=r(()=>t("b",null,"Direccion: ",-1)),$t={key:3},jt=r(()=>t("b",null,"Orden: ",-1)),Pt=r(()=>t("h6",null,[t("b",null,"HISTORIAL")],-1)),Nt={style:{display:"flex",gap:"1rem"}},Et={style:{display:"flex","flex-direction":"column"}},Ot={style:{display:"flex","flex-direction":"column"}},Lt={style:{"min-width":"max-content",margin:"0",padding:"0"},class:"p-text-secondary m-0 p-0"},Ut={style:{"min-width":"max-content",margin:"0",padding:"0"},class:"p-text-secondary m-0 p-0"},zt={class:"m-0"},It=r(()=>t("div",null,null,-1)),Ft={key:0,class:"m-0",style:{"text-transform":"capitalize"}},Bt=r(()=>t("b",null,"Responsable:",-1)),At={key:1,class:"p-0 m-0"},Gt={key:2,class:"p-0 m-0"},Mt={key:3},Qt=r(()=>t("b",null,"Notas",-1)),Ht=r(()=>t("br",null,null,-1)),Xt=r(()=>t("div",{style:{display:"flex",gap:"1rem"}},null,-1)),Yt=r(()=>t("h6",null,[t("b",null,"Como desea proceder?")],-1)),Kt={key:1},Jt={key:0,style:{display:"flex","justify-content":"space-between",margin:"1rem 0"}},Wt=r(()=>t("h6",{class:"m-0"},"Le dio una cortesia del 100% ?",-1)),Zt={key:1,style:{display:"flex","justify-content":"space-between",margin:"1rem 0"}},es=r(()=>t("h6",{class:"m-0"},"Le dio un bono de descuento?",-1)),ts={key:2},ss=r(()=>t("h6",{class:"m-0 my-3"},"porcentaje del descuento ",-1)),ls={key:3},as=r(()=>t("h6",{class:"m-0 my-3"},"Valor de la orden",-1)),os={key:4},ns=r(()=>t("h6",{class:"m-0 my-3"},"Id de la orden",-1)),is=r(()=>t("h6",{class:"m-0 my-3"},"Detalles",-1)),rs={style:{"background-color":"#ff00002e"},class:"p-3"},us=r(()=>t("b",null,"No preste sus credenciales de Salchigest, cada miembro de la empresa tiene los suyos, muchas gracias",-1)),ds={style:{display:"flex","justify-content":"end","margin-top":"2rem"}},cs={style:{}},ms={class:"nav_bar shadow-2 p-0 my-0 mx-3",style:{position:"sticky",top:"3rem","max-width":"96vw",left:"0","background-color":"white","z-index":"99"}},ps={class:"nav_bar--buttons p-0 m-1",style:{}},_s={key:"",class:"",style:{display:"flex","align-items":"center"}},ys={style:{display:"flex","justify-content":"center","flex-direction":"column",width:"100%","max-width":"96vw","align-items":"center",gap:"1rem"},class:"mt-0 px-1"},hs=r(()=>t("h6",null,[t("b",null," Desde")],-1)),vs=r(()=>t("h6",null,[t("b",null,"Hasta")],-1)),bs=r(()=>t("h6",null,[t("b",null,"Sedes")],-1)),fs={style:{display:"flex","align-items":"center",gap:"1rem"}},xs=r(()=>t("h6",{class:"m-0"},[t("b",null,"MODOS")],-1)),gs={style:{"text-align":"right",margin:"1rem"}},ws=r(()=>t("div",{class:"px-0 mt-2",style:{display:"flex",width:"100%","align-items":"center","justify-content":"end",gap:"1rem","max-width":"96vw"}},null,-1)),ks={class:"scroll-container",style:{margin:"0 auto"}},Vs={style:{display:"flex","max-width":"96vw",overflow:"hidden","align-items":"start",margin:"0 auto"}},Ss={class:"grid p-3",style:{"align-items":"center","justify-content":"space-between",display:"flex",gap:"1rem"}},Ts={class:"px-2"},Rs=r(()=>t("i",{class:"fa-regular fa-bars-progress"},null,-1)),Cs={style:{"text-transform":"uppercase"}},qs={style:{display:"flex",gap:"1rem"}},Ds={key:0,style:{"min-width":"max-content"},class:"m-0 p-0"},$s={key:1,style:{"min-width":"max-content"},class:"m-0 p-0"},js={key:3,style:{"text-align":"justify","min-width":"max-content"},class:"m-0 p-0"},Ps={key:4,style:{"text-align":"justify"},class:"m-0 p-0"},Ns={key:5,class:"m-0 p-0"},Es={key:1},Os={key:7,class:"p-2",style:{display:"flex",gap:".1rem","flex-direction":"column","align-items":"center"}},Ls={key:8,class:"p-2",style:{display:"flex",gap:".1rem","flex-direction":"column","align-items":"center"}},Us={key:9,class:"p-2",style:{display:"flex",gap:".1rem","flex-direction":"column","align-items":"center"}},zs={key:10,class:"p-2",style:{display:"flex",gap:".1rem","flex-direction":"column","align-items":"start"}},Is={style:{display:"flex",gap:".4rem","justify-content":"center"},class:"px-2"},Fs={style:{"max-width":"1366px"},class:"m-auto my-6"},Bs={class:"m-0 px-0"},As=r(()=>t("i",{class:"pi pi-arrow-right"},null,-1)),Gs={style:{"max-width":"1366px"},class:"mx-auto my-6"},Ms={class:"m-0 px-0"},Qs=r(()=>t("i",{class:"pi pi-arrow-right"},null,-1)),Hs={style:{"max-width":"1366px"},class:"mx-auto my-3"},Xs={class:"m-0 px-0"},Ys=r(()=>t("i",{class:"pi pi-arrow-right"},null,-1)),Ks=r(()=>t("div",null,null,-1)),Js={style:{display:"flex",width:"100%",margin:"0 auto","max-width":"1200px",gap:"1rem","align-items":"center"},class:"my-4"},Ws=r(()=>t("h6",{class:"m-0"},[t("b",null,"Tipo de grafica")],-1)),Zs=r(()=>t("div",null,null,-1)),el={__name:"pqrsSection",setup(J){const De=()=>{if(!H.value||H.value.length===0)return alert("No hay PQRs disponibles para descargar."),null;const c=h=>{const y=new Date(h),w=y.getFullYear(),k=String(y.getMonth()+1).padStart(2,"0"),T=String(y.getDate()).padStart(2,"0");return`${w}-${k}-${T}`},s=c(A.value),b=c(Q.value),S=H.value.filter(h=>{var I;if(!((I=h.current_status)!=null&&I.timestamp))return!1;const[y,w,k]=h.current_status.timestamp.split(" ")[0].split("-"),T=`${k}-${w}-${y}`;return T>=s&&T<=b});if(S.length===0)return alert("No hay PQRs en el rango de fechas seleccionado."),null;const q=S.filter(h=>h.tag_name&&h.tag_name.toUpperCase()!=="CORTESÍAS").reduce((h,y)=>{const w=y.site_name||"Sin Sede";return h[w]||(h[w]=[]),h[w].push(y),h},{});return{hojas:Object.keys(q).map(h=>({hoja:h,title:`Reporte de PQRs - Sede: ${h}`,column_widths:{ID:15,Clasificacion:30,Descripción:60,Fecha:15,Hora:10,Estado:45,"Observación del estado":50,Responsable:50},data:q[h].sort((y,w)=>{const k=y.tag_name||"",T=w.tag_name||"";return k.localeCompare(T)}).map(y=>{var T,I,le,ae,F;let w="--------",k="--------";if((T=y.current_status)!=null&&T.timestamp){const P=y.current_status.timestamp.split(" ");P.length>=2?(w=P[0],k=P.slice(1).join(" ")):w=y.current_status.timestamp}return{ID:y.pqr_request_id,Clasificacion:y.tag_name||"Sin Clasificación",Descripción:y.request_content,Fecha:w,Hora:k,Estado:((I=y.current_status)==null?void 0:I.status)||"N/A","Observación del estado":((le=y.current_status)==null?void 0:le.notes)||"--------",Responsable:((F=(ae=y.current_status)==null?void 0:ae.responsible_name)==null?void 0:F.toUpperCase())||"--------"}})}))}},$e=async()=>{try{const c=De();if(!c)return;const s=await Ke.post("https://excel-creator.salchimonster.com/crear-excel",c,{responseType:"blob"}),b=new Blob([s.data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});Je.saveAs(b,"Reporte_PQRs.xlsx")}catch(c){console.error("Error al descargar el Excel:",c),alert("Ocurrió un error al intentar descargar el archivo Excel.")}},je=[{name:"Lineas",value:"line"},{name:"Barras",value:"bar"}],ne=i([]),ie=i([]),re=i({name:"Barras",value:"bar"}),Pe=Fe(),de=i([]);function D(c){const s=new Date(c);if(isNaN(s))throw new Error("Fecha inválida");const b=s.getFullYear(),S=String(s.getMonth()+1).padStart(2,"0"),j=String(s.getDate()).padStart(2,"0");return`${b}-${S}-${j}`}const W=i(""),C=i(),$=i(),A=i(),Q=i(),Ne=async(c,s)=>{if(!c||!s){alert("Por favor, proporciona tanto la fecha de inicio como la fecha de fin.");return}await ke(c,s),$.value=c,C.value=s};Ce(()=>{C.value=new Date;const c=new Date;c.setDate(c.getDate()-15),$.value=c,A.value=$.value,Q.value=C.value});const ce=i([]),me=i([]),pe=i([]),_e=i([]),ye=i([]),he=i([]),ve=i([{name:"Basico",x:0},{name:"Reportes Generales",x:-100},{name:"Reportes Graficados",x:-200}]),Z=i(),be=Be(),fe=i([]),ue=i({id:2,name:"Generada",description:"Estado inicial de la pqr",exist:!0,color:"#3498DB"}),V=Ae(),xe=i([]),g=i(),Ee=async c=>{ee.value=!0,v.value=c},ge=i([]),v=i([]),we=i(!1),ee=i(!1),U=i(null),Oe=()=>{U.value={global:{value:null,matchMode:Me.CONTAINS}}};Ce(()=>{Oe()});const Le=i([{columnName:"Id",columnValue:"pqr_request_id",columnType:"other",size:"1rem",vif:!0},{columnName:"Estado",columnValue:"current_status",columnType:"status",size:"15rem",vif:!0},{columnName:"Tipo",columnValue:"request_type",columnType:"other",size:"15rem",vif:!0},{columnName:"Clasificacion",columnValue:"tag_name",columnType:"tag",size:"1rem",vif:!0},{columnName:"Restaurante",columnValue:"restaurant",columnType:"restaurant",size:"1rem",vif:!0},{columnName:"Id orden",columnValue:"order_id",columnType:"order_id",size:"1rem",vif:!0},{columnName:"Canal",columnValue:"channel",columnType:"tag",size:"4rem",vif:!0},{columnName:"Sede",columnValue:"site_name",columnType:"other",size:"4rem",vif:!0},{columnName:"Red",columnValue:"red",columnType:"other",size:"4rem",vif:!0},{columnName:"Comentarios",columnValue:"request_content",columnType:"other",size:"40rem",vif:!0},{columnName:"Responsable",columnValue:"responsible_name",columnType:"responsible_name",size:"20rem",vif:!1}]);i({2:"#3498DB",4:"#2ECC71",5:"#16A085",6:"#E74C3C",7:"#F39C12"}),i({question:"",answer:""}),i({}),i({}),i(null);const H=i([{}]);i({}),i(!1),i({});const X=i(!1),z=i(),G=i(!1),te=async()=>{H.value=await O.get(`${L}/get-all-pqrs`);const c=await O.get(`${L}/get-all-pqrs-status`);xe.value=c,fe.value=c},ke=async(c,s)=>{if(!c||!C)return;const b=D(c),S=D(s),j=await O.get(`${L}/get-pqrs-by-date-range/${b}/${S}`),q=await O.get(`${L}/get-pqrs-by-date-range-types/${b}/${S}`),M=await O.get(`${L}/get_pqrs_by_responsible_and_state/${b}/${S}`);ce.value=j,me.value=Object.keys(j[0]),pe.value=q,_e.value=Object.keys(q[0]),ye.value=M,he.value=Object.keys(M[0]),de.value=await O.post(`${L}/get_daily_pqrs_report/${b}/${S}`,{ids:ie.value.map(h=>h.site_id)})};Ge(async()=>{await te(),ne.value=await O.get(`${L}/sites`),ne.value.filter(c=>c.show_on_web),await ke($.value,C.value)}),qe(g,()=>{Ve($.value,C.value)});const Ve=()=>{z.value=null,W.value="",Z.value=null,X.value=!1,G.value=!1},se=i(),Ue=async()=>{const c=se.value&&z.value?(z.value-z.value*(se.value/100)).toFixed(2):z.value,s={pqr_request_id:v.value.pqr_request_id,status_id:g.value,responsible_id:V.rawUserData.id,value:c||null,notes:W.value,order_id:Z.value||null};try{await O.post(`${L}/change-pqr-status`,s),te(),ee.value=!1,Ve()}catch(b){console.error("Error al enviar la actualización de la PQR:",b)}};return qe(()=>be.params.section_id,()=>{te()},{deep:!0}),(c,s)=>{const b=f("Tag"),S=f("Timeline"),j=f("Dialog"),q=f("Dropdown"),M=f("Checkbox"),h=f("InputNumber"),y=f("InputText"),w=f("Textarea"),k=f("Button"),T=f("Calendar"),I=f("MultiSelect"),le=f("Rating"),ae=f("column"),F=f("Column"),P=f("DataTable"),ze=f("Chart");return l(),o(B,null,[u(j,{class:"mx-2",visible:we.value,"onUpdate:visible":s[0]||(s[0]=e=>we.value=e),modal:"",header:`Historial de la pqr  ID   ${ge.value.pqr_request_id}`,style:{width:"40rem"}},{default:p(()=>[u(S,{value:ge.value.status_history},{opposite:p(e=>{var a,R,N,E;return[t("div",Ze,[t("p",et,n((a=e.item.timestamp)==null?void 0:a.split(" ")[0]),1),t("p",tt,n((E=(N=(R=e.item.timestamp)==null?void 0:R.split(" "))==null?void 0:N.slice(1,4))==null?void 0:E.join(" ")),1)])]}),content:p(e=>{var a;return[u(b,{style:_(`background-color:${e.item.color}`)},{default:p(()=>[t("p",st,[t("b",null,n(e.item.status),1)])]),_:2},1032,["style"]),lt,e.item.responsible_name?(l(),o("p",at,[ot,m(" "+n((a=e.item.responsible_name)==null?void 0:a.toLowerCase()),1)])):d("",!0),e.item.value?(l(),o("p",nt,[m("Le costo a la empresa "),t("b",null,n(e.item),1)])):d("",!0),e.item.order_id?(l(),o("p",it,[m("Orden entregada "),t("b",null,n(e.item.order_id),1)])):d("",!0),e.item.notes?(l(),o("p",rt,[ut,m(" "+n(e.item.notes),1)])):d("",!0),dt,ct]}),_:1},8,["value"])]),_:1},8,["visible","header"]),u(j,{class:"mx-2",visible:ee.value,"onUpdate:visible":s[8]||(s[8]=e=>ee.value=e),modal:"",header:`GESTION DE LA PQR  ID:    ${v.value.pqr_request_id}`,style:{width:"50rem"}},{footer:p(()=>[t("div",ds,[u(k,{onClick:Ue,label:"Enviar",severity:"help"})])]),default:p(()=>[t("div",mt,[pt,t("p",_t,n(v.value.request_type),1),yt,t("p",ht,n(v.value.channel),1),vt,t("div",bt,[t("div",{style:_([{width:"100%","max-width":".4rem","border-radius":"45rem","box-sizing":"border-box"},`background-color:${v.value.channel_color}`])},null,4),t("div",ft,[t("p",null,n(v.value.request_content),1)])]),v.value.user_name||v.value.user_phone?(l(),o("h6",xt,wt)):d("",!0),t("div",kt,[t("div",{style:_([{width:"100%","max-width":".4rem","border-radius":"45rem","box-sizing":"border-box"},`background-color:${v.value.channel_color}`])},null,4),t("div",Vt,[v.value.user_name?(l(),o("span",St,[Tt,m(" "+n(v.value.user_name),1)])):d("",!0),v.value.user_phone?(l(),o("span",Rt,[Ct,m(" "+n(v.value.user_phone),1)])):d("",!0),v.value.user_address?(l(),o("span",qt,[Dt,m(" "+n(v.value.user_address),1)])):d("",!0),v.value.order_id?(l(),o("span",$t,[jt,m(" "+n(v.value.order_id),1)])):d("",!0)])]),Pt,t("div",Nt,[t("div",{style:_([{width:"100%","max-width":".4rem","border-radius":"45rem","box-sizing":"border-box"},`background-color:${v.value.status_history[0].color}`])},null,4),t("div",Et,[u(S,{value:v.value.status_history},{opposite:p(e=>{var a,R,N,E;return[t("div",Ot,[t("p",Lt,n((a=e.item.timestamp)==null?void 0:a.split(" ")[0]),1),t("p",Ut,n((E=(N=(R=e.item.timestamp)==null?void 0:R.split(" "))==null?void 0:N.slice(1,4))==null?void 0:E.join(" ")),1)])]}),content:p(e=>{var a;return[u(b,{style:_(`background-color:${e.item.color}`)},{default:p(()=>[t("p",zt,[t("b",null,n(e.item.status),1)])]),_:2},1032,["style"]),It,e.item.responsible_name?(l(),o("p",Ft,[Bt,m(" "+n((a=e.item.responsible_name)==null?void 0:a.toLowerCase()),1)])):d("",!0),e.item.value?(l(),o("p",At,[m("Le costo a la empresa "),t("b",null,n(x(Qe)(e.item.value)),1)])):d("",!0),e.item.order_id?(l(),o("p",Gt,[m("Orden entregada "),t("b",null,n(e.item.order_id),1)])):d("",!0),e.item.notes?(l(),o("p",Mt,[Qt,m(" "+n(e.item.notes),1)])):d("",!0),Ht,Xt]}),_:1},8,["value"])])]),Yt,u(q,{modelValue:g.value,"onUpdate:modelValue":s[1]||(s[1]=e=>g.value=e),options:xe.value.filter(e=>e.id!=2),optionLabel:"name",optionValue:"id"},null,8,["modelValue","options"]),g.value?(l(),o("div",Kt,[g.value==4||g.value==7?(l(),o("div",Jt,[Wt,u(M,{binary:"",modelValue:X.value,"onUpdate:modelValue":s[2]||(s[2]=e=>X.value=e)},null,8,["modelValue"])])):d("",!0),g.value==4||g.value==7?(l(),o("div",Zt,[es,u(M,{modelValue:G.value,"onUpdate:modelValue":s[3]||(s[3]=e=>G.value=e),binary:""},null,8,["modelValue"])])):d("",!0),(g.value==4||g.value==7)&&G.value?(l(),o("div",ts,[ss,u(h,{modelValue:se.value,"onUpdate:modelValue":s[4]||(s[4]=e=>se.value=e),style:{width:"100%"}},null,8,["modelValue"])])):d("",!0),(g.value==4||g.value==7)&&X.value||G.value?(l(),o("div",ls,[as,u(h,{modelValue:z.value,"onUpdate:modelValue":s[5]||(s[5]=e=>z.value=e),style:{width:"100%"}},null,8,["modelValue"])])):d("",!0),(g.value==4||g.value==7)&&G.value||X.value?(l(),o("div",os,[ns,u(y,{modelValue:Z.value,"onUpdate:modelValue":s[6]||(s[6]=e=>Z.value=e),style:{width:"100%"}},null,8,["modelValue"])])):d("",!0),t("div",null,[is,u(w,{modelValue:W.value,"onUpdate:modelValue":s[7]||(s[7]=e=>W.value=e),rows:"5",style:{resize:"none",width:"100%"}},null,8,["modelValue"])]),t("h6",rs,[m("Recuerde que esta firmando como "),t("b",null,n(x(V).rawUserData.name),1),m(" y por ende se hace responsable, "),us])])):d("",!0)])]),_:1},8,["visible","header"]),t("div",cs,[t("nav",ms,[t("ul",ps,[(l(!0),o(B,null,Y(fe.value,e=>(l(),o("li",_s,[u(b,{style:_([`background-color:${e.color}`,{height:"1.3rem","aspect-ratio":"1 / 1","border-radius":"50%"}])},null,8,["style"]),m(),u(k,{onClick:()=>{ue.value=e,x(V).currentSection_pqr=ve.value[0]},class:He(["nav_bar--buttons-button p-2",e.id==ue.value.id?"nav_bar--buttons-button-selected":""]),label:e.name},null,8,["onClick","class","label"])]))),128))])]),t("div",ys,[x(V).currentSection_pqr.x!=0?(l(),o("div",{key:0,class:"my-0 px-0",style:_([x(V).currentSection_pqr.x!=0?"opacity:1":"opacity:0",{display:"flex",transition:"all ease .5s","align-items":"end",gap:"1rem"}])},[hs,u(T,{style:{"max-width":"7.5rem"},disabled:x(V).currentSection_pqr.x==0,modelValue:A.value,"onUpdate:modelValue":s[9]||(s[9]=e=>A.value=e),dateFormat:"dd-mm-yy"},null,8,["disabled","modelValue"]),vs,u(T,{style:{"max-width":"7.5rem"},disabled:!A.value||x(V).currentSection_pqr.x==0,modelValue:Q.value,"onUpdate:modelValue":s[10]||(s[10]=e=>Q.value=e),dateFormat:"dd-mm-yy"},null,8,["disabled","modelValue"]),x(V).currentSection_pqr.x==-200?(l(),o(B,{key:0},[bs,u(I,{style:{"max-width":"17rem","min-width":"15rem"},options:ne.value.filter(e=>e.show_on_web||e.site_id==17||e.site_id==18),optionLabel:"site_name",modelValue:ie.value,"onUpdate:modelValue":s[11]||(s[11]=e=>ie.value=e),placeholder:"SEDES"},null,8,["options","modelValue"])],64)):d("",!0),u(k,{style:{"min-width":"max-content"},disabled:x(V).currentSection_pqr.x==0,onClick:s[12]||(s[12]=e=>Ne(A.value,Q.value)),severity:"help",label:"Buscar",icon:"pi pi-search"},null,8,["disabled"])],4)):d("",!0),t("div",fs,[xs,t("div",null,[u(q,{style:{width:"10rem"},optionLabel:"name",placeholder:"Avanzado",modelValue:x(V).currentSection_pqr,"onUpdate:modelValue":s[13]||(s[13]=e=>x(V).currentSection_pqr=e),options:ve.value},null,8,["modelValue","options"])]),u(k,{onClick:s[14]||(s[14]=e=>x(Pe).visible_add_pqr=!0),icon:"pi pi-plus",label:"Nueva PQR",severity:"help"}),t("div",gs,[u(k,{onClick:$e,label:"Descargar PQRs como Excel",icon:"pi pi-file-excel",severity:"success",class:"p-button-sm"})])])]),ws,t("div",ks,[t("div",Vs,[u(P,{style:_([`transform:translateX(${x(V).currentSection_pqr.x}%);transition: .5s all ease;`,{width:"100%"}]),paginator:!0,rows:15,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",currentPageReportTemplate:"Mostrando {first} a {last} de {totalRecords} solicitudes",rowsPerPageOptions:[5,10,25,100],scrollable:"",showGridlines:"",stripedRows:"",class:"col-12 p-2",value:H.value.filter(e=>{var a,R;return((a=e.current_status)==null?void 0:a.status)==((R=ue.value)==null?void 0:R.name)}),tableStyle:"min-width: 50rem;",filters:U.value},{header:p(()=>[t("div",Ss,[t("h4",Ts,[Rs,m(),t("b",Cs,[m("PQRS "),t("b",null,n(x(be).params.section),1)])]),t("div",qs,[u(y,{class:"",modelValue:U.value.global.value,"onUpdate:modelValue":s[15]||(s[15]=e=>U.value.global.value=e),placeholder:"Buscar Solicitud..."},null,8,["modelValue"])])])]),default:p(()=>[(l(!0),o(B,null,Y(Le.value,e=>(l(),K(ae,{header:e.columnName,style:_(`min-width:${e.size}`),field:e.columnValue,class:"my-0 py-2"},{body:p(a=>{var R,N,E,Se,Te,Re;return[e.columnType=="date"?(l(),o("h6",Ds,n(((R=a.data[e.columnValue])==null?void 0:R.split("-").reverse().join("-"))||"---------"),1)):d("",!0),e.columnType=="responsible_name"?(l(),o("h6",$s,n(((Se=(E=(N=a.data)==null?void 0:N.status_history)==null?void 0:E[0])==null?void 0:Se.responsible_name)||"No se ha interactuado"),1)):d("",!0),e.columnType=="max-content"?(l(),o("h6",{key:2,style:_(e.columnType=="max-content"?"min-width: max-content":""),class:"m-0 p-0"},n(a.data[e.columnValue]||"---------"),5)):d("",!0),e.columnType=="order_id"?(l(),o("h6",js,n(a.data[e.columnValue]||"---------"),1)):d("",!0),e.columnType=="other"?(l(),o("h6",Ps,n(a.data[e.columnValue]||"---------"),1)):d("",!0),e.columnType=="rating"?(l(),o("h6",Ns,[a.data[e.columnValue]>0?(l(),K(le,{key:0,cancel:!1,readonly:"",modelValue:a.data[e.columnValue],"onUpdate:modelValue":oe=>a.data[e.columnValue]=oe},null,8,["modelValue","onUpdate:modelValue"])):(l(),o("span",Es," ------------"))])):d("",!0),e.columnType=="money"?(l(),o("h6",{key:6,style:_(e.columnType=="max-content"?"min-width: max-content":""),class:"m-0 p-0"},n(c.formatoPesosColombianos(a.data[e.columnValue])||"---------"),5)):d("",!0),e.columnValue=="current_status"?(l(),o("div",Os,[u(b,{style:_([{color:"white","text-align":"center"},`background-color:${(Te=a.data[e.columnValue])==null?void 0:Te.color}`])},{default:p(()=>{var oe;return[m(n(((oe=a.data[e.columnValue])==null?void 0:oe.status)||"---------"),1)]}),_:2},1032,["style"]),t("b",null,n(((Re=a.data[e.columnValue])==null?void 0:Re.timestamp)||"---------"),1)])):d("",!0),e.columnValue=="channel"?(l(),o("div",Ls,[u(b,{style:_([{color:"white","text-align":"center"},`background-color:${a.data.channel_color}`])},{default:p(()=>[m(n(a.data[e.columnValue]||"---------"),1)]),_:2},1032,["style"])])):d("",!0),e.columnValue=="tag_name"?(l(),o("div",Us,[u(b,{style:_([{color:"white","text-align":"center"},`background-color:${a.data.tag_color}`])},{default:p(()=>[m(n(a.data[e.columnValue]),1)]),_:2},1032,["style"])])):d("",!0),e.columnValue=="restaurant"?(l(),o("div",zs,[u(b,{style:_([{color:"white"},`background-color:${a.data.restaurant_color}`])},{default:p(()=>[m(n(a.data[e.columnValue]),1)]),_:2},1032,["style"])])):d("",!0)]}),_:2},1032,["header","style","field"]))),256)),u(F,{class:"my-0 py-0 px-0 mx-0",style:{},frozen:"",alignFrozen:"right",header:"Interactuar"},{body:p(e=>[t("div",Is,[u(k,{onClick:a=>Ee(e.data),label:"Gestionar",severity:"help",icon:"pi pi-check p-0",class:"my-0 py-2"},null,8,["onClick"])])]),_:1})]),_:1},8,["style","value","filters"]),t("div",{style:_([`transform:translateX(${x(V).currentSection_pqr.x}%);transition: .5s all ease;`,{"min-width":"100%",overflow:"auto",margin:"0 auto",height:"min-content"}])},[t("div",Fs,[t("h4",Bs,[t("b",null,[m(" REPORTE POR ESTADO "+n(D($.value).split("-").reverse().join("-"))+" ",1),As,m(" "+n(D(C.value).split("-").reverse().join("-")),1)])]),u(P,{rows:15,style:{"max-width":"96vw","box-shadow":"0 0 1rem #00000030","border-radius":".5rem"},scrollable:"",showGridlines:"",stripedRows:"",class:"col-12 m-auto my-4",value:ce.value,tableStyle:"min-width: 50rem;",filters:U.value},{header:p(()=>[]),default:p(()=>[(l(!0),o(B,null,Y(me.value,e=>(l(),K(F,{class:"p-0 text-center",style:{"max-width":"min-content","text-transform":"uppercase"},header:e},{body:p(a=>[t("div",null,[a.data.sede=="total"?(l(),o("h6",{key:0,class:"m-0 py-1 px-2 text-xl",style:_([{display:"flex","background-color":"var(--blue-100)"},e!="sede"?"justify-content: center;":"justify-content: start;"])},[t("b",null,n(a.data[e]),1)],4)):(l(),o("h6",{key:1,class:"m-0 py-1 px-2",style:_([{display:"flex","justify-content":"center"},e!="sede"?"justify-content: center;":"justify-content: start;"])},n(a.data[e]),5))])]),_:2},1032,["header"]))),256))]),_:1},8,["value","filters"])]),t("div",Gs,[t("h4",Ms,[t("b",null,[m(" REPORTE POR RESPONSABLES "+n(D($.value).split("-").reverse().join("-"))+" ",1),Qs,m(" "+n(D(C.value).split("-").reverse().join("-")),1)])]),u(P,{rows:15,style:{"max-width":"96vw","box-shadow":"0 0 1rem #00000030","border-radius":".5rem"},scrollable:"",showGridlines:"",stripedRows:"",class:"col-12 m-auto my-4",value:ye.value,tableStyle:"min-width: 50rem;",filters:U.value},{header:p(()=>[]),default:p(()=>[(l(!0),o(B,null,Y(he.value,e=>(l(),K(F,{class:"p-0 text-center",style:{"max-width":"min-content","text-transform":"uppercase"},header:e},{body:p(a=>[t("div",null,[a.data.responsible_name=="total"?(l(),o("h6",{key:0,class:"m-0 py-1 px-2 text-xl",style:_([{display:"flex","text-align":"center","background-color":"var(--blue-100)"},e!="responsible_name"?"justify-content: center;":"justify-content: start;"])},[t("b",null,n(a.data[e]),1)],4)):a.data.responsible_name=="pendiente"?(l(),o("h6",{key:1,class:"m-0 py-1 px-2",style:_([{display:"flex","text-align":"center",color:"var(--red-900)","background-color":"var(--red-100)"},e!="responsible_name"?"justify-content: center;":"justify-content: start;"])},[t("b",null,n(a.data[e]),1)],4)):(l(),o("h6",{key:2,class:"m-0 py-1 px-2",style:_([{display:"flex","text-align":"start"},e!="responsible_name"?"justify-content: center;":"justify-content: start;"])},n(a.data[e]),5))])]),_:2},1032,["header"]))),256))]),_:1},8,["value","filters"])]),t("div",Hs,[t("h4",Xs,[t("b",null,[m(" REPORTE POR TIPOS "+n(D($.value).split("-").reverse().join("-"))+" ",1),Ys,m(" "+n(D(C.value).split("-").reverse().join("-")),1)])]),u(P,{rows:15,style:{"max-width":"96vw","box-shadow":"0 0 1rem #00000030","border-radius":".2rem","background-color":"white"},scrollable:"",showGridlines:"",stripedRows:"",class:"col-12 m-auto my-4",value:pe.value,tableStyle:"min-width: 50rem;",filters:U.value},{header:p(()=>[]),default:p(()=>[(l(!0),o(B,null,Y(_e.value,e=>(l(),K(F,{class:"p-0 text-center",style:{"max-width":"min-content","text-transform":"uppercase"},header:e},{body:p(a=>[t("div",null,[a.data.sede=="TOTAL"?(l(),o("h6",{key:0,class:"m-0 py-1 px-2 text-xl",style:_([{display:"flex","background-color":"var(--blue-100)"},e!="sede"?"justify-content: center;":"justify-content: start;"])},[t("b",null,n(a.data[e]),1)],4)):(l(),o("h6",{key:1,class:"m-0 py-1 px-2",style:_([e!="sede"?"justify-content: center;":"justify-content: start;",{display:"flex"}])},n(a.data[e]),5))])]),_:2},1032,["header"]))),256))]),_:1},8,["value","filters"])]),Ks],4),t("div",{class:"p-3",style:_([`transform:translateX(${x(V).currentSection_pqr.x}%);transition: .5s all ease;`,{"min-width":"100%",overflow:"auto",height:"min-content",margin:"0 auto"}])},[t("div",Js,[Ws,u(q,{modelValue:re.value,"onUpdate:modelValue":s[16]||(s[16]=e=>re.value=e),options:je,optionLabel:"name"},null,8,["modelValue"])]),u(ze,{type:re.value.value,data:de.value,class:"h-[10rem] p-2 h-50",style:{width:"100%",margin:"0 auto","max-width":"1200px","box-shadow":"0 0 10px rgba(0, 0, 0, .2)","border-radius":".5rem"}},null,8,["type","data"]),Zs],4)])]),u(We,{onReload:s[17]||(s[17]=e=>te())})])],64)}}},ul=Ie(el,[["__scopeId","data-v-8a5ec3cc"]]);export{ul as default};
