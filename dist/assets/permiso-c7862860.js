import{_ as Q,f as u,cb as X,g as H,h as P,x as Y,C as Z,b7 as ee,r as N,o as E,c as S,a as e,d as g,l as D,w as V,n as O,t as i,y as te,k as v,c1 as oe,bV as se,U as T,v as ae,b4 as le,cc as ne,q,P as W,p as ie,e as re}from"./index-90c38b00.js";import{f as ce}from"./formatoPesos-2a38d2e7.js";import{a as de}from"./html2canvas.esm-6e01b359.js";import{E as ue}from"./jspdf.es.min-cc112f4a.js";const me="/images/permiso.jpg";const s=C=>(ie("data-v-7d813b50"),C=C(),re(),C),he={class:"m-2 m-auto"},pe=s(()=>e("p",{class:"text-2xl lg:text-3xl text-center my-4 mt-8",style:{"font-weight":"bold"}},"Solicitar permiso General",-1)),_e={class:"mb-6 col-12",style:{display:"flex",height:"auto"}},ve=s(()=>e("span",{style:{color:"white"}},"Buscar",-1)),fe={key:0,class:"text-1xl m-auto col-6 p-0",style:{color:"var(--primary-color)"}},ge={key:1,class:"text-5xl m-auto col-12"},ye={key:2,class:"col-12 p-0 m-auto",style:{height:"max-content","background-color":"transparent"}},be=s(()=>e("h6",{class:"text-center p-2 m-0 mb-5 col-12",style:{"border-radius":"2rem","font-weight":"bold","background-color":"var(--gray-200)"}},"INFORMACIÓN DEL EMPLEADO",-1)),xe={class:"px-0 grid",style:{}},we=s(()=>e("h6",{class:"col-6 m-0 text-left text-md"},"NOMBRE",-1)),Ee={class:"col-6 m-0 text-right",style:{"font-weight":"300","min-width":"max-content"}},Se=s(()=>e("h6",{class:"col-6 m-0 py-2 text-left"},"ESTADO",-1)),De={class:"col-6 m-0 py-2 text-right",style:{"font-weight":"300","min-width":"max-content"}},Ce={class:"px-0 grid",style:{}},ke=s(()=>e("h6",{class:"col-6 m-0 text-left"},"DOCUMENTO",-1)),Ie={class:"col-6 m-0 text-right",style:{"font-weight":"300","min-width":"max-content"}},Le={class:"px-0 grid",style:{}},Ne=s(()=>e("h6",{class:"col-6 m-0 text-left"},"FECHA DE INICIO",-1)),Oe={class:"col-6 m-0 text-right",style:{"font-weight":"300"}},Ae={class:"px-0 grid",style:{"background-color":""}},Pe=s(()=>e("h6",{class:"col-6 m-0 text-left"},"CARGO",-1)),Ve={class:"col-6 m-0 text-right",style:{"font-weight":"300"}},Te=s(()=>e("h6",{class:"text-center p-2 mb-5",style:{"border-radius":"2rem","font-weight":"bold","background-color":"var(--gray-200)"}}," DETALLES ADICIONALES",-1)),$e={class:"px-0 grid",style:{}},je=s(()=>e("h6",{class:"col-6 m-0 text-left"},"TIPO DE CONTRATO",-1)),Ue={class:"col-6 m-0 text-right",style:{"font-weight":"300"}},ze={class:"px-0 grid",style:{}},Be=s(()=>e("h6",{class:"col-6 m-0 text-left"},"SALARIO",-1)),Re={class:"col-6 m-0 text-right",style:{"font-weight":"300"}},Fe={class:"px-0 grid col-12",style:{}},Me={class:"col-6"},He={style:{}},qe={class:"col-6"},We=s(()=>e("h6",{class:"text-center p-2 m-0 my-5 col-12",style:{"border-radius":"2rem","font-weight":"bold","background-color":"var(--gray-200)"}},"OBSERVACIONES",-1)),Ge={class:"col-12"},Je={style:{display:"flex"}},Ke={style:{color:"white"}},Qe={style:{color:"white"}},Xe={class:"col-12 p-0 mt-6",style:{"overflow-x":"auto","box-shadow":"0 0 20px rgba(0, 0, 0, 0.308)"},ref:"contenidoParaPDF"},Ye={class:"a4-size p-8 mi-clase",style:{"box-shadow":"0 0 10px rgba(0, 0, 0, 0.508)"}},Ze=s(()=>e("img",{class:"m-auto",src:"https://salchimonster.com/images/logo.png",style:{width:"10%"},alt:""},null,-1)),et={style:{"font-size":"14pt","font-weight":"normal",color:"black","font-family":"Arial, Helvetica, sans-serif"}},tt=s(()=>e("h6",{class:"text-center",style:{"font-size":"14pt","font-weight":"bold",color:"black","font-family":"Arial, Helvetica, sans-serif"}}," INVERSIONES SALCHIMONSTER SAS ",-1)),ot=s(()=>e("h6",{style:{"font-size":"14pt","font-weight":"normal",color:"black","font-family":"Arial, Helvetica, sans-serif"},class:"text-center"},"NIT: 901.420.874-0",-1)),st=s(()=>e("h6",{class:"text-center py-4",style:{"font-weight":"bold"}},[v("FORMATO SOLICITUD DE PERMISO GENERAL "),e("span",{style:{"text-transform":"capitalize"}})],-1)),at={class:"text-l",style:{"font-size":"14pt","font-weight":"normal",color:"black","font-family":"Arial, Helvetica, sans-serif"}},lt={class:"p-0 m-0"},nt=s(()=>e("span",{style:{"font-weight":"bold"}},"Fecha de la solicitud: ",-1)),it={style:{"border-bottom":"1px solid","padding-bottom":"0","padding-right":"2rem"}},rt={class:"p-0 m-0",style:{width:"100%"}},ct=s(()=>e("span",{style:{"font-weight":"bold"}},"Nombre: ",-1)),dt={style:{width:"100%","border-bottom":"1px solid","padding-bottom":"0","padding-right":"3rem"}},ut={class:"p-0 m-0"},mt=s(()=>e("span",{style:{"font-weight":"bold"}},"Cargo: ",-1)),ht={style:{"border-bottom":"1px solid","padding-bottom":"0","padding-right":"2rem"}},pt={class:"p-0 m-0"},_t=s(()=>e("span",{style:{"font-weight":"bold"}},"Identificación No: ",-1)),vt={style:{"border-bottom":"1px solid","padding-bottom":"0","padding-right":"2rem"}},ft={style:{display:"flex","justify-content":"start",gap:"2rem",border:"1px solid","margin-top":"2rem"},class:"p-2"},gt={style:{display:"flex","flex-direction":"column"},class:""},yt=s(()=>e("div",{style:{"font-weight":"bold"}}," Desde ",-1)),bt={style:{display:"flex","flex-direction":"column"}},xt=s(()=>e("div",{style:{"font-weight":"bold"}}," Hasta ",-1)),wt={style:{display:"flex","justify-content":"start",gap:"2rem",border:"1px solid","margin-top":"2rem"},class:"p-2"},Et={style:{display:"flex","flex-direction":"column"},class:""},St=s(()=>e("div",{class:"mb-2",style:{"font-weight":"bold"}}," Observaciones ",-1)),Dt={class:"col-12"},Ct={key:3,class:"col-12"},kt=s(()=>e("img",{src:me,alt:"",srcset:"",style:{width:"100%",height:"50vh","object-fit":"cover","border-radius":"1rem"}},null,-1)),It=[kt],Lt={__name:"permiso",setup(C){const l=u({}),h=u(X()),$=u(),x=u("2029-12-21 16:19"),A=u(),k=u(),I=u(),w=u();u();function j(o){var t=new Date(o),n={day:"numeric",month:"long",year:"numeric"};return t.toLocaleDateString("es-ES",n)}H(h,(o,t)=>{console.log(`El valor de usrDni ha cambiado de ${t} a ${o}`)});const G=async o=>{f.setLoading(!0,`Buscando usuario ${o}`),fetch(`${T}/employer/dni/${o}`).then(t=>{if(!t.ok)throw new Error("Network response was not ok");return f.setLoading(!1,`Buscando usuario ${o}`),t.json()}).then(t=>{f.setLoading(!1,`Buscando usuario ${o}`),console.log("Employer data:",t),l.value=t,A.value=""}).catch(t=>{f.setLoading(!1,`Buscando usuario ${o}`),console.error("There has been a problem with your fetch operation:",t),l.value={},A.value="  No hay un usuario para el número de documento "+h.value,$.value="error"})},U=async()=>{fetch(`${T}/server_time`).then(o=>{if(!o.ok)throw new Error("Network response was not ok");return o.json()}).then(o=>{console.log("Employer data:",o),x.value=o}).catch(o=>{console.error("There has been a problem with your fetch operation:",o),$.value="error"})};P(async()=>{U()});const f=Y(),J=async()=>{if(!l.value.id){console.error("El ID del usuario es necesario para solicitar el permiso.");return}const o=n=>n.toISOString().split("T")[0],t={employer_id:l.value.id,start_date:o(k.value),end_date:o(I.value),observations:w.value||"sin observaciones",tipo:"general",status:{status:"generado",timestamp:x.value},history:[{status:"generado",timestamp:x.value}]};try{f.setLoading(!0,"solicitando permiso");const n=await fetch(`${T}/permission`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok)throw f.setLoading(!1,"solicitando permiso"),new Error("Error en la solicitud de permiso");const m=await n.json();console.log("Permiso creado exitosamente:",m),ae.push("/mis-permisos")}catch(n){f.setLoading(!1,"solicitando permiso"),console.error("Error al solicitar el permiso:",n)}};function z(o){o||(o="2029-12-21 16:19");const t=["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"];let[n,m]=o.split(" "),[d,p,b]=n.split("-").map(Number),a=t[p-1];return`${b} de ${a} de ${d}`}function y(o){const t=["cero","un","dos","tres","cuatro","cinco","seis","siete","ocho","nueve"],n=["diez","once","doce","trece","catorce","quince","dieciséis","diecisiete","dieciocho","diecinueve"],m=["","","veinte","treinta","cuarenta","cincuenta","sesenta","setenta","ochenta","noventa"];function d(a){let r="",_="cien";if(a[0]>1?(r+=t[a[0]]+"cientos ",_=""):a[0]===1&&(r+=_+" "),a[1]>1)r+=m[a[1]]+" y ";else if(a[1]===1)return r+n[a[2]];return(a[2]!==0||a[0]===0&&a[1]===0)&&(r+=t[a[2]]),r}if(o===0)return t[0];if(o<0)return"menos "+y(-o);let p=[];for(;o>0;)p.push(o%1e3),o=Math.floor(o/1e3);return p.map((a,r)=>{if(a===0)return"";let _=d([Math.floor(a/100),Math.floor(a%100/10),a%10]);return r===1?a===1?"mil":_+" mil":r===2?a===1?"un millón":_+" millones":_}).reverse().join(" ").trim()}console.log(y(16e5)),console.log(y(16e5)),console.log(y(1111111));const B=u(window.innerWidth),R=Z(()=>B.value<600),F=()=>{B.value=window.innerWidth};P(()=>{window.addEventListener("resize",F)}),ee(()=>{window.removeEventListener("resize",F)}),document.getElementsByClassName("mi-clase"),H(h,(o,t)=>{console.log(`El valor de usrDni ha cambiado de ${t} a ${o}`)}),P(async()=>{U()}),console.log(y(16e5)),console.log(y(16e5)),console.log(y(1111111));const L=u(R.value),K=async()=>{const o=R.value;L.value=!1,await le();let t=document.querySelector(".mi-clase");if(t)try{const m=(await de(t,{scale:2.5})).toDataURL("image/jpeg",.9),d=new ue({orientation:"portrait",unit:"px",format:"a4"}),p=d.internal.pageSize.getWidth(),b=d.internal.pageSize.getHeight();d.addImage(m,"JPEG",0,0,p,b),d.save(`certificado laboral - ${l.value.name}.pdf`)}catch(n){console.error("Error al exportar PDF: ",n)}finally{L.value=o}else console.error("No se encontró el elemento para convertir a PDF"),L.value=o};return(o,t)=>{var b,a,r,_,M;const n=N("InputNumber"),m=N("Button"),d=N("Calendar"),p=N("Textarea");return E(),S("div",he,[pe,e("span",_e,[g(n,{modelValue:h.value,"onUpdate:modelValue":t[0]||(t[0]=c=>h.value=c),disabled:((b=D(ne)())==null?void 0:b.toLowerCase())!="gerente",class:"mr-5",style:{width:"100%"},placeholder:"Cedula del empleado"},null,8,["modelValue","disabled"]),g(m,{style:{display:"flex",color:"white","align-items":"center","justify-content":"center","font-weight":"bold"},onClick:t[1]||(t[1]=c=>G(h.value))},{default:V(()=>[ve]),_:1})]),h.value==null?(E(),S("p",fe," Por favor digite el numero de decumento del usuario y presione Buscar")):O("",!0),!l.value.dni&&h.value?(E(),S("p",ge,i(A.value),1)):O("",!0),l.value.dni&&h.value?(E(),S("div",ye,[be,e("div",xe,[we,e("h6",Ee,i(l.value.name),1)]),e("div",{class:"px-0 grid p-0",style:te([{"border-radius":"2rem"},((r=(a=l.value)==null?void 0:a.status)==null?void 0:r.toLowerCase().split(" ")[0])=="activo"?"background-color:rgb(193, 255, 100);":"background-color: rgb(255, 132, 132);"])},[Se,e("h6",De,i(l.value.status),1)],4),e("div",Ce,[ke,e("h6",Ie,i(l.value.dni),1)]),e("div",Le,[Ne,e("h6",Oe,i(l.value.entry_date),1)]),e("div",Ae,[Pe,e("h6",Ve,i(l.value.position),1)]),Te,e("div",$e,[je,e("h6",Ue,i(l.value.contract_type),1)]),e("div",ze,[Be,e("h6",Re,i(D(ce)(l.value.salary)),1)]),e("div",Fe,[e("h6",Me,[e("div",He,[v(" DESDE "),g(d,{class:"col p-0",modelValue:k.value,"onUpdate:modelValue":t[2]||(t[2]=c=>k.value=c),required:"true",autofocus:""},null,8,["modelValue"])])]),e("h6",qe,[e("div",null,[v(" HASTA "),g(d,{class:"col p-0",modelValue:I.value,"onUpdate:modelValue":t[3]||(t[3]=c=>I.value=c),required:"true",autofocus:""},null,8,["modelValue"])])]),We,e("h6",Ge,[g(p,{class:"col-12 text-xl",modelValue:w.value,"onUpdate:modelValue":t[4]||(t[4]=c=>w.value=c),required:"true",autofocus:""},null,8,["modelValue"])])]),e("div",Je,[g(m,{onClick:t[5]||(t[5]=c=>J()),disabled:D(f).Loading.visible,style:{display:"flex",color:"white","align-items":"center","justify-content":"center","font-weight":"bold"}},{default:V(()=>[e("span",Ke,[e("i",{class:q(D(W).UPLOAD)},null,2),v(" Solicitar permiso")])]),_:1},8,["disabled"]),g(m,{onClick:t[6]||(t[6]=c=>K()),disabled:"",style:{display:"flex",color:"white","align-items":"center","justify-content":"center","font-weight":"bold"}},{default:V(()=>[e("span",Qe,[e("i",{class:q(D(W).UPLOAD)},null,2),v(" Descargar Comprobante")])]),_:1})])])):O("",!0),oe(e("div",Xe,[e("div",Ye,[Ze,e("h6",et,i(z(x.value)),1),tt,ot,st,e("h5",at,[e("p",lt,[nt,v(),e("span",it,i(z(x.value)),1)]),e("p",rt,[ct,v(),e("span",dt,i(l.value.name),1)]),e("p",ut,[mt,v(),e("span",ht,i(l.value.position),1)]),e("p",pt,[_t,v(),e("span",vt,i(l.value.dni),1)]),e("div",ft,[e("div",gt,[yt,e("div",null,i(j(k.value)),1)]),e("div",bt,[xt,e("div",null,i(j(I.value)),1)])]),e("div",wt,[e("div",Et,[St,e("h6",Dt,[g(p,{class:"col-12 text-xl",style:{"min-width":"600px","max-width":"600px"},modelValue:w.value,"onUpdate:modelValue":t[7]||(t[7]=c=>w.value=c),required:"true",autofocus:""},null,8,["modelValue"])])])])])])],512),[[se,((M=(_=l.value)==null?void 0:_.status)==null?void 0:M.toLowerCase().split(" ")[0])=="activo"&&!L.value]]),l.value.dni?O("",!0):(E(),S("div",Ct,It))])}}},Vt=Q(Lt,[["__scopeId","data-v-7d813b50"]]);export{Vt as default};
