import{_ as G,I as J,r as Q,a as I,o as n,f as M,w as p,b as e,t as l,u as o,O as S,n as $,P as z,q as u,c as i,F as g,e as w,m,s as Z,p as K,g as X,Q as ee,H as te,J as se,d as _}from"./index-c77db9f7.js";/* empty css                                                                    */import{u as E,w as ae}from"./xlsx-4f9172c7.js";const f=O=>(K("data-v-5f8be31f"),O=O(),X(),O),le={style:{"border-radius":"1rem",overflow:"hidden"}},ne=f(()=>e("div",{class:"P-0 mt-0",style:{"background-color":"var(--orange-500)"}},[e("div",{class:"header p-4",style:{display:"flex","justify-content":"space-between","align-items":"center"}},[e("div",{style:{display:"flex"}},[e("img",{class:"p-0",src:ee,style:{filter:"brightness(0) invert()",width:"",height:"3rem","object-fit":"contain"},alt:""}),e("span",{style:{width:"min-content","font-weight":"bold",color:"white"}},"INVERSIONES SALCHIMONSTER")]),e("div",{style:{display:"flex","flex-direction":"column","max-width":"40%"}},[e("span",{class:"text-left text-sm",style:{"text-align":"end",width:"min-content","font-weight":"bold",color:"white"}},"TERMINOS Y CONDICIONES "),e("small",{class:"mt-2 text-left",style:{color:"white","max-width":""}},"Lorem ipsum dolor sit amet consectetur, adipisi")])])],-1)),oe={class:"P-0",style:{"background-color":"var(--gray-200)"}},ie={class:"header p-4",style:{display:"flex","justify-content":"space-between"}},re={style:{"font-weight":"bold",display:"flex","flex-direction":"column","max-width":"50%"}},de=f(()=>e("span",{class:"text-xl mb-2",style:{width:"min-content","font-weight":"bold",color:"rgb(0, 0, 0)"}},"Factura",-1)),ce={style:{display:"flex",gap:"1rem","justify-content":"space-between"}},_e=f(()=>e("div",{style:{display:"flex","flex-direction":"column"}},[e("span",null," Orden No."),e("span",null," Sede"),e("span",null," Fecha"),e("span",null," Metodo de pago")],-1)),pe=f(()=>e("div",{style:{display:"flex","font-weight":"200","flex-direction":"column"}},[e("span",null," |"),e("span",null," | "),e("span",null," |"),e("span",null," |")],-1)),me={style:{display:"flex","font-weight":"400","flex-direction":"column"}},he={style:{"font-weight":"bold",display:"flex","flex-direction":"column","max-width":"40%"}},ue=f(()=>e("span",{class:"text-xl mb-2",style:{width:"min-content","font-weight":"bold",color:"rgb(0, 0, 0)"}},"Balance",-1)),ye={style:{display:"flex",gap:"1rem","justify-content":"space-between"}},fe=f(()=>e("div",{style:{display:"flex","flex-direction":"column"}},[e("span",null," Subtotal"),e("span",null," Domicilio"),e("span",{class:"text-2xl"}," Total")],-1)),ge=f(()=>e("div",{style:{display:"flex","font-weight":"200","flex-direction":"column"}},[e("span",null," | "),e("span",null," |"),e("span",null," |")],-1)),be={style:{display:"flex","font-weight":"400","flex-direction":"column"}},xe={class:"text-xl",style:{"font-weight":"bold","border-top":"2px solid red"}},we=f(()=>e("p",{class:"text-xl text-center",style:{"font-weight":"bold",color:"rgb(255, 255, 255)","background-color":"black"}},"Datos de usuario",-1)),ve={class:"p-4",style:{display:"flex",gap:"1rem","justify-content":"start"}},ke={style:{display:"flex","font-weight":"400",height:"4rem","aspect-ratio":"1 / 1","background-color":"rgb(255, 255, 255)","border-radius":"50%","flex-direction":"column","align-items":"center","justify-content":"center"}},Se=f(()=>e("div",{style:{display:"flex","font-weight":"200","flex-direction":"column"}},[e("span",null," |"),e("span",null," | "),e("span",null," |")],-1)),Oe={style:{display:"flex","flex-direction":"column"}},Ce={style:{"text-transform":"capitalize"}},De=f(()=>e("span",{style:{"font-weight":"bold"}}," Nombre :",-1)),Te={style:{"text-transform":"capitalize"}},Ne=f(()=>e("span",{style:{"font-weight":"bold"}},"DIRECCION :",-1)),Ie=f(()=>e("span",{style:{"font-weight":"bold"}}," TELEFONO : ",-1)),Pe={class:"P-0",style:{"background-color":"var(--white-200)"}},Re={class:"header py-4",style:{display:"flex","justify-content":"space-between"}},je={style:{"font-weight":"bold",display:"flex","flex-direction":"column",width:"100%"}},Le=f(()=>e("span",{class:"text-xl pl-4 mb-2",style:{width:"min-content","font-weight":"bold",color:"rgb(0, 0, 0)"}},"Productos",-1)),Fe={class:"m-0 p-0"},Ee={class:"text-l p-1 text-center my-2",style:{"font-weight":"bold",width:"100","background-color":"var(--gray-200)",color:"black"}},Me={class:"px-4 py-0",style:{display:"flex",gap:"1rem",width:"100%","justify-content":"space-between"}},$e={style:{display:"flex","flex-direction":"column","font-weight":"500"}},ze={key:0,class:"",style:{"font-weight":"bold"}},Ve={class:"ml-4"},Be={key:2,class:"",style:{"font-weight":"bold"}},Ae={class:"ml-4"},He={key:4,class:"",style:{"font-weight":"bold"}},Ue={class:"ml-4"},We={key:6,class:"",style:{"font-weight":"bold"}},Ye={class:"ml-4"},qe={key:8,class:"",style:{"font-weight":"bold"}},Ge={class:"ml-4"},Je=f(()=>e("div",{style:{display:"flex","font-weight":"200","flex-direction":"column"}},null,-1)),Qe={style:{display:"flex","font-weight":"400","flex-direction":"column"}},Ke={key:0,class:"text-right",style:{}},Xe={class:"ml-4 text-right",style:{}},Ze={key:2,class:"text-right",style:{}},et={class:"ml-4 text-right"},tt={key:4,class:"text-right",style:{}},st={class:"ml-4 text-right"},at={key:5,class:"text-right",style:{}},lt={class:"ml-4 text-right"},nt={key:6,class:"text-right",style:{}},ot={class:"ml-4"},it={__name:"orderDialog",setup(O){const r=J();return Q(!0),(h,j)=>{const F=I("Dialog");return n(),M(F,{style:Z([{"background-color":""},{width:"40rem"}]),visible:o(r).visibleOrder.visible,"onUpdate:visible":j[0]||(j[0]=P=>o(r).visibleOrder.visible=P),modal:"",header:"Orden"},{default:p(()=>{var P,L,b,v,x,D;return[e("div",le,[ne,e("div",oe,[e("div",ie,[e("div",re,[de,e("div",ce,[_e,pe,e("div",me,[e("span",null,l(o(r).visibleOrder.order.order_id),1),e("span",null,l(o(r).visibleOrder.order.site_name),1),e("span",null,l((L=(P=o(r).visibleOrder.order)==null?void 0:P.status)==null?void 0:L.timestamp.split(" ")[0]),1),e("span",null,l((b=o(r).visibleOrder.order)==null?void 0:b.payment_method),1)])])]),e("div",he,[ue,e("div",ye,[fe,ge,e("div",be,[e("span",null,l(o(S)(o(r).visibleOrder.order.total_price)),1),e("span",null,l(o(S)(o(r).visibleOrder.order.delivery_price)),1),e("span",xe,l(o(S)(o(r).visibleOrder.order.total_price+o(r).visibleOrder.order.delivery_price)),1)])])])]),we,e("div",ve,[e("div",ke,[e("i",{class:$(["text-2xl",o(z).USER])},null,2)]),Se,e("div",Oe,[e("span",Ce,[De,u(" "+l((v=o(r).visibleOrder.order.user_data)==null?void 0:v.user_name),1)]),e("span",Te,[Ne,u(" "+l((x=o(r).visibleOrder.order.user_data)==null?void 0:x.user_address),1)]),e("span",null,[Ie,u(" "+l((D=o(r).visibleOrder.order.user_data)==null?void 0:D.user_phone),1)])])])]),e("div",Pe,[e("div",Re,[e("div",je,[Le,(n(!0),i(g,null,w(o(r).visibleOrder.order.products,a=>{var s,k,C,t,d,y,T,N,R,V,B,A,H,U,W,Y,q;return n(),i("div",Fe,[e("p",Ee,[u(l(a.name)+" ",1),e("span",null,l(o(S)(a.price)),1)]),e("div",Me,[e("div",$e,[((s=a.salsas)==null?void 0:s.length)>0?(n(),i("span",ze," Salsas")):m("",!0),((k=a.salsas)==null?void 0:k.length)>0?(n(!0),i(g,{key:1},w(a.salsas,c=>(n(),i("span",Ve,l(c),1))),256)):m("",!0),((C=a.adiciones)==null?void 0:C.length)>0?(n(),i("span",Be," Adiciones")):m("",!0),((t=a.adiciones)==null?void 0:t.length)>0?(n(!0),i(g,{key:3},w(a.adiciones,c=>(n(),i("span",Ae,l(c.name),1))),256)):m("",!0),((d=a.cambios)==null?void 0:d.length)>0?(n(),i("span",He," Cambios")):m("",!0),((y=a.cambios)==null?void 0:y.length)>0?(n(!0),i(g,{key:5},w(a.cambios,c=>(n(),i("span",Ue,l(c.name),1))),256)):m("",!0),((T=a.toppings)==null?void 0:T.length)>0?(n(),i("span",We," Toppings")):m("",!0),((N=a.toppings)==null?void 0:N.length)>0?(n(!0),i(g,{key:7},w(a.toppings,c=>(n(),i("span",Ye,l(c==null?void 0:c.name),1))),256)):m("",!0),((R=a.acompanantes)==null?void 0:R.length)>0?(n(),i("span",qe," Acompanantes")):m("",!0),((V=a.acompanantes)==null?void 0:V.length)>0?(n(!0),i(g,{key:9},w(a.acompanantes,c=>(n(),i("span",Ge,l(c.name),1))),256)):m("",!0)]),Je,e("div",Qe,[((B=a.salsas)==null?void 0:B.length)>0?(n(),i("span",Ke," --------------")):m("",!0),((A=a.salsas)==null?void 0:A.length)>0?(n(!0),i(g,{key:1},w(a.salsas,c=>(n(),i("span",Xe," ..."))),256)):m("",!0),((H=a.adiciones)==null?void 0:H.length)>0?(n(),i("span",Ze," --------------")):m("",!0),((U=a.adiciones)==null?void 0:U.length)>0?(n(!0),i(g,{key:3},w(a.adiciones,c=>(n(),i("span",et,l(o(S)(c.price)),1))),256)):m("",!0),((W=a.cambios)==null?void 0:W.length)>0?(n(),i("span",tt," --------------")):m("",!0),(n(!0),i(g,null,w(a.cambios,c=>(n(),i("span",st,l(o(S)(c.price)),1))),256)),((Y=a.topping)==null?void 0:Y.length)>0?(n(),i("span",at," --------------")):m("",!0),(n(!0),i(g,null,w(a.toppings,c=>(n(),i("span",lt,l(o(S)(c==null?void 0:c.price)),1))),256)),((q=a.acompanantes)==null?void 0:q.length)>0?(n(),i("span",nt," --------------")):m("",!0),(n(!0),i(g,null,w(a.acompanantes,c=>(n(),i("span",ot,l(o(S)(c.price)),1))),256))])])])}),256))])])])])]}),_:1},8,["visible"])}}},rt=G(it,[["__scopeId","data-v-5f8be31f"]]);const dt=O=>(K("data-v-06522dc0"),O=O(),X(),O),ct={class:"flex flex-wrap align-items-center justify-content-between gap-2 my-5 pl-0 ml-0"},_t={class:"text-l p-0 text-900 font-bold"},pt={class:"flex p-0 flex-column md:flex-row md:justify-content-between md:align-items-center",style:{"background-color":""}},mt={class:"block mt-2 md:mt-0 py-0"},ht=dt(()=>e("template",null,null,-1)),ut={class:"motivo"},yt={class:"motivo"},ft={__name:"ordenes",setup(O){const r=Q(null),h=J();te(()=>{j()});const j=()=>{r.value={global:{value:null,matchMode:se.CONTAINS}}},F=b=>{switch(b){case"enviada":return"success";case"cancelada":return"danger";default:return null}},P=async()=>{var x;let b=[...h.salesReport.total_sales.orders_info];if(h.order_status=h.order_status=="enviada"?"cancelada":"enviada",await h.fetchSalesReport(),b=b.concat([...h.salesReport.total_sales.orders_info]),!((x=r==null?void 0:r.value)!=null&&x.global.value))return b;const v=r.value.global.value.trim().toLowerCase();return b.filter(D=>Object.values(D).some(a=>a&&a.toString().trim().toLowerCase().includes(v)))},L=async()=>{const v=(await P()).map(s=>{var k,C,t,d,y;return{"Orden No":s.order_id,Monto:s.total_order_price,Sede:s.site_name,Fecha:(k=s.latest_status_timestamp)==null?void 0:k.split("T")[0],Hora:(y=(d=(t=(C=s.latest_status_timestamp)==null?void 0:C.split("T")[1])==null?void 0:t.split(":"))==null?void 0:d.slice(0,2))==null?void 0:y.join(":"),Estado:s.current_status,Responsable:s.responsible?`cancelada por ${s.responsible}`:"no aplica","razon de la cancelacion":s.reason||"no aplica",Domicilio:s.delivery_price,"Metodo de pago":s.payment_method,"Nombre del usuario":s.user_name,"telefono del usuario":s.user_phone,"direccion del usuario":s.user_address}}),x=E.json_to_sheet(v),D=v.reduce((s,k)=>(Object.keys(k).forEach((C,t)=>{var y;const d=((y=k[C])==null?void 0:y.toString().length)||0;s[t]=Math.max(s[t]||10,d)}),s),[]);x["!cols"]=D.map(s=>({wch:s}));const a=E.book_new();E.book_append_sheet(a,x,"ventas"),ae(a,"reporte de ventas salchimonster.xlsx")};return(b,v)=>{const x=I("Button"),D=I("InputText"),a=I("P"),s=I("Column"),k=I("Tag"),C=I("DataTable");return n(),i(g,null,[_(x,{size:"small",class:"py-2",severity:"success",onClick:L},{default:p(()=>[e("i",{class:$(["pr-3 m-0",o(z).DOWNLOAD])},null,2),u(" Descargar reporte")]),_:1}),e("div",ct,[e("span",_t,"Ordenes "+l(o(h).order_status)+"s entre "+l(o(h).formatDate(o(h).dateRange.startDate))+" y "+l(o(h).formatDate(o(h).dateRange.endDate)),1),e("div",pt,[e("span",mt,[_(D,{class:"p-2",modelValue:r.value.global.value,"onUpdate:modelValue":v[0]||(v[0]=t=>r.value.global.value=t),placeholder:"Buscar..."},null,8,["modelValue"])])])]),_(C,{paginator:"",value:o(h).salesReport.total_sales.orders_info,tableStyle:"min-width: 50rem",rows:10,filters:r.value,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25,100],stripedRows:"",currentPageReportTemplate:"Mostrando {first} a {last} de {totalRecords} ordenes",responsiveLayout:"scroll",scrollable:""},{default:p(()=>[ht,_(s,{field:"order_id",header:"Id",class:"py-0",headerStyle:"width:12rem;min-width:6rem"},{body:p(t=>[_(a,{style:{"min-width":"max-content"}},{default:p(()=>[u(l(t.data.order_id),1)]),_:2},1024)]),_:1}),_(s,{field:"total_price",header:"Monto",class:"py-0",headerStyle:"min-width:max-content; width:5rem"},{body:p(t=>[u(l(o(S)(t.data.total_order_price)),1)]),_:1}),_(s,{field:"site_name",header:"Sede",class:"py-0",headerStyle:"min-width:max-content; width:6rem"},{body:p(t=>[u(l(o(S)(t.data.site_name)),1)]),_:1}),_(s,{field:"status.timestamp",class:"px-1 py-0",header:"Fecha",headerStyle:"width:50rem; min-width:10rem "},{body:p(t=>{var d,y,T,N,R;return[u(l((d=t.data.latest_status_timestamp)==null?void 0:d.split("T")[0])+" "+l((R=(N=(T=(y=t.data.latest_status_timestamp)==null?void 0:y.split("T")[1])==null?void 0:T.split(":"))==null?void 0:N.slice(0,2))==null?void 0:R.join(":")),1)]}),_:1}),_(s,{field:"status.timestamp",class:"px-1 py-0",header:"Hora",headerStyle:"width:50rem; min-width:max-content "},{body:p(t=>{var d,y,T,N;return[u(l((N=(T=(y=(d=t.data.latest_status_timestamp)==null?void 0:d.split("T")[1])==null?void 0:y.split(":"))==null?void 0:T.slice(0,2))==null?void 0:N.join(":")),1)]}),_:1}),_(s,{field:"status.timestamp",class:"px-1 py-0",header:"Domicilio",headerStyle:"width:6rem; min-width:max-content"},{body:p(t=>[u(" $"+l(t.data.delivery_price),1)]),_:1}),_(s,{field:"status.timestamp",class:"px-1 py-0",header:"Metodo de pago",headerStyle:"width:10rem; min-width:12rem"},{body:p(t=>[u(" $"+l(t.data.payment_method),1)]),_:1}),_(s,{field:"status.timestamp",class:"px-1 py-0",header:"Nombre del usuario",headerStyle:"width:12rem; min-width:13rem "},{body:p(t=>[u(l(t.data.user_name.slice(0,40)),1)]),_:1}),_(s,{field:"status.timestamp",class:"px-1 py-0",header:"Telefono del usuario",headerStyle:"width:12rem; min-width:11rem "},{body:p(t=>[u(l(t.data.user_phone),1)]),_:1}),_(s,{field:"status.timestamp",class:"px-1 py-0",header:"Direccion del usuario",headerStyle:"width:12rem; min-width:30rem "},{body:p(t=>[u(l(t.data.user_address),1)]),_:1}),o(h).order_status=="cancelada"?(n(),M(s,{key:0,class:"px-1 py-0",headerStyle:"width:20rem; min-width:8rem; ",field:"status.reazon",header:"Responsable"},{body:p(t=>{var d;return[e("span",ut,l((d=t.data.responsible)==null?void 0:d.toLowerCase())+".",1)]}),_:1})):m("",!0),o(h).order_status=="cancelada"?(n(),M(s,{key:1,class:"px-1 py-0",headerStyle:"width:30rem;min-width:40rem; ",field:"status.reazon",header:"Motivo"},{body:p(t=>{var d;return[e("span",yt,l((d=t.data.reason)==null?void 0:d.toLowerCase())+".",1)]}),_:1})):m("",!0),_(s,{header:"Status",class:"px-1 py-0"},{body:p(t=>{var d;return[_(k,{value:t.data.current_status,severity:F((d=t.data)==null?void 0:d.current_status)},null,8,["value","severity"])]}),_:1}),_(s,{class:"px-1 py-0",header:"",frozen:"",alignFrozen:"right",headerStyle:"width:0.5rem; max-width:0.5rem "},{body:p(t=>[_(x,{style:{width:"min-content"},onClick:d=>o(h).setVisibleOrder(!0,t.data),text:""},{default:p(()=>[e("i",{class:$(["text-2xl p-0",o(z).EYE])},null,2)]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["value","filters"]),_(rt)],64)}}},wt=G(ft,[["__scopeId","data-v-06522dc0"]]);export{wt as default};
