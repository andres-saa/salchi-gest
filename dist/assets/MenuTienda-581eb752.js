import{j as Q,U as W,_ as j,r as _,h as O,a as u,o as b,c as w,d as i,b as o,F as B,e as R,n as A,t as D,i as U,v as X,k as F,f as q,w as f,u as c,q as z,B as L,C as N}from"./index-b678ff89.js";import{u as G}from"./site-fce0fd8d.js";import{s as Y}from"./siteService-beee076c.js";import{u as M}from"./productStore-a6a4b667.js";import{a as k}from"./aditionalService-3172288d.js";import{f as Z}from"./formatoPesos-2a38d2e7.js";import{p as H}from"./ProductService-ddf77e80.js";G();const ee={async getCategories(){try{const a=await Q.get(`${W}/categories/1`);return a.status===200?(a.data.push({category_id:1e3,category_name:"ADICIONALES",site_id:1e3}),a.data):(console.error("An error occurred while fetching the ingredients:",a.status),null)}catch(a){return console.error("An error occurred while fetching the ingredients:",a),null}}};const te={style:{position:"sticky",top:"3rem","z-index":"99","background-color":"white"},class:"shadow-3 d-flex p lg:justify-content-center align-items-center mb-5 p-0 md:p-0 m-0"},oe={class:"barra align-items-center p-0 md:p-1",style:{"overflow-x":"auto",display:"flex","background-color":"rgba(255, 255, 255, 0.913)"}},ae=["onClick"],se={class:"text-lg",style:{"min-width":"max-content"}},ne={__name:"BarraCategorias",setup(V){const a=_([]),t=(p,l)=>{l>=1e3?U.push("/tienda-menu/productos/adicionales"):U.push({name:"sesion",params:{menu_name:p,category_id:l}})};O(async()=>{a.value=await ee.getCategories()});const s=p=>X().params.category_id==p.category_id;return(p,l)=>{const m=u("Button");return b(),w("div",te,[i(m,{class:"px-0",style:{position:"absolute",border:"none","background-color":"white",color:"black",left:"0rem","z-index":"99",height:"100%",width:"1.7rem","border-radius":"0"},severity:"help",icon:"pi pi-angle-left text-2xl"}),i(m,{class:"px-0",style:{position:"absolute",border:"none","background-color":"white",color:"black",right:"0rem","z-index":"99",height:"100%",width:"1.7rem","border-radius":"none"},severity:"help",icon:"pi pi-angle-right text-2xl"}),o("div",oe,[(b(!0),w(B,null,R(a.value,d=>(b(),w("div",{key:d.id,class:"p-1"},[o("button",{onClick:x=>t(d.category_name,d.category_id),class:A([s(d)?"selected menu-button":"menu-button","p-2 text-lg titulo"]),style:{"font-weight":"400","text-transform":"uppercase","min-width":"max-content"}},[o("span",se,D(d.category_name),1)],10,ae)]))),128))])])}}},re=j(ne,[["__scopeId","data-v-9df991f2"]]),ie={style:{display:"flex","flex-direction":"column",gap:"1rem"}},le=o("span",null,"Nombre:",-1),ce=o("span",null,"descripcion:",-1),de=o("span",null,"Precio:",-1),ue={class:"text-center text-2xl py-4",style:{"font-weight":"bold","text-transform":"capitalize",display:"flex","align-items":"center","justify-content":"center",gap:"1rem"}},pe={style:{"text-transform":"uppercase"}},me={style:{"font-weight":"bold"}},_e={class:"col-12 px-0 pb-0"},ge={__name:"dialogEditProduct",setup(V){const a=_([]),t=M(),s=_([]),p=()=>{!s.value||s.value.length===0||Object.entries(s.value).forEach(([n,e])=>{e.forEach(r=>{const g=a.value.some(E=>E.items.some(T=>T.aditional_item_name.toLowerCase()===r.item_name.toLowerCase()&&T.aditional_item_price===r.item_price&&T.aditional_item_type_name===r.type_name));r.status=g})})},l=n=>s.value[n].every(e=>e.status),m=(n,e)=>{s.value[n].forEach(r=>{r.status=e,d(r.item_id,n,e)})},d=(n,e,r)=>{const g=s.value[e].findIndex(E=>E.item_id===n);g!==-1&&(s.value[e][g].status=r)};F(()=>t.currentProductToEdit.id,async()=>{a.value=await k.getAditional(t.currentProductToEdit.id),s.value=await k.getAllAditionsRegistered(),p()});const x=_([]),P=()=>{let n=[];for(const e in s.value)s.value.hasOwnProperty(e)&&s.value[e].forEach(r=>{r.status&&n.push(r.item_id)});x.value=n,y()},y=()=>{const n={product_id:t.currentProductToEdit.id,name:t.currentProductToEdit.product_name,price:t.currentProductToEdit.price,description:t.currentProductToEdit.product_description,category_id:t.currentProductToEdit.category_id,status:!0},e=x.value;H.updateProductInstance(n,e)};return(n,e)=>{const r=u("Button"),g=u("InputText"),E=u("Textarea"),T=u("InputNumber"),I=u("InputSwitch"),S=u("Column"),J=u("DataTable"),K=u("Dialog");return b(),q(K,{closeOnEscape:"",visible:c(t).visibles.dialogEditProduct,"onUpdate:visible":e[4]||(e[4]=v=>c(t).visibles.dialogEditProduct=v),modal:"",style:{width:"40rem"}},{footer:f(()=>[o("div",_e,[i(r,{class:"",onClick:P,severity:"success",label:"Guardar"})])]),default:f(()=>[i(r,{onClick:e[0]||(e[0]=v=>c(t).visibles.dialogEditProduct=!1),severity:"danger",style:{position:"absolute",right:"-1rem",top:"-1rem"},rounded:"",icon:"pi pi-times"}),o("div",ie,[o("div",null,[le,i(g,{modelValue:c(t).currentProductToEdit.product_name,"onUpdate:modelValue":e[1]||(e[1]=v=>c(t).currentProductToEdit.product_name=v),style:{width:"100%"}},null,8,["modelValue"])]),o("div",null,[ce,i(E,{modelValue:c(t).currentProductToEdit.product_description,"onUpdate:modelValue":e[2]||(e[2]=v=>c(t).currentProductToEdit.product_description=v),rows:"3",style:{width:"100%",resize:"none"}},null,8,["modelValue"])]),o("div",null,[de,i(T,{modelValue:c(t).currentProductToEdit.price,"onUpdate:modelValue":e[3]||(e[3]=v=>c(t).currentProductToEdit.price=v),prefix:"$",maxFractionDigits:"0",rows:"3",style:{width:"100%",resize:"none"}},null,8,["modelValue"])])]),(b(!0),w(B,null,R(s.value,(v,C)=>(b(),w("div",{class:"m-auto col-12 p-0",style:{"max-width":"600px"},key:C},[o("p",ue,[o("span",null,D(C),1),i(I,{modelValue:l(C),"onUpdate:modelValue":h=>m(C,h)},null,8,["modelValue","onUpdate:modelValue"])]),i(J,{stripedRows:"",value:v,class:"p-0"},{default:f(()=>[i(S,{style:{"text-transform":"capitalize"},class:"p-0",field:"aditional_item_name",header:"Nombre"},{body:f(h=>[o("span",pe,D(h.data.item_name),1)]),_:1}),i(S,{class:"p-0",field:"aditional_item_price",header:"Precio"},{body:f(h=>[o("span",me,D(c(Z)(h.data.item_price)),1)]),_:1}),i(S,{class:"py-0 pl-4 p-0",header:"Estado",headerStyle:"width:1rem"},{body:f(h=>[i(I,{modelValue:h.data.status,"onUpdate:modelValue":[$=>h.data.status=$,$=>d(h.data.item_id,C,$)]},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1032,["value"])]))),128))]),_:1},8,["visible"])}}};const ve={class:"py-3",style:{overflow:"hidden"}},he=["src"],ye={class:"col-12 p-0"},fe={__name:"dialogDeleteProduct",setup(V){const a=_(!1),t=()=>{a.value=!0,s.value=!s.value},s=_(!1),p=_([]),l=M(),m=_([]);_(l.currentProductToDelete);const d=()=>{!m.value||m.value.length===0||Object.entries(m.value).forEach(([P,y])=>{y.forEach(n=>{const e=p.value.some(r=>r.items.some(g=>g.aditional_item_name.toLowerCase()===n.item_name.toLowerCase()&&g.aditional_item_price===n.item_price&&g.aditional_item_type_name===n.type_name));n.status=e})})},x=async P=>{await H.deleteProduct(P),l.visibles.dialogDeleteProduct=!1,location.reload()};return F(()=>l.currentProductToEdit.id,async()=>{p.value=await k.getAditional(l.currentProductToEdit.id),m.value=await k.getAllAditionsRegistered(),d()}),_([]),(P,y)=>{const n=u("Button"),e=u("Dialog");return b(),q(e,{close:a.value=!1,closeOnEscape:"",visible:c(l).visibles.dialogDeleteProduct,"onUpdate:visible":y[1]||(y[1]=r=>c(l).visibles.dialogDeleteProduct=r),modal:"",style:{width:"20rem"}},{footer:f(()=>[o("div",ye,[i(n,{style:{width:"100%"},onClick:y[0]||(y[0]=r=>x(c(l).currentProductToDelete.product_id)),severity:"danger",label:"Eliminar producto"})])]),default:f(()=>[z(" Esta seguro de eliminar "),o("b",null,D(c(l).currentProductToDelete.product_name),1),z(" ? "),o("div",ve,[L(o("img",{onLoad:t,class:A([a.value&&s.value?"cargado1":a.value&&!s.value?"cargado2":"nada",""]),style:{width:"100%",height:"100%","background-color":"rgb(255, 255, 255)","object-fit":"contain","border-radius":"0.2rem"},src:`https://backend.salchimonster.com/read-product-image/300/${c(l).currentProductToDelete.product_name}`,alt:""},null,42,he),[[N,a.value]]),L(o("div",{onLoad:t,class:A([a.value?"cargado":"sin-cargar","p-0"]),style:{width:"100%","aspect-ratio":"1 / 1","background-color":"rgb(255, 255, 255)",height:"100%","object-fit":"contain","border-radius":"0.2rem"},alt:""},null,34),[[N,!a.value]])])]),_:1},8,["close","visible"])}}},be=j(fe,[["__scopeId","data-v-2893cd90"]]),we={style:{"max-width":"1024px","border-radius":"1rem"},class:"m-auto m-0 p-0 mt-8"},xe={class:"mx-3 my-4 mx-auto px-4",style:{"min-width":"max-content","max-width":"1024px",display:"flex","align-items":"center"}},Pe=o("span",{class:"mr-4"},[o("b",null,"SEDE")],-1),$e={__name:"MenuTienda",setup(V){const a=G(),t=_([]);return O(async()=>{t.value=await Y.getSites()}),(s,p)=>{const l=u("Dropdown"),m=u("router-view");return b(),w(B,null,[i(re,{class:""}),o("div",we,[o("div",xe,[Pe,i(l,{modelValue:c(a).site,"onUpdate:modelValue":p[0]||(p[0]=d=>c(a).site=d),options:t.value.filter(d=>d.show_on_web),optionLabel:"site_name",class:"",style:{width:"100%"}},null,8,["modelValue","options"])]),i(m,{class:""})]),i(ge,{class:"m-3"}),i(be)],64)}}};export{$e as default};
