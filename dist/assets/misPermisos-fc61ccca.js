import{_ as X,f as d,u as Z,O as ee,g as j,h as te,r as _,o as $,c as O,a as e,d as n,n as L,w as i,v as se,F as oe,Q as ae,U as S,bY as U,k as c,t as l,q as F,l as le,P as ne,p as ie,e as re}from"./index-e37a2320.js";const o=k=>(ie("data-v-49906248"),k=k(),re(),k),de={class:"col-12 m-auto p-0"},ce={key:0,class:"col-12",style:{display:"flex","flex-direction":"column","pointer-events":"none","align-items":"center","justify-content":"center",position:"fixed","z-index":"1000",left:"0",top:"0",height:"100%","background-color":"rgba(0, 0, 0, 0.5)"}},ue=o(()=>e("p",{class:"text-3xl",style:{"font-weight":"bold",color:"white","text-shadow":"0 0 10px rgba(0, 0, 0, 0.551)"}},"CARGANDO PERMISOS",-1)),pe={style:{display:"flex"}},me={class:"flex flex-column md:flex-row md:justify-content-between md:align-items-center"},he=o(()=>e("p",{class:"m-0 text-2xl my-4"},"Mis permisos ",-1)),_e={class:"block mt-2 md:mt-0 p-input-icon-left"},fe=o(()=>e("i",{class:"pi pi-search"},null,-1)),ve=o(()=>e("span",{class:"p-column-title"},"Code",-1)),ye=o(()=>e("span",{class:"p-column-title"},"Code",-1)),be=o(()=>e("span",{class:"p-column-title"},"Code",-1)),ge=o(()=>e("span",{class:"p-column-title"},"Code",-1)),we=o(()=>e("span",{class:"p-column-title"},"Code",-1)),xe=o(()=>e("span",{class:"p-column-title"},"Code",-1)),Se=o(()=>e("span",{class:"p-column-title"},"Code",-1)),ke={style:{display:"flex",gap:"1rem","justify-content":"center"}},Pe=o(()=>e("div",null,null,-1)),ze={class:"a4-size p-0 lg:p-6 mi-clase mt-4"},Ce=o(()=>e("img",{class:"m-auto",src:"https://salchimonster.com/images/logo.png",style:{width:"10%"},alt:""},null,-1)),Ee={style:{"font-size":"11pt","font-weight":"normal",color:"black","font-family":"Arial, Helvetica, sans-serif"}},Ie=o(()=>e("h6",{class:"text-center",style:{"font-size":"11pt","font-weight":"bold",color:"black","font-family":"Arial, Helvetica, sans-serif"}}," INVERSIONES SALCHIMONSTER SAS ",-1)),Ne=o(()=>e("h6",{style:{"font-size":"11pt","font-weight":"normal",color:"black","font-family":"Arial, Helvetica, sans-serif"},class:"text-center"},"NIT: 901.420.874-0",-1)),Te={class:"text-center py-4",style:{"font-weight":"bold","text-transform":"uppercase"}},Re=o(()=>e("span",{style:{"text-transform":"capitalize"}},null,-1)),De={class:"text-l",style:{"font-size":"11pt","font-weight":"normal",color:"black","font-family":"Arial, Helvetica, sans-serif"}},je={class:"p-0 m-0"},$e=o(()=>e("span",{style:{"font-weight":"bold"}},"Fecha de la solicitud: ",-1)),Oe={style:{"border-bottom":"1px solid","padding-bottom":"0","padding-right":"2rem"}},Ue={class:"p-0 m-0",style:{width:"100%"}},Ae=o(()=>e("span",{style:{"font-weight":"bold"}},"Nombre: ",-1)),Me={style:{width:"100%","border-bottom":"1px solid","padding-bottom":"0","padding-right":"3rem"}},Le={class:"p-0 m-0"},Fe=o(()=>e("span",{style:{"font-weight":"bold"}},"Cargo: ",-1)),Ve={style:{"border-bottom":"1px solid","padding-bottom":"0","padding-right":"2rem"}},Be={class:"p-0 m-0"},He=o(()=>e("span",{style:{"font-weight":"bold"}},"IdentificaciÃ³n No: ",-1)),qe={style:{"border-bottom":"1px solid","padding-bottom":"0","padding-right":"2rem"}},Je={style:{display:"flex","justify-content":"start",gap:"2rem",border:"1px solid","margin-top":"2rem"},class:"p-2"},Ye={style:{display:"flex","flex-direction":"column"},class:""},Ge=o(()=>e("div",{style:{"font-weight":"bold"}}," Desde ",-1)),Ke={style:{display:"flex","flex-direction":"column"}},Qe=o(()=>e("div",{style:{"font-weight":"bold"}}," Hasta ",-1)),We={style:{display:"flex","justify-content":"start",gap:"2rem",border:"1px solid","margin-top":"2rem"},class:"p-2"},Xe={style:{display:"flex","flex-direction":"column"},class:""},Ze={style:{display:"flex","flex-direction":"column"}},et=o(()=>e("div",{style:{"font-weight":"bold"}}," Observaciones ",-1)),tt={style:{display:"flex","justify-content":"start",gap:"2rem",border:"1px solid","margin-top":"2rem"},class:"p-2"},st={style:{display:"flex","flex-direction":"column"},class:""},ot={style:{display:"flex","flex-direction":"column"}},at=o(()=>e("div",{class:"mb-2",style:{"font-weight":"bold"}}," Estado actual ",-1)),lt={class:"mb-1"},nt=o(()=>e("span",{style:{"font-weight":"bold"}},"Resumen:",-1)),it={class:"mb-1"},rt=o(()=>e("span",{style:{"font-weight":"bold"}},"Fecha:",-1)),dt={class:"mb-1"},ct=o(()=>e("span",{style:{"font-weight":"bold"}}," Responsable Id:",-1)),ut={key:0},pt=o(()=>e("span",{style:{"font-weight":"bold"}},"Motivos del rechazo:",-1)),mt=o(()=>e("span",{class:"p-input-icon-left",style:{width:"100%"}},[e("i",{class:"pi pi-pencil"})],-1)),ht=o(()=>e("span",{class:"text-center col-12 p-0"},"Si, continuar",-1)),_t=o(()=>e("span",{class:"text-center col-12 p-0"},"No, talvez luego",-1)),ft=o(()=>e("h6",null,"Razones para rechazar este permiso ",-1)),vt=o(()=>e("span",{class:"p-input-icon-left",style:{width:"100%"}},[e("i",{class:"pi pi-pencil"})],-1)),yt=o(()=>e("span",{class:"text-center col-12 p-0"},"Si, continuar",-1)),bt=o(()=>e("span",{class:"text-center col-12 p-0"},"No, talvez luego",-1)),gt={__name:"misPermisos",setup(k){const V=d(null),f=Z(),B=d(f.params.status),v=d(f.params.tipo),b=d(f.params.status),C=d(""),H=()=>{P.value={global:{value:null,matchMode:ae.CONTAINS}}},g=d(!1),E=d("2029-12-21 16:19"),u=d(),P=d(null),m=d([]),y=d({}),I=d(!1),N=d(!1),A=d([]),M=d(!0);ee(()=>{H()}),j(()=>f.params.status,s=>{B.value=s}),j(()=>f.params.tipo,s=>{v.value=s,console.log(v),w(s,b.value).then(t=>m.value=t)}),j(()=>f.params.status,s=>{b.value=s,w(v.value).then(t=>m.value=t)});const q=async s=>{g.value=!0,u.value=s,Q(s.employer_id)};function J(s){s.status={status:"aprobado",timestamp:E.value,responsable:U()},s.history.push({...s.status}),fetch(`${S}/permission/${s.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}).then(t=>{t.json(),g.value=!1,I.value=!1,w(v.value,b.value).then(r=>m.value=r)}).then(t=>console.log("Permiso aprobado:",t)).catch(t=>console.error("Error:",t))}function Y(s){s.status={status:"rechazado",timestamp:E.value,razones:C.value,responsable:U()},s.history.push({...s.status}),fetch(`${S}/permission/${s.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}).then(t=>{t.json(),N.value=!1,g.value=!1,w(v.value,b.value).then(r=>m.value=r)}).then(t=>console.log("Permiso rechazado:",t)).catch(t=>console.error("Error:",t))}function z(s){var t=new Date(s),r={day:"numeric",month:"long",year:"numeric"};return t.toLocaleDateString("es-ES",r)}const G=async()=>{fetch(`${S}/server_time`).then(s=>{if(!s.ok)throw new Error("Network response was not ok");return s.json()}).then(s=>{console.log("Employer data:",s),E.value=s}).catch(s=>{console.error("There has been a problem with your fetch operation:",s),mensaje.value="error"})};function K(s){s||(s="2029-12-21 16:19");const t=["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"];let[r,T]=s.split(" "),[p,h,R]=r.split("-").map(Number),x=t[h-1];return`${R} de ${x} de ${p}`}const Q=async s=>{fetch(`${S}/employer/${s}`).then(t=>{if(!t.ok)throw new Error("Network response was not ok");return t.json()}).then(t=>{console.log("Employer data:",t),y.value=t}).catch(t=>{console.error("There has been a problem with your fetch operation:",t)})};async function w(){const s=await U(),t=`${S}/permissions/user/${s}  `;try{const r=await fetch(t);if(!r.ok)throw new Error(`Error al obtener los permisos: ${r.status}`);return M.value=!1,await r.json()}catch(r){throw console.error("Error en getPermissions:",r),[r]}}return te(()=>{w(v.value,b.value).then(s=>m.value=s).catch(()=>m.value=[]),G()}),(s,t)=>{const r=_("ProgressSpinner"),T=_("InputText"),p=_("Column"),h=_("Button"),R=_("DataTable"),x=_("Dialog"),W=_("Textarea");return $(),O(oe,null,[e("div",de,[M.value?($(),O("div",ce,[ue,e("div",pe,[n(r,{style:{width:"100px",height:"100px"},strokeWidth:"4",fill:"var(--surface-ground)",animationDuration:".5s","aria-label":"Custom ProgressSpinner"})])])):L("",!0),n(R,{ref_key:"dt",ref:V,value:m.value,selection:A.value,"onUpdate:selection":t[1]||(t[1]=a=>A.value=a),dataKey:"id",paginator:!0,rows:10,filters:P.value,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25,100],currentPageReportTemplate:"Mostrando {first} a {last} de {totalRecords} permisoes",responsiveLayout:"scroll",scrollable:"","scroll-height":"62vh"},{header:i(()=>[e("div",me,[he,e("span",_e,[fe,n(T,{class:"",modelValue:P.value.global.value,"onUpdate:modelValue":t[0]||(t[0]=a=>P.value.global.value=a),placeholder:"Buscar..."},null,8,["modelValue"])])])]),default:i(()=>[n(p,{class:"p-2",selectionMode:"multiple",headerStyle:"width: 3rem; ",frozen:""}),n(p,{class:"p-2",field:"id",header:"Id",sortable:!0,headerStyle:"width:3rem; min-width:min-content; "},{body:i(a=>[ve,c(l(a.data.id),1)]),_:1}),n(p,{class:"p-2",field:"tipo",header:"Tipo",sortable:!0,headerStyle:"width:10rem; min-width:min-content; "},{body:i(a=>[ye,c(l(a.data.tipo),1)]),_:1}),n(p,{class:"p-2",field:"employer_id",header:" empleado",sortable:!0,headerStyle:"width:10rem; min-width:max-content; "},{body:i(a=>[be,c(l(a.data.employer_id),1)]),_:1}),n(p,{class:"p-2",field:"start_date",header:"fecha de inicio",sortable:!0,headerStyle:"width:15rem; min-width:10rem; "},{body:i(a=>[ge,c(l(a.data.start_date),1)]),_:1}),n(p,{class:"p-2",field:"end_date",header:"fecha finalizacion",sortable:!0,headerStyle:"width:15rem; min-width:max-content; "},{body:i(a=>[we,c(l(a.data.end_date),1)]),_:1}),n(p,{class:"p-2",field:"observations",header:"Observaciones del empleado",sortable:!0,headerStyle:"width:30rem; min-width:max-content; "},{body:i(a=>[xe,c(l(a.data.observations),1)]),_:1}),n(p,{class:"p-2",field:"status.status",header:"Estado",sortable:!0,headerStyle:"width:10rem; min-width:max-content; "},{body:i(a=>[Se,e("div",{class:F(["p-2",a.data.status.status]),style:{"border-radius":"10rem"}},l(a.data.status.status),3)]),_:1}),n(p,{class:"p-2",field:"location",header:"Acciones",sortable:!0,frozen:"",alignFrozen:"right",headerStyle:"width:1rem; min-width:min-content; "},{body:i(a=>[e("div",ke,[n(h,{class:"p-0",outlined:"",severity:"info",label:"Small",onClick:D=>q(a.data),text:""},{default:i(()=>[e("i",{class:F(["text-xl",le(ne).EYE]),style:{"font-weight":"bold"}},null,2)]),_:2},1032,["onClick"])])]),_:1})]),_:1},8,["value","selection","filters"]),Pe]),n(x,{style:se([{border:"none","box-shadow":"none"},{width:"700px"}]),visible:g.value,"onUpdate:visible":t[2]||(t[2]=a=>g.value=a),header:"Revizar permiso",modal:!0,class:"p-fluid m-2 pt-8"},{default:i(()=>{var a,D;return[e("div",ze,[Ce,e("h6",Ee,l(K(u.value.status.timestamp)),1),Ie,Ne,e("h6",Te,[c("FORMATO SOLICITUD DE PERMISO "+l(u.value.tipo)+" ",1),Re]),e("h5",De,[e("p",je,[$e,c(),e("span",Oe,l(z(u.value.start_date)),1)]),e("p",Ue,[Ae,c(),e("span",Me,l(y.value.name),1)]),e("p",Le,[Fe,c(),e("span",Ve,l(y.value.position),1)]),e("p",Be,[He,c(),e("span",qe,l(y.value.dni),1)]),e("div",Je,[e("div",Ye,[Ge,e("div",null,l(z(u.value.start_date)),1)]),e("div",Ke,[Qe,e("div",null,l(z(u.value.end_date)),1)])]),e("div",We,[e("div",Xe,[e("div",Ze,[et,e("div",null,l(u.value.observations),1)])])]),e("div",tt,[e("div",st,[e("div",ot,[at,e("div",lt,[nt,c(" "+l(u.value.status.status),1)]),e("div",it,[rt,c(" "+l(z(u.value.status.timestamp)),1)]),e("div",dt,[ct,c(" "+l((a=u.value.status)==null?void 0:a.responsable),1)]),u.value.status.status=="rechazado"?($(),O("div",ut,[pt,c(" "+l((D=u.value.status)==null?void 0:D.razones),1)])):L("",!0)])])])])])]}),_:1},8,["visible"]),n(x,{header:"Confirmacion",visible:I.value,"onUpdate:visible":t[4]||(t[4]=a=>I.value=a),style:{width:"350px"},modal:!0},{default:i(()=>[e("h5",null,"Seguro que desea aceptar el permiso de "+l(y.value.name),1),mt,n(h,{onClick:t[3]||(t[3]=a=>J(u.value)),style:{margin:"auto","background-color":"rgb(105, 255, 157)",color:"black",border:"none"},class:"m-auto my-4 text-center"},{default:i(()=>[ht]),_:1}),n(h,{style:{"background-color":"rgb(255, 156, 156)",color:"rgba(0, 0, 0, 0.864)",border:"none"},class:"m-auto my-4 ml-4 text-center"},{default:i(()=>[_t]),_:1})]),_:1},8,["visible"]),n(x,{header:"Confirmacion",visible:N.value,"onUpdate:visible":t[7]||(t[7]=a=>N.value=a),style:{width:"350px"},modal:!0},{default:i(()=>[e("h5",null,"Seguro que desea Rechazar el permiso de "+l(y.value.name)+"?",1),ft,n(W,{modelValue:C.value,"onUpdate:modelValue":t[5]||(t[5]=a=>C.value=a),style:{"max-width":"100%","min-width":"100%","min-height":"100px"},class:"col-12"},null,8,["modelValue"]),vt,n(h,{onClick:t[6]||(t[6]=a=>Y(u.value)),style:{margin:"auto","background-color":"rgb(105, 255, 157)",color:"black",border:"none"},class:"m-auto my-4 text-center"},{default:i(()=>[yt]),_:1}),n(h,{style:{"background-color":"rgb(255, 156, 156)",color:"rgba(0, 0, 0, 0.864)",border:"none"},class:"m-auto my-4 ml-4 text-center"},{default:i(()=>[bt]),_:1})]),_:1},8,["visible"])],64)}}},xt=X(gt,[["__scopeId","data-v-49906248"]]);export{xt as default};
