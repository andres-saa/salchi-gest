import{_ as ke,af as ie,h as m,i as q,j,U as R,J as we,g as x,o as c,c as v,f as a,e as u,a as e,L as H,t as l,u as o,aj as Q,q as b,d as I,k as h,b as $e,F as W,r as re,p as Ce,m as Pe,G as De,l as Ve,s as Te,D as xe,C as ze,x as Se,au as F,n as Oe,E as ne}from"./index-90cf6a8a.js";/* empty css                                                                  */import"./index-558f534d.js";import{f as U}from"./formatoPesos-2293ab52.js";import{e as Re}from"./formatDate-262296cf.js";import"./_commonjsHelpers-23102255.js";const d=$=>(Ce("data-v-007685e8"),$=$(),Pe(),$),Me=d(()=>e("h3",null,[e("b",null,"Cambiar Valor del Domicilio")],-1)),Le=d(()=>e("span",null,"Valor actual del domicilio",-1)),Ee=d(()=>e("span",null,"Nuevo valor del domicilio",-1)),Ne=d(()=>e("h3",null,[e("b",null,"Cancelar Orden")],-1)),Ue=d(()=>e("span",{for:"responsible"},"Responsable",-1)),je=d(()=>e("span",{for:"reason"},"Razón",-1)),Ie=d(()=>e("h3",null,[e("b",null,"Cancelar Orden")],-1)),Ae=d(()=>e("span",{class:"advert",style:{"text-transform":"lowercase",color:"red","font-weight":"bold"}}," Desde el 16 de mayo de 2024, la cancelación de órdenes requerirá autorización.",-1)),Be=d(()=>e("span",{for:"responsible"},"Responsable",-1)),Fe=d(()=>e("span",{for:"reason"},"Razón",-1)),qe={style:{"text-transform":"capitalize"}},He={class:"col-12 mb-0 pb-0 px-0 m-0",style:{display:"flex","justify-content":"space-between",gap:"1rem"}},Ge={class:""},Xe={id:"factura",style:{width:"100%"}},Je=d(()=>e("i",{class:"pi pi-whatsapp mr-2"},null,-1)),Ye=d(()=>e("br",null,null,-1)),Ze={class:"",style:{width:"auto"}},Ke={class:"",id:"id",style:{"font-weight":"bold","min-width":"100%",width:"max-content","text-align":"center",color:"black",margin:"0rem"}},Qe={class:"",id:"id",style:{"font-weight":"bold","min-width":"100%",width:"max-content","text-align":"center",color:"black",margin:"0rem"}},We={style:{padding:"0",color:"black","text-align":"center",margin:"auto","margin-bottom":"1rem",width:"max-content","min-width":"max-content",display:"flex","justify-content":"center","flex-direction":"column"}},et=d(()=>e("div",{class:"",style:{"font-weight":"bold",color:"white",margin:"0","background-color":"black","align-items":"center",display:"grid","grid-template-columns":"auto auto"}},[e("div",{class:"px-2",style:{width:"100%"}},[e("b",null," productos")]),e("div",{class:"px-2"},[e("p",{style:{"text-align":"end","font-weight":"bold"}},[e("b",null," total ")])])],-1)),tt={style:{display:"grid",gap:"0 1rem","grid-template-columns":"auto auto"}},st={key:0,class:"p-0 m-0"},ot=d(()=>e("br",null,null,-1)),lt={key:1,class:"p-0 m-0"},at=d(()=>e("br",null,null,-1)),rt={key:0,style:{"text-align":"end",color:"black"}},nt={key:1,style:{"text-align":"end",color:"black"}},it={key:0,class:"p-0 m-0"},dt=d(()=>e("b",null,"COMBO INCLUYE",-1)),ct=[dt],ut={class:"p-0 m-0 ml-5",style:{}},pt={style:{display:"flex",width:"","justify-content":"space-between"},class:"p-0 m-0"},mt={class:"p-0 m-0",style:{}},_t={class:"p-0 m-0",style:{"text-align":"end"}},vt=d(()=>e("div",{style:{"background-color":"rgba(0, 0, 0, 0.286)",height:"1px"}},null,-1)),bt={class:"",style:{display:"grid","margin-top":"1rem","grid-template-columns":"auto auto"}},yt=d(()=>e("div",{class:""},[e("span",{style:{"font-weight":"bold"}},[e("b",null,"Subtotal")])],-1)),ht={class:""},gt={style:{"text-align":"end","font-weight":"bold",color:"black"}},ft=d(()=>e("div",{class:""},[e("span",{class:"m-0",style:{"font-weight":"bold"}},[e("b",null,"Domicilio")])],-1)),wt={class:""},xt={class:"m-0 p-0",style:{"text-align":"end","font-weight":"bold",color:"black"}},Ot=d(()=>e("div",{class:""},[e("span",{style:{"font-weight":"bold",color:"black"}},[e("b",null,"Total")])],-1)),kt={class:""},Ct={class:"m-0 p-0",style:{"text-align":"end",color:"black","font-weight":"bold"}},Pt=d(()=>e("div",{class:""},null,-1)),$t=d(()=>e("p",{class:"px-2",style:{"font-weight":"bold","background-color":"black",color:"white",padding:"0",margin:"0","margin-top":"0.5rem"}},[e("b",null,"Notas")],-1)),Dt={class:"notas p-2 m-0",style:{border:"1px solid",margin:"0",color:"black",padding:"0.5rem"}},Vt=d(()=>e("p",{class:"px-2",style:{"background-color":"black","font-weight":"bold","margin-top":"1rem",color:"white"}},[e("b",null,"cliente")],-1)),Tt={style:{display:"grid",gap:"1rem 2rem","grid-template-columns":"auto auto","align-items":"start"}},zt=d(()=>e("div",{class:"",style:{}},[e("span",null,[e("b",null,"Nombre")])],-1)),St={class:""},Rt={style:{"text-align":"start",color:"black"}},Mt={key:0,class:"",style:{}},Lt=d(()=>e("span",null,[e("b",null,"Cedula / Nit")],-1)),Et=[Lt],Nt={key:1,class:""},Ut={style:{"text-align":"start",color:"black"}},jt=d(()=>e("div",{class:"",style:{}},[e("span",null,[e("b",null,"Metodo de entrega")])],-1)),It={class:""},At={style:{"text-align":"start",color:"black"}},Bt={key:2,class:"",style:{}},Ft=d(()=>e("span",null,[e("b",null,"Fecha de entrega")],-1)),qt=[Ft],Ht={key:3,class:""},Gt={style:{"text-align":"start",color:"black"}},Xt={key:4,class:"",style:{}},Jt=d(()=>e("span",null,[e("b",null,"Placa del vehiculo")],-1)),Yt=[Jt],Zt={key:5,class:""},Kt={style:{"text-align":"start",color:"black"}},Qt=d(()=>e("div",{style:{}},[e("span",null,[e("b",null,"telefono")])],-1)),Wt={style:{"text-align":"start",color:"black"}},es={key:6,style:{}},ts=d(()=>e("span",null,[e("b",null,"Correo")],-1)),ss=[ts],os={key:7},ls={style:{"text-align":"start",color:"black"}},as={key:8,style:{}},rs=d(()=>e("span",null,[e("b",null,"direccion ")],-1)),ns=[rs],is={key:9,style:{}},ds={style:{"text-align":"start",color:"black"}},cs=d(()=>e("div",null,[e("span",null,[e("b",null,"metodo de pago")])],-1)),us={style:{"text-align":"start",color:"black"}},ps={class:"col-12 mb-0 pb-0 px-0 m-0",style:{display:"flex","justify-content":"space-between",gap:"1rem"}},ms={class:"mt-4",style:{display:"flex","align-items":"center",gap:"1rem"}},_s=d(()=>e("h3",null,[e("b",null,"Cambiar Método de Pago")],-1)),vs=d(()=>e("span",{for:"paymentMethod"},"Método de Pago actual",-1)),bs={for:"paymentMethod"},ys=d(()=>e("span",{for:"paymentMethod"},"Nuevo método de Pago",-1)),hs={__name:"DialogoPedidoDistri",setup($){const s=ie(),f=m(!1),M=m(s.currentOrder.delivery_price),X=async()=>{const p=M.value;await j.put(`${R}/changue-delivery/${s.currentOrder.order_id}`,{price:p}),f.value=!1,s.numberOders==1?s.numberOders=2:s.numberOders=1,s.visibles.currentOrder=!1},A=m(!1),B=m(null),J=m([]);q(async()=>{try{const p=await j.get(`${R}/payment_methods`);J.value=p}catch(p){console.error("Error al obtener métodos de pago:",p)}s.currentOrder.value=s.currentOrder,Z.value=await j.get(`${R}/sites`)});const ee=async()=>{if(B.value)try{await j.put(`${R}/change-method/${s.currentOrder.order_id}/${B.value}`,`Cambiando método de pago para la orden ${s.currentOrder.order_id}`),A.value=!1,s.visibles.currentOrder=!1,console.log("Método de pago cambiado exitosamente")}catch(p){console.error("Error al cambiar el método de pago:",p)}},Y=p=>{var r,O,_,k;const t=(k=(_=(O=(r=p.latest_status_timestamp)==null?void 0:r.split("T")[1])==null?void 0:O.split(":"))==null?void 0:_.slice(0,2))==null?void 0:k.join(":");switch(p.current_status){case"enviada":return`El pedido fue enviado a su domicilio a las ${t}`;case"cancelada":return`El pedido fue cancelado a las ${t}
Responsable: ${p.responsible}
Razón: ${p.reason}`;case"en preparacion":return`El pedido está en preparación desde las ${t} y será enviado en breve.`;case"generada":return`Hemos recibido su pedido a las ${t} y empezaremos a prepararlo en breve. Gracias por su espera.`;default:return""}};m(0);const D=m(!1),L=we(()=>s.currentOrder.pe_json.listaPedidos.reduce((p,t)=>{var O;let r=t.pedido_cantidad*t.pedido_precio;if(t.modificadorseleccionList&&t.modificadorseleccionList.length>0){const k=((O=t.modificadorseleccionList)==null?void 0:O.filter(V=>V.pedido_productoid==t.pedido_productoid)).reduce((V,g)=>V+g.modificadorseleccion_cantidad*g.pedido_precio,0);r+=k}return p+r},0));we(()=>L.value+s.currentOrder.delivery_price);const T=async()=>{var t;const p={order_id:s.currentOrder.order_id,responsible:(t=w.value.responsible)==null?void 0:t.name,reason:w.value.reason};await Q.create_cancellling_request(p),D.value=!1,s.Notification.pause(),s.Notification.currentTime=0},C=m(!1),te=()=>{const p=document.getElementById("factura").innerHTML,t=window.open("","_blank");t.document.write("<html><head><title>Factura</title>");const r=document.getElementsByTagName("style");for(let O=0;O<r.length;O++)t.document.write(r[O].outerHTML);t.document.write("<style>  @media print { html{height: min-content;}  *{text-transform:uppercase;align-items:center; width:100%; font-family: sans-serif;padding:0;margin:0; font-size:o.9rem !IMPORTANT} body {  -webkit-print-color-adjust: exact; /* Chrome, Safari */ color-adjust: exact; /* Firefox */ } }  </style>"),t.document.write("</head><body>"),t.document.write(p),t.document.write("</body></html>"),t.document.close(),t.print(),setTimeout(()=>{t.close()},.01)},Z=m([]);q(async()=>{s.currentOrder.value=s.currentOrder,Z.value=await j.get(`${R}/sites`)});const K=m(!1);m(!1);const w=m({responsible:null,reason:"Sin razon"}),E=m([{name:"Restaurante",value:"restaurant"},{name:"Cliente",value:"client"}]),z=()=>{w.value.responsible&&Q.cancelOrder(s.currentOrder.order_id,w.value.reason,w.value.responsible.name).then(p=>{p&&(K.value=!1,console.log("Order canceled successfully"))}).catch(p=>{console.error("Failed to cancel order:",p)})},se=()=>{console.log(`Orden: ${s.currentOrder.order_id}, Nuevo Valor de Domicilio: ${M.value}`),f.value=!1};return(p,t)=>{const r=x("Tag"),O=x("InputNumber"),_=x("Button"),k=x("Dialog"),V=x("Dropdown"),g=x("Textarea");return c(),v(W,null,[a(k,{visible:f.value,"onUpdate:visible":t[2]||(t[2]=i=>f.value=i),closeOnEscape:"",closable:!0,modal:"",style:{width:"30rem"}},{header:u(()=>[Me]),default:u(()=>[e("form",{onSubmit:H(se,["prevent"]),style:{display:"flex",gap:"1rem","flex-direction":"column","align-items":"start"}},[Le,a(r,{class:"px-4",severity:"warning"},{default:u(()=>[e("b",null,l(o(U)(o(s).currentOrder.delivery_price)),1)]),_:1}),Ee,a(O,{style:{width:"100%"},modelValue:M.value,"onUpdate:modelValue":t[0]||(t[0]=i=>M.value=i),mode:"currency",currency:"COP",locale:"es-CO",maxFractionalDigits:"0",placeholder:"Ingresa el nuevo valor",required:""},null,8,["modelValue"]),a(_,{style:{width:"100%","border-radius":"0.5rem"},label:"Cambiar",type:"submit",class:"p-button-help",onClick:t[1]||(t[1]=i=>X())})],32)]),_:1},8,["visible"]),e("div",null,[a(k,{visible:K.value,"onUpdate:visible":t[5]||(t[5]=i=>K.value=i),closeOnEscape:"",closable:!0,modal:"",style:{width:"30rem"}},{header:u(()=>[Ne]),default:u(()=>[e("form",{onSubmit:H(z,["prevent"]),style:{display:"flex",gap:"1rem","flex-direction":"column","align-items":"start"}},[Ue,a(V,{style:{width:"100%"},id:"responsible",modelValue:w.value.responsible,"onUpdate:modelValue":t[3]||(t[3]=i=>w.value.responsible=i),options:E.value,optionLabel:"name",placeholder:"Selecciona un responsable"},null,8,["modelValue","options"]),je,a(g,{style:{resize:"none","text-transform":"lowercase",width:"100%"},id:"reason",modelValue:w.value.reason,"onUpdate:modelValue":t[4]||(t[4]=i=>w.value.reason=i),rows:"5",placeholder:"Escribe la razón de la cancelación"},null,8,["modelValue"]),a(_,{style:{width:"100%","border-radius":"0.5rem"},label:"cancelar",type:"submit",class:"p-button-danger"})],32)]),_:1},8,["visible"]),a(k,{visible:D.value,"onUpdate:visible":t[8]||(t[8]=i=>D.value=i),closeOnEscape:"",closable:!0,modal:"",style:{width:"30rem"}},{header:u(()=>[Ie]),default:u(()=>[e("form",{onSubmit:H(T,["prevent"]),style:{display:"flex",gap:"1rem","flex-direction":"column","align-items":"start"}},[Ae,Be,a(V,{style:{width:"100%"},id:"responsible",modelValue:w.value.responsible,"onUpdate:modelValue":t[6]||(t[6]=i=>w.value.responsible=i),options:E.value,optionLabel:"name",placeholder:"Selecciona un responsable"},null,8,["modelValue","options"]),Fe,a(g,{style:{resize:"none","text-transform":"lowercase",width:"100%"},id:"reason",modelValue:w.value.reason,"onUpdate:modelValue":t[7]||(t[7]=i=>w.value.reason=i),rows:"5",placeholder:"Escribe la razón de la cancelación"},null,8,["modelValue"]),a(_,{style:{width:"100%","border-radius":"0.5rem"},label:"solicitar cancelacion",type:"submit",class:"p-button-danger"})],32)]),_:1},8,["visible"]),a(k,{closable:!1,style:{width:"30rem"},modal:"",visible:C.value,"onUpdate:visible":t[11]||(t[11]=i=>C.value=i)},{footer:u(()=>[e("div",He,[a(_,{text:"",size:"small",onClick:t[9]||(t[9]=()=>{o(Q).deliveryZero(o(s).currentOrder.order_id),C.value=!1}),style:{"border-radius":"0.3rem",width:"100%"},severity:"danger",label:"si"}),a(_,{onClick:t[10]||(t[10]=i=>C.value=!1),size:"small",style:{"border-radius":"0.3rem",width:"100%"},severity:"danger",label:"no"})])]),default:u(()=>[e("span",qe,[b(" Esta seguro de llevar a $0.00 el valor del domicilio para la orden "),e("b",null,l(o(s).currentOrder.order_id),1),b(" del cliente "),e("b",null,l(o(s).currentOrder.user_name),1),b("? ")])]),_:1},8,["visible"]),a(k,{class:"mx-3",closeOnEscape:"",closable:!1,visible:o(s).visibles.currentOrder,"onUpdate:visible":t[18]||(t[18]=i=>o(s).visibles.currentOrder=i),modal:"",style:{"max-height":"95vh",width:"35rem",position:"relative"}},{footer:u(()=>[e("div",ps,[o(s).currentOrder.current_status=="generada"?(c(),I(_,{key:0,size:"small",onClick:t[12]||(t[12]=i=>o(Q).prepareOrder(o(s).currentOrder.order_id)),style:{"border-radius":"0.3rem",width:"100%"},severity:"success",label:"Preparar"})):h("",!0),o(s).currentOrder.current_status=="en preparacion"?(c(),I(_,{key:1,size:"small",onClick:t[13]||(t[13]=i=>o(Q).sendOrder(o(s).currentOrder.order_id)),style:{"border-radius":"0.3rem",width:"100%"},severity:"success",label:"enviar"})):h("",!0),a(_,{size:"small",style:{"border-radius":"0.3rem",width:"100%"},onClick:te,severity:"warning",label:"imprimir"}),a(_,{size:"small",style:{"border-radius":"0.3rem",width:"100%"},onClick:t[14]||(t[14]=i=>D.value=!0),severity:"danger",label:"CANCELAR "})]),e("div",ms,[a(_,{style:{width:"100%"},icon:"pi pi-sync",onClick:t[15]||(t[15]=i=>A.value=!0),label:" metodo de pago",severity:"success"}),a(_,{icon:"pi pi-sync",onClick:t[16]||(t[16]=i=>f.value=!0),label:" Domicilio",class:"p-button-warning",style:{width:"100%"}})])]),default:u(()=>{var i,oe,le,ae,n,P,S,de,ce,ue,pe,me,_e,ve,be,ye,he;return[e("div",Ge,[e("div",null,[e("p",{class:$e(`estado ${(oe=(i=o(s).currentOrder)==null?void 0:i.current_status)==null?void 0:oe.split(" ")[0]}`)},l(Y(o(s).currentOrder)),3)])]),e("div",Xe,[o(s).currentOrder.responsible_id?(c(),I(r,{key:0,style:{},class:"tag mb-2",severity:"success"},{default:u(()=>[Je,b(" TRANSFERENCIA APROBADA")]),_:1})):h("",!0),b(),Ye,o(s).currentOrder.responsible_id?(c(),I(r,{key:1,class:"tag",severity:"success"},{default:u(()=>[b(l(o(s).currentOrder.name),1)]),_:1})):h("",!0),e("div",Ze,[e("p",Ke," ID:"+l(o(s).currentOrder.order_id),1),e("p",Qe,l(o(s).currentOrder.user_name)+" "+l(o(s).currentOrder.second_name)+" "+l(o(s).currentOrder.first_last_name)+" "+l(o(s).currentOrder.second_last_name),1),e("p",We,[e("b",null," fecha: "+l((le=o(s).currentOrder.latest_status_timestamp)==null?void 0:le.split("T")[0]),1),e("b",null," Hora: "+l((S=(P=(n=(ae=o(s).currentOrder.latest_status_timestamp)==null?void 0:ae.split("T")[1])==null?void 0:n.split(":"))==null?void 0:P.slice(0,2))==null?void 0:S.join(":")),1)]),et,(c(!0),v(W,null,re((ue=(ce=(de=o(s))==null?void 0:de.currentOrder)==null?void 0:ce.pe_json)==null?void 0:ue.listaPedidos,y=>{var ge,fe;return c(),v("div",null,[e("div",tt,[((ge=o(s).currentOrder)==null?void 0:ge.site_id)==32?(c(),v("p",st,[e("b",null," ( "+l(y.pedido_cantidad)+" kg ) ",1),b(" "+l(y.pedido_nombre_producto)+" ( "+l(y.pedido_cantidad/y.presentacion)+" "+l(y.presentation_unit_measure)+") ",1),ot])):(c(),v("p",lt,[e("b",null," ( "+l(y.pedido_cantidad)+" ) ",1),b(" "+l(y.pedido_nombre_producto)+" ",1),at])),e("div",null,[y.pedido_base_price?(c(),v("p",rt,l(o(U)(y.pedido_base_price*y.pedido_cantidad)),1)):(c(),v("p",nt,l(o(U)(y.pedido_precio)),1))])]),((fe=y.lista_productocombo)==null?void 0:fe.length)>0?(c(),v("p",it,ct)):h("",!0),y.lista_productocombo?(c(!0),v(W,{key:1},re(y.lista_productocombo,N=>(c(),v("p",ut,[b(" -- "),e("b",null,l(N.pedido_cantidad),1),b(" "+l(N.pedido_nombre),1)]))),256)):h("",!0),(c(!0),v(W,null,re(y.modificadorseleccionList,N=>(c(),v("div",pt,[e("p",mt,[b(" - ( "+l(y.pedido_cantidad)+" ) ",1),e("b",null,l(N.modificadorseleccion_cantidad),1),b(" "+l(N.modificadorseleccion_nombre),1)]),e("p",_t,l(o(U)(N.pedido_precio*N.modificadorseleccion_cantidad*y.pedido_cantidad)),1)]))),256)),vt])}),256)),e("div",bt,[yt,e("div",ht,[e("p",gt,[e("b",null,l(o(U)(o(s).currentOrder.pe_json.delivery.delivery_pagocon-((me=(pe=o(s).currentOrder.pe_json)==null?void 0:pe.delivery)==null?void 0:me.delivery_costoenvio))),1)])]),ft,e("div",wt,[e("p",xt,[e("b",null,l(o(U)((ve=(_e=o(s).currentOrder.pe_json)==null?void 0:_e.delivery)==null?void 0:ve.delivery_costoenvio)),1)])]),Ot,e("div",kt,[e("p",Ct,[e("b",null,l(o(U)(o(s).currentOrder.pe_json.delivery.delivery_pagocon)),1)])]),Pt]),$t,e("p",Dt,l((be=o(s).currentOrder.order_notes)==null?void 0:be.toLowerCase()),1),Vt,e("div",Tt,[zt,e("div",St,[e("span",Rt,l(o(s).currentOrder.user_name)+" "+l(o(s).currentOrder.second_name)+" "+l(o(s).currentOrder.first_last_name)+" "+l(o(s).currentOrder.second_last_name),1)]),o(s).currentOrder.site_id==32?(c(),v("div",Mt,Et)):h("",!0),o(s).currentOrder.site_id==32?(c(),v("div",Nt,[e("span",Ut,l(o(s).currentOrder.cedula_nit),1)])):h("",!0),jt,e("div",It,[e("span",At,l(o(s).currentOrder.order_type),1)]),o(s).currentOrder.site_id==32?(c(),v("div",Bt,qt)):h("",!0),o(s).currentOrder.site_id==32?(c(),v("div",Ht,[e("p",Gt,l(o(s).currentOrder.pe_json.delivery.delivery_horaentrega),1)])):h("",!0),o(s).currentOrder.placa?(c(),v("div",Xt,Yt)):h("",!0),o(s).currentOrder.placa?(c(),v("div",Zt,[e("p",Kt,l(o(s).currentOrder.placa),1)])):h("",!0),Qt,e("div",null,[e("span",Wt,l(o(s).currentOrder.user_phone),1)]),o(s).currentOrder.site_id==32?(c(),v("div",es,ss)):h("",!0),o(s).currentOrder.site_id==32?(c(),v("div",os,[e("span",ls,l(o(s).currentOrder.email),1)])):h("",!0),o(s).currentOrder.order_type!="Pasar a recoger"?(c(),v("div",as,ns)):h("",!0),o(s).currentOrder.order_type!="Pasar a recoger"?(c(),v("div",is,[e("span",ds,l((ye=o(s).currentOrder.user_address)==null?void 0:ye.toLowerCase()),1)])):h("",!0),cs,e("div",null,[e("span",us,l((he=o(s).currentOrder.payment_method)==null?void 0:he.toLowerCase()),1)])])])]),a(_,{class:"shadow-4",onClick:t[17]||(t[17]=y=>o(s).setVisible("currentOrder",!1)),icon:"pi pi-times",rounded:"",severity:"danger",style:{position:"absolute",top:"-1rem","border-radius":"50%",right:"-1rem"}})]}),_:1},8,["visible"])]),a(k,{visible:A.value,"onUpdate:visible":t[20]||(t[20]=i=>A.value=i),closeOnEscape:"",closable:!0,modal:"",style:{width:"30rem"}},{header:u(()=>[_s]),default:u(()=>[e("form",{onSubmit:H(ee,["prevent"]),style:{display:"flex",gap:"1rem","flex-direction":"column","align-items":"start"}},[vs,a(r,{class:"px-4",severity:"warning"},{default:u(()=>[e("span",bs,[e("b",null,l(o(s).currentOrder.payment_method),1)])]),_:1}),ys,a(V,{style:{width:"100%"},id:"paymentMethod",modelValue:B.value,"onUpdate:modelValue":t[19]||(t[19]=i=>B.value=i),options:J.value,optionLabel:"name",optionValue:"id",placeholder:"Selecciona un método de pago",required:""},null,8,["modelValue","options"]),a(_,{style:{width:"100%","border-radius":"0.5rem"},label:"Cambiar",type:"submit",class:"p-button-help"})],32)]),_:1},8,["visible"])],64)}}},gs=ke(hs,[["__scopeId","data-v-007685e8"]]);const G=$=>(Ce("data-v-d15397ac"),$=$(),Pe(),$),fs={class:"container",style:{"margin-top":"7rem",display:"flex","flex-direction":"column"}},ws=["src"],xs=G(()=>e("p",{class:"text-4xl text-center px-4",style:{"font-weight":"bold","margin-top":"0rem"}}," Pedidos Pendidentes Distrimonster ",-1)),Os=G(()=>e("h3",null,[e("b",null,"Rechazar orden")],-1)),ks=G(()=>e("h3",null,[e("b",null,"Aprobar esta orden")],-1)),Cs={style:{"max-width":"1280px"},class:"mx-auto"},Ps={class:"slider mx-auto",style:{display:"flex",overflow:"hidden"}},$s={class:"grid",style:{"align-items":"center","justify-content":"space-between"}},Ds=G(()=>e("div",{class:"col-12 md:col-6 p-3"},[e("span",{class:"text-xl",style:{width:"100%"}},[b(" Pedidos pendientes de validacion"),e("span",{style:{"text-transform":"capitalize"}})])],-1)),Vs={class:"md:mt-0 p-input-icon-right m-3"},Ts=G(()=>e("i",{class:"pi pi-search"},null,-1)),zs={style:{display:"flex",gap:"0.5rem"}},Ss={class:"grid p-3 mt-4",style:{"align-items":"center","justify-content":"start",display:"flex",gap:"1rem"}},Rs={class:"px-2 m-0"},Ms=G(()=>e("i",{class:"fa-regular fa-bars-progress"},null,-1)),Ls={style:{"text-transform":"uppercase"}},Es={class:"m-0"},Ns={__name:"ValidateSectionDistri",setup($){const s=m([]);m([{columnName:"SEDE",columnValue:"sede",columnType:"other",size:"1rem",vif:!0},{columnName:"ASESOR",columnValue:"current_status",columnType:"status",size:"15rem",vif:!0}]);const f=m({start_date:new Date,end_date:new Date,sites:[]}),M=m([]),X=ie();q(()=>{T.bar_color="#FF0042",T.colorized=!1}),De(()=>{T.bar_color="rgba(0, 1, 22, 1)",T.colorized=!0});const A=t=>{X.setVisible("currentOrderDistri",!0),X.setOrder(t)},B=async t=>{const r=T.rawUserData.id;await F.aproveOrder(t,r),L.value=!1,p()},J=async()=>{const t=await j.post(`${R}/transaction_report/`,{start_date:f.value.start_date,end_date:f.value.end_date,sites:f.value.sites.map(r=>r.site_id)});ee.value=t,t!=null&&t[0]&&(M.value=Object.keys(t[0]))},ee=m([]);q(async()=>{s.value=await j.get(`${R}/sites/`),await J()});const Y=m(!1),D=m([]),L=m(!1),T=Ve(),C=m({});m([{index:1,slide:0,name:"Basico"},{index:2,slide:-100,name:"reportes"}]);const te=m({index:1,slide:0,name:"Basico"});new Audio("/sound/pip1.wav"),new Audio("/sound/pip2.wav"),new Audio("/sound/pip3.wav"),new Audio("/sound/pip4.wav"),ie(),m(null);const Z={revisar:F.getPendientsCancellationRequest,aprobadas:F.getaceptedCancellationAcepted,rechazadas:F.getPendientsCancellationRejected};Te(()=>{se()}),xe(()=>X.numberOders,()=>{p()});const K=t=>{L.value=!0,C.value.order_id=t},w=async(t,r,O)=>{const _={authorized:t,responsible_id:T.rawUserData.id,responsible_observation:C.value.reason||"sin observaciones"};await F.resolveCancellationRequest(r,_),L.value=!1,Y.value=!1,D.value=await Z.revisar()},E=ze(),z=m(),se=()=>{z.value={global:{value:null,matchMode:Se.CONTAINS}}};se(),q(()=>{p()}),q(async()=>{p()});const p=async()=>{D.value=await F.getOrdersValidateDistri()};return xe(()=>E.params.request_status,async()=>{D.value=await Z.revisar()},{deep:!0}),(t,r)=>{const O=x("Textarea"),_=x("Button"),k=x("Dialog"),V=x("InputText"),g=x("Column"),i=x("DataTable"),oe=x("Calendar"),le=x("calendar"),ae=x("MultiSelect");return c(),v("div",fs,[e("img",{src:`${o(R)}/read-photo-product/iX6UiE6e`,alt:"",style:{height:"5rem",width:"min-content",margin:"auto"}},null,8,ws),xs,a(k,{visible:Y.value,"onUpdate:visible":r[2]||(r[2]=n=>Y.value=n),closeOnEscape:"",closable:!0,modal:"",style:{width:"30rem"}},{header:u(()=>[Os]),default:u(()=>[e("form",{onSubmit:r[1]||(r[1]=H(n=>w(!1,C.value.id,C.value.reason),["prevent"])),style:{display:"flex",gap:"1rem","flex-direction":"column","align-items":"start"}},[a(O,{style:{resize:"none","text-transform":"lowercase",width:"100%"},id:"reason",modelValue:C.value.reason,"onUpdate:modelValue":r[0]||(r[0]=n=>C.value.reason=n),rows:"5",placeholder:"Porque desea rechazar esta solicitud?"},null,8,["modelValue"]),a(_,{style:{width:"100%","border-radius":"0.5rem"},label:"Rechazar",type:"submit",class:"p-button-danger"})],32)]),_:1},8,["visible"]),a(k,{visible:L.value,"onUpdate:visible":r[4]||(r[4]=n=>L.value=n),closeOnEscape:"",closable:!0,modal:"",style:{width:"30rem"}},{header:u(()=>[ks]),default:u(()=>[e("form",{onSubmit:r[3]||(r[3]=H(n=>B(C.value.order_id),["prevent"])),style:{display:"flex",gap:"1rem","flex-direction":"column","align-items":"start"}},[a(_,{style:{width:"100%","border-radius":"0.5rem"},label:"Aprobar (usuario contactado)",type:"submit",class:"p-button-success"})],32)]),_:1},8,["visible"]),e("div",Cs,[e("div",Ps,[e("div",{style:Oe(`transform:translateX(${te.value.slide}%)`),class:"slider-item"},[a(i,{paginator:!0,rows:15,filters:z.value,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",currentPageReportTemplate:"Mostrando {first} a {last} de {totalRecords} Transferencias",rowsPerPageOptions:[5,10,25,100],scrollable:"",scrollHeight:"65vh",stripedRows:"",style:{},"onUpdate:filters":r[6]||(r[6]=n=>z.value=n),class:"col-12 m-auto",value:D.value,tableStyle:"min-width: 50rem;"},{header:u(()=>[e("div",$s,[Ds,e("span",Vs,[Ts,a(V,{class:"",modelValue:z.value.global.value,"onUpdate:modelValue":r[5]||(r[5]=n=>z.value.global.value=n),placeholder:"Buscar Solicitud..."},null,8,["modelValue"])])])]),default:u(()=>[a(g,{style:{},class:"py-1",field:"order_id",header:"ID orden",frozen:""}),a(g,{style:{},class:"py-1",field:"total_order_price",header:"Monto de la orden"},{body:u(n=>[b(l(o(ne)(n.data.total_order_price)),1)]),_:1}),a(g,{style:{},class:"py-1",field:"total_order_price",header:"Hora"},{body:u(n=>[b(l(o(Re)(n.data.latest_status_timestamp)),1)]),_:1}),a(g,{style:{},class:"py-1",field:"delivery_price",header:"Domicilio"},{body:u(n=>{var P,S;return[b(l(o(ne)((S=(P=n.data.pe_json)==null?void 0:P.delivery)==null?void 0:S.delivery_costoenvio)),1)]}),_:1}),a(g,{style:{},class:"py-1",field:"Total",header:"Total"},{body:u(n=>{var P,S;return[b(l(o(ne)(((S=(P=n.data.pe_json)==null?void 0:P.delivery)==null?void 0:S.delivery_costoenvio)+n.data.total_order_price)),1)]}),_:1}),a(g,{style:{},class:"py-1",field:"user_name",header:"Cliente"}),a(g,{style:{},class:"py-1",field:"user_phone",header:"Telefono cliente"}),a(g,{style:{"max-width":"10rem"},class:"py-1",field:"order_notes",header:"Notas"}),a(g,{style:{},class:"py-1 px-0",field:"date",header:"Action",frozen:"",alignFrozen:"right"},{body:u(n=>[e("div",zs,[o(E).params.request_status!="aprobadas"?(c(),I(_,{key:0,size:"",onClick:P=>A(n.data),style:{height:"1.8rem",width:"2rem"},severity:"info",class:"p-1",icon:"pi pi-eye"},null,8,["onClick"])):h("",!0),o(E).params.request_status!="aprobadas"?(c(),I(_,{key:1,size:"",onClick:P=>K(n.data.order_id),style:{height:"1.8rem",width:"2rem"},severity:"success",class:"p-1",icon:"pi pi-check"},null,8,["onClick"])):h("",!0)])]),_:1})]),_:1},8,["filters","value"])],4),e("div",{style:Oe(`transform:translateX(${te.value.slide}%)`),class:"slider-item"},[a(i,{paginator:!0,rows:15,style:{width:"100%"},paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",currentPageReportTemplate:"Mostrando {first} a {last} de {totalRecords} Transferencias",rowsPerPageOptions:[5,10,25,100],scrollable:"",showGridlines:"",stripedRows:"",class:"col-12 p-2",value:ee.value,tableStyle:"min-width: 50rem;",filters:z.value},{header:u(()=>[e("div",Ss,[e("h4",Rs,[Ms,b(),e("b",Ls,[b("Pedidos pendientes "),e("b",null,l(o(E).params.section),1)])]),a(oe,{modelValue:f.value.start_date,"onUpdate:modelValue":r[7]||(r[7]=n=>f.value.start_date=n)},null,8,["modelValue"]),a(le,{modelValue:f.value.end_date,"onUpdate:modelValue":r[8]||(r[8]=n=>f.value.end_date=n)},null,8,["modelValue"]),a(ae,{style:{"max-width":"30rem"},modelValue:f.value.sites,"onUpdate:modelValue":r[9]||(r[9]=n=>f.value.sites=n),optionLabel:"site_name",options:s.value.filter(n=>n.show_on_web)},null,8,["modelValue","options"]),a(_,{severity:"help",onClick:J,label:"Buscar",icon:"pi pi-search"})])]),default:u(()=>[(c(!0),v(W,null,re(M.value,n=>(c(),I(g,{class:"py-1",style:{"text-transform":"uppercase"},header:n},{body:u(P=>[e("h6",Es,l(P.data[n]),1)]),_:2},1032,["header"]))),256))]),_:1},8,["value","filters"])],4)])]),a(gs)])}}},qs=ke(Ns,[["__scopeId","data-v-d15397ac"]]);export{qs as default};
