import{_ as T,A as D,f as e,O as B,h as k,r as p,o as v,c as I,a as n,b as t,w as s,l as M,U as $,k as g,t as b,p as N,e as E,F,d as R,I as P,n as U}from"./index-a1204434.js";import"./dropDownAux-80aac5f7.js";import{g as A}from"./userServices-c19d14e7.js";const f=d=>(N("data-v-1d177be3"),d=d(),E(),d),j={class:"grid"},z={class:"col-12"},V={class:""},O=f(()=>n("span",{class:"p-column-title"},"Image",-1)),G=["onClick","src","onError"],J=f(()=>n("div",null,null,-1)),H=f(()=>n("span",{class:"p-column-title"},"name",-1)),K=f(()=>n("span",{class:"p-column-title"},"Fecha de Nacimiento",-1)),Y=f(()=>n("span",{class:"p-column-title"},"Category",-1)),Z=f(()=>n("span",{class:"p-column-title"},"Teléfono",-1)),q={__name:"ShowUserBirth",props:{mes:String},setup(d){D();const h=e([]);e(!1),e(!1),e(null);const _=e(null),w=e(null),S=e(null);e(!1),e(null),e(null),e({name:"activo",code:"active"}),e(null),e(!1),e(!1),e(!1),e(!1),e(null),e(null),e(null),e(null),e(null),e(null),e(null),e(null),e(null),e(""),e([]),e([]),e("file:///home/ludi/Downloads/9aa6397c673a5906ed994997df3a66bdc3e4f68dr1-194-259v2_00.jpg"),e(null),e(null);const y=d;document.getElementById("fileInput"),document.getElementById("imagePreview");function x(a,c){return a.filter(m=>new Date(m.birth_date).getMonth()+1===c&&(m==null?void 0:m.status.toLowerCase().split(" ")[0])==="activo")}B(()=>{}),k(async()=>{A().then(a=>h.value=a)}),console.log(x(h.value,3),"hikaaaaaaaaaaaaaa");const u=a=>{visibleImage.value=!0,bigImage.value=`${$}/read-product-image/600/employer-${a}`},l=(a,c)=>{const o={masculino:"/images/male-avatar.png",femenino:"/images/female-avatar.png",default:"/images/who.png"};!a||a==""?c.target.src=o.default:c.target.src=o[a.toLowerCase()]};return(a,c)=>{const o=p("Column"),m=p("DataTable");return v(),I("div",j,[n("div",z,[n("div",V,[t(m,{ref_key:"dt",ref:w,value:x(h.value,y.mes),selection:_.value,"onUpdate:selection":c[0]||(c[0]=r=>_.value=r),dataKey:"id",paginator:!0,rows:10,filters:S.value,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25],currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} products",responsiveLayout:"scroll",scrollable:"","scroll-height":"62vh",frozenValue:a.lockedCustomers},{header:s(()=>[]),default:s(()=>[t(o,{header:"Image",headerStyle:"width:5%; min-width:5rem;"},{body:s(r=>[O,n("div",null,[n("img",{onClick:C=>u(r.data.dni),src:`${M($)}/read-product-image/96/employer-${r.data.dni}`,onError:C=>l(r.data.gender,C),class:"shadow-2 img-profile",style:{border:"none",position:"relative",height:"3rem",width:"3rem","object-fit":"cover","border-radius":"50%"}},null,40,G)]),J]),_:1}),t(o,{field:"name",header:"Nombre",sortable:!0,headerStyle:"width:max-content; min-width:5rem; "},{body:s(r=>[H,g(" "+b(r.data.name),1)]),_:1}),t(o,{field:"birth_date",header:"Fecha de Nacimiento",sortable:!0,headerStyle:"width:12%; min-width:10rem;"},{body:s(r=>[K,g(" "+b(r.data.birth_date),1)]),_:1}),t(o,{field:"site_name",header:"Sede",sortable:!0,headerStyle:"width:14%; min-width:10rem;"},{body:s(r=>[Y,g(" "+b(r.data.site_name),1)]),_:1}),t(o,{field:"phone",header:"Teléfono",sortable:!0,headerStyle:"width:12%; min-width:10rem;"},{body:s(r=>[Z,g(" "+b(r.data.phone),1)]),_:1})]),_:1},8,["value","selection","filters","frozenValue"])])])])}}},i=T(q,[["__scopeId","data-v-1d177be3"]]);const L=d=>(N("data-v-9a4bcb59"),d=d(),E(),d),Q={class:"cont p-2 col-12"},W=L(()=>n("h5",{class:"m-auto col-12 text-center text-5xl",style:{"font-weight":"bold",color:""}},[g(" Cumples "),n("i",{class:"pi pi-spin pi-star-fill",style:{"font-size":"3rem"}})],-1)),X={class:"m-auto col-12 text-center text-2xl"},ee={class:"md:col-9 m-auto p-4 col-12",style:{"border-radius":"1REM","box-shadow":"0 0 20px rgba(0, 0, 0, 0.433)","background-color":"rgb(255, 206, 206)"}},te={style:{display:"flex","justify-content":"space-between","align-items":"center"}},ae=L(()=>n("h2",{class:"justify-center text-2xl",style:{height:"100%","font-weight":"bold"}}," Este mes ",-1)),oe={__name:"cumples",setup(d){const h=e([]);k(async()=>{const l=(await y()).getMonth()+1;A().then(a=>{h.value=x(a,l)})});const _=e(""),w=e(),S=["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"],y=async()=>{try{const l=await(await fetch(`${$}/server_time`)).json();if(!l||!l.trim())throw new Error("Respuesta del servidor no válida o vacía");const a=new Date(l.replace(" ","T")+"Z");if(isNaN(a.getTime()))throw new Error("La fecha del servidor no es válida");const c=a.getDate(),o=a.getMonth(),m=a.getFullYear();return w.value=o,_.value=`${c} de ${S[o]} de ${m}`,new Date(a)}catch(u){console.error("Error al obtener la hora del servidor:",u),_.value="Fecha no disponible"}};k(y);const x=(u,l)=>u.filter(a=>new Date(a.birth_date).getMonth()+1===l&&(a==null?void 0:a.status.toLowerCase().split(" ")[0])==="activo");return(u,l)=>{const a=p("Avatar"),c=p("AvatarGroup"),o=p("AccordionTab"),m=p("Accordion");return v(),I("div",Q,[W,n("h5",X," Hoy: "+b(_.value),1),n("div",ee,[n("div",te,[ae,t(c,{class:"mb-3 avatar",onClick:l[0]||(l[0]=r=>u.$refs.currentCumple.click())},{default:s(()=>[(v(!0),I(F,null,R(h.value.slice(0,6),r=>(v(),P(a,{image:`${M($)}/read-product-image/96/employer-${r.dni}`,size:"xlarge",shape:"circle"},null,8,["image"]))),256)),h.value.length>6?(v(),P(a,{key:0,label:`+${h.value.length-6}`,shape:"circle",size:"xlarge",style:{"background-color":"#9c27b0",color:"#ffffff"}},null,8,["label"])):U("",!0)]),_:1})]),t(m,{activeIndex:w.value},{default:s(()=>[t(o,{header:"Enero"},{default:s(()=>[t(i,{mes:1})]),_:1}),t(o,{header:"Febrero"},{default:s(()=>[t(i,{mes:2})]),_:1}),t(o,{header:"Marzo"},{default:s(()=>[t(i,{mes:3})]),_:1}),t(o,{header:"Abril"},{default:s(()=>[t(i,{mes:4})]),_:1}),t(o,{header:"Mayo"},{default:s(()=>[t(i,{mes:5})]),_:1}),t(o,{header:"Junio"},{default:s(()=>[t(i,{mes:6})]),_:1}),t(o,{header:"Julio"},{default:s(()=>[t(i,{mes:7})]),_:1}),t(o,{header:"Agosto"},{default:s(()=>[t(i,{mes:8})]),_:1}),t(o,{header:"Septiembre"},{default:s(()=>[t(i,{mes:9})]),_:1}),t(o,{header:"Octubre"},{default:s(()=>[t(i,{mes:10})]),_:1}),t(o,{header:"Noviembre"},{default:s(()=>[t(i,{mes:11})]),_:1}),t(o,{header:"Diciembre"},{default:s(()=>[t(i,{mes:12})]),_:1})]),_:1},8,["activeIndex"])])])}}},le=T(oe,[["__scopeId","data-v-9a4bcb59"]]);export{le as default};
