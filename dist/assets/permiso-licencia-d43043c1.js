import{_ as X,f as u,b_ as K,g as M,h as V,B as Q,a_ as Y,r as I,o as w,c as E,a as e,d as f,l as N,w as L,n as O,t as i,v as Z,k as v,bV as ee,bN as te,U as P,y as oe,aX as se,c0 as le,q as H,P as q,p as ae,e as ne}from"./index-3944118f.js";import{f as ie}from"./formatoPesos-2a38d2e7.js";import{a as re}from"./html2canvas.esm-6e01b359.js";import{E as ce}from"./jspdf.es.min-a1f44f3e.js";const de="/images/licencia.avif";const s=S=>(ae("data-v-48d024ee"),S=S(),ne(),S),ue={class:"m-2 m-auto"},he=s(()=>e("p",{class:"text-2xl lg:text-3xl text-center my-4 mt-8",style:{"font-weight":"bold"}},"Solicitar permiso por licencia",-1)),me={class:"mb-6 col-12",style:{display:"flex",height:"auto"}},pe=s(()=>e("span",{style:{color:"white"}},"Buscar",-1)),_e={key:0,class:"text-1xl m-auto col-6 p-0",style:{color:"var(--primary-color)"}},ve={key:1,class:"text-5xl m-auto col-12"},fe={key:2,class:"col-12 p-0 m-auto",style:{height:"max-content","background-color":"transparent"}},ye=s(()=>e("h6",{class:"text-center p-2 m-0 mb-5 col-12",style:{"border-radius":"2rem","font-weight":"bold","background-color":"var(--gray-200)"}},"INFORMACIÓN DEL EMPLEADO",-1)),ge={class:"px-0 grid",style:{display:""}},xe=s(()=>e("h6",{class:"col-6 m-0 text-left text-md"},"NOMBRE",-1)),be={class:"col-6 m-0 text-right",style:{"font-weight":"300","min-width":"max-content"}},we=s(()=>e("h6",{class:"col-6 m-0 py-2 text-left"},"ESTADO",-1)),Ee={class:"col-6 m-0 py-2 text-right",style:{"font-weight":"300","min-width":"max-content"}},Se={class:"px-0 grid",style:{}},De=s(()=>e("h6",{class:"col-6 m-0 text-left"},"DOCUMENTO",-1)),Ce={class:"col-6 m-0 text-right",style:{"font-weight":"300","min-width":"max-content"}},ke={class:"px-0 grid",style:{}},Ie=s(()=>e("h6",{class:"col-6 m-0 text-left"},"FECHA DE INICIO",-1)),Ne={class:"col-6 m-0 text-right",style:{"font-weight":"300"}},Oe={class:"px-0 grid",style:{"background-color":""}},Ae=s(()=>e("h6",{class:"col-6 m-0 text-left"},"CARGO",-1)),Ve={class:"col-6 m-0 text-right",style:{"font-weight":"300"}},Le=s(()=>e("h6",{class:"text-center p-2 mb-5",style:{"border-radius":"2rem","font-weight":"bold","background-color":"var(--gray-200)"}}," DETALLES ADICIONALES",-1)),Pe={class:"px-0 grid",style:{}},Te=s(()=>e("h6",{class:"col-6 m-0 text-left"},"TIPO DE CONTRATO",-1)),je={class:"col-6 m-0 text-right",style:{"font-weight":"300"}},Ue={class:"px-0 grid",style:{}},ze=s(()=>e("h6",{class:"col-6 m-0 text-left"},"SALARIO",-1)),$e={class:"col-6 m-0 text-right",style:{"font-weight":"300"}},Be={class:"px-0 grid col-12",style:{}},Re={class:"col-6"},Fe={style:{"font-weight":""}},Me={class:"col-6"},He=s(()=>e("h6",{class:"text-center p-2 m-0 my-5 col-12",style:{"border-radius":"2rem","font-weight":"bold","background-color":"var(--gray-200)"}},"OBSERVACIONES",-1)),qe={class:"col-12"},We={style:{display:"flex"}},Ge={style:{color:"white"}},Je={style:{color:"white"}},Xe={class:"col-12 p-0 mt-6",style:{"overflow-x":"auto","box-shadow":"0 0 20px rgba(0, 0, 0, 0.308)"},ref:"contenidoParaPDF"},Ke={class:"a4-size p-8 mi-clase",style:{"box-shadow":"0 0 10px rgba(0, 0, 0, 0.508)"}},Qe=s(()=>e("img",{class:"m-auto",src:"https://salchimonster.com/images/logo.png",style:{width:"10%"},alt:""},null,-1)),Ye={style:{"font-size":"14pt","font-weight":"normal",color:"black","font-family":"Arial, Helvetica, sans-serif"}},Ze=s(()=>e("h6",{class:"text-center",style:{"font-size":"14pt","font-weight":"bold",color:"black","font-family":"Arial, Helvetica, sans-serif"}}," INVERSIONES SALCHIMONSTER SAS ",-1)),et=s(()=>e("h6",{style:{"font-size":"14pt","font-weight":"normal",color:"black","font-family":"Arial, Helvetica, sans-serif"},class:"text-center"},"NIT: 901.420.874-0",-1)),tt=s(()=>e("h6",{class:"text-center py-4",style:{"font-weight":"bold"}},[v("FORMATO SOLICITUD DE VACACIONES "),e("span",{style:{"text-transform":"capitalize"}})],-1)),ot={class:"text-l",style:{"font-size":"14pt","font-weight":"normal",color:"black","font-family":"Arial, Helvetica, sans-serif"}},st={class:"p-0 m-0"},lt=s(()=>e("span",{style:{"font-weight":"bold"}},"Fecha de la solicitud: ",-1)),at={style:{"border-bottom":"1px solid","padding-bottom":"0","padding-right":"2rem"}},nt={class:"p-0 m-0",style:{width:"100%"}},it=s(()=>e("span",{style:{"font-weight":"bold"}},"Nombre: ",-1)),rt={style:{width:"100%","border-bottom":"1px solid","padding-bottom":"0","padding-right":"3rem"}},ct={class:"p-0 m-0"},dt=s(()=>e("span",{style:{"font-weight":"bold"}},"Cargo: ",-1)),ut={style:{"border-bottom":"1px solid","padding-bottom":"0","padding-right":"2rem"}},ht={class:"p-0 m-0"},mt=s(()=>e("span",{style:{"font-weight":"bold"}},"Identificación No: ",-1)),pt={style:{"border-bottom":"1px solid","padding-bottom":"0","padding-right":"2rem"}},_t={style:{display:"flex","justify-content":"start",gap:"2rem",border:"1px solid","margin-top":"2rem"},class:"p-2"},vt={style:{display:"flex","flex-direction":"column"},class:""},ft=s(()=>e("div",{style:{"font-weight":"bold"}}," Desde ",-1)),yt={style:{display:"flex","flex-direction":"column"}},gt=s(()=>e("div",{style:{"font-weight":"bold"}}," Hasta ",-1)),xt={style:{display:"flex","justify-content":"start",gap:"2rem",border:"1px solid","margin-top":"2rem"},class:"p-2"},bt={style:{display:"flex","flex-direction":"column"},class:""},wt=s(()=>e("div",{class:"mb-2",style:{"font-weight":"bold"}}," Observaciones ",-1)),Et={class:"col-12"},St={key:3,class:"col-12"},Dt=s(()=>e("img",{src:de,alt:"",srcset:"",style:{width:"100%",height:"50vh","object-fit":"cover","border-radius":"1rem"}},null,-1)),Ct=[Dt],kt={__name:"permiso-licencia",setup(S){const a=u({}),m=u(K()),T=u(),x=u("2029-12-21 16:19"),A=u(),D=u(),C=u(),b=u();u();function j(o){var t=new Date(o),n={day:"numeric",month:"long",year:"numeric"};return t.toLocaleDateString("es-ES",n)}M(m,(o,t)=>{console.log(`El valor de usrDni ha cambiado de ${t} a ${o}`)});const W=async o=>{fetch(`${P}/employer/dni/${o}`).then(t=>{if(!t.ok)throw new Error("Network response was not ok");return t.json()}).then(t=>{console.log("Employer data:",t),a.value=t,A.value=""}).catch(t=>{console.error("There has been a problem with your fetch operation:",t),a.value={},A.value="  No hay un usuario para el número de documento "+m.value,T.value="error"})},U=async()=>{fetch(`${P}/server_time`).then(o=>{if(!o.ok)throw new Error("Network response was not ok");return o.json()}).then(o=>{console.log("Employer data:",o),x.value=o}).catch(o=>{console.error("There has been a problem with your fetch operation:",o),T.value="error"})};V(async()=>{U()});const G=async()=>{if(!a.value.id){console.error("El ID del usuario es necesario para solicitar el permiso.");return}const o=n=>n.toISOString().split("T")[0],t={employer_id:a.value.id,start_date:o(D.value),end_date:o(C.value),observations:b.value||"sin observaciones",tipo:"licencia",status:{status:"generado",timestamp:x.value},history:[{status:"generado",timestamp:x.value}]};try{const n=await fetch(`${P}/permission`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok)throw new Error("Error en la solicitud de permiso");const h=await n.json();console.log("Permiso creado exitosamente:",h),oe.push("/mis-permisos")}catch(n){console.error("Error al solicitar el permiso:",n)}};function z(o){o||(o="2029-12-21 16:19");const t=["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"];let[n,h]=o.split(" "),[d,p,g]=n.split("-").map(Number),l=t[p-1];return`${g} de ${l} de ${d}`}function y(o){const t=["cero","un","dos","tres","cuatro","cinco","seis","siete","ocho","nueve"],n=["diez","once","doce","trece","catorce","quince","dieciséis","diecisiete","dieciocho","diecinueve"],h=["","","veinte","treinta","cuarenta","cincuenta","sesenta","setenta","ochenta","noventa"];function d(l){let r="",_="cien";if(l[0]>1?(r+=t[l[0]]+"cientos ",_=""):l[0]===1&&(r+=_+" "),l[1]>1)r+=h[l[1]]+" y ";else if(l[1]===1)return r+n[l[2]];return(l[2]!==0||l[0]===0&&l[1]===0)&&(r+=t[l[2]]),r}if(o===0)return t[0];if(o<0)return"menos "+y(-o);let p=[];for(;o>0;)p.push(o%1e3),o=Math.floor(o/1e3);return p.map((l,r)=>{if(l===0)return"";let _=d([Math.floor(l/100),Math.floor(l%100/10),l%10]);return r===1?l===1?"mil":_+" mil":r===2?l===1?"un millón":_+" millones":_}).reverse().join(" ").trim()}console.log(y(16e5)),console.log(y(16e5)),console.log(y(1111111));const $=u(window.innerWidth),B=Q(()=>$.value<600),R=()=>{$.value=window.innerWidth};V(()=>{window.addEventListener("resize",R)}),Y(()=>{window.removeEventListener("resize",R)}),document.getElementsByClassName("mi-clase"),M(m,(o,t)=>{console.log(`El valor de usrDni ha cambiado de ${t} a ${o}`)}),V(async()=>{U()}),console.log(y(16e5)),console.log(y(16e5)),console.log(y(1111111));const k=u(B.value),J=async()=>{const o=B.value;k.value=!1,await se();let t=document.querySelector(".mi-clase");if(t)try{const h=(await re(t,{scale:2.5})).toDataURL("image/jpeg",.9),d=new ce({orientation:"portrait",unit:"px",format:"a4"}),p=d.internal.pageSize.getWidth(),g=d.internal.pageSize.getHeight();d.addImage(h,"JPEG",0,0,p,g),d.save(`certificado laboral - ${a.value.name}.pdf`)}catch(n){console.error("Error al exportar PDF: ",n)}finally{k.value=o}else console.error("No se encontró el elemento para convertir a PDF"),k.value=o};return(o,t)=>{var g,l,r,_,F;const n=I("InputNumber"),h=I("Button"),d=I("Calendar"),p=I("Textarea");return w(),E("div",ue,[he,e("span",me,[f(n,{modelValue:m.value,"onUpdate:modelValue":t[0]||(t[0]=c=>m.value=c),disabled:((g=N(le)())==null?void 0:g.toLowerCase())!="gerente",class:"mr-5",style:{width:"100%"},placeholder:"Cedula del empleado"},null,8,["modelValue","disabled"]),f(h,{style:{display:"flex",color:"white","align-items":"center","justify-content":"center","font-weight":"bold"},onClick:t[1]||(t[1]=c=>W(m.value))},{default:L(()=>[pe]),_:1})]),m.value==null?(w(),E("p",_e," Por favor digite el numero de decumento del usuario y presione Buscar")):O("",!0),!a.value.dni&&m.value?(w(),E("p",ve,i(A.value),1)):O("",!0),a.value.dni&&m.value?(w(),E("div",fe,[ye,e("div",ge,[xe,e("h6",be,i(a.value.name),1)]),e("div",{class:"px-0 grid p-0",style:Z([{display:"","border-radius":"2rem"},((r=(l=a.value)==null?void 0:l.status)==null?void 0:r.toLowerCase().split(" ")[0])=="activo"?"background-color:rgb(193, 255, 100);":"background-color: rgb(255, 132, 132);"])},[we,e("h6",Ee,i(a.value.status),1)],4),e("div",Se,[De,e("h6",Ce,i(a.value.dni),1)]),e("div",ke,[Ie,e("h6",Ne,i(a.value.entry_date),1)]),e("div",Oe,[Ae,e("h6",Ve,i(a.value.position),1)]),Le,e("div",Pe,[Te,e("h6",je,i(a.value.contract_type),1)]),e("div",Ue,[ze,e("h6",$e,i(N(ie)(a.value.salary)),1)]),e("div",Be,[e("h6",Re,[e("div",Fe,[v(" DESDE "),f(d,{class:"col p-0",modelValue:D.value,"onUpdate:modelValue":t[2]||(t[2]=c=>D.value=c),required:"true",autofocus:""},null,8,["modelValue"])])]),e("h6",Me,[e("div",null,[v(" HASTA "),f(d,{class:"col p-0",modelValue:C.value,"onUpdate:modelValue":t[3]||(t[3]=c=>C.value=c),required:"true",autofocus:""},null,8,["modelValue"])])]),He,e("h6",qe,[f(p,{class:"col-12 text-xl",modelValue:b.value,"onUpdate:modelValue":t[4]||(t[4]=c=>b.value=c),required:"true",autofocus:""},null,8,["modelValue"])])]),e("div",We,[f(h,{onClick:t[5]||(t[5]=c=>G()),style:{display:"flex",color:"white","align-items":"center","justify-content":"center","font-weight":"bold"}},{default:L(()=>[e("span",Ge,[e("i",{class:H(N(q).UPLOAD)},null,2),v(" Solicitar permiso")])]),_:1}),f(h,{onClick:t[6]||(t[6]=c=>J()),disabled:"",style:{display:"flex",color:"white","align-items":"center","justify-content":"center","font-weight":"bold"}},{default:L(()=>[e("span",Je,[e("i",{class:H(N(q).UPLOAD)},null,2),v(" Descargar Comprobante")])]),_:1})])])):O("",!0),ee(e("div",Xe,[e("div",Ke,[Qe,e("h6",Ye,i(z(x.value)),1),Ze,et,tt,e("h5",ot,[e("p",st,[lt,v(),e("span",at,i(z(x.value)),1)]),e("p",nt,[it,v(),e("span",rt,i(a.value.name),1)]),e("p",ct,[dt,v(),e("span",ut,i(a.value.position),1)]),e("p",ht,[mt,v(),e("span",pt,i(a.value.dni),1)]),e("div",_t,[e("div",vt,[ft,e("div",null,i(j(D.value)),1)]),e("div",yt,[gt,e("div",null,i(j(C.value)),1)])]),e("div",xt,[e("div",bt,[wt,e("h6",Et,[f(p,{class:"col-12 text-xl",style:{"min-width":"600px","max-width":"600px"},modelValue:b.value,"onUpdate:modelValue":t[7]||(t[7]=c=>b.value=c),required:"true",autofocus:""},null,8,["modelValue"])])])])])])],512),[[te,((F=(_=a.value)==null?void 0:_.status)==null?void 0:F.toLowerCase().split(" ")[0])=="activo"&&!k.value]]),a.value.dni?O("",!0):(w(),E("div",St,Ct))])}}},Vt=X(kt,[["__scopeId","data-v-48d024ee"]]);export{Vt as default};
