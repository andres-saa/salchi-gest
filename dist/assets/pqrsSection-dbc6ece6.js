import _e from"./pqrUser-fc83c405.js";import{_ as ve,M as ye,r as u,A as he,l as be,q as fe,i as ge,D as Z,a as _,o as l,c as o,g as r,w as m,b as t,F as I,d as ee,s as xe,j as L,U as j,t as a,k as f,m as c,f as n,u as U,N as B,n as Ve,e as te,p as ke,h as we}from"./index-961bb091.js";import"./editor.esm-82536d6b.js";/* empty css                                                             */const d=q=>(ke("data-v-434a6fe3"),q=q(),we(),q),Te={style:{display:"flex","flex-direction":"column"}},qe={style:{"min-width":"max-content",margin:"0",padding:"0"},class:"p-text-secondary m-0 p-0"},Ce={style:{"min-width":"max-content",margin:"0",padding:"0"},class:"p-text-secondary m-0 p-0"},Ne={class:"m-0"},Pe=d(()=>t("div",null,null,-1)),Se={key:0,class:"m-0",style:{"text-transform":"capitalize"}},ze=d(()=>t("b",null,"Responsable:",-1)),Re={key:1,class:"p-0 m-0"},Ue={key:2,class:"p-0 m-0"},De={key:3},$e=d(()=>t("b",null,"Notas",-1)),Ie=d(()=>t("br",null,null,-1)),Le=d(()=>t("div",{style:{display:"flex",gap:"1rem"}},null,-1)),je=d(()=>t("div",null,[t("h4",{class:"mt-0 py-0"})],-1)),Be={style:{display:"flex","flex-direction":"column"}},Fe={key:0},Ee=d(()=>t("b",null,"Datos del cliente",-1)),Me=[Ee],Oe={key:1},Ge=d(()=>t("b",null,"Nombre: ",-1)),He={key:2},Ae=d(()=>t("b",null,"Telefono: ",-1)),Qe={key:3},Je=d(()=>t("b",null,"Orden: ",-1)),Ke=d(()=>t("h6",null,[t("b",null,"Historial")],-1)),We={style:{display:"flex","flex-direction":"column"}},Xe={style:{"min-width":"max-content",margin:"0",padding:"0"},class:"p-text-secondary m-0 p-0"},Ye={style:{"min-width":"max-content",margin:"0",padding:"0"},class:"p-text-secondary m-0 p-0"},Ze={class:"m-0"},et=d(()=>t("div",null,null,-1)),tt={key:0,class:"m-0",style:{"text-transform":"capitalize"}},lt=d(()=>t("b",null,"Responsable:",-1)),st={key:1,class:"p-0 m-0"},ot={key:2,class:"p-0 m-0"},at={key:3},nt=d(()=>t("b",null,"Notas",-1)),it=d(()=>t("br",null,null,-1)),ut=d(()=>t("div",{style:{display:"flex",gap:"1rem"}},null,-1)),rt=d(()=>t("h6",null,[t("b",null,"Como desea proceder?")],-1)),dt={key:4},ct={key:0,style:{display:"flex","justify-content":"space-between",margin:"1rem 0"}},mt=d(()=>t("h6",{class:"m-0"},"Le dio una cortesia del 100% ?",-1)),pt={key:1,style:{display:"flex","justify-content":"space-between",margin:"1rem 0"}},_t=d(()=>t("h6",{class:"m-0"},"Le dio un bono de descuento?",-1)),vt={key:2},yt=d(()=>t("h6",{class:"m-0 my-3"},"porcentaje del descuento ",-1)),ht={key:3},bt=d(()=>t("h6",{class:"m-0 my-3"},"Valor de la orden",-1)),ft={key:4},gt=d(()=>t("h6",{class:"m-0 my-3"},"Id de la orden",-1)),xt=d(()=>t("h6",{class:"m-0 my-3"},"Detalles",-1)),Vt={style:{"background-color":"#ff00002e"},class:"p-3"},kt=d(()=>t("b",null,"No preste sus credenciales de Salchigest, cada miembro de la empresa tiene los suyos, muchas gracias",-1)),wt={style:{display:"flex","justify-content":"end","margin-top":"2rem"}},Tt={class:"nav_bar shadow-2 p-0 my-0 mx-2",style:{position:"sticky",top:"3rem","max-width":"900px","border-radius":"10rem","background-color":"white","z-index":"99"}},qt={class:"nav_bar--buttons p-0 m-1",style:{}},Ct={key:"",class:"",style:{display:"flex","align-items":"center"}},Nt={class:"grid p-3",style:{"align-items":"center","justify-content":"space-between",display:"flex",gap:"1rem"}},Pt={class:"px-2"},St=d(()=>t("i",{class:"fa-regular fa-bars-progress"},null,-1)),zt={style:{"text-transform":"uppercase"}},Rt={style:{display:"flex",gap:"1rem"}},Ut={key:0,style:{"min-width":"max-content"},class:"m-0 p-0"},Dt={key:2,class:"m-0 p-0"},$t={key:3,class:"m-0 p-0"},It={key:5,class:"p-2",style:{display:"flex",gap:".1rem","flex-direction":"column","align-items":"start"}},Lt={key:6,class:"p-2",style:{display:"flex",gap:".1rem","flex-direction":"column","align-items":"start"}},jt={key:7,class:"p-2",style:{display:"flex",gap:".1rem","flex-direction":"column","align-items":"start"}},Bt={style:{display:"flex",gap:".5rem","justify-content":"center"},class:"px-2"},Ft={__name:"pqrsSection",setup(q){const le=ye(),D=u(""),C=u(),F=he(),E=u([]),se=y=>y,$=u({id:2,name:"Generada",description:"Estado inicial de la pqr",exist:!0,color:"#3498DB"}),M=be(),O=u([]),p=u(),oe=async y=>{N.value=!0,v.value=y},G=u([]),v=u([]),H=u(!1),N=u(!1),P=u(null),ae=()=>{P.value={global:{value:null,matchMode:xe.CONTAINS}}};fe(()=>{ae()});const ne=u([{columnName:"Id",columnValue:"pqr_request_id",columnType:"other",size:"1rem",vif:!0},{columnName:"Clasificacion",columnValue:"tag_name",columnType:"tag",size:"1rem",vif:!0},{columnName:"Id orden",columnValue:"order_id",columnType:"other",size:"1rem",vif:!0},{columnName:"Canal",columnValue:"channel",columnType:"tag",size:"4rem",vif:!0},{columnName:"Sede",columnValue:"site_name",columnType:"other",size:"4rem",vif:!0},{columnName:"Red",columnValue:"red",columnType:"other",size:"4rem",vif:!0},{columnName:"Calificacion",columnValue:"rating",columnType:"rating",size:"10rem",vif:!0},{columnName:"Tipo",columnValue:"request_type",columnType:"other",size:"15rem",vif:!0},{columnName:"Comentarios",columnValue:"request_content",columnType:"other",size:"20rem",vif:!0},{columnName:"Responsable",columnValue:"responsible_name",columnType:"other",size:"20rem",vif:!0},{columnName:"Estado",columnValue:"current_status",columnType:"status",size:"15rem",vif:!0}]);u({2:"#3498DB",4:"#2ECC71",5:"#16A085",6:"#E74C3C",7:"#F39C12"}),u({question:"",answer:""}),u({}),u({}),u(null);const A=u([{}]);u({}),u(!1),u({});const T=u(!1),b=u(),k=u(!1),S=async()=>{A.value=await L.get(`${j}/get-all-pqrs`);const y=await L.get(`${j}/get-all-pqrs-status`);O.value=y,E.value=y};ge(async()=>{S()}),Z(p,()=>{Q()});const Q=()=>{b.value=null,D.value="",C.value=null,T.value=!1,k.value=!1},w=u(),ie=async()=>{const y=w.value&&b.value?(b.value-b.value*(w.value/100)).toFixed(2):b.value,i={pqr_request_id:v.value.pqr_request_id,status_id:p.value,responsible_id:M.rawUserData.id,value:y||null,notes:w.value&&b.value?`Se le dio un descuento de ${w.value}% en una orden de ${B(b.value)}, quedando en un valor de ${B(y)}`:"",order_id:C.value||null};try{await L.post(`${j}/change-pqr-status`,i),S(),N.value=!1,Q()}catch(g){console.error("Error al enviar la actualizaciÃ³n de la PQR:",g)}};return Z(()=>F.params.section_id,()=>{S()},{deep:!0}),(y,i)=>{const g=_("Tag"),J=_("Timeline"),K=_("Dialog"),ue=_("Dropdown"),W=_("Checkbox"),X=_("InputNumber"),Y=_("InputText"),re=_("Textarea"),z=_("Button"),de=_("Rating"),ce=_("column"),me=_("Column"),pe=_("DataTable");return l(),o(I,null,[r(K,{class:"mx-2",visible:H.value,"onUpdate:visible":i[0]||(i[0]=e=>H.value=e),modal:"",header:`Historial de la pqr  ID   ${G.value.pqr_request_id}`,style:{width:"40rem"}},{default:m(()=>[r(J,{value:G.value.status_history},{opposite:m(e=>{var s,h,x,V;return[t("div",Te,[t("p",qe,a((s=e.item.timestamp)==null?void 0:s.split(" ")[0]),1),t("p",Ce,a((V=(x=(h=e.item.timestamp)==null?void 0:h.split(" "))==null?void 0:x.slice(1,4))==null?void 0:V.join(" ")),1)])]}),content:m(e=>{var s;return[r(g,{style:f(`background-color:${e.item.color}`)},{default:m(()=>[t("p",Ne,[t("b",null,a(e.item.status),1)])]),_:2},1032,["style"]),Pe,e.item.responsible_name?(l(),o("p",Se,[ze,c(" "+a((s=e.item.responsible_name)==null?void 0:s.toLowerCase()),1)])):n("",!0),e.item.value?(l(),o("p",Re,[c("Le costo a la empresa "),t("b",null,a(e.item),1)])):n("",!0),e.item.order_id?(l(),o("p",Ue,[c("Orden entregada "),t("b",null,a(e.item.order_id),1)])):n("",!0),e.item.notes?(l(),o("p",De,[$e,c(" "+a(e.item.notes),1)])):n("",!0),Ie,Le]}),_:1},8,["value"])]),_:1},8,["visible","header"]),je,r(K,{class:"mx-2",visible:N.value,"onUpdate:visible":i[8]||(i[8]=e=>N.value=e),modal:"",header:`Gestion de la pqr  ID    ${v.value.pqr_request_id}`,style:{width:"50rem"}},{footer:m(()=>[t("div",wt,[r(z,{onClick:ie,label:"Enviar",severity:"help"})])]),default:m(()=>[t("div",Be,[v.value.user_name||v.value.user_phone?(l(),o("h6",Fe,Me)):n("",!0),v.value.user_name?(l(),o("span",Oe,[Ge,c(" "+a(v.value.user_name),1)])):n("",!0),v.value.user_phone?(l(),o("span",He,[Ae,c(" "+a(v.value.user_phone),1)])):n("",!0),v.value.order_id?(l(),o("span",Qe,[Je,c(" "+a(v.value.order_id),1)])):n("",!0),Ke,r(J,{value:v.value.status_history},{opposite:m(e=>{var s,h,x,V;return[t("div",We,[t("p",Xe,a((s=e.item.timestamp)==null?void 0:s.split(" ")[0]),1),t("p",Ye,a((V=(x=(h=e.item.timestamp)==null?void 0:h.split(" "))==null?void 0:x.slice(1,4))==null?void 0:V.join(" ")),1)])]}),content:m(e=>{var s;return[r(g,{style:f(`background-color:${e.item.color}`)},{default:m(()=>[t("p",Ze,[t("b",null,a(e.item.status),1)])]),_:2},1032,["style"]),et,e.item.responsible_name?(l(),o("p",tt,[lt,c(" "+a((s=e.item.responsible_name)==null?void 0:s.toLowerCase()),1)])):n("",!0),e.item.value?(l(),o("p",st,[c("Le costo a la empresa "),t("b",null,a(U(B)(e.item.value)),1)])):n("",!0),e.item.order_id?(l(),o("p",ot,[c("Orden entregada "),t("b",null,a(e.item.order_id),1)])):n("",!0),e.item.notes?(l(),o("p",at,[nt,c(" "+a(e.item.notes),1)])):n("",!0),it,ut]}),_:1},8,["value"]),rt,r(ue,{modelValue:p.value,"onUpdate:modelValue":i[1]||(i[1]=e=>p.value=e),options:O.value.filter(e=>e.id!=2),optionLabel:"name",optionValue:"id"},null,8,["modelValue","options"]),p.value?(l(),o("div",dt,[p.value==4||p.value==7?(l(),o("div",ct,[mt,r(W,{binary:"",modelValue:T.value,"onUpdate:modelValue":i[2]||(i[2]=e=>T.value=e)},null,8,["modelValue"])])):n("",!0),p.value==4||p.value==7?(l(),o("div",pt,[_t,r(W,{modelValue:k.value,"onUpdate:modelValue":i[3]||(i[3]=e=>k.value=e),binary:""},null,8,["modelValue"])])):n("",!0),(p.value==4||p.value==7)&&k.value?(l(),o("div",vt,[yt,r(X,{modelValue:w.value,"onUpdate:modelValue":i[4]||(i[4]=e=>w.value=e),style:{width:"100%"}},null,8,["modelValue"])])):n("",!0),(p.value==4||p.value==7)&&T.value||k.value?(l(),o("div",ht,[bt,r(X,{modelValue:b.value,"onUpdate:modelValue":i[5]||(i[5]=e=>b.value=e),style:{width:"100%"}},null,8,["modelValue"])])):n("",!0),(p.value==4||p.value==7)&&k.value||T.value?(l(),o("div",ft,[gt,r(Y,{modelValue:C.value,"onUpdate:modelValue":i[6]||(i[6]=e=>C.value=e),style:{width:"100%"}},null,8,["modelValue"])])):n("",!0),t("div",null,[xt,r(re,{modelValue:D.value,"onUpdate:modelValue":i[7]||(i[7]=e=>D.value=e),rows:"5",style:{resize:"none",width:"100%"}},null,8,["modelValue"])]),t("h6",Vt,[c("Recuerde que esta firmando como "),t("b",null,a(U(M).rawUserData.name),1),c(" y por ende se hace responsable, "),kt])])):n("",!0)])]),_:1},8,["visible","header"]),t("nav",Tt,[t("ul",qt,[(l(!0),o(I,null,ee(E.value,e=>(l(),o("li",Ct,[r(g,{style:f([`background-color:${e.color}`,{height:"1.3rem","aspect-ratio":"1 / 1","border-radius":"50%"}])},null,8,["style"]),c(),r(z,{onClick:()=>$.value=e,class:Ve(["nav_bar--buttons-button p-2",e.id==$.value.id?"nav_bar--buttons-button-selected":""]),label:e.name},null,8,["onClick","class","label"])]))),128))])]),r(pe,{paginator:!0,rows:15,style:{width:"100%"},paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",currentPageReportTemplate:"Mostrando {first} a {last} de {totalRecords} solicitudes",rowsPerPageOptions:[5,10,25,100],scrollable:"",showGridlines:"",scrollHeight:"65vh",stripedRows:"",class:"col-12 m-auto",value:A.value.filter(e=>{var s,h;return((s=e.current_status)==null?void 0:s.status)==((h=$.value)==null?void 0:h.name)}),tableStyle:"min-width: 50rem;",filters:P.value},{header:m(()=>[t("div",Nt,[t("h4",Pt,[St,c(),t("b",zt,[c("PQRS "),t("b",null,a(U(F).params.section),1)])]),t("div",Rt,[r(Y,{class:"",modelValue:P.value.global.value,"onUpdate:modelValue":i[9]||(i[9]=e=>P.value.global.value=e),placeholder:"Buscar Solicitud..."},null,8,["modelValue"]),r(z,{onClick:i[10]||(i[10]=e=>U(le).visible_add_pqr=!0),label:"Nueva PQR",severity:"help"})])])]),default:m(()=>[(l(!0),o(I,null,ee(se(ne.value),e=>(l(),te(ce,{header:e.columnName,style:f(`min-width:${e.size}`),field:e.columnValue,class:"my-0 py-0"},{body:m(s=>{var h,x,V;return[e.columnType=="date"?(l(),o("h6",Ut,a(((h=s.data[e.columnValue])==null?void 0:h.split("-").reverse().join("-"))||"---------"),1)):n("",!0),e.columnType=="max-content"?(l(),o("h6",{key:1,style:f(e.columnType=="max-content"?"min-width: max-content":""),class:"m-0 p-0"},a(s.data[e.columnValue]||"---------"),5)):n("",!0),e.columnType=="other"?(l(),o("h6",Dt,a(s.data[e.columnValue]||"---------"),1)):n("",!0),e.columnType=="rating"?(l(),o("h6",$t,[s.data[e.columnValue]>0?(l(),te(de,{key:0,cancel:!1,readonly:"",modelValue:s.data[e.columnValue],"onUpdate:modelValue":R=>s.data[e.columnValue]=R},null,8,["modelValue","onUpdate:modelValue"])):n("",!0)])):n("",!0),e.columnType=="money"?(l(),o("h6",{key:4,style:f(e.columnType=="max-content"?"min-width: max-content":""),class:"m-0 p-0"},a(y.formatoPesosColombianos(s.data[e.columnValue])||"---------"),5)):n("",!0),e.columnValue=="current_status"?(l(),o("div",It,[r(g,{style:f([{color:"white"},`background-color:${(x=s.data[e.columnValue])==null?void 0:x.color}`])},{default:m(()=>{var R;return[c(a(((R=s.data[e.columnValue])==null?void 0:R.status)||"---------"),1)]}),_:2},1032,["style"]),t("b",null,a(((V=s.data[e.columnValue])==null?void 0:V.timestamp)||"---------"),1)])):n("",!0),e.columnValue=="channel"?(l(),o("div",Lt,[r(g,{style:f([{color:"white"},`background-color:${s.data.channel_color}`])},{default:m(()=>[c(a(s.data[e.columnValue]||"---------"),1)]),_:2},1032,["style"])])):n("",!0),e.columnValue=="tag_name"?(l(),o("div",jt,[r(g,{style:f([{color:"white"},`background-color:${s.data.tag_color}`])},{default:m(()=>[c(a(s.data[e.columnValue]),1)]),_:2},1032,["style"])])):n("",!0)]}),_:2},1032,["header","style","field"]))),256)),r(me,{class:"my-0 py-0 px-0 mx-0",style:{},header:"Interactuar"},{body:m(e=>[t("div",Bt,[r(z,{onClick:s=>oe(e.data),label:"Gestionar",severity:"help",icon:"pi pi-check p-0",class:"my-0 py-2"},null,8,["onClick"])])]),_:1})]),_:1},8,["value","filters"]),r(_e,{onReload:i[11]||(i[11]=e=>S())})],64)}}},Ht=ve(Ft,[["__scopeId","data-v-434a6fe3"]]);export{Ht as default};
