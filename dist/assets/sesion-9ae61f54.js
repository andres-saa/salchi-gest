import{_ as P,x as L,r as f,i as k,G as N,a as w,o as l,c as u,b as t,g as p,w as E,I,n as B,u as y,U as S,J as D,T as V,f as z,t as _,F as C,d as j,A as M,L as $,D as O,m as R}from"./index-7ca17fce.js";import{f as A}from"./formatoPesos-2a38d2e7.js";import{a as T,u as F}from"./site-b02e2024.js";/* empty css                                                                    */import{u as J}from"./ventas-2cc08bb2.js";const U={class:"container shadow-3 col-12",style:{"border-radius":"0.5rem","background-color":"white",height:"100%",position:"relative",overflow:""}},q=["src"],G={key:0,style:{width:"100%",display:"flex","justify-content":"center","align-items":"center","aspect-ratio":"1 / 1","background-color":"rgb(255, 255, 255)","object-fit":"contain","border-radius":"0.5rem"}},H={class:"texto",style:{}},W={style:{display:"flex",gap:"1rem",height:"100%","flex-direction":"column","justify-content":"space-between"}},K={style:{display:"flex","justify-content":"space-between","align-items":"center"}},Q={style:{"text-transform":"uppercase"}},X=["v-lazy"],Y={style:{display:"flex","justify-content":"space-between","align-items":"c"}},Z={style:{display:"flex","align-items":"center",gap:"1rem"}},tt={class:"text-xl"},et={__name:"TarjetaMenu",props:{product:{type:Object,default:{}},index:{type:Number,default:12}},setup(x){const c=T(),d=L(),m=s=>{c.addProductToCart(s),d.add({severity:"success",summary:"Exito",detail:"Producto agregado al carrito",life:3e3})},r=f(!1),g=()=>{r.value=!0},h=s=>{c.setCurrentProduct(s),c.setVisible("currentProduct",!0)},o=x;k(()=>{const s=new IntersectionObserver(e=>{e.forEach(a=>{if(a.isIntersecting){const i=a.target;i.src=i.dataset.src,r.value[i.dataset.index]=!0,s.unobserve(i)}})},{threshold:.1});document.querySelectorAll("img.lazy").forEach((e,a)=>{e.dataset.index=a,s.observe(e)})});const n=N(()=>o.product.product_description.substring(0,100)+"...");return(s,e)=>{var v;const a=w("ProgressSpinner"),i=w("Button");return l(),u("div",U,[t("div",{class:"imagen",style:{display:"flex",overflow:"hidden","align-items":"center"},onClick:e[0]||(e[0]=b=>h(o.product))},[p(V,{name:"fade"},{default:E(()=>[I(t("img",{onLoad:g,class:B(r.value?"cargado":"sin-cargar"),style:{width:"100%","aspect-ratio":"1 / 1","border-radius":"0.5rem",cursor:"pointer","background-color":"rgb(255, 255, 255)","object-fit":"contain"},src:`${y(S)}/read-photo-product/${o.product.img_identifier}/600`,alt:""},null,42,q),[[D,r.value]])]),_:1}),r.value?z("",!0):(l(),u("div",G,[p(a,{style:{width:"60px",height:"60px"},strokeWidth:"8",animationDuration:".2s","aria-label":"Custom ProgressSpinner"})]))]),t("div",H,[t("div",W,[t("div",K,[t("span",null,[t("b",Q,_(o.product.product_name),1)]),(l(),u(C,null,j([1],b=>t("img",{class:"character",style:{width:"6rem"},"v-lazy":`/images/characters/${o.index}.png`,alt:""},null,8,X)),64))]),t("span",null,_((v=n.value)==null?void 0:v.toLocaleLowerCase()),1),t("div",Y,[p(i,{icon:"pi pi-heart text-2xl",text:"",rounded:"",style:{color:"red"}}),t("div",Z,[t("span",tt,[t("b",null,_(y(A)(o.product.price)),1)])])])])]),p(i,{style:{position:"absolute",right:"-1rem",top:"-1rem"},onClick:e[1]||(e[1]=b=>m(o.product)),severity:"danger",rounded:"",icon:"pi pi-plus text-xl fw-100"})])}}},st=P(et,[["__scopeId","data-v-7bc338d1"]]),ot={class:"grid p-1 pb-8",style:{"max-width":"1024px",margin:"auto",position:"relative"}},rt={class:"text-center text-3xl col-12",style:{"font-weight":"bold",display:"flex",gap:"1rem","align-items":"center"}},at=t("div",{style:{width:"100%",height:"5px","background-color":"#ff6200"}},null,-1),nt=t("div",{style:{width:"100%",height:"5px","background-color":"#ff6200"}},null,-1),pt={__name:"sesion",setup(x){T();const c=F(),d=J(),m=f([]),r=M();k(async()=>{g(),await $()}),O(()=>r.params.category_id,async()=>{r.params.category_id&&(g(),await $())},{deep:!0});const g=async h=>{const o=c.location.site.site_id,n=r.params.category_id,s=c.restaurant;if(n&&o){d.setLoading(!0,"cargando productos");try{let e=await fetch(`${S}/products-active/category-id/${n}/site/${o}/${s}`);if(!e.ok)throw d.setLoading(!1,"cargando productos"),new Error(`HTTP error! status: ${e.status}`);d.setLoading(!1,"cargando productos");let a=await e.json();m.value=a}catch(e){d.setLoading(!1,"cargando productos"),console.error("Error fetching data: ",e)}}};return f(JSON.parse(localStorage.getItem("currentNeigborhood"))),(h,o)=>(l(),u("div",ot,[t("p",rt,[at,R(" "+_(y(r).params.menu_name)+" ",1),nt]),(l(!0),u(C,null,j(m.value,(n,s)=>(l(),u("div",{key:n.id,class:"col-12 md:col-4 lg:col-3 sm:col-6"},[p(st,{style:{width:"100%"},id:`tarjeta-${s}`,index:s+1,product:n},null,8,["id","index","product"])]))),128))]))}};export{pt as default};
