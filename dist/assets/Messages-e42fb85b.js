import{L as Be,h as d,i as le,G as j,D as q,C as Ve,I as xe,W as Fe,g as U,o as a,c as i,f,e as B,a as r,F as E,q as ne,k as m,t as M,n as y,d as de,r as Ce,K as Me,H as S,j as ce,X as G,p as Oe,m as Ne,_ as We}from"./index-ef292654.js";import{u as Pe}from"./Messages.vue_vue_type_style_index_0_scoped_107b22c0_lang-c052f23d.js";const p=A=>(Oe("data-v-107b22c0"),A=A(),Ne(),A),Qe=p(()=>r("i",{class:"pi pi-angle-down text-xl"},null,-1)),qe={key:0},Ge=["src"],Ye=["src"],Ze=["href"],Je=p(()=>r("i",{class:"pi pi-file"},null,-1)),Ke={style:{color:"white",margin:"0","font-weight":"300"}},Xe=["innerHTML"],et=["innerHTML"],tt={style:{color:"white",margin:"0","font-weight":"300",position:"absolute",bottom:".5rem",right:"1rem","min-width":"max-content",display:"flex",gap:".5rem"}},ot={style:{opacity:".5"}},at={key:0,class:"fa-solid fa-check-double",style:{color:"greenyellow"}},st={key:1,class:"fa-solid fa-check",style:{color:"greenyellow"}},it={key:2,class:"fa-solid fa-check",style:{color:"gray"}},rt={key:1,style:{position:"absolute",left:"-8px",top:"0",color:"#2f2f41"},viewBox:"0 0 8 13",height:"13",width:"8"},lt=p(()=>r("path",{opacity:"0.13",fill:"#0000000",d:"M1.533,3.568L8,12.193V1H2.812C1.042,1,0.474,2.156,1.533,3.568z"},null,-1)),nt=p(()=>r("path",{fill:"currentColor",d:"M1.533,2.568L8,11.193V0L2.812,0C1.042,0,0.474,1.156,1.533,2.568z"},null,-1)),dt=[lt,nt],ct={key:2,style:{position:"absolute",right:"-8px",top:"0",color:"#0a3744"},viewBox:"0 0 8 13",height:"13",width:"8"},ut=p(()=>r("path",{opacity:"0.13",d:"M5.188,1H0v11.193l6.467-8.625C7.526,2.156,6.958,1,5.188,1z"},null,-1)),mt=p(()=>r("path",{fill:"currentColor",d:"M5.188,0H0v11.193l6.467-8.625C7.526,1.156,6.958,0,5.188,0z"},null,-1)),_t=[ut,mt],pt={style:{display:"flex",gap:"1rem","flex-direction":"column",padding:"1rem  0rem"}},ht={key:0,style:{position:"absolute",inset:"0",background:"#00000080","z-index":"500000",display:"flex","align-items":"center","justify-content":"center",color:"#fff","font-size":"1.6rem","pointer-events":"none"}},ft={style:{position:"relative",height:"100%",width:"100%"}},vt={style:{margin:"0",color:"white","font-weight":"400"}},gt=p(()=>r("i",{class:"pi pi-angle-down text-xl p-1"},null,-1)),yt=["src","onClick"],wt=["src"],bt=["href"],kt=p(()=>r("i",{class:"pi pi-file"},null,-1)),xt=["src","onClick"],Ct=["src"],Mt=["href"],Lt=p(()=>r("i",{class:"pi pi-file"},null,-1)),$t={style:{color:"white",margin:"0","font-weight":"300"}},Tt=["innerHTML"],Et=["innerHTML"],St=["onClick"],At={style:{color:"white",margin:"0","font-weight":"300"}},Dt=["innerHTML"],Rt=["innerHTML"],It=["onClick"],Ht={style:{color:"white",margin:"0","font-weight":"300",position:"absolute",bottom:".5rem",right:"1rem","min-width":"max-content",display:"flex",gap:".5rem"}},zt={style:{opacity:".5"}},jt={key:0,class:"fa-solid fa-check-double",style:{color:"greenyellow"}},Ut={key:1,class:"fa-solid fa-check",style:{color:"greenyellow"}},Bt={key:2,class:"fa-solid fa-check",style:{color:"gray"}},Vt={key:2,style:{position:"absolute",left:"-8px",top:"0",color:"#2f2f41"},viewBox:"0 0 8 13",height:"13",width:"8"},Ft=p(()=>r("path",{opacity:"0.13",fill:"#0000000",d:"M1.533,3.568L8,12.193V1H2.812C1.042,1,0.474,2.156,1.533,3.568z"},null,-1)),Ot=p(()=>r("path",{fill:"currentColor",d:"M1.533,2.568L8,11.193V0L2.812,0C1.042,0,0.474,1.156,1.533,2.568z"},null,-1)),Nt=[Ft,Ot],Wt={key:3,style:{position:"absolute",right:"-8px",top:"0",color:"#0a3744"},viewBox:"0 0 8 13",height:"13",width:"8"},Pt=p(()=>r("path",{opacity:"0.13",d:"M5.188,1H0v11.193l6.467-8.625C7.526,2.156,6.958,1,5.188,1z"},null,-1)),Qt=p(()=>r("path",{fill:"currentColor",d:"M5.188,0H0v11.193l6.467-8.625C7.526,1.156,6.958,0,5.188,0z"},null,-1)),qt=[Pt,Qt],Gt={key:1,style:{height:"100%",width:"3rem","min-width":"3rem","aspect-ratio":"1/1","background-color":"rgb(3 88 95 / 53%)","border-radius":"50%",display:"flex","align-items":"center","justify-content":"center","text-transform":"uppercase"}},Yt={style:{margin:"0",color:"white","font-weight":"400"}},Zt={key:0,style:{"text-align":"center",opacity:"0.6"}},Jt={key:1,style:{"max-height":"60vh","overflow-y":"auto"}},Kt={key:0,style:{position:"relative","border-radius":".3rem"}},Xt=["src"],eo={key:1,style:{position:"relative"}},to=["src"],oo={key:2,style:{position:"relative"}},ao=p(()=>r("img",{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/8/87/PDF_file_icon.svg/1200px-PDF_file_icon.svg.png",style:{width:"10rem"}},null,-1)),so={style:{flex:"1 1 auto"}},io={style:{width:"100%","justify-content":"end",display:"flex"}},ro={key:0,style:{"background-color":"#00000080",position:"fixed",width:"100vw",height:"100vh",left:"0",top:"0","z-index":"1000000",display:"flex","align-items":"center","justify-content":"center",opacity:"1"}},lo={style:{"max-height":"90vh",position:"relative","max-width":"90vw"}},no=["src"],co=Be({__name:"Messages",props:{send_function:{type:Function,default:()=>{}},change_expiration:{type:Function,default:()=>{}},send_text:{type:Function,default:()=>{}}},emits:["down"],setup(A,{expose:Le}){const D=d(null),V=d(!1);Pe();function F(e){var s;Array.from(((s=e.clipboardData)==null?void 0:s.items)||[]).forEach(n=>{if(n.kind==="file"){const u=n.getAsFile();if(!u)return;_.value.push({file:u,name:u.name||`pasted-${Date.now()}.${u.type.split("/")[1]||"bin"}`,type:u.type,caption:"",preview:URL.createObjectURL(u)}),L.value=!0}})}const Y=A;le(()=>window.addEventListener("paste",F)),j(()=>window.removeEventListener("paste",F)),le(()=>{window.addEventListener("paste",F)}),j(()=>{window.removeEventListener("paste",F)});const O=d(!1),_=d([]),L=d(!1),Z=d(!1),ue=d(""),J=e=>{Z.value=!0,ue.value=`${e}`};function K(e){const t=_.value.splice(e,1);t.length&&t[0].preview&&URL.revokeObjectURL(t[0].preview)}function $e(){alert("removeAllfiles"),_.value.forEach(e=>e.preview&&URL.revokeObjectURL(e.preview)),_.value=[]}function Te(e){e.currentTarget===e.target&&(O.value=!1)}function $(e){return`${S}/files/${e.file_type}s/${e.file_id}?size=thumbnail`}function me(){_.value.forEach(e=>e.preview&&URL.revokeObjectURL(e.preview)),_.value=[]}q(L,e=>{e||me()}),j(()=>{me()});const Ee=async e=>{if(!(e.message_data.current_status_id>=3||e._marking)){e._marking=!0;try{await ce.post(`${S}/read-message/${e.message_data.id}/${h.params.restaurant_id}`,!1),e.message_data.current_status_id=3}catch(t){console.error("No se pudo marcar como leído",t)}}},Se=e=>{Y.send_text(e,l.value),V.value=!1},_e=e=>{e.preventDefault(),O.value=!1,Array.from(e.dataTransfer.files||[]).forEach(s=>{const n={file:s,name:s.name,type:s.type,caption:"",preview:""};s.type.startsWith("image/")&&(n.preview=URL.createObjectURL(s)),_.value.push(n)}),_.value.length&&(L.value=!0)},Ae=()=>{const e=[..._.value];L.value=!1,_.value.forEach(t=>t.preview&&URL.revokeObjectURL(t.preview)),_.value=[],Y.send_function(e)},De=()=>{if(!c.value)return;const e=c.value.getBoundingClientRect();w.value.forEach((t,s)=>{if(t.message_data.employer_id||t.message_data.current_status_id>=3)return;const n=c.value.children[s];if(!n)return;const u=n.getBoundingClientRect();u.top>=e.top&&u.bottom<=e.bottom&&Ee(t)})};d(!1);const h=Ve(),pe=e=>{if(!e)return"";const t=e.split(" "),s=Array.from(t[0])[0],n=t[1]?Array.from(t[1])[0]:"";return s+n},X=d(!0),w=d([]),ee=d({}),c=d(null),R=d(!1),k=d(0),te=d(""),N=d(0),he=d(20),W=d(!1),oe=d(!1),I=d(!1),ae=d({}),l=d({message_data:{id:3559,user_id:10,restaurant_id:1,content:`final del mensaje
`,created_at:"2025-05-03T02:16:30.361038+00:00",current_status_id:1,employer_id:1082,employer_name:"ANDRES FELIPE ARrECHEA",wa_id:"wamid.HBgMNTczMjI2ODkyOTg4FQIAERgSQzg4QzYyQzg0MDg0RkY2OEVDAA==",wa_timestamp:"1746238590",context_message_id:"wamid.HBgMNTczMjI2ODkyOTg4FQIAERgSNDIyNUIxQkZEMkE1MTA4RDA3AA==",local_dt:"2025-05-02T21:16:30",file_type:null,file_id:null},time:"09:16 PM",date:"02/05/2025",day_label:"hoy",contest:{message_data:{id:3490,user_id:10,restaurant_id:1,content:"fsfs",created_at:"2025-05-03T01:28:04.499413+00:00",current_status_id:1,employer_id:1082,employer_name:"ANDRES FELIPE ARrECHEA",wa_id:"wamid.HBgMNTczMjI2ODkyOTg4FQIAERgSNDIyNUIxQkZEMkE1MTA4RDA3AA==",wa_timestamp:"1746235684",context_message_id:"null",file_type:null,file_id:null,local_dt:"2025-05-02T20:28:04",time:"08:28 PM",date:"02/05/2025",day_label:"hoy"},time:"08:28 PM",date:"02/05/2025",day_label:"hoy"}});d({});const Re=e=>{V.value=!0,l.value=e},se=e=>{ae.value[e]=!ae.value[e]},H=e=>!!ae.value[e],T=e=>{if(!e)return"";let t=e.replace(/\n/g,"<br/>");return t=t.replace(/\*([^*]+)\*/g,"<strong>$1</strong>"),t},Ie=xe(()=>({position:"absolute",zIndex:"300000",height:"3rem",width:"3rem",borderRadius:"50%",bottom:"5rem",right:"2rem",backgroundColor:I.value?"rgb(33, 150, 243)":"rgba(255, 255, 255,.1)",color:"white",border:"none",padding:"0.5rem 1rem",cursor:"pointer"})),He=xe(()=>({position:"absolute",zIndex:"300000",height:"2rem",display:"flex",alignItems:"center",justifyContent:"center",width:"2rem",borderRadius:"50%",bottom:"5rem",right:"1rem",backgroundColor:"rgb(156, 39, 176)",color:"white",border:"none",padding:"0.5rem 1rem",cursor:"pointer"})),fe=e=>{if(e.message_data.file_type=="image"){const t=`${S}/files/images/${e.message_data.file_id}`;e.thumbnail=`${t}?size=thumbnail`,e.full=`${t}?size=visual`,e.currentSrc=e.thumbnail;const s=new Image;s.src=e.full,s.onload=()=>{e.currentSrc=e.full}}if(e.contest){const t=`${S}/files/images/${e.contest.message_data.file_id}`;e.contest.thumbnail=`${t}?size=thumbnail`,e.contest.full=`${t}?size=visual`,e.contest.currentSrc=e.contest.thumbnail;const s=new Image;s.src=e.contest.full,s.onload=()=>{e.contest.currentSrc=e.contest.full}}},ie=async(e=!0)=>{var s,n,u,x,P;if((s=D.value)==null||s.abort(),D.value=new AbortController,N.value=0,oe.value=!1,!h.params.user_id||!h.params.restaurant_id)return;const t=await ce.get(`${S}/conversation/${h.params.restaurant_id}/${h.params.user_id}/${N.value}/20`,!1,{signal:D.value.signal});(u=(n=t==null?void 0:t[0])==null?void 0:n.messages)==null||u.forEach(fe),w.value=((x=t==null?void 0:t[0])==null?void 0:x.messages)||[],ee.value=((P=t==null?void 0:t[0])==null?void 0:P.user)||{},await G(),X.value&&(z(),X.value=!1),await G()};q(I,e=>{e||(k.value=0)});const ze=async e=>{fe(e),console.log("fetchNewMessages",e);const t=w.value.findIndex(s=>s.message_data.wa_id===e.message_data.wa_id);t!==-1?w.value[t]=e:w.value.push(e),await G()},je=async()=>{var u;if(W.value||oe.value)return;W.value=!0;const e=c.value?c.value.scrollHeight:0,t=N.value+he.value,s=await ce.get(`${S}/conversation/${h.params.restaurant_id}/${h.params.user_id}/${t}/${he.value}`,!1),n=((u=s==null?void 0:s[0])==null?void 0:u.messages)||[];if(n.length===0)oe.value=!0;else{w.value=[...n,...w.value],N.value=t,await G();const x=c.value.scrollHeight;c.value.scrollTop=x-e}W.value=!1},ve=()=>{if(De(),!c.value)return;const{scrollTop:e,scrollHeight:t,clientHeight:s}=c.value;e<50&&je(),e+s>=t-50?(R.value=!1,I.value=!1):R.value=!0},Ue=()=>{c.value&&(c.value.scrollTo({bottom:0,behavior:"smooth"}),R.value=!1,I.value=!1),k.value=0},z=()=>{c.value&&(c.value.scrollTo({top:c.value.scrollHeight,behavior:"smooth"}),R.value=!1,I.value=!1),k.value=0};let b=null;const re=()=>{var t;if(!h.params.user_id)return;const e=`wss://sockets-service.salchimonster.com/ws/${(t=h==null?void 0:h.params)==null?void 0:t.user_id}`;b=new WebSocket(e),b.onopen=()=>{console.log("Conexión WebSocket establecida a:",e)},b.onmessage=s=>{const n=JSON.parse(s.data);s.data&&(ze(n),Y.change_expiration(!1))},b.onerror=s=>{console.error("Error en el WebSocket:",s)},b.onclose=()=>{console.warn("WebSocket cerrado. Se intentará reconectar en 5 segundos..."),setTimeout(()=>re(),5e3)}};return le(()=>{ie(),re(),c.value&&c.value.addEventListener("scroll",ve)}),j(()=>{b&&b.close(),c.value&&c.value.removeEventListener("scroll",ve)}),q(()=>h.params,()=>{X.value=!0,w.value=[],ie(),b&&b.close(),z(),re(),k.value=0}),j(()=>{var e;(e=D.value)==null||e.abort()}),Fe((e,t,s)=>{var n;(n=D.value)==null||n.abort(),s()}),q(()=>h.params,()=>{ie()}),Le({scrollToBottom:Ue,scrollToBottomNoSmooth:z,getAllFiles:()=>_.value.map(e=>e.file)}),(e,t)=>{const s=U("Button"),n=U("Textarea"),u=U("Dialog"),x=U("ProgressSpinner"),P=U("InputText");return a(),i(E,null,[f(u,{visible:V.value,"onUpdate:visible":t[4]||(t[4]=o=>V.value=o),header:"Acciones del mensaje",modal:!0,style:y([{width:"90vw",maxWidth:" 30rem"},{"background-color":"rgb(0, 1, 22)",display:"flex"}]),closable:!0,dismissableMask:!1},{default:B(()=>{var o,v,g;return[r("div",{style:y([l.value.message_data.employer_id?"background-color:#0a3744;border-radius:.5rem 0 .5rem .5rem;":"background-color:#2f2f41;border-radius:0 .5rem .5rem .5rem;",{padding:"1rem 1rem 2.5rem 1rem","overflow-wrap":"break-word","word-break":"break-word","max-width":"100%","min-width":"10rem",position:"relative",display:"flex","flex-direction":"column",gap:".5rem"}])},[f(s,{class:"options",style:{color:"white"}},{default:B(()=>[Qe]),_:1}),l.value.message_data.file_type?(a(),i(E,{key:0},[l.value.message_data.file_type==="image"?(a(),i("div",qe,[r("img",{class:"img-fluid",src:l.value.currentSrc,onClick:t[0]||(t[0]=C=>J(l.value.full)),style:{"border-radius":".3rem",width:"18rem","object-fit":"cover",cursor:"pointer"}},null,8,Ge)])):l.value.message_data.file_type==="audio"?(a(),i("audio",{key:1,src:$(l.value.message_data),controls:"",style:{width:"100%","min-width":"20rem","max-width":"100%","background-color":"white","border-radius":".5rem"}},null,8,Ye)):(a(),i("a",{key:2,href:$(l.value.message_data),target:"_blank",style:{color:"#2196f3","text-decoration":"none","align-self":"flex-start",display:"flex","align-items":"center",gap:".5rem"}},[Je,ne(" Descargar archivo ")],8,Ze))],64)):m("",!0),r("h6",Ke,[H(l.value.message_data.id)?(a(),i("span",{key:1,innerHTML:T(l.value.message_data.content)},null,8,et)):(a(),i("span",{key:0,innerHTML:T(((o=l.value.message_data.content)==null?void 0:o.substring(0,200))+(((v=l.value.message_data.content)==null?void 0:v.length)>200?"…":""))},null,8,Xe)),((g=l.value.message_data.content)==null?void 0:g.length)>200?(a(),i("button",{key:2,onClick:t[1]||(t[1]=C=>se(e.message.message_data.id)),style:{background:"none",border:"none",color:"#2196f3",cursor:"pointer",padding:"0 .5rem"}}," Ver "+M(H(l.value.message_data.id)?"menos":"más"),1)):m("",!0)]),r("h6",tt,[r("span",ot,M(l.value.time),1),l.value.message_data.current_status_id==3&&l.value.message_data.employer_id?(a(),i("i",at)):l.value.message_data.current_status_id==2&&l.value.message_data.employer_id?(a(),i("i",st)):l.value.message_data.current_status_id==1&&l.value.message_data.employer_id?(a(),i("i",it)):m("",!0)]),l.value.message_data.employer_id?(a(),i("svg",ct,_t)):(a(),i("svg",rt,dt))],4),r("div",pt,[f(n,{modelValue:te.value,"onUpdate:modelValue":t[2]||(t[2]=C=>te.value=C),autoResize:"",rows:"4",placeholder:"Escribe un mensaje…",style:{width:"100%","background-color":""}},null,8,["modelValue"]),f(s,{label:"Responder",icon:"pi pi-check",severity:"info",onClick:t[3]||(t[3]=C=>Se(te.value))})])]}),_:1},8,["visible"]),r("div",{style:{height:"100%",position:"relative",display:"flex","justify-content":"center"},onDragover:t[7]||(t[7]=Me(()=>{},["prevent"])),onDragenter:t[8]||(t[8]=o=>O.value=!0),onDragleave:Te,onDrop:_e},[O.value?(a(),i("div",ht," Suelte aquí ")):m("",!0),W.value?(a(),de(x,{key:1,style:{width:"50px",height:"50px",position:"absolute","z-index":"100",color:"white"},strokeWidth:"8",fill:"transparent",animationDuration:".3s","aria-label":"Custom ProgressSpinner"})):m("",!0),r("div",ft,[r("div",{ref_key:"messagesContainer",ref:c,style:{padding:"1rem",display:"flex","flex-direction":"column",gap:"0rem","overflow-y":"auto","max-height":"100%","padding-bottom":"4rem"}},[(a(!0),i(E,null,Ce(w.value,o=>{var v,g,C,ge,ye,we,be,ke;return a(),i("div",{key:o.message_data.id},[r("div",{class:"message",style:y([o.message_data.employer_id?"justify-content: end;":"justify-content: start;",{width:"100%",display:"flex",gap:"1rem","padding-bottom":"1rem"}])},[o.message_data.employer_id?m("",!0):(a(),i("div",{key:0,style:y([`background-color:${(v=ee.value)==null?void 0:v.color}`,{height:"100%",width:"3rem","aspect-ratio":"1/1","border-radius":"50%",display:"flex","align-items":"center","justify-content":"center","text-transform":"uppercase"}])},[r("h5",vt,M(pe((g=ee.value)==null?void 0:g.name)),1)],4)),r("div",{style:y([o.message_data.employer_id?"background-color:#0a3744;border-radius:.5rem 0 .5rem .5rem;":"background-color:#2f2f41;border-radius:0 .5rem .5rem .5rem;",{padding:"3rem 1rem 2.5rem 1rem","overflow-wrap":"break-word","word-break":"break-word","max-width":"60%","min-width":"10rem",position:"relative",display:"flex","flex-direction":"column",gap:".5rem"}])},[f(s,{class:"options",style:{color:"white"},onClick:Q=>Re(o)},{default:B(()=>[gt]),_:2},1032,["onClick"]),o.message_data.file_type?(a(),i(E,{key:0},[o.message_data.file_type==="image"?(a(),i("img",{key:0,class:"img-fluid",src:o.currentSrc,onClick:Q=>J(o.full),style:{"max-width":"38rem","border-radius":".3rem",width:"18rem","object-fit":"cover",cursor:"pointer"}},null,8,yt)):o.message_data.file_type==="audio"?(a(),i("audio",{key:1,src:$(o.message_data),controls:"",style:{width:"100%","min-width":"20rem","max-width":"100%","background-color":"white","border-radius":".5rem"}},null,8,wt)):(a(),i("a",{key:2,href:$(o.message_data),target:"_blank",style:{color:"#2196f3","text-decoration":"none","align-self":"flex-start",display:"flex","align-items":"center",gap:".5rem"}},[kt,ne(" Descargar archivo ")],8,bt))],64)):m("",!0),o.contest?(a(),i("div",{key:1,class:"message",style:y([o.message_data.employer_id?"justify-content: end;":"justify-content: start;",{width:"100%",display:"flex",gap:"1rem"}])},[r("div",{style:y([o.message_data.employer_id?"background-color:#0a3744;border-radius:.5rem 0 .5rem .5rem;":"background-color:#2f2f41;border-radius:0 .5rem .5rem .5rem;",{"overflow-wrap":"break-word","word-break":"break-word","max-width":"100%","min-width":"10rem",position:"relative",display:"flex",opacity:".5","flex-direction":"column",gap:".5rem"}])},[o.contest.message_data.file_type?(a(),i(E,{key:0},[o.contest.message_data.file_type==="image"?(a(),i("img",{key:0,class:"img-fluid",src:o.contest.currentSrc,onClick:Q=>J(o.contest.full),style:{"max-width":"38rem","border-radius":".3rem",width:"18rem","object-fit":"cover",cursor:"pointer"}},null,8,xt)):o.contest.message_data.file_type==="audio"?(a(),i("audio",{key:1,src:$(o.contest.message_data),controls:"",style:{width:"100%","min-width":"20rem","max-width":"100%","background-color":"white","border-radius":".5rem"}},null,8,Ct)):(a(),i("a",{key:2,href:$(o.contest.message_data),target:"_blank",style:{color:"#2196f3","text-decoration":"none","align-self":"flex-start",display:"flex","align-items":"center",gap:".5rem"}},[Lt,ne(" Descargar archivo ")],8,Mt))],64)):m("",!0),r("h6",$t,[H(o.message_data.id)?(a(),i("span",{key:1,innerHTML:T(o.contest.message_data.content)},null,8,Et)):(a(),i("span",{key:0,innerHTML:T(((C=o.contest.message_data.content)==null?void 0:C.substring(0,200))+(((ge=o.contest.message_data.content)==null?void 0:ge.length)>30?"…":""))},null,8,Tt)),((ye=o.contest.message_data.content)==null?void 0:ye.length)>30?(a(),i("button",{key:2,onClick:Q=>se(o.contest.message_data.id),style:{background:"none",border:"none",color:"#2196f3",cursor:"pointer",padding:"0 .5rem"}},null,8,St)):m("",!0)])],4)],4)):m("",!0),r("h6",At,[H(o.message_data.id)?(a(),i("span",{key:1,innerHTML:T(o.message_data.content)},null,8,Rt)):(a(),i("span",{key:0,innerHTML:T(((we=o.message_data.content)==null?void 0:we.substring(0,200))+(((be=o.message_data.content)==null?void 0:be.length)>200?"…":""))},null,8,Dt)),((ke=o.message_data.content)==null?void 0:ke.length)>200?(a(),i("button",{key:2,onClick:Q=>se(o.message_data.id),style:{background:"none",border:"none",color:"#2196f3",cursor:"pointer",padding:"0 .5rem"}}," Ver "+M(H(o.message_data.id)?"menos":"más"),9,It)):m("",!0)]),r("h6",Ht,[r("span",zt,M(o.time),1),o.message_data.current_status_id==3&&o.message_data.employer_id?(a(),i("i",jt)):o.message_data.current_status_id==2&&o.message_data.employer_id?(a(),i("i",Ut)):o.message_data.current_status_id==1&&o.message_data.employer_id?(a(),i("i",Bt)):m("",!0)]),o.message_data.employer_id?(a(),i("svg",Wt,qt)):(a(),i("svg",Vt,Nt))],4),o.message_data.employer_id?(a(),i("div",Gt,[r("h5",Yt,M(pe(o.message_data.employer_name)),1)])):m("",!0)],4)])}),128))],512),R.value||k.value>0?(a(),de(s,{key:0,icon:"pi pi-angle-down",onClick:z,style:y(Ie.value)},null,8,["style"])):m("",!0),k.value>0?(a(),de(s,{key:1,label:k.value,onClick:z,style:y(He.value)},null,8,["label","style"])):m("",!0)]),f(u,{visible:L.value,"onUpdate:visible":t[5]||(t[5]=o=>L.value=o),header:"Archivos a enviar",modal:!0,style:y([{width:"90vw",maxWidth:"40rem"},{"background-color":"rgb(0, 1, 22)",display:"flex"}]),onDragover:t[6]||(t[6]=Me(()=>{},["prevent"])),onDrop:_e,close:$e,closable:!0,dismissableMask:!1},{footer:B(()=>[r("div",io,[f(s,{label:"Enviar",icon:"pi pi-check",severity:"success",onClick:Ae,disabled:_.value.length===0},null,8,["disabled"])])]),default:B(()=>[_.value.length===0?(a(),i("div",Zt," Arrastra archivos aquí ")):(a(),i("div",Jt,[(a(!0),i(E,null,Ce(_.value,(o,v)=>(a(),i("div",{key:v,style:{display:"flex","align-items":"center","flex-direction":"column",position:"relative",gap:"1rem","margin-bottom":"1rem",padding:"1rem"}},[o.type.startsWith("image/")?(a(),i("div",Kt,[r("img",{src:o.preview,style:{width:"30rem","box-shadow":"0 0 1rem #00000090","object-fit":"cover","border-radius":".3rem"}},null,8,Xt),f(s,{icon:"pi pi-times",severity:"danger",onClick:g=>K(v),style:{position:"absolute",width:"1.5rem",height:"1.5rem",right:"0","border-radius":".3rem"}},null,8,["onClick"])])):o.type.startsWith("audio/")?(a(),i("div",eo,[r("audio",{src:o.preview,controls:"",style:{width:"100%"}},null,8,to),f(s,{icon:"pi pi-times",severity:"danger",onClick:g=>K(v),style:{position:"absolute",width:"1.5rem",height:"1.5rem",right:"0","border-radius":".3rem"}},null,8,["onClick"])])):(a(),i("div",oo,[ao,f(s,{icon:"pi pi-times",severity:"danger",onClick:g=>K(v),style:{position:"absolute",width:"1.5rem",height:"1.5rem",right:"0","border-radius":".3rem"}},null,8,["onClick"])])),r("span",so,M(o.name),1),f(P,{modelValue:o.caption,"onUpdate:modelValue":g=>o.caption=g,placeholder:"Texto opcional…",style:{flex:"1 1 auto",width:"100%","background-color":"#ffffff20"}},null,8,["modelValue","onUpdate:modelValue"])]))),128))]))]),_:1},8,["visible"])],32),Z.value?(a(),i("div",ro,[r("div",lo,[r("img",{style:{height:"90vh","max-width":"100%"},src:ue.value},null,8,no),f(s,{onClick:t[9]||(t[9]=()=>Z.value=!1),style:{position:"absolute",right:"-1rem",top:"-1rem",border:"3px solid black"},icon:"pi pi-times",severity:"danger",rounded:""})])])):m("",!0)],64)}}}),po=We(co,[["__scopeId","data-v-107b22c0"]]);export{po as default};
