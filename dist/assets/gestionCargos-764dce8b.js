import{r,l as D,q as I,s as M,i as U,a as c,o as m,c as u,g as a,w as p,b as e,j as v,U as y,t as f,F as S,d as V}from"./index-c4b6802b.js";const A={class:"text-center my-3"},E={style:{display:"flex","flex-direction":"column",gap:".5rem"}},F={class:"m-0 p-0 mt-2"},N={class:"pl-4",style:{display:"flex",gap:"1rem","align-items":"center"}},O={class:"m-0",style:{"text-transform":"uppercase"}},j={class:"mx-auto mb-4",style:{"margin-top":"6rem","max-width":"50rem"}},G=e("h2",{class:"my-6 text-center"},[e("b",null," Gestion de cargos y accesos")],-1),q={style:{"margin-top":"3rem"}},H={class:"grid p-3",style:{"align-items":"center","justify-content":"space-between",display:"flex",gap:"1rem"}},z=e("h3",{class:"px-2"},[e("b",null,"Cargos")],-1),J=e("div",{style:{display:"flex",width:"100%","justify-content":"end","flex-wrap":"wrap",gap:"1rem","align-items":"center"}},null,-1),K={class:"m-0 p-0",style:{"text-transform":"uppercase","min-width":"max-content"}},X={__name:"gestionCargos",setup(Q){const C=r([{}]);r([]),D();const P=r([]),w=r(!1);I(()=>{$()});const _=r(null),$=()=>{_.value={global:{value:null,matchMode:M.CONTAINS}}},R=async()=>{C.value=await v.get(`${y}/get-all-rol`)},b=r(""),T=async(n,s)=>{b.value=s,w.value=!0;const o=await v.get(`${y}/get_all-permission-group-by-group`,"Cargando"),g=await v.get(`${y}/get-all-rol-by-rol-id/${n}`,"Cargando"),x=g.map(i=>i.permission_id);o.forEach(i=>{i.permissions.forEach(l=>{var h;l.enrolled=x.includes(l.id),l.permission_rol_id=(h=g.find(t=>t.permission_id==l.id))==null?void 0:h.id,console.log(l)})}),P.value=o};U(async()=>{await R()});const B=async(n,s)=>{const o={rol_id:b.value.id,permission_id:n.id,status:s,permission_rol_id:n.permission_rol_id};console.log(o),await v.put(`${y}/toggle_permision/${n.permission_rol_id||1}/${s}`,o,"Cargando")};return(n,s)=>{const o=c("InputSwitch"),g=c("Dialog"),x=c("InputText"),i=c("column"),l=c("Button"),h=c("DataTable");return m(),u("div",null,[a(g,{visible:w.value,"onUpdate:visible":s[0]||(s[0]=t=>w.value=t),style:{width:"40rem"},modal:"",header:"gestion de permisos"},{default:p(()=>[e("h5",A,[e("b",null," ACCESOS - "+f(b.value.name),1)]),(m(!0),u(S,null,V(P.value,(t,L)=>(m(),u("div",E,[e("h6",F,[e("b",null,f(t.name),1)]),(m(!0),u(S,null,V(t.permissions,d=>(m(),u("div",N,[a(o,{onChange:k=>B(d,d.enrolled),modelValue:d.enrolled,"onUpdate:modelValue":k=>d.enrolled=k,style:{"min-width":"3rem"}},null,8,["onChange","modelValue","onUpdate:modelValue"]),e("h6",O,f(d.name),1)]))),256))]))),256))]),_:1},8,["visible"]),e("div",j,[G,e("div",q,[a(h,{paginator:!0,rows:15,style:{width:"100%"},paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",currentPageReportTemplate:"Mostrando {first} a {last} de {totalRecords} Roles",rowsPerPageOptions:[5,10,25,100],scrollable:"",showGridlines:"",scrollHeight:"60vh",stripedRows:"",class:"col-12 m-auto",value:C.value,tableStyle:"",filters:_.value},{header:p(()=>[e("div",H,[z,a(x,{class:"",modelValue:_.value.global.value,"onUpdate:modelValue":s[1]||(s[1]=t=>_.value.global.value=t),placeholder:"Buscar Cargo ..."},null,8,["modelValue"])]),J]),default:p(()=>[a(i,{class:"py-2",style:{width:"80%"},header:"CARGO",field:"name"},{body:p(t=>[e("h6",K,f(t.data.name),1)]),_:1}),a(i,{class:"py-2",style:{width:"20%"},header:"Accion",field:"name"},{body:p(t=>[a(l,{onClick:L=>T(t.data.id,t.data),icon:"pi pi-eye",text:"",class:"p-0",label:"Accesos"},null,8,["onClick"])]),_:1})]),_:1},8,["value","filters"])])])])}}};export{X as default};
