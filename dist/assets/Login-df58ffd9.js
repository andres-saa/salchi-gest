import{_ as w,V as c,r as g,a as n,o as f,c as b,b as i,d as r,X as y,U as p,j as l,p as v,g as x,J as k,h as I}from"./index-9a92106e.js";const V=c(),S=e=>{const t=c();return I.get(`${p}/validate-token`,{headers:{Authorization:`Bearer ${e}`}}).then(o=>(o.data.access_token&&t.setUserData(o.data),o.data)).catch(o=>{throw console.error("Error durante la validación del token:",o),o})},U=()=>{const e=c();setInterval(async()=>{const t=e.userData.access_token;if(!t){l.push("/auth/login");return}try{await S(t)}catch(o){console.error("La sesión ha expirado o el token es inválido:",o),e.userData={},l.push("/auth/login")}},6e4)},B={setup(){const e=g({username:"",password:""});return{credentials:e,login:async()=>{const o=new URLSearchParams;o.append("username",e.value.username),o.append("password",e.value.password);try{const a=await fetch(`${p}/token-employer`,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:o});if(!a.ok)throw new Error("Network response was not ok");const d=await a.json();V.setUserData(d),U(),l.push("/actualizar-datos")}catch(a){console.error(a)}}}}},u=e=>(v("data-v-b325bc12"),e=e(),x(),e),T={style:{display:"flex",position:"relative","background-size":"cover",height:"100vh",width:"100vw",overflow:"hidden"},class:"p-0 fondo"},D=u(()=>i("img",{src:k,alt:"",style:{width:"48px"},class:"m-3"},null,-1)),z=u(()=>i("p",{class:"text-2xl",style:{"font-weight":"bold"}},"Iniciar sesión",-1));function L(e,t,o,a,d,P){const m=n("InputText"),h=n("Password"),_=n("Button");return f(),b("div",T,[i("form",{class:"col-12 m-auto",onSubmit:t[2]||(t[2]=y((...s)=>a.login&&a.login(...s),["prevent"])),style:{"max-width":"min-content",display:"flex","border-radius":"0.5rem","box-shadow":"0 0 10px rgba(0, 0, 0, 0.389)","flex-direction":"column","background-color":"rgb(255, 255, 255)","align-items":"center"}},[D,z,r(m,{class:"my-3 m-0",modelValue:a.credentials.username,"onUpdate:modelValue":t[0]||(t[0]=s=>a.credentials.username=s),type:"text",placeholder:"identificación",style:{width:"100%"}},null,8,["modelValue"]),r(h,{class:"",toggleMask:"",modelValue:a.credentials.password,"onUpdate:modelValue":t[1]||(t[1]=s=>a.credentials.password=s),placeholder:"Clave"},null,8,["modelValue"]),r(_,{size:"samll",style:{width:"100%","background-color":"rgb(255, 98, 0)",border:"none"},label:"Iniciar sesion",class:"my-3",type:"submit"})],32)])}const E=w(B,[["render",L],["__scopeId","data-v-b325bc12"]]);export{E as default};
