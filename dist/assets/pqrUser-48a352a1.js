import"./pqrsService-8ddea496.js";import{_ as O,h as s,B as W,D as X,i as Y,j as _,U as f,g as d,o as u,d as Z,e as h,u as C,a as t,f as a,q as N,t as E,c as r,n as M,k as c,p as ee,m as le}from"./index-d6f027a1.js";/* empty css                                                                */const i=U=>(ee("data-v-26a544ff"),U=U(),le(),U),te={style:{height:"auto",color:"black","background-color":"white",display:"flex","flex-direction":"column","justify-content":"end","align-items":"center"}},oe=i(()=>t("h4",null,"Hemos recibido su solicitud y ha quedado registrada con el id ",-1)),se=i(()=>t("br",null,null,-1)),ae={class:"text-center",style:{width:"auto","font-size":"3rem"}},ie={style:{height:"auto",color:"black",display:"flex","flex-direction":"column","justify-content":"end","align-items":"center"}},ne=i(()=>t("br",null,null,-1)),ue=i(()=>t("b",null,[t("p",{class:"text-center",style:{width:"auto","font-size":"3rem"}}," Listo")],-1)),de={class:"container mt-0 col-12 p-0",style:{"max-width":"",margin:"auto"}},re={class:"form",style:{width:"100%",display:"flex","flex-direction":"column",gap:"1rem"}},ce={class:"input"},ve=i(()=>t("h5",{class:"field"},"Medio",-1)),pe={class:"input"},me=i(()=>t("h5",{class:"field"},"Restaurante",-1)),_e={class:"input"},fe=i(()=>t("h5",{class:"field"},"Categoria",-1)),he={key:0,class:"input"},ye=i(()=>t("h5",{class:"field"},"Por favor clasifica tu inconveniente",-1)),be={style:{display:"flex","align-items":"center",gap:"1rem"}},ge={class:"p-0 m-0"},we={style:{display:"flex","align-items":"center",gap:"1rem"}},Ve={class:"p-0 m-0"},xe={key:1,class:"input"},ke=i(()=>t("h5",{class:"field"},"Sede",-1)),Ue={key:2,class:"input"},Se=i(()=>t("h5",{class:"field"},[N("ID de la orden ejemplo "),t("b",null,"BRE-0554")],-1)),qe={key:3,class:"input"},Ie=i(()=>t("h5",{class:"field"},"Comentarios",-1)),De={key:4,class:"input"},Ce=i(()=>t("h5",{class:"field"},"Nombre",-1)),Ne={key:5,class:"input"},Pe=i(()=>t("h5",{class:"field"},"Número de teléfono",-1)),Be={key:6,class:"input"},Ee=i(()=>t("h5",{class:"field"},"Dirección (opcional)",-1)),Re={class:"input",style:{display:"flex","justify-content":"end"}},Te={__name:"pqrUser",emits:["inFocus","reload"],setup(U,{emit:F}){const R=F,P=s({}),T=s([{}]),S=s({}),y=W();s();const H=s(!0),$=s(),b=s(!1);s([]);const g=s(!1),o=s(),v=s(),L=s([]),j=s([]),q=s(""),w=s(""),V=s(""),I=s(""),x=s("");s(null);const z=s([]),k=s();X(()=>y.visible_add_pqr,D=>{D&&(o.value=null,x.value="Sin comentarios",v.value=null,k.value=null,w.value="",V.value="",I.value="")});const Q=async()=>{var l,p,m;if(!o.value){alert("Por favor, seleccione un tipo de requerimiento.");return}if(o.value==9&&!q.value){alert("Por favor, ingrese el ID de la orden.");return}if(o.value!=8&&!S.value){alert("Por favor, Clasifica tu inconveniente");return}if(o.value!=8&&!x.value){alert("Por favor, Cuentenos lo sucedido");return}if(o.value!=8&&(!w.value||!V.value)){alert("Por favor, complete los campos obligatorios (nombre y teléfono).");return}if(!k.value){alert("Por favor, Seleccione la red");return}if(!v.value){alert("Por favor, Seleccione la sede");return}const D={data:{reques_type_id:o.value,content:x.value||"Sin comentarios",channel_id:2,rating:0,site_id:v.value||null,network_id:k.value||null,order_id:q.value||null,tag_id:((l=S.value)==null?void 0:l.id)||7,restaurant_id:P.value},user:{user_name:w.value||"",user_phone:((p=V.value)==null?void 0:p.toString())||"",user_address:I.value||"",site_id:v.value||null}};try{const n=await _.post(`${f}/create-pqr`,D);$.value=(m=n==null?void 0:n.pqr_id[0])==null?void 0:m.id,o.value==8?(g.value=!0,R("reload")):b.value=!0,H.value=!1}catch{}R("reload")},G=s([]);return Y(async()=>{j.value=await _.get(`${f}/get-all-pqrs-types`),L.value=await _.get(`${f}/sites`),z.value=await _.get(`${f}/get-all-networks`),T.value=await _.get(`${f}/get-all-pqr-tags`),G.value=await _.get(`${f}/restaurants`),o.value=8}),(D,l)=>{const p=d("Button"),m=d("Dialog"),n=d("Dropdown"),A=d("Tag"),B=d("InputText"),J=d("Textarea"),K=d("InputNumber");return u(),Z(m,{visible:C(y).visible_add_pqr,"onUpdate:visible":l[14]||(l[14]=e=>C(y).visible_add_pqr=e),style:{width:"50rem"},modal:"",class:"mx-2",header:"INGRESAR PQR"},{footer:h(()=>[t("div",Re,[a(p,{label:"Enviar",style:{"font-weight":"bold"},severity:"info",onClick:Q})])]),default:h(()=>[a(m,{closable:!1,class:"mx-4",visible:b.value,"onUpdate:visible":l[1]||(l[1]=e=>b.value=e),modal:"",style:{width:"30rem","background-color":"white"}},{default:h(()=>[t("div",te,[oe,N(),se,t("b",null,[t("p",ae,E($.value),1)]),a(p,{onClick:l[0]||(l[0]=()=>{C(y).visible_add_pqr=!1,g.value=!1,b.value=!1}),class:"m-auto",style:{"font-weight":"bold"},severity:"info",label:"Listo"})])]),_:1},8,["visible"]),a(m,{class:"mx-4",visible:g.value,"onUpdate:visible":l[3]||(l[3]=e=>g.value=e),modal:"",style:{width:"30rem","background-color":"white"}},{default:h(()=>[t("div",ie,[ne,ue,a(p,{onClick:l[2]||(l[2]=()=>{C(y).visible_add_pqr=!1,g.value=!1,b.value=!1}),class:"m-auto",style:{"font-weight":"bold"},severity:"info",label:"Listo"})])]),_:1},8,["visible"]),t("div",de,[t("div",re,[t("div",ce,[ve,a(n,{modelValue:k.value,"onUpdate:modelValue":l[4]||(l[4]=e=>k.value=e),optionValue:"id",style:{width:"100%","text-transform":"uppercase"},options:z.value.filter(e=>![4,5].includes(e.id)),optionLabel:"name"},null,8,["modelValue","options"])]),t("div",pe,[me,a(n,{modelValue:P.value,"onUpdate:modelValue":l[5]||(l[5]=e=>P.value=e),optionValue:"id",style:{width:"100%","text-transform":"uppercase"},options:G.value,optionLabel:"name"},null,8,["modelValue","options"])]),t("div",_e,[fe,a(n,{modelValue:o.value,"onUpdate:modelValue":l[6]||(l[6]=e=>o.value=e),optionValue:"id",style:{width:"100%","text-transform":"uppercase"},options:j.value.filter(e=>e.id!=8),optionLabel:"name"},null,8,["modelValue","options"])]),o.value&&o.value!=8&&o.value!=11?(u(),r("div",he,[ye,a(n,{options:T.value,modelValue:S.value,"onUpdate:modelValue":l[7]||(l[7]=e=>S.value=e),style:{width:"100%"}},{option:h(e=>[t("div",be,[a(A,{style:M([`background-color:${e.option.color}`,{height:"1.5rem","aspect-ratio":"1 / 1","border-radius":"50%"}])},null,8,["style"]),N(),t("h6",ge,E(e.option.name),1)])]),value:h(e=>[t("div",we,[a(A,{style:M([`background-color:${e.value.color}`,{height:"1.5rem","aspect-ratio":"1 / 1","border-radius":"50%"}])},null,8,["style"]),N(),t("h6",Ve,E(e.value.name),1)])]),_:1},8,["options","modelValue"])])):c("",!0),o.value?(u(),r("div",xe,[ke,a(n,{options:L.value.filter(e=>e.show_on_web||e.site_id==17||e.site_id==18),modelValue:v.value,"onUpdate:modelValue":l[8]||(l[8]=e=>v.value=e),optionValue:"site_id",optionLabel:"site_name",style:{width:"100%"}},null,8,["options","modelValue"])])):c("",!0),o.value&&o.value==9?(u(),r("div",Ue,[Se,a(B,{modelValue:q.value,"onUpdate:modelValue":l[9]||(l[9]=e=>q.value=e),style:{width:"100%"},placeholder:"Escriba el número de la orden"},null,8,["modelValue"])])):c("",!0),o.value?(u(),r("div",qe,[Ie,a(J,{modelValue:x.value,"onUpdate:modelValue":l[10]||(l[10]=e=>x.value=e),rows:"5",style:{width:"100%",resize:"none"},placeholder:"Deja tus comentarios"},null,8,["modelValue"])])):c("",!0),o.value&&o.value!=8?(u(),r("div",De,[Ce,a(B,{modelValue:w.value,"onUpdate:modelValue":l[11]||(l[11]=e=>w.value=e),style:{width:"100%"},placeholder:"Escriba su nombre por favor"},null,8,["modelValue"])])):c("",!0),o.value&&o.value!=8?(u(),r("div",Ne,[Pe,a(K,{useGrouping:!1,modelValue:V.value,"onUpdate:modelValue":l[12]||(l[12]=e=>V.value=e),style:{width:"100%"},placeholder:"Escriba su número de teléfono"},null,8,["modelValue"])])):c("",!0),o.value&&o.value!=8?(u(),r("div",Be,[Ee,a(B,{modelValue:I.value,"onUpdate:modelValue":l[13]||(l[13]=e=>I.value=e),style:{width:"100%"},placeholder:"Escriba su dirección"},null,8,["modelValue"])])):c("",!0)])])]),_:1},8,["visible"])}}},ze=O(Te,[["__scopeId","data-v-26a544ff"]]);export{ze as default};
