import{j as Q,U as W,_ as G,r as g,m as F,k as U,i as A,o as f,c as P,b as o,F as I,d as L,n as S,t as $,v as X,a as m,e as q,w as b,g as r,u as l,q as N,B as j,C as R,f as Y}from"./index-cbaa55ab.js";import{u as O}from"./site-bc4c1749.js";import{s as Z}from"./siteService-ff0dab8c.js";import{u as M,p as H}from"./ProductService-32159c14.js";import{a as D}from"./aditionalService-1df17b6a.js";import{f as ee}from"./formatoPesos-8aa989a0.js";const te=O(),oe={async getCategories(){const i=te.restaurant;try{const e=await Q.get(`${W}/categories/3/${i}`);return e.status===200?e.data:(console.error("An error occurred while fetching the ingredients:",e.status),null)}catch(e){return console.error("An error occurred while fetching the ingredients:",e),null}}};const ae={class:"barra align-items-center p-0 md:p-1",style:{"overflow-x":"auto",display:"flex","background-color":"rgba(255, 255, 255, 0.913)"}},se=["onClick"],ne={class:"text-lg",style:{"min-width":"max-content"}},ie={__name:"BarraCategorias",setup(V){const i=O(),e=g([]),a=(d,_)=>{_>=1e3?A.push("/tienda-menu/productos/adicionales"):A.push({name:"sesion",params:{menu_name:d,category_id:_}})},x=async()=>{e.value=await oe.getCategories()};F(async()=>{x()});const c=d=>X().params.category_id==d.category_id;return U(()=>i.restaurant,d=>{x(),A.push("/tienda-menu/")},{depth:!0}),(d,_)=>(f(),P("div",{class:S([e.value.length>0?"apear":"hide","shadow-3 d-flex p lg:justify-content-center align-items-center mb-5 p-0 md:p-0 m-0"]),style:{position:"sticky",top:"3rem","min-height":"3rem","min-width":"100%","z-index":"99"}},[o("div",ae,[(f(!0),P(I,null,L(e.value,p=>(f(),P("div",{key:p.id,class:"p-1"},[o("button",{onClick:u=>a(p.category_name,p.category_id),class:S([c(p)?"selected menu-button":"menu-button","p-2 text-lg titulo"]),style:{"font-weight":"400","text-transform":"uppercase","min-width":"max-content"}},[o("span",ne,$(p.category_name),1)],10,se)]))),128))])],2))}},re=G(ie,[["__scopeId","data-v-ae4a7a6c"]]),le={style:{display:"flex","flex-direction":"column",gap:"1rem"}},ce=o("span",null,"Nombre:",-1),de=o("span",null,"descripcion:",-1),ue=o("span",null,"Precio:",-1),me={class:"text-center text-2xl py-4",style:{"font-weight":"bold","text-transform":"capitalize",display:"flex","align-items":"center","justify-content":"center",gap:"1rem"}},pe={style:{"text-transform":"uppercase"}},_e={style:{"font-weight":"bold"}},ge={class:"col-12 px-0 pb-0"},ve={__name:"dialogEditProduct",setup(V){const i=g([]),e=M(),a=g([]),x=()=>{!a.value||a.value.length===0||Object.entries(a.value).forEach(([s,t])=>{t.forEach(n=>{const h=i.value.some(E=>E.items.some(T=>T.aditional_item_name.toLowerCase()===n.item_name.toLowerCase()&&T.aditional_item_price===n.item_price&&T.aditional_item_type_name===n.type_name));n.status=h})})},c=s=>a.value[s].every(t=>t.status),d=(s,t)=>{a.value[s].forEach(n=>{n.status=t,_(n.item_id,s,t)})},_=(s,t,n)=>{const h=a.value[t].findIndex(E=>E.item_id===s);h!==-1&&(a.value[t][h].status=n)};U(()=>e.currentProductToEdit.id,async()=>{i.value=await D.getAditional(e.currentProductToEdit.id),a.value=await D.getAllAditionsRegistered(),x()});const p=g([]),u=()=>{let s=[];for(const t in a.value)a.value.hasOwnProperty(t)&&a.value[t].forEach(n=>{n.status&&s.push(n.item_id)});p.value=s,v()},v=()=>{const s={product_id:e.currentProductToEdit.id,name:e.currentProductToEdit.product_name,price:e.currentProductToEdit.price,description:e.currentProductToEdit.product_description,category_id:e.currentProductToEdit.category_id,status:!0},t=p.value;H.updateProductInstance(s,t)};return(s,t)=>{const n=m("Button"),h=m("InputText"),E=m("Textarea"),T=m("InputNumber"),z=m("InputSwitch"),k=m("Column"),J=m("DataTable"),K=m("Dialog");return f(),q(K,{closeOnEscape:"",visible:l(e).visibles.dialogEditProduct,"onUpdate:visible":t[4]||(t[4]=y=>l(e).visibles.dialogEditProduct=y),modal:"",style:{width:"40rem"}},{footer:b(()=>[o("div",ge,[r(n,{class:"",onClick:u,severity:"success",label:"Guardar"})])]),default:b(()=>[r(n,{onClick:t[0]||(t[0]=y=>l(e).visibles.dialogEditProduct=!1),severity:"danger",style:{position:"absolute",right:"-1rem",top:"-1rem"},rounded:"",icon:"pi pi-times"}),o("div",le,[o("div",null,[ce,r(h,{modelValue:l(e).currentProductToEdit.product_name,"onUpdate:modelValue":t[1]||(t[1]=y=>l(e).currentProductToEdit.product_name=y),style:{width:"100%"}},null,8,["modelValue"])]),o("div",null,[de,r(E,{modelValue:l(e).currentProductToEdit.product_description,"onUpdate:modelValue":t[2]||(t[2]=y=>l(e).currentProductToEdit.product_description=y),rows:"3",style:{width:"100%",resize:"none"}},null,8,["modelValue"])]),o("div",null,[ue,r(T,{modelValue:l(e).currentProductToEdit.price,"onUpdate:modelValue":t[3]||(t[3]=y=>l(e).currentProductToEdit.price=y),prefix:"$",maxFractionDigits:"0",rows:"3",style:{width:"100%",resize:"none"}},null,8,["modelValue"])])]),(f(!0),P(I,null,L(a.value,(y,C)=>(f(),P("div",{class:"m-auto col-12 p-0",style:{"max-width":"600px"},key:C},[o("p",me,[o("span",null,$(C),1),r(z,{modelValue:c(C),"onUpdate:modelValue":w=>d(C,w)},null,8,["modelValue","onUpdate:modelValue"])]),r(J,{stripedRows:"",value:y,class:"p-0"},{default:b(()=>[r(k,{style:{"text-transform":"capitalize"},class:"p-0",field:"aditional_item_name",header:"Nombre"},{body:b(w=>[o("span",pe,$(w.data.item_name),1)]),_:1}),r(k,{class:"p-0",field:"aditional_item_price",header:"Precio"},{body:b(w=>[o("span",_e,$(l(ee)(w.data.item_price)),1)]),_:1}),r(k,{class:"py-0 pl-4 p-0",header:"Estado",headerStyle:"width:1rem"},{body:b(w=>[r(z,{modelValue:w.data.status,"onUpdate:modelValue":[B=>w.data.status=B,B=>_(w.data.item_id,C,B)]},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1032,["value"])]))),128))]),_:1},8,["visible"])}}};const he={class:"py-3",style:{overflow:"hidden"}},ye=["src"],fe={class:"col-12 p-0"},we={__name:"dialogDeleteProduct",setup(V){const i=g(!1),e=()=>{i.value=!0,a.value=!a.value},a=g(!1),x=g([]),c=M(),d=g([]);g(c.currentProductToDelete);const _=()=>{!d.value||d.value.length===0||Object.entries(d.value).forEach(([u,v])=>{v.forEach(s=>{const t=x.value.some(n=>n.items.some(h=>h.aditional_item_name.toLowerCase()===s.item_name.toLowerCase()&&h.aditional_item_price===s.item_price&&h.aditional_item_type_name===s.type_name));s.status=t})})},p=async u=>{await H.deleteProduct(u),c.visibles.dialogDeleteProduct=!1,location.reload()};return U(()=>c.currentProductToEdit.id,async()=>{x.value=await D.getAditional(c.currentProductToEdit.id),d.value=await D.getAllAditionsRegistered(),_()}),g([]),(u,v)=>{const s=m("Button"),t=m("Dialog");return f(),q(t,{close:i.value=!1,closeOnEscape:"",visible:l(c).visibles.dialogDeleteProduct,"onUpdate:visible":v[1]||(v[1]=n=>l(c).visibles.dialogDeleteProduct=n),modal:"",style:{width:"20rem"}},{footer:b(()=>[o("div",fe,[r(s,{style:{width:"100%"},onClick:v[0]||(v[0]=n=>p(l(c).currentProductToDelete.product_id)),severity:"danger",label:"Eliminar producto"})])]),default:b(()=>[N(" Esta seguro de eliminar "),o("b",null,$(l(c).currentProductToDelete.product_name),1),N(" ? "),o("div",he,[j(o("img",{onLoad:e,class:S([i.value&&a.value?"cargado1":i.value&&!a.value?"cargado2":"nada",""]),style:{width:"100%",height:"100%","background-color":"rgb(255, 255, 255)","object-fit":"contain","border-radius":"0.2rem"},src:`https://backend.salchimonster.com/read-product-image/300/${l(c).currentProductToDelete.product_name}`,alt:""},null,42,ye),[[R,i.value]]),j(o("div",{onLoad:e,class:S([i.value?"cargado":"sin-cargar","p-0"]),style:{width:"100%","aspect-ratio":"1 / 1","background-color":"rgb(255, 255, 255)",height:"100%","object-fit":"contain","border-radius":"0.2rem"},alt:""},null,34),[[R,!i.value]])])]),_:1},8,["close","visible"])}}},be=G(we,[["__scopeId","data-v-2893cd90"]]),xe={style:{"border-radius":"1rem",position:"relative"},class:"mx-auto mx-0 p-0 mt-6 mb-8"},Pe={class:"mx-3 my-4 mx-auto px-4",style:{"min-width":"max-content","max-width":"1024px",display:"flex","align-items":"center"}},Ee=o("span",{class:"mr-4"},[o("b",null,"SEDE")],-1),Te={style:{position:"fixed",overflow:"hidden","background-color":"white","border-radius":"0 1rem 1rem 0",left:"0",top:"12rem",display:"flex","flex-direction":"column"}},Ce={style:{display:"flex","align-items":"center",width:"2rem","flex-direction":"column"}},$e=["src"],Ve={key:0,style:{"border-top":".1rem solid white"}},Ie={__name:"MenuTienda",setup(V){const i=O(),e=g([]),a=async()=>{e.value=await Z.getSites()};return F(async()=>{a()}),(x,c)=>{const d=m("Dropdown"),_=m("router-view"),p=m("Button");return f(),P("div",xe,[r(re,{class:"m-0"}),o("div",Pe,[Ee,r(d,{modelValue:l(i).site,"onUpdate:modelValue":c[0]||(c[0]=u=>l(i).site=u),options:e.value.filter(u=>u.show_on_web),optionLabel:"site_name",class:"",style:{width:"100%"}},null,8,["modelValue","options"])]),r(_,{class:""}),r(ve,{class:"m-3"}),r(be),o("div",Te,[(f(),P(I,null,L([{name:"S",id:1,imagen:"https://www.salchimonster.com/images/logo.png"},{name:"B",id:2,imagen:"https://burgermonsterr.com/images/LOGO.png"},{name:"P",id:4,imagen:"https://papasmonster.com/images/LOGO.png"}],(u,v)=>o("div",Ce,[r(p,{size:"small",text:"",label:u.name,class:"text-white",onClick:s=>l(i).restaurant=u.id},{default:b(()=>[o("img",{style:{width:"2rem"},src:u.imagen,alt:""},null,8,$e)]),_:2},1032,["label","onClick"]),v!=2?(f(),P("span",Ve)):Y("",!0)])),64))])])}}};export{Ie as default};
