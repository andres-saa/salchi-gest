import{U as O,_ as F,f as b,g as U,r as c,o as h,c as y,d as s,a as o,F as k,b as D,n as R,t as E,h as I,u as G,i as M,j as q,w as v,k as d}from"./index-158aa09d.js";import{a as H}from"./axios-4d564c32.js";import{u as A}from"./site-cd689ac2.js";import{s as J}from"./siteService-14abc39e.js";import{u as K}from"./productStore-4c85997a.js";import{a as B}from"./aditionalService-f5903ee4.js";import{f as Q}from"./formatoPesos-2a38d2e7.js";import{p as W}from"./ProductService-1e741ec8.js";A();const X={async getCategories(){try{const a=await H.get(`${O}/categories/1`);return a.status===200?(a.data.push({category_id:1e3,category_name:"ADICIONALES",site_id:1e3}),a.data):(console.error("An error occurred while fetching the ingredients:",a.status),null)}catch(a){return console.error("An error occurred while fetching the ingredients:",a),null}}};const Y={style:{position:"sticky",top:"3rem","z-index":"999","background-color":"white"},class:"shadow-3 d-flex p lg:justify-content-center align-items-center mb-5 p-0 md:p-0 m-0"},Z={class:"align-items-center p-0 md:p-1",style:{"overflow-x":"auto",display:"flex","background-color":"rgba(255, 255, 255, 0.913)"}},ee=["onClick"],te={class:"text-lg",style:{"min-width":"max-content"}},oe={__name:"BarraCategorias",setup(P){const a=b([]),t=(p,_)=>{_>=1e3?I.push("/tienda-menu/productos/adicionales"):I.push({name:"sesion",params:{menu_name:p,category_id:_}})};U(async()=>{a.value=await X.getCategories()});const n=p=>G().params.category_id==p.category_id;return(p,_)=>{const g=c("Button");return h(),y("div",Y,[s(g,{class:"px-0",style:{position:"absolute",border:"none","background-color":"white",color:"black",left:"-0.5rem","z-index":"99",height:"100%",width:"1.7rem","border-radius":"0"},severity:"help",icon:"pi pi-angle-left text-2xl"}),s(g,{class:"px-0",style:{position:"absolute",border:"none","background-color":"white",color:"black",right:"-0.5rem","z-index":"99",height:"100%",width:"1.7rem","border-radius":"none"},severity:"help",icon:"pi pi-angle-right text-2xl"}),o("div",Z,[(h(!0),y(k,null,D(a.value,l=>(h(),y("div",{key:l.id,class:"p-1"},[o("button",{onClick:T=>t(l.category_name,l.category_id),class:R([n(l)?"selected menu-button":"menu-button","p-2 text-lg titulo"]),style:{"font-weight":"400","text-transform":"uppercase","min-width":"max-content"}},[o("span",te,E(l.category_name),1)],10,ee)]))),128))])])}}},se=F(oe,[["__scopeId","data-v-d8098d69"]]),ae={style:{display:"flex","flex-direction":"column",gap:"1rem"}},ne=o("span",null,"Nombre:",-1),re=o("span",null,"descripcion:",-1),ie=o("span",null,"Precio:",-1),le={class:"text-center text-2xl",style:{"font-weight":"bold","text-transform":"capitalize",display:"flex","align-items":"center","justify-content":"center",gap:"1rem"}},de={style:{"text-transform":"uppercase"}},ce={style:{"font-weight":"bold"}},ue={class:"col-12 px-0"},pe={__name:"dialogEditProduct",setup(P){const a=b([]),t=K(),n=b([]),p=()=>{!n.value||n.value.length===0||Object.entries(n.value).forEach(([r,e])=>{e.forEach(i=>{const f=a.value.some(x=>x.items.some(V=>V.aditional_item_name.toLowerCase()===i.item_name.toLowerCase()));i.status=f})})},_=r=>n.value[r].every(e=>e.status),g=(r,e)=>{n.value[r].forEach(i=>{i.status=e,l(i.item_id,r,e)})},l=(r,e,i)=>{const f=n.value[e].findIndex(x=>x.item_id===r);f!==-1&&(n.value[e][f].status=i)};M(()=>t.currentProductToEdit.id,async()=>{a.value=await B.getAditional(t.currentProductToEdit.id),n.value=await B.getAllAditionsRegistered(),p()});const T=b([]),z=()=>{let r=[];for(const e in n.value)n.value.hasOwnProperty(e)&&n.value[e].forEach(i=>{i.status&&r.push(i.item_id)});T.value=r,N()},N=()=>{const r={product_id:t.currentProductToEdit.id,name:t.currentProductToEdit.product_name,price:t.currentProductToEdit.price,description:t.currentProductToEdit.product_description,category_id:t.currentProductToEdit.category_id,status:!0},e=T.value;W.updateProductInstance(r,e)};return(r,e)=>{const i=c("Button"),f=c("InputText"),x=c("Textarea"),V=c("InputNumber"),$=c("InputSwitch"),S=c("Column"),L=c("DataTable"),j=c("Dialog");return h(),q(j,{closeOnEscape:"",visible:d(t).visibles.dialogEditProduct,"onUpdate:visible":e[4]||(e[4]=u=>d(t).visibles.dialogEditProduct=u),modal:"",style:{width:"40rem"}},{footer:v(()=>[o("div",ue,[s(i,{onClick:z,severity:"success",label:"Guardar"})])]),default:v(()=>[s(i,{onClick:e[0]||(e[0]=u=>d(t).visibles.dialogEditProduct=!1),severity:"danger",style:{position:"absolute",right:"-1rem",top:"-1rem"},rounded:"",icon:"pi pi-times"}),o("div",ae,[o("div",null,[ne,s(f,{modelValue:d(t).currentProductToEdit.product_name,"onUpdate:modelValue":e[1]||(e[1]=u=>d(t).currentProductToEdit.product_name=u),style:{width:"100%"}},null,8,["modelValue"])]),o("div",null,[re,s(x,{modelValue:d(t).currentProductToEdit.product_description,"onUpdate:modelValue":e[2]||(e[2]=u=>d(t).currentProductToEdit.product_description=u),rows:"3",style:{width:"100%",resize:"none"}},null,8,["modelValue"])]),o("div",null,[ie,s(V,{modelValue:d(t).currentProductToEdit.price,"onUpdate:modelValue":e[3]||(e[3]=u=>d(t).currentProductToEdit.price=u),prefix:"$",maxFractionDigits:"0",rows:"3",style:{width:"100%",resize:"none"}},null,8,["modelValue"])])]),(h(!0),y(k,null,D(n.value,(u,w)=>(h(),y("div",{class:"m-auto col-12",style:{"max-width":"600px"},key:w},[o("p",le,[o("span",null,E(w),1),s($,{modelValue:_(w),"onUpdate:modelValue":m=>g(w,m)},null,8,["modelValue","onUpdate:modelValue"])]),s(L,{value:u},{default:v(()=>[s(S,{style:{"text-transform":"capitalize"},class:"p-0",field:"aditional_item_name",header:"Nombre"},{body:v(m=>[o("span",de,E(m.data.item_name),1)]),_:1}),s(S,{class:"p-0",field:"aditional_item_price",header:"Precio"},{body:v(m=>[o("span",ce,E(d(Q)(m.data.item_price)),1)]),_:1}),s(S,{class:"py-0 pl-4",header:"Estado",headerStyle:"width:1rem"},{body:v(m=>[s($,{modelValue:m.data.status,"onUpdate:modelValue":[C=>m.data.status=C,C=>l(m.data.item_id,w,C)]},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1032,["value"])]))),128))]),_:1},8,["visible"])}}},me={style:{"max-width":"1024px","border-radius":"1rem"},class:"m-auto"},_e={class:"mx-3"},he=o("span",{class:"mr-4"},[o("b",null,"SEDE")],-1),Pe={__name:"MenuTienda",setup(P){const a=A(),t=b([]);return U(async()=>{t.value=await J.getSites()}),(n,p)=>{const _=c("Dropdown"),g=c("router-view");return h(),y(k,null,[o("div",me,[o("div",_e,[he,s(_,{modelValue:d(a).site,"onUpdate:modelValue":p[0]||(p[0]=l=>d(a).site=l),options:t.value.filter(l=>l.show_on_web),optionLabel:"site_name",class:"mb-4",style:{width:"100%","max-width":"20rem"}},null,8,["modelValue","options"])]),s(se,{class:"mx-4"}),s(g)]),s(pe)],64)}}};export{Pe as default};
