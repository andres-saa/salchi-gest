import{l as L,r as b,a as l,o as U,g as B,h as n,i as t,d as e,u as h,j as k,t as y,I as M,_ as j,H as q,q as H,aa as O,b as G,w as I,k as K,p as Y,m as J,B as Q,C as W}from"./index-e0d1eab6.js";import{u as N,a as E}from"./dataToInteract-48aed863.js";import{v as P}from"./videoTrainingService-c8ddedc6.js";const X={style:{height:"100%"}},Z=e("h6",null,"Nombre de la nueva escuela",-1),ee=e("h6",null,"Descripcion u objetivo",-1),te={__name:"dialogToAddSesion",emits:["update"],setup(w,{emit:_}){const g=_,p=L(),r=N(),o=b({}),m=async()=>{const d={...o.value,created_by:p.rawUserData.id};await P.createSesion(d),r.addSesion=!1,g("update")};return(d,a)=>{const S=l("InputText"),v=l("Textarea"),C=l("Button"),D=l("Dialog");return U(),B(D,{visible:h(r).addSesion,"onUpdate:visible":a[2]||(a[2]=c=>h(r).addSesion=c),class:"p-0 m-3",header:"Registrar nueva escuela",style:{width:"30rem"},modal:""},{footer:n(()=>[t(C,{class:"m-0",onClick:m,severity:"help",label:"Crear escuela"})]),default:n(()=>[e("div",X,[Z,t(S,{modelValue:o.value.name,"onUpdate:modelValue":a[0]||(a[0]=c=>o.value.name=c),style:{width:"100%"}},null,8,["modelValue"]),ee,t(v,{modelValue:o.value.description,"onUpdate:modelValue":a[1]||(a[1]=c=>o.value.description=c),style:{width:"100%",resize:"none"},rows:"4"},null,8,["modelValue"])])]),_:1},8,["visible"])}}},se={style:{height:"100%"}},oe=e("br",null,null,-1),ae={__name:"dialogToDeletesesion",emits:["update"],setup(w,{emit:_}){const g=_;L();const p=N(),r=E();b({});const o=async()=>{const m=r.sesionToDelete.sesion_id;await P.deleteSesion(m),p.deleteSesion=!1,g("update")};return(m,d)=>{const a=l("Button"),S=l("Dialog");return U(),B(S,{visible:h(p).deleteSesion,"onUpdate:visible":d[0]||(d[0]=v=>h(p).deleteSesion=v),class:"p-0 m-3",header:"Registrar nueva escuela",style:{width:"30rem"},modal:""},{footer:n(()=>[t(a,{icon:"pi pi-trash",class:"m-0",onClick:o,severity:"danger",label:"Eliminar escuela"})]),default:n(()=>{var v;return[e("div",se,[e("h6",null,[k("Seguro que desea borrar la escuela "),oe,k(),e("b",null,y((v=h(r).sesionToDelete)==null?void 0:v.sesion_name),1),k(" ? ")])])]}),_:1},8,["visible"])}}},ne={style:{height:"100%"}},ie=e("h6",null,"Nombre de la escuela",-1),le=e("h6",null,"Descripcion u objetivo",-1),de={__name:"dialogToEditSesion",emits:["update"],setup(w,{emit:_}){const g=E(),p=_;L();const r=N(),o=b({...g.sesionToUpdate});M(()=>g.sesionToUpdate,d=>{o.value={...d}},{deep:!0}),b({});const m=async()=>{const d=o.value.sesion_id,a={name:o.value.sesion_name,description:o.value.description};await P.updateSesion(d,a),r.updateSesion=!1,p("update")};return(d,a)=>{const S=l("InputText"),v=l("Textarea"),C=l("Button"),D=l("Dialog");return U(),B(D,{visible:h(r).updateSesion,"onUpdate:visible":a[2]||(a[2]=c=>h(r).updateSesion=c),class:"p-0 m-3",header:"Actualizar escuela",style:{width:"30rem"},modal:""},{footer:n(()=>[t(C,{class:"m-0",onClick:m,severity:"warning",label:"Actualizar escuela"})]),default:n(()=>[e("div",ne,[ie,t(S,{modelValue:o.value.sesion_name,"onUpdate:modelValue":a[0]||(a[0]=c=>o.value.sesion_name=c),style:{width:"100%"}},null,8,["modelValue"]),le,t(v,{modelValue:o.value.description,"onUpdate:modelValue":a[1]||(a[1]=c=>o.value.description=c),style:{width:"100%",resize:"none"},rows:"4"},null,8,["modelValue"])])]),_:1},8,["visible"])}}};const f=w=>(Y("data-v-d3124c7a"),w=w(),J(),w),re={class:"container py-2 px-2"},ce={class:"page-hero"},ue={class:"page-hero__content"},_e={class:"title-wrap"},pe=f(()=>e("i",{class:"fa-solid fa-school"},null,-1)),me=f(()=>e("h2",null,[e("b",null,"Administrar Escuelas")],-1)),ve={class:"actions-wrap"},he={class:"p-input-icon-left search-input"},fe=f(()=>e("i",{class:"pi pi-search"},null,-1)),ge=f(()=>e("div",{class:"hero-accent"},null,-1)),ye={class:"video-frame"},be=["src"],we={class:"table-card shadow-2"},Se={class:"empty-state"},Te=f(()=>e("i",{class:"fa-solid fa-graduation-cap bounce"},null,-1)),xe=f(()=>e("p",null,[e("b",null,"Sin escuelas todavía")],-1)),ke=f(()=>e("p",{class:"muted"},"Crea tu primera escuela para comenzar.",-1)),Ce={class:"name-cell"},De={class:"name-text"},Ve={class:"name-actions"},Ue={class:"desc-cell"},$e=f(()=>e("i",{class:"fa-regular fa-message"},null,-1)),Ie={class:"truncate"},Be={class:"datetime-stack"},Ne=f(()=>e("i",{class:"fa-regular fa-calendar-days mr-2"},null,-1)),Pe=f(()=>e("i",{class:"fa-regular fa-clock mr-2"},null,-1)),Re={class:"creator-cell"},Le={class:"avatar"},Ee={__name:"training_video_sesion",setup(w){const _=N(),g=E();q();const p=b([]),r=b(!1),o=b({}),m=b({global:{value:null,matchMode:Q.CONTAINS}}),d=async()=>{p.value=await P.getSesions()},a=u=>{g.sesionToDelete={...u},_.deleteSesion=!0},S=u=>{g.sesionToUpdate={...u},_.updateSesion=!0},v=(u,i)=>{W.push({name:"video-training-sequence-admin",params:{sesion_id:i,sesion_name:u}})},C=(u="")=>u.replace("watch?v=","embed/"),D=u=>{o.value=u,r.value=!0},c=(u="")=>u.split(" ").filter(Boolean).slice(0,2).map(i=>{var T;return(T=i[0])==null?void 0:T.toUpperCase()}).join("");return H(async()=>{d()}),(u,i)=>{const T=l("Tag"),z=l("InputText"),x=l("Button"),A=l("Dialog"),V=l("Column"),F=l("DataTable"),$=O("tooltip");return U(),G("div",re,[t(te,{onUpdate:d}),t(ae,{onUpdate:d}),t(de,{onUpdate:d}),e("section",ce,[e("div",ue,[e("div",_e,[pe,me,t(T,{class:"ml-2",severity:"success"},{default:n(()=>[k(y(p.value.length)+" activas",1)]),_:1})]),e("div",ve,[e("span",he,[fe,t(z,{modelValue:m.value.global.value,"onUpdate:modelValue":i[0]||(i[0]=s=>m.value.global.value=s),placeholder:"Buscar escuela, creador, fecha…"},null,8,["modelValue"])]),t(x,{label:"Nueva Escuela",icon:"fa-solid fa-plus",severity:"help",onClick:i[1]||(i[1]=s=>h(_).addSesion=!0)})])]),ge]),t(A,{visible:r.value,"onUpdate:visible":i[2]||(i[2]=s=>r.value=s),class:"p-0 m-3 modern-dialog",header:"Reproductor de video",modal:"",style:{width:"min(90vw, 64rem)"}},{default:n(()=>[e("div",ye,[e("iframe",{class:"p-0",width:"100%",style:{"aspect-ratio":"16 / 9"},src:C(o.value.video_link),title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",referrerpolicy:"strict-origin-when-cross-origin",allowfullscreen:""},null,8,be)])]),_:1},8,["visible"]),e("div",we,[t(F,{value:p.value,dataKey:"sesion_id",paginator:!0,rows:15,rowsPerPageOptions:[5,10,25,100],scrollable:"",showGridlines:"",scrollHeight:"65vh",stripedRows:"",tableStyle:"min-width: 64rem;",filters:m.value,"onUpdate:filters":i[4]||(i[4]=s=>m.value=s),filterDisplay:"menu",globalFilterFields:["sesion_name","description","created_date","created_time","creator_name","sesion_id"],paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",currentPageReportTemplate:"Mostrando {first} a {last} de {totalRecords} escuelas",class:"col-12 m-auto"},{empty:n(()=>[e("div",Se,[Te,xe,ke,t(x,{label:"Crear escuela",icon:"fa-solid fa-plus",severity:"success",onClick:i[3]||(i[3]=s=>h(_).addSesion=!0)})])]),default:n(()=>[t(V,{header:"ID",field:"sesion_id",class:"px-4",style:{"min-width":"8rem"}},{body:n(({data:s})=>[t(T,{severity:"info"},{default:n(()=>[k("#"+y(s.sesion_id),1)]),_:2},1024)]),_:1}),t(V,{header:"Nombre",field:"sesion_name",class:"px-4",style:{"min-width":"22rem"}},{body:n(({data:s})=>[e("div",Ce,[e("h6",De,y((s.sesion_name||"").toLowerCase()),1),e("div",Ve,[I(t(x,{text:"",severity:"help",icon:"fa-solid fa-eye",onClick:R=>v(s.sesion_name,s.sesion_id)},null,8,["onClick"]),[[$,"Ver escuela",void 0,{bottom:!0}]]),I(t(x,{text:"",icon:"fa-solid fa-pencil",onClick:R=>S(s)},null,8,["onClick"]),[[$,"Editar",void 0,{bottom:!0}]]),I(t(x,{text:"",severity:"danger",icon:"fa-solid fa-trash",onClick:R=>a(s)},null,8,["onClick"]),[[$,"Eliminar",void 0,{bottom:!0}]]),s.video_link?I((U(),B(x,{key:0,text:"",severity:"success",icon:"fa-solid fa-play",onClick:R=>D(s)},null,8,["onClick"])),[[$,"Reproducir video",void 0,{bottom:!0}]]):K("",!0)])])]),_:1}),t(V,{header:"Descripción",field:"description",class:"px-4",style:{"min-width":"28rem"}},{body:n(({data:s})=>[e("div",Ue,[$e,e("span",Ie,y((s.description||"").toLowerCase()),1)])]),_:1}),t(V,{header:"Fecha & Hora",class:"px-4",style:{"min-width":"16rem"}},{body:n(({data:s})=>[e("div",Be,[t(T,{severity:"warning",class:"mb-2"},{default:n(()=>[Ne,k(" "+y(s.created_date),1)]),_:2},1024),t(T,{severity:"secondary"},{default:n(()=>[Pe,k(" "+y(s.created_time),1)]),_:2},1024)])]),_:1}),t(V,{header:"Creador",field:"creator_name",class:"px-4",style:{"min-width":"16rem"}},{body:n(({data:s})=>[e("div",Re,[e("span",Le,y(c(s.creator_name)),1),e("h6",null,y(s.creator_name),1)])]),_:1})]),_:1},8,["value","filters"])]),t(x,{class:"fab",icon:"fa-solid fa-plus",label:"Nueva",severity:"help",onClick:i[5]||(i[5]=s=>h(_).addSesion=!0)})])}}},Me=j(Ee,[["__scopeId","data-v-d3124c7a"]]);export{Me as default};
