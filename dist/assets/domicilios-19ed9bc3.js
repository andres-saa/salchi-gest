import{_ as U,r,v as k,k as b,h as C,a,o as D,c as I,d as l,w as y,b as i,n as B,U as g,p as E,g as T,q as R,i as $}from"./index-3dce908f.js";const c=u=>(E("data-v-40cabb20"),u=u(),T(),u),L={class:"col-12 p-2"},j=c(()=>i("p",{class:"text-4xl text-center px-4",style:{"font-weight":"bold","margin-top":"6rem"}},[i("i",{class:"fa-solid fa-truck-arrow-right"}),R(" Domicilios ")],-1)),q={class:"p-fluid"},A={class:"p-field"},O=c(()=>i("label",{for:"name"},"Nombre del Barrio",-1)),P={class:"p-field"},z=c(()=>i("label",{for:"delivery_price"},"Precio de Domicilio",-1)),G={class:"p-field"},J=c(()=>i("label",{for:"site"},"Sede",-1)),M={class:"p-field"},F=c(()=>i("label",{for:"city"},"Ciudad",-1)),H={style:{"max-width":"700px"},class:"m-auto"},K={style:{display:"flex",gap:"1rem","align-items":"center"}},Q={__name:"domicilios",setup(u){const p=r([]),n=r({}),_=r(!1),s=r({neighborhood_id:0,name:"",delivery_price:0,site_id:0,city_id:0}),V=r([]);async function w(){try{if(!(await fetch(`${g}/neighborhoods`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s.value)})).ok)throw new Error("Error al crear el barrio");_.value=!1,console.log("Barrio agregado con Ã©xito")}catch(o){console.error("Error al agregar el barrio:",o)}}const m=k();b(n,(o,e)=>{o&&o.site_id!==void 0&&$.push(`/domicilios/${o.site_id}`)},{deep:!0}),b(()=>m.path,()=>{const o=m.params.site_id;f().then(e=>{p.value=e,n.value=e.filter(d=>d.site_id==o)[0]})});const f=async()=>{try{const o=await fetch(`${g}/sites`);if(o.ok)return await o.json()}catch{}};return C(async()=>{const o=m.params.site_id;f().then(e=>{p.value=e,n.value=e.filter(d=>d.site_id==o)[0]})}),(o,e)=>{const d=a("InputText"),x=a("InputNumber"),v=a("Dropdown"),h=a("Button"),S=a("Dialog"),N=a("RouterView");return D(),I("div",L,[j,l(S,{visible:_.value,"onUpdate:visible":e[5]||(e[5]=t=>_.value=t),header:"Agregar Nuevo Barrio",modal:!0,closable:!1},{footer:y(()=>[l(h,{label:"Cancelar",icon:"pi pi-times",onClick:e[4]||(e[4]=t=>_.value=!1),class:"p-button-text"}),l(h,{label:"Guardar",icon:"pi pi-check",onClick:w,class:"p-button-text"})]),default:y(()=>[i("div",q,[i("div",A,[O,l(d,{id:"name",modelValue:s.value.name,"onUpdate:modelValue":e[0]||(e[0]=t=>s.value.name=t)},null,8,["modelValue"])]),i("div",P,[z,l(x,{id:"delivery_price",modelValue:s.value.delivery_price,"onUpdate:modelValue":e[1]||(e[1]=t=>s.value.delivery_price=t),mode:"currency",currency:"USD",locale:"en-US"},null,8,["modelValue"])]),i("div",G,[J,l(v,{id:"site",modelValue:s.value.site_id,"onUpdate:modelValue":e[2]||(e[2]=t=>s.value.site_id=t),options:p.value,optionLabel:"site_name",placeholder:"Selecciona una Sede"},null,8,["modelValue","options"])]),i("div",M,[F,l(v,{id:"city",modelValue:s.value.city_id,"onUpdate:modelValue":e[3]||(e[3]=t=>s.value.city_id=t),options:V.value,optionLabel:"name",placeholder:"Selecciona una Ciudad"},null,8,["modelValue","options"])])])]),_:1},8,["visible"]),i("div",H,[i("div",K,[l(v,{style:{width:"100%"},filter:"",modelValue:n.value,"onUpdate:modelValue":e[6]||(e[6]=t=>n.value=t),options:p.value.filter(t=>t.site_id!=12&&t.site_id!=13),placeholder:"SEDE",optionLabel:"site_name",required:"true",class:B({"p-invalid":o.submitted&&!o.currentUser.position})},null,8,["modelValue","options","class"])]),l(N)])])}}},X=U(Q,[["__scopeId","data-v-40cabb20"]]);export{X as default};
