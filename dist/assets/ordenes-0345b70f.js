import{_ as A,M as H,r as U,a as j,o as l,e as E,w as m,b as e,t as a,u as o,N as C,n as G,P as W,m as f,c as n,F as w,d as v,f as p,k as J,p as Y,h as q,Y as K,q as Q,s as X,g as h}from"./index-87ceccd5.js";/* empty css                                                                    */import{u as $,a as Z}from"./xlsx-4cca7150.js";const u=T=>(Y("data-v-c0123445"),T=T(),q(),T),ee={style:{"border-radius":".3rem",overflow:"hidden"}},te=u(()=>e("div",{class:"P-0 mt-0",style:{"background-color":"var(--orange-500)"}},[e("div",{class:"header p-4",style:{display:"flex","justify-content":"space-between","align-items":"center"}},[e("div",{style:{display:"flex"}},[e("img",{class:"p-0",src:K,style:{filter:"brightness(0) invert()",width:"",height:"3rem","object-fit":"contain"},alt:""}),e("span",{style:{width:"min-content","font-weight":"bold",color:"white"}},"INVERSIONES SALCHIMONSTER")]),e("div",{style:{display:"flex","flex-direction":"column","max-width":"40%"}},[e("span",{class:"text-left text-sm",style:{"text-align":"end",width:"min-content","font-weight":"bold",color:"white"}},"TERMINOS Y CONDICIONES "),e("small",{class:"mt-2 text-left",style:{color:"white"}})])])],-1)),se={class:"P-0",style:{"background-color":"var(--gray-200)"}},ae={class:"header p-4",style:{display:"flex","justify-content":"space-between"}},le={style:{"font-weight":"bold",display:"flex","flex-direction":"column","max-width":"50%"}},ne=u(()=>e("span",{class:"text-xl mb-2",style:{width:"min-content","font-weight":"bold",color:"rgb(0, 0, 0)"}},"Factura",-1)),oe={style:{display:"flex",gap:"1rem","justify-content":"space-between"}},ie=u(()=>e("div",{style:{display:"flex","flex-direction":"column"}},[e("span",null," Orden No."),e("span",null," Sede"),e("span",null," Fecha"),e("span",null," Metodo de pago")],-1)),re=u(()=>e("div",{style:{display:"flex","font-weight":"200","flex-direction":"column"}},[e("span",null," |"),e("span",null," | "),e("span",null," |"),e("span",null," |")],-1)),de={style:{display:"flex","font-weight":"400","flex-direction":"column"}},ce={style:{"font-weight":"bold",display:"flex","flex-direction":"column","max-width":"40%"}},_e=u(()=>e("span",{class:"text-xl mb-2",style:{width:"min-content","font-weight":"bold",color:"rgb(0, 0, 0)"}},"Balance",-1)),pe={style:{display:"flex",gap:"1rem","justify-content":"space-between"}},he=u(()=>e("div",{style:{display:"flex","flex-direction":"column"}},[e("span",null," Subtotal"),e("span",null," Domicilio"),e("span",{class:"text-l"}," Total")],-1)),me=u(()=>e("div",{style:{display:"flex","font-weight":"200","flex-direction":"column"}},[e("span",null," | "),e("span",null," |"),e("span",null," |")],-1)),ue={style:{display:"flex","font-weight":"400","flex-direction":"column"}},ye={class:"px-2"},fe={class:"px-2"},be={class:"text-l px-2",style:{"font-weight":"bold","border-top":"1px solid"}},ge={class:"mb-4 mx-4",style:{border:"2px dotted #4b5563"}},xe=u(()=>e("h5",{class:"p-2 m-0"},[e("b",null," Notas ")],-1)),we={class:"col-12 px-2 m-0"},ve={class:"m-0"},ke=u(()=>e("p",{class:"text-xl text-center",style:{"font-weight":"bold",color:"rgb(255, 255, 255)","background-color":"#4b5563"}},"Datos del usuario",-1)),Se={class:"p-4",style:{display:"flex",gap:"1rem","justify-content":"start"}},Oe={style:{display:"flex","font-weight":"400",height:"4rem","aspect-ratio":"1 / 1","background-color":"rgb(255, 255, 255)","border-radius":"50%","flex-direction":"column","align-items":"center","justify-content":"center"}},Ce=u(()=>e("div",{style:{display:"flex","font-weight":"200","flex-direction":"column"}},[e("span",null," |"),e("span",null," | "),e("span",null," |")],-1)),Te={style:{display:"flex","flex-direction":"column"}},Ne={style:{"text-transform":"capitalize"}},De=u(()=>e("span",{style:{"font-weight":"bold"}}," Nombre :",-1)),Ie={style:{"text-transform":"capitalize"}},Re=u(()=>e("span",{style:{"font-weight":"bold"}},"DIRECCION :",-1)),je=u(()=>e("span",{style:{"font-weight":"bold"}}," TELEFONO : ",-1)),Pe={class:"P-0",style:{"background-color":"var(--white-200)"}},Fe={class:"header py-4",style:{display:"flex","justify-content":"space-between"}},Le={style:{"font-weight":"bold",display:"flex","flex-direction":"column",width:"100%"}},Me=u(()=>e("span",{class:"text-xl pl-4 mb-2",style:{width:"min-content","font-weight":"bold",color:"rgb(0, 0, 0)"}},"Productos",-1)),$e={class:"m-0 p-0"},Ee={class:"text-l p-1 text-center my-2",style:{"font-weight":"bold",width:"100","background-color":"var(--gray-200)",color:"#4b5563"}},ze={class:"px-4 py-0",style:{display:"flex",gap:"1rem",width:"100%","justify-content":"space-between"}},Ve={style:{display:"flex","flex-direction":"column","font-weight":"500"}},Be={key:0,class:"",style:{"font-weight":"bold"}},Ae={class:"ml-4"},He={key:2,class:"",style:{"font-weight":"bold"}},Ue={class:"ml-4"},Ye={key:4,class:"",style:{"font-weight":"bold"}},qe={class:"ml-4"},Ge={key:6,class:"",style:{"font-weight":"bold"}},We={class:"ml-4"},Je={key:8,class:"",style:{"font-weight":"bold"}},Ke={class:"ml-4"},Qe=u(()=>e("div",{style:{display:"flex","font-weight":"200","flex-direction":"column"}},null,-1)),Xe={style:{display:"flex","font-weight":"400","flex-direction":"column"}},Ze={key:0,class:"text-right",style:{}},et={class:"ml-4 text-right",style:{}},tt={key:2,class:"text-right",style:{}},st={class:"ml-4 text-right"},at={key:4,class:"text-right",style:{}},lt={class:"ml-4 text-right"},nt={key:5,class:"text-right",style:{}},ot={class:"ml-4 text-right"},it={key:6,class:"text-right",style:{}},rt={class:"ml-4"},dt={__name:"orderDialog",setup(T){const r=H();return U(!0),(y,F)=>{const M=j("Dialog");return l(),E(M,{style:J([{"background-color":""},{width:"40rem"}]),visible:o(r).visibleOrder.visible,"onUpdate:visible":F[0]||(F[0]=R=>o(r).visibleOrder.visible=R),modal:"",header:"Orden"},{default:m(()=>{var R,L;return[e("div",ee,[te,e("div",se,[e("div",ae,[e("div",le,[ne,e("div",oe,[ie,re,e("div",de,[e("span",null,a(o(r).visibleOrder.order.order_id),1),e("span",null,a(o(r).visibleOrder.order.site_name),1),e("span",null,a(o(r).visibleOrder.order.latest_status_timestamp.split("T")[0]),1),e("span",null,a((R=o(r).visibleOrder.order)==null?void 0:R.payment_method),1)])])]),e("div",ce,[_e,e("div",pe,[he,me,e("div",ue,[e("span",ye,a(o(C)(o(r).visibleOrder.order.total_order_price)),1),e("span",fe,a(o(C)(o(r).visibleOrder.order.delivery_price)),1),e("span",be,a(o(C)(o(r).visibleOrder.order.total_order_price+o(r).visibleOrder.order.delivery_price)),1)])])])]),e("div",ge,[xe,e("div",we,[e("h6",ve,a(o(r).visibleOrder.order.order_notes),1)])]),ke,e("div",Se,[e("div",Oe,[e("i",{class:G(["text-2xl",o(W).USER])},null,2)]),Ce,e("div",Te,[e("span",Ne,[De,f(" "+a(o(r).visibleOrder.order.user_name),1)]),e("span",Ie,[Re,f(" "+a(o(r).visibleOrder.order.user_address),1)]),e("span",null,[je,f(" "+a((L=o(r).visibleOrder.order)==null?void 0:L.user_phone),1)])])])]),e("div",Pe,[e("div",Fe,[e("div",Le,[Me,(l(!0),n(w,null,v(o(r).visibleOrder.order.products,s=>{var k,b,N,c,i,S,O,g,t,d,x,D,I,P,z,V,B;return l(),n("div",$e,[e("p",Ee,[f(a(s.name)+" ",1),e("span",null,a(o(C)(s.price)),1)]),e("div",ze,[e("div",Ve,[((k=s.salsas)==null?void 0:k.length)>0?(l(),n("span",Be," Salsas")):p("",!0),((b=s.salsas)==null?void 0:b.length)>0?(l(!0),n(w,{key:1},v(s.salsas,_=>(l(),n("span",Ae,a(_),1))),256)):p("",!0),((N=s.adiciones)==null?void 0:N.length)>0?(l(),n("span",He," Adiciones")):p("",!0),((c=s.adiciones)==null?void 0:c.length)>0?(l(!0),n(w,{key:3},v(s.adiciones,_=>(l(),n("span",Ue,a(_.name),1))),256)):p("",!0),((i=s.cambios)==null?void 0:i.length)>0?(l(),n("span",Ye," Cambios")):p("",!0),((S=s.cambios)==null?void 0:S.length)>0?(l(!0),n(w,{key:5},v(s.cambios,_=>(l(),n("span",qe,a(_.name),1))),256)):p("",!0),((O=s.toppings)==null?void 0:O.length)>0?(l(),n("span",Ge," Toppings")):p("",!0),((g=s.toppings)==null?void 0:g.length)>0?(l(!0),n(w,{key:7},v(s.toppings,_=>(l(),n("span",We,a(_==null?void 0:_.name),1))),256)):p("",!0),((t=s.acompanantes)==null?void 0:t.length)>0?(l(),n("span",Je," Acompanantes")):p("",!0),((d=s.acompanantes)==null?void 0:d.length)>0?(l(!0),n(w,{key:9},v(s.acompanantes,_=>(l(),n("span",Ke,a(_.name),1))),256)):p("",!0)]),Qe,e("div",Xe,[((x=s.salsas)==null?void 0:x.length)>0?(l(),n("span",Ze," --------------")):p("",!0),((D=s.salsas)==null?void 0:D.length)>0?(l(!0),n(w,{key:1},v(s.salsas,_=>(l(),n("span",et," ..."))),256)):p("",!0),((I=s.adiciones)==null?void 0:I.length)>0?(l(),n("span",tt," --------------")):p("",!0),((P=s.adiciones)==null?void 0:P.length)>0?(l(!0),n(w,{key:3},v(s.adiciones,_=>(l(),n("span",st,a(o(C)(_.price)),1))),256)):p("",!0),((z=s.cambios)==null?void 0:z.length)>0?(l(),n("span",at," --------------")):p("",!0),(l(!0),n(w,null,v(s.cambios,_=>(l(),n("span",lt,a(o(C)(_.price)),1))),256)),((V=s.topping)==null?void 0:V.length)>0?(l(),n("span",nt," --------------")):p("",!0),(l(!0),n(w,null,v(s.toppings,_=>(l(),n("span",ot,a(o(C)(_==null?void 0:_.price)),1))),256)),((B=s.acompanantes)==null?void 0:B.length)>0?(l(),n("span",it," --------------")):p("",!0),(l(!0),n(w,null,v(s.acompanantes,_=>(l(),n("span",rt,a(o(C)(_.price)),1))),256))])])])}),256))])])])])]}),_:1},8,["visible"])}}},ct=A(dt,[["__scopeId","data-v-c0123445"]]);const _t=T=>(Y("data-v-cb234a62"),T=T(),q(),T),pt={class:"flex flex-wrap align-items-center justify-content-between gap-2 my-5 pl-0 ml-0"},ht={class:"text-l p-0 text-900 font-bold"},mt={class:"flex p-0 flex-column md:flex-row md:justify-content-between md:align-items-center",style:{"background-color":""}},ut={class:"block mt-2 md:mt-0 py-0"},yt=_t(()=>e("template",null,null,-1)),ft={style:{"min-width":"max-content"}},bt={class:"motivo"},gt={class:"motivo"},xt={__name:"ordenes",setup(T){const r=U(null),y=H();Q(()=>{F()});const F=()=>{r.value={global:{value:null,matchMode:X.CONTAINS}}},M=s=>{switch(s){case"enviada":return"success";case"cancelada":return"danger";default:return null}},R=async()=>{var b;let s=[...y.salesReport.total_sales.orders_info];if(y.order_status=y.order_status=="enviada"?"cancelada":"enviada",await y.fetchSalesReport(),s=s.concat([...y.salesReport.total_sales.orders_info]),!((b=r==null?void 0:r.value)!=null&&b.global.value))return s;const k=r.value.global.value.trim().toLowerCase();return s.filter(N=>Object.values(N).some(c=>c&&c.toString().trim().toLowerCase().includes(k)))},L=async()=>{const k=(await R()).map(i=>{var S,O,g,t,d;return{"Orden No":i.order_id,Monto:i.total_order_price,Sede:i.site_name,Fecha:(S=i.latest_status_timestamp)==null?void 0:S.split("T")[0],Hora:(d=(t=(g=(O=i.latest_status_timestamp)==null?void 0:O.split("T")[1])==null?void 0:g.split(":"))==null?void 0:t.slice(0,2))==null?void 0:d.join(":"),Estado:i.current_status,Responsable:i.responsible?`cancelada por ${i.responsible}`:"no aplica","razon de la cancelacion":i.reason||"no aplica",Domicilio:i.delivery_price,"Metodo de pago":i.payment_method,"Nombre del usuario":i.user_name,"telefono del usuario":i.user_phone,"direccion del usuario":i.user_address}}),b=$.json_to_sheet(k),N=k.reduce((i,S)=>(Object.keys(S).forEach((O,g)=>{var d;const t=((d=S[O])==null?void 0:d.toString().length)||0;i[g]=Math.max(i[g]||10,t)}),i),[]);b["!cols"]=N.map(i=>({wch:i}));const c=$.book_new();$.book_append_sheet(c,b,"ventas"),Z(c,"reporte de ventas salchimonster.xlsx")};return(s,k)=>{var O,g;const b=j("Button"),N=j("InputText"),c=j("Column"),i=j("Tag"),S=j("DataTable");return l(),n("div",null,[h(b,{size:"small",class:"py-2",severity:"help",onClick:L,label:" Descargar reporte",icon:"pi pi-download"}),e("div",pt,[e("span",ht,"Ordenes "+a(o(y).order_status)+"s entre "+a((O=o(y).dateRange)==null?void 0:O.startDate)+" y "+a((g=o(y).dateRange)==null?void 0:g.endDate),1),e("div",mt,[e("span",ut,[h(N,{class:"p-2",modelValue:r.value.global.value,"onUpdate:modelValue":k[0]||(k[0]=t=>r.value.global.value=t),placeholder:"Buscar..."},null,8,["modelValue"])])])]),h(S,{paginator:"",value:o(y).salesReport.total_sales.orders_info,tableStyle:"min-width: 50rem",rows:10,filters:r.value,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25,100],stripedRows:"",currentPageReportTemplate:"Mostrando {first} a {last} de {totalRecords} ordenes",responsiveLayout:"scroll",scrollable:""},{default:m(()=>[yt,h(c,{field:"order_id",header:"Id",class:"py-0",headerStyle:"width:12rem;min-width:6rem"},{body:m(t=>[e("p",ft,a(t.data.order_id),1)]),_:1}),h(c,{field:"total_price",header:"Monto",class:"py-0",headerStyle:"min-width:max-content; width:5rem"},{body:m(t=>[f(a(o(C)(t.data.total_order_price)),1)]),_:1}),h(c,{field:"site_name",header:"Sede",class:"py-0",headerStyle:"min-width:max-content; width:6rem"},{body:m(t=>[f(a(o(C)(t.data.site_name)),1)]),_:1}),h(c,{field:"status.timestamp",class:"px-1 py-0",header:"Fecha",headerStyle:"width:50rem; min-width:10rem "},{body:m(t=>{var d,x,D,I,P;return[f(a((d=t.data.latest_status_timestamp)==null?void 0:d.split("T")[0])+" "+a((P=(I=(D=(x=t.data.latest_status_timestamp)==null?void 0:x.split("T")[1])==null?void 0:D.split(":"))==null?void 0:I.slice(0,2))==null?void 0:P.join(":")),1)]}),_:1}),h(c,{field:"status.timestamp",class:"px-1 py-0",header:"Hora",headerStyle:"width:50rem; min-width:max-content "},{body:m(t=>{var d,x,D,I;return[f(a((I=(D=(x=(d=t.data.latest_status_timestamp)==null?void 0:d.split("T")[1])==null?void 0:x.split(":"))==null?void 0:D.slice(0,2))==null?void 0:I.join(":")),1)]}),_:1}),h(c,{field:"status.timestamp",class:"px-1 py-0",header:"Domicilio",headerStyle:"width:6rem; min-width:max-content"},{body:m(t=>[f(" $"+a(t.data.delivery_price),1)]),_:1}),h(c,{field:"status.timestamp",class:"px-1 py-0",header:"Metodo de pago",headerStyle:"width:10rem; min-width:12rem"},{body:m(t=>[f(" $"+a(t.data.payment_method),1)]),_:1}),h(c,{field:"status.timestamp",class:"px-1 py-0",header:"Nombre del usuario",headerStyle:"width:12rem; min-width:13rem "},{body:m(t=>[f(a(t.data.user_name.slice(0,40)),1)]),_:1}),h(c,{field:"status.timestamp",class:"px-1 py-0",header:"Telefono del usuario",headerStyle:"width:12rem; min-width:11rem "},{body:m(t=>[f(a(t.data.user_phone),1)]),_:1}),h(c,{field:"status.timestamp",class:"px-1 py-0",header:"Direccion del usuario",headerStyle:"width:12rem; min-width:30rem "},{body:m(t=>[f(a(t.data.user_address),1)]),_:1}),o(y).order_status=="cancelada"?(l(),E(c,{key:0,class:"px-1 py-0",headerStyle:"width:20rem; min-width:8rem; ",field:"status.reazon",header:"Responsable"},{body:m(t=>{var d,x;return[e("span",bt,a((x=(d=t.data)==null?void 0:d.responsible)==null?void 0:x.toLowerCase())+".",1)]}),_:1})):p("",!0),o(y).order_status=="cancelada"?(l(),E(c,{key:1,class:"px-1 py-0",headerStyle:"width:30rem;min-width:40rem; ",field:"status.reazon",header:"Motivo"},{body:m(t=>{var d;return[e("span",gt,a((d=t.data.reason)==null?void 0:d.toLowerCase())+".",1)]}),_:1})):p("",!0),h(c,{header:"Status",class:"px-1 py-0"},{body:m(t=>{var d;return[h(i,{value:t.data.current_status,severity:M((d=t.data)==null?void 0:d.current_status)},null,8,["value","severity"])]}),_:1}),h(c,{class:"px-1 py-0",header:"",frozen:"",alignFrozen:"right",headerStyle:"width:0.5rem; max-width:0.5rem "},{body:m(t=>[h(b,{style:{width:"min-content"},onClick:d=>o(y).setVisibleOrder(!0,t.data),text:"",severity:"help",icon:"pi pi-eye"},null,8,["onClick"])]),_:1})]),_:1},8,["value","filters"]),h(ct)])}}},St=A(xt,[["__scopeId","data-v-cb234a62"]]);export{St as default};
