import{_ as A,H,r as U,a as D,o as n,e as $,w as h,b as e,t as l,u as i,$ as S,n as W,P as Y,q as y,c as o,F as g,d as x,f as p,s as J,p as q,h as G,a0 as K,E as Q,I as X,g as _}from"./index-cbaa55ab.js";/* empty css                                                                    */import{u as M,w as Z}from"./xlsx-4f9172c7.js";const m=O=>(q("data-v-c0123445"),O=O(),G(),O),ee={style:{"border-radius":".3rem",overflow:"hidden"}},te=m(()=>e("div",{class:"P-0 mt-0",style:{"background-color":"var(--orange-500)"}},[e("div",{class:"header p-4",style:{display:"flex","justify-content":"space-between","align-items":"center"}},[e("div",{style:{display:"flex"}},[e("img",{class:"p-0",src:K,style:{filter:"brightness(0) invert()",width:"",height:"3rem","object-fit":"contain"},alt:""}),e("span",{style:{width:"min-content","font-weight":"bold",color:"white"}},"INVERSIONES SALCHIMONSTER")]),e("div",{style:{display:"flex","flex-direction":"column","max-width":"40%"}},[e("span",{class:"text-left text-sm",style:{"text-align":"end",width:"min-content","font-weight":"bold",color:"white"}},"TERMINOS Y CONDICIONES "),e("small",{class:"mt-2 text-left",style:{color:"white"}})])])],-1)),se={class:"P-0",style:{"background-color":"var(--gray-200)"}},ae={class:"header p-4",style:{display:"flex","justify-content":"space-between"}},le={style:{"font-weight":"bold",display:"flex","flex-direction":"column","max-width":"50%"}},ne=m(()=>e("span",{class:"text-xl mb-2",style:{width:"min-content","font-weight":"bold",color:"rgb(0, 0, 0)"}},"Factura",-1)),oe={style:{display:"flex",gap:"1rem","justify-content":"space-between"}},ie=m(()=>e("div",{style:{display:"flex","flex-direction":"column"}},[e("span",null," Orden No."),e("span",null," Sede"),e("span",null," Fecha"),e("span",null," Metodo de pago")],-1)),re=m(()=>e("div",{style:{display:"flex","font-weight":"200","flex-direction":"column"}},[e("span",null," |"),e("span",null," | "),e("span",null," |"),e("span",null," |")],-1)),de={style:{display:"flex","font-weight":"400","flex-direction":"column"}},ce={style:{"font-weight":"bold",display:"flex","flex-direction":"column","max-width":"40%"}},_e=m(()=>e("span",{class:"text-xl mb-2",style:{width:"min-content","font-weight":"bold",color:"rgb(0, 0, 0)"}},"Balance",-1)),pe={style:{display:"flex",gap:"1rem","justify-content":"space-between"}},he=m(()=>e("div",{style:{display:"flex","flex-direction":"column"}},[e("span",null," Subtotal"),e("span",null," Domicilio"),e("span",{class:"text-l"}," Total")],-1)),me=m(()=>e("div",{style:{display:"flex","font-weight":"200","flex-direction":"column"}},[e("span",null," | "),e("span",null," |"),e("span",null," |")],-1)),ue={style:{display:"flex","font-weight":"400","flex-direction":"column"}},ye={class:"px-2"},fe={class:"px-2"},be={class:"text-l px-2",style:{"font-weight":"bold","border-top":"1px solid"}},ge={class:"mb-4 mx-4",style:{border:"2px dotted #4b5563"}},xe=m(()=>e("h5",{class:"p-2 m-0"},[e("b",null," Notas ")],-1)),we={class:"col-12 px-2 m-0"},ve={class:"m-0"},ke=m(()=>e("p",{class:"text-xl text-center",style:{"font-weight":"bold",color:"rgb(255, 255, 255)","background-color":"#4b5563"}},"Datos del usuario",-1)),Se={class:"p-4",style:{display:"flex",gap:"1rem","justify-content":"start"}},Oe={style:{display:"flex","font-weight":"400",height:"4rem","aspect-ratio":"1 / 1","background-color":"rgb(255, 255, 255)","border-radius":"50%","flex-direction":"column","align-items":"center","justify-content":"center"}},Te=m(()=>e("div",{style:{display:"flex","font-weight":"200","flex-direction":"column"}},[e("span",null," |"),e("span",null," | "),e("span",null," |")],-1)),Ce={style:{display:"flex","flex-direction":"column"}},Ne={style:{"text-transform":"capitalize"}},Ie=m(()=>e("span",{style:{"font-weight":"bold"}}," Nombre :",-1)),De={style:{"text-transform":"capitalize"}},Pe=m(()=>e("span",{style:{"font-weight":"bold"}},"DIRECCION :",-1)),Re=m(()=>e("span",{style:{"font-weight":"bold"}}," TELEFONO : ",-1)),je={class:"P-0",style:{"background-color":"var(--white-200)"}},Fe={class:"header py-4",style:{display:"flex","justify-content":"space-between"}},Le={style:{"font-weight":"bold",display:"flex","flex-direction":"column",width:"100%"}},Me=m(()=>e("span",{class:"text-xl pl-4 mb-2",style:{width:"min-content","font-weight":"bold",color:"rgb(0, 0, 0)"}},"Productos",-1)),$e={class:"m-0 p-0"},Ee={class:"text-l p-1 text-center my-2",style:{"font-weight":"bold",width:"100","background-color":"var(--gray-200)",color:"#4b5563"}},ze={class:"px-4 py-0",style:{display:"flex",gap:"1rem",width:"100%","justify-content":"space-between"}},Ve={style:{display:"flex","flex-direction":"column","font-weight":"500"}},Be={key:0,class:"",style:{"font-weight":"bold"}},Ae={class:"ml-4"},He={key:2,class:"",style:{"font-weight":"bold"}},Ue={class:"ml-4"},qe={key:4,class:"",style:{"font-weight":"bold"}},Ge={class:"ml-4"},We={key:6,class:"",style:{"font-weight":"bold"}},Ye={class:"ml-4"},Je={key:8,class:"",style:{"font-weight":"bold"}},Ke={class:"ml-4"},Qe=m(()=>e("div",{style:{display:"flex","font-weight":"200","flex-direction":"column"}},null,-1)),Xe={style:{display:"flex","font-weight":"400","flex-direction":"column"}},Ze={key:0,class:"text-right",style:{}},et={class:"ml-4 text-right",style:{}},tt={key:2,class:"text-right",style:{}},st={class:"ml-4 text-right"},at={key:4,class:"text-right",style:{}},lt={class:"ml-4 text-right"},nt={key:5,class:"text-right",style:{}},ot={class:"ml-4 text-right"},it={key:6,class:"text-right",style:{}},rt={class:"ml-4"},dt={__name:"orderDialog",setup(O){const r=H();return U(!0),(f,j)=>{const L=D("Dialog");return n(),$(L,{style:J([{"background-color":""},{width:"40rem"}]),visible:i(r).visibleOrder.visible,"onUpdate:visible":j[0]||(j[0]=P=>i(r).visibleOrder.visible=P),modal:"",header:"Orden"},{default:h(()=>{var P,F;return[e("div",ee,[te,e("div",se,[e("div",ae,[e("div",le,[ne,e("div",oe,[ie,re,e("div",de,[e("span",null,l(i(r).visibleOrder.order.order_id),1),e("span",null,l(i(r).visibleOrder.order.site_name),1),e("span",null,l(i(r).visibleOrder.order.latest_status_timestamp.split("T")[0]),1),e("span",null,l((P=i(r).visibleOrder.order)==null?void 0:P.payment_method),1)])])]),e("div",ce,[_e,e("div",pe,[he,me,e("div",ue,[e("span",ye,l(i(S)(i(r).visibleOrder.order.total_order_price)),1),e("span",fe,l(i(S)(i(r).visibleOrder.order.delivery_price)),1),e("span",be,l(i(S)(i(r).visibleOrder.order.total_order_price+i(r).visibleOrder.order.delivery_price)),1)])])])]),e("div",ge,[xe,e("div",we,[e("h6",ve,l(i(r).visibleOrder.order.order_notes),1)])]),ke,e("div",Se,[e("div",Oe,[e("i",{class:W(["text-2xl",i(Y).USER])},null,2)]),Te,e("div",Ce,[e("span",Ne,[Ie,y(" "+l(i(r).visibleOrder.order.user_name),1)]),e("span",De,[Pe,y(" "+l(i(r).visibleOrder.order.user_address),1)]),e("span",null,[Re,y(" "+l((F=i(r).visibleOrder.order)==null?void 0:F.user_phone),1)])])])]),e("div",je,[e("div",Fe,[e("div",Le,[Me,(n(!0),o(g,null,x(i(r).visibleOrder.order.products,s=>{var w,b,C,v,a,k,T,t,d,u,N,I,R,E,z,V,B;return n(),o("div",$e,[e("p",Ee,[y(l(s.name)+" ",1),e("span",null,l(i(S)(s.price)),1)]),e("div",ze,[e("div",Ve,[((w=s.salsas)==null?void 0:w.length)>0?(n(),o("span",Be," Salsas")):p("",!0),((b=s.salsas)==null?void 0:b.length)>0?(n(!0),o(g,{key:1},x(s.salsas,c=>(n(),o("span",Ae,l(c),1))),256)):p("",!0),((C=s.adiciones)==null?void 0:C.length)>0?(n(),o("span",He," Adiciones")):p("",!0),((v=s.adiciones)==null?void 0:v.length)>0?(n(!0),o(g,{key:3},x(s.adiciones,c=>(n(),o("span",Ue,l(c.name),1))),256)):p("",!0),((a=s.cambios)==null?void 0:a.length)>0?(n(),o("span",qe," Cambios")):p("",!0),((k=s.cambios)==null?void 0:k.length)>0?(n(!0),o(g,{key:5},x(s.cambios,c=>(n(),o("span",Ge,l(c.name),1))),256)):p("",!0),((T=s.toppings)==null?void 0:T.length)>0?(n(),o("span",We," Toppings")):p("",!0),((t=s.toppings)==null?void 0:t.length)>0?(n(!0),o(g,{key:7},x(s.toppings,c=>(n(),o("span",Ye,l(c==null?void 0:c.name),1))),256)):p("",!0),((d=s.acompanantes)==null?void 0:d.length)>0?(n(),o("span",Je," Acompanantes")):p("",!0),((u=s.acompanantes)==null?void 0:u.length)>0?(n(!0),o(g,{key:9},x(s.acompanantes,c=>(n(),o("span",Ke,l(c.name),1))),256)):p("",!0)]),Qe,e("div",Xe,[((N=s.salsas)==null?void 0:N.length)>0?(n(),o("span",Ze," --------------")):p("",!0),((I=s.salsas)==null?void 0:I.length)>0?(n(!0),o(g,{key:1},x(s.salsas,c=>(n(),o("span",et," ..."))),256)):p("",!0),((R=s.adiciones)==null?void 0:R.length)>0?(n(),o("span",tt," --------------")):p("",!0),((E=s.adiciones)==null?void 0:E.length)>0?(n(!0),o(g,{key:3},x(s.adiciones,c=>(n(),o("span",st,l(i(S)(c.price)),1))),256)):p("",!0),((z=s.cambios)==null?void 0:z.length)>0?(n(),o("span",at," --------------")):p("",!0),(n(!0),o(g,null,x(s.cambios,c=>(n(),o("span",lt,l(i(S)(c.price)),1))),256)),((V=s.topping)==null?void 0:V.length)>0?(n(),o("span",nt," --------------")):p("",!0),(n(!0),o(g,null,x(s.toppings,c=>(n(),o("span",ot,l(i(S)(c==null?void 0:c.price)),1))),256)),((B=s.acompanantes)==null?void 0:B.length)>0?(n(),o("span",it," --------------")):p("",!0),(n(!0),o(g,null,x(s.acompanantes,c=>(n(),o("span",rt,l(i(S)(c.price)),1))),256))])])])}),256))])])])])]}),_:1},8,["visible"])}}},ct=A(dt,[["__scopeId","data-v-c0123445"]]);const _t=O=>(q("data-v-b78c1243"),O=O(),G(),O),pt={class:"flex flex-wrap align-items-center justify-content-between gap-2 my-5 pl-0 ml-0"},ht={class:"text-l p-0 text-900 font-bold"},mt={class:"flex p-0 flex-column md:flex-row md:justify-content-between md:align-items-center",style:{"background-color":""}},ut={class:"block mt-2 md:mt-0 py-0"},yt=_t(()=>e("template",null,null,-1)),ft={class:"motivo"},bt={class:"motivo"},gt={__name:"ordenes",setup(O){const r=U(null),f=H();Q(()=>{j()});const j=()=>{r.value={global:{value:null,matchMode:X.CONTAINS}}},L=s=>{switch(s){case"enviada":return"success";case"cancelada":return"danger";default:return null}},P=async()=>{var b;let s=[...f.salesReport.total_sales.orders_info];if(f.order_status=f.order_status=="enviada"?"cancelada":"enviada",await f.fetchSalesReport(),s=s.concat([...f.salesReport.total_sales.orders_info]),!((b=r==null?void 0:r.value)!=null&&b.global.value))return s;const w=r.value.global.value.trim().toLowerCase();return s.filter(C=>Object.values(C).some(v=>v&&v.toString().trim().toLowerCase().includes(w)))},F=async()=>{const w=(await P()).map(a=>{var k,T,t,d,u;return{"Orden No":a.order_id,Monto:a.total_order_price,Sede:a.site_name,Fecha:(k=a.latest_status_timestamp)==null?void 0:k.split("T")[0],Hora:(u=(d=(t=(T=a.latest_status_timestamp)==null?void 0:T.split("T")[1])==null?void 0:t.split(":"))==null?void 0:d.slice(0,2))==null?void 0:u.join(":"),Estado:a.current_status,Responsable:a.responsible?`cancelada por ${a.responsible}`:"no aplica","razon de la cancelacion":a.reason||"no aplica",Domicilio:a.delivery_price,"Metodo de pago":a.payment_method,"Nombre del usuario":a.user_name,"telefono del usuario":a.user_phone,"direccion del usuario":a.user_address}}),b=M.json_to_sheet(w),C=w.reduce((a,k)=>(Object.keys(k).forEach((T,t)=>{var u;const d=((u=k[T])==null?void 0:u.toString().length)||0;a[t]=Math.max(a[t]||10,d)}),a),[]);b["!cols"]=C.map(a=>({wch:a}));const v=M.book_new();M.book_append_sheet(v,b,"ventas"),Z(v,"reporte de ventas salchimonster.xlsx")};return(s,w)=>{const b=D("Button"),C=D("InputText"),v=D("P"),a=D("Column"),k=D("Tag"),T=D("DataTable");return n(),o("div",null,[_(b,{size:"small",class:"py-2",severity:"help",onClick:F,label:" Descargar reporte",icon:"pi pi-download"}),e("div",pt,[e("span",ht,"Ordenes "+l(i(f).order_status)+"s entre "+l(i(f).dateRange.startDate.split("T")[0])+" y "+l(i(f).dateRange.endDate.split("T")[0]),1),e("div",mt,[e("span",ut,[_(C,{class:"p-2",modelValue:r.value.global.value,"onUpdate:modelValue":w[0]||(w[0]=t=>r.value.global.value=t),placeholder:"Buscar..."},null,8,["modelValue"])])])]),_(T,{paginator:"",value:i(f).salesReport.total_sales.orders_info,tableStyle:"min-width: 50rem",rows:10,filters:r.value,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25,100],stripedRows:"",currentPageReportTemplate:"Mostrando {first} a {last} de {totalRecords} ordenes",responsiveLayout:"scroll",scrollable:""},{default:h(()=>[yt,_(a,{field:"order_id",header:"Id",class:"py-0",headerStyle:"width:12rem;min-width:6rem"},{body:h(t=>[_(v,{style:{"min-width":"max-content"}},{default:h(()=>[y(l(t.data.order_id),1)]),_:2},1024)]),_:1}),_(a,{field:"total_price",header:"Monto",class:"py-0",headerStyle:"min-width:max-content; width:5rem"},{body:h(t=>[y(l(i(S)(t.data.total_order_price)),1)]),_:1}),_(a,{field:"site_name",header:"Sede",class:"py-0",headerStyle:"min-width:max-content; width:6rem"},{body:h(t=>[y(l(i(S)(t.data.site_name)),1)]),_:1}),_(a,{field:"status.timestamp",class:"px-1 py-0",header:"Fecha",headerStyle:"width:50rem; min-width:10rem "},{body:h(t=>{var d,u,N,I,R;return[y(l((d=t.data.latest_status_timestamp)==null?void 0:d.split("T")[0])+" "+l((R=(I=(N=(u=t.data.latest_status_timestamp)==null?void 0:u.split("T")[1])==null?void 0:N.split(":"))==null?void 0:I.slice(0,2))==null?void 0:R.join(":")),1)]}),_:1}),_(a,{field:"status.timestamp",class:"px-1 py-0",header:"Hora",headerStyle:"width:50rem; min-width:max-content "},{body:h(t=>{var d,u,N,I;return[y(l((I=(N=(u=(d=t.data.latest_status_timestamp)==null?void 0:d.split("T")[1])==null?void 0:u.split(":"))==null?void 0:N.slice(0,2))==null?void 0:I.join(":")),1)]}),_:1}),_(a,{field:"status.timestamp",class:"px-1 py-0",header:"Domicilio",headerStyle:"width:6rem; min-width:max-content"},{body:h(t=>[y(" $"+l(t.data.delivery_price),1)]),_:1}),_(a,{field:"status.timestamp",class:"px-1 py-0",header:"Metodo de pago",headerStyle:"width:10rem; min-width:12rem"},{body:h(t=>[y(" $"+l(t.data.payment_method),1)]),_:1}),_(a,{field:"status.timestamp",class:"px-1 py-0",header:"Nombre del usuario",headerStyle:"width:12rem; min-width:13rem "},{body:h(t=>[y(l(t.data.user_name.slice(0,40)),1)]),_:1}),_(a,{field:"status.timestamp",class:"px-1 py-0",header:"Telefono del usuario",headerStyle:"width:12rem; min-width:11rem "},{body:h(t=>[y(l(t.data.user_phone),1)]),_:1}),_(a,{field:"status.timestamp",class:"px-1 py-0",header:"Direccion del usuario",headerStyle:"width:12rem; min-width:30rem "},{body:h(t=>[y(l(t.data.user_address),1)]),_:1}),i(f).order_status=="cancelada"?(n(),$(a,{key:0,class:"px-1 py-0",headerStyle:"width:20rem; min-width:8rem; ",field:"status.reazon",header:"Responsable"},{body:h(t=>{var d;return[e("span",ft,l((d=t.data.responsible)==null?void 0:d.toLowerCase())+".",1)]}),_:1})):p("",!0),i(f).order_status=="cancelada"?(n(),$(a,{key:1,class:"px-1 py-0",headerStyle:"width:30rem;min-width:40rem; ",field:"status.reazon",header:"Motivo"},{body:h(t=>{var d;return[e("span",bt,l((d=t.data.reason)==null?void 0:d.toLowerCase())+".",1)]}),_:1})):p("",!0),_(a,{header:"Status",class:"px-1 py-0"},{body:h(t=>{var d;return[_(k,{value:t.data.current_status,severity:L((d=t.data)==null?void 0:d.current_status)},null,8,["value","severity"])]}),_:1}),_(a,{class:"px-1 py-0",header:"",frozen:"",alignFrozen:"right",headerStyle:"width:0.5rem; max-width:0.5rem "},{body:h(t=>[_(b,{style:{width:"min-content"},onClick:d=>i(f).setVisibleOrder(!0,t.data),text:"",severity:"help",icon:"pi pi-eye"},null,8,["onClick"])]),_:1})]),_:1},8,["value","filters"]),_(ct)])}}},kt=A(gt,[["__scopeId","data-v-b78c1243"]]);export{kt as default};
