import{r as V}from"./recipesService-585c329e.js";import{r as p,h as F,a as i,o as I,c as x,d as l,w as t,F as B,e as E,n as R,b as a,q as C,t as w,I as r}from"./index-6ffc0c02.js";const $={lang:"es-CO"},q=a("p",null,"¿Estás seguro de que quieres eliminar este recipee?",-1),z={class:"formgrid grid"},G={class:"field col"},Q=a("label",{for:"name"},"Nombre",-1),j={class:"field col"},H=a("label",{for:"unit"},"Unidad de Medida",-1),J={class:"field col"},K=a("label",{for:"price"},"Precio de Compra",-1),W={class:"field col"},Y=a("label",{for:"units"},"No. Unid por Compra",-1),X={class:"field col"},Z=a("label",{for:"format"},"Formato de Compra",-1),ee={class:"field col"},le=a("label",{for:"weight"},"Peso Neto",-1),oe={class:"field col"},ae=a("label",{for:"shrinkage"},"Porcentaje de Merma",-1),te={class:"flex justify-content-between"},ne=a("img",{style:{width:"2rem",height:"2rem","aspect-ratio":"1 / 1","object-fit":"cover","border-radius":"0.5rem"},src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRYV84QloLgfvrli6GpuJoJlvB-bicUpq2H6QAS80K6Rw&s",alt:""},null,-1),re={style:{display:"flex",gap:"1rem"}},de={__name:"recipes",setup(se){const _=p(!1);let k=p(null);function U(s){k.value=s,_.value=!0}const P=[{label:"No",icon:"pi pi-times",onClick:()=>_.value=!1,class:"p-button-text"},{label:"Sí",icon:"pi pi-check",onClick:()=>{m.value=!0,S(k.value),_.value=!1},class:"p-button-text"}];async function S(s){try{await V.deleterecipe(s)?(console.log("recipee eliminado exitosamente"),y.value=await V.getrecipes(),m.value=!1):(console.error("Error al eliminar el recipee"),m.value=!1)}catch(o){console.error("Error al eliminar el recipee:",o),m.value=!1}}const y=p([]);F(async()=>{y.value=await V.getrecipes(),m.value=!1});const g=p(!1),n=p({name:"",purchasing_unit_measure:"",purchasing_price:0,number_units_purchasing:0,purchasing_format:"",net_gross_weight:0,shrinkage_percent:0});async function T(){try{const s=await V.createrecipe(n.value);s?(console.log("recipee creado exitosamente",s),g.value=!1):console.error("Error al crear el recipee")}catch(s){console.error("Error al guardar el recipee:",s)}}const f=p({global:{value:null,matchMode:r.CONTAINS},name:{value:null,matchMode:r.CONTAINS},purchasing_unit_measure:{value:null,matchMode:r.CONTAINS},purchasing_price:{value:null,matchMode:r.CONTAINS},purchasing_format:{value:null,matchMode:r.CONTAINS},net_gross_weight:{value:null,matchMode:r.CONTAINS},shrinkage_percent:{value:null,matchMode:r.CONTAINS},number_units_purchasing:{value:null,matchMode:r.CONTAINS},representative:{value:null,matchMode:r.IN},status:{value:null,matchMode:r.EQUALS},verified:{value:null,matchMode:r.EQUALS}}),m=p(!0);return(s,o)=>{const d=i("Button"),N=i("Dialog"),c=i("InputText"),b=i("InputNumber"),M=i("InputIcon"),A=i("IconField"),L=i("ProgressSpinner"),h=i("Column"),D=i("RouterLink"),O=i("DataTable");return I(),x("div",$,[l(N,{visible:_.value,"onUpdate:visible":o[0]||(o[0]=e=>_.value=e),header:"Confirmar",modal:"",closable:!1,showHeader:!0},{footer:t(()=>[(I(),x(B,null,E(P,e=>l(d,{key:e.label,label:e.label,icon:e.icon,onClick:e.onClick,class:R(e.class)},null,8,["label","icon","onClick","class"])),64))]),default:t(()=>[q]),_:1},8,["visible"]),l(N,{visible:g.value,"onUpdate:visible":o[9]||(o[9]=e=>g.value=e),style:{width:"450px"},header:"Nuevo recipee",modal:"",closable:!0},{footer:t(()=>[l(d,{label:"Cancelar",icon:"pi pi-times",onClick:o[8]||(o[8]=e=>g.value=!1),class:"p-button-text"}),l(d,{label:"Guardar",icon:"pi pi-check",onClick:T,autofocus:""})]),default:t(()=>[a("div",z,[a("div",G,[Q,l(c,{id:"name",modelValue:n.value.name,"onUpdate:modelValue":o[1]||(o[1]=e=>n.value.name=e)},null,8,["modelValue"])]),a("div",j,[H,l(c,{id:"unit",modelValue:n.value.purchasing_unit_measure,"onUpdate:modelValue":o[2]||(o[2]=e=>n.value.purchasing_unit_measure=e)},null,8,["modelValue"])]),a("div",J,[K,l(b,{id:"price",modelValue:n.value.purchasing_price,"onUpdate:modelValue":o[3]||(o[3]=e=>n.value.purchasing_price=e),mode:"currency",currency:"COP",locale:"es-CO"},null,8,["modelValue"])]),a("div",W,[Y,l(b,{id:"units",modelValue:n.value.number_units_purchasing,"onUpdate:modelValue":o[4]||(o[4]=e=>n.value.number_units_purchasing=e)},null,8,["modelValue"])]),a("div",X,[Z,l(c,{id:"format",modelValue:n.value.purchasing_format,"onUpdate:modelValue":o[5]||(o[5]=e=>n.value.purchasing_format=e)},null,8,["modelValue"])]),a("div",ee,[le,l(b,{id:"weight",modelValue:n.value.net_gross_weight,"onUpdate:modelValue":o[6]||(o[6]=e=>n.value.net_gross_weight=e)},null,8,["modelValue"])]),a("div",oe,[ae,l(b,{id:"shrinkage",modelValue:n.value.shrinkage_percent,"onUpdate:modelValue":o[7]||(o[7]=e=>n.value.shrinkage_percent=e)},null,8,["modelValue"])])])]),_:1},8,["visible"]),l(O,{showGridlines:"",filters:f.value,"onUpdate:filters":o[12]||(o[12]=e=>f.value=e),value:y.value,paginator:"",rows:10,dataKey:"id",filterDisplay:"row",paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25,100],currentPageReportTemplate:"Mostrando {first} to {last} de {totalRecords} recipees",responsiveLayout:"scroll",scrollable:"",frozenValue:s.lockedCustomers,globalFilterFields:["name","country.name","representative.name","status"],loading:m.value},{header:t(()=>[a("div",te,[a("div",null,[l(d,{size:"small",label:"Agregar recipee",severity:"success",icon:"pi pi-plus",onClick:o[10]||(o[10]=e=>g.value=!0)})]),a("div",null,[l(A,{iconPosition:"right"},{default:t(()=>[l(M),l(c,{icon:"pi pi-search",modelValue:f.value.global.value,"onUpdate:modelValue":o[11]||(o[11]=e=>f.value.global.value=e),placeholder:"Buscar..."},null,8,["modelValue"])]),_:1})])])]),loading:t(()=>[l(L,{style:{width:"100px","background-color":"transparent",color:"transparent",height:"100px"},strokeWidth:"5",fill:"transparent",animationDuration:".3s","aria-label":"Custom ProgressSpinner"})]),default:t(()=>[l(h,{class:"p-1 px-2",field:"",header:"Foto",style:{"min-width":"3rem"}},{body:t(({data:e})=>[ne]),_:1}),l(h,{class:"p-1 px-2",field:"name",header:"Nombre",style:{"min-width":"12rem"}},{body:t(({data:e})=>[C(w(e.recipe_name),1)]),filter:t(({filterModel:e,filterCallback:v})=>[l(c,{modelValue:e.value,"onUpdate:modelValue":u=>e.value=u,type:"text",onInput:u=>v(),class:"p-column-filter",placeholder:"Buscar por nombre"},null,8,["modelValue","onUpdate:modelValue","onInput"])]),_:1}),l(h,{class:"p-1 px-2",field:"name",header:"Producto",style:{"min-width":"12rem"}},{body:t(({data:e})=>[C(w(e.product_name),1)]),filter:t(({filterModel:e,filterCallback:v})=>[l(c,{modelValue:e.value,"onUpdate:modelValue":u=>e.value=u,type:"text",onInput:u=>v(),class:"p-column-filter",placeholder:"Buscar por nombre"},null,8,["modelValue","onUpdate:modelValue","onInput"])]),_:1}),l(h,{class:"p-1 px-2",field:"name",header:"Categoria",style:{"min-width":"12rem"}},{body:t(({data:e})=>[C(w(e.category_name),1)]),filter:t(({filterModel:e,filterCallback:v})=>[l(c,{modelValue:e.value,"onUpdate:modelValue":u=>e.value=u,type:"text",onInput:u=>v(),class:"p-column-filter",placeholder:"Buscar por nombre"},null,8,["modelValue","onUpdate:modelValue","onInput"])]),_:1}),l(h,null,{body:t(({data:e})=>[a("div",re,[l(D,{to:`recipe-data-sheet/${e.recipe_id}`},{default:t(()=>[l(d,{style:{width:"2rem",height:"2rem"},icon:"pi pi-eye",class:"p-button-rounded p-button-info"})]),_:2},1032,["to"]),l(d,{style:{width:"2rem",height:"2rem"},icon:"pi pi-trash",class:"p-button-rounded p-button-danger",onClick:v=>U(e.recipe_id)},null,8,["onClick"]),l(d,{style:{width:"2rem",height:"2rem"},icon:"pi pi-pencil",class:"p-button-rounded p-button-warning"})])]),_:1})]),_:1},8,["filters","value","frozenValue","loading"])])}}};export{de as default};
