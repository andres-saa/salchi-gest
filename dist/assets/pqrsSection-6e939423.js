import{p as _}from"./pqrsService-45264bb0.js";import{_ as N,r as i,v as Q,h as U,k as L,a as u,o as h,c as f,d as o,w as r,b as e,F as P,u as M,q as $,t as x,e as z,f as F,n as D,p as H,g as j}from"./index-9ac1edba.js";import{s as G}from"./editor.esm-bb8d488a.js";const S=d=>(H("data-v-e8b1b611"),d=d(),j(),d),J=S(()=>e("p",{class:"my-3"},[e("b",null,"Pregunta")],-1)),K=S(()=>e("p",{class:"my-3"},[e("b",null,"Respuesta")],-1)),O={class:"col-12 p-0"},W={class:"container col-12"},X={class:"p-0 col-12 bar my-4"},Y={class:"p-0 m-0",style:{width:"100%"}},Z={class:"",style:{display:"flex",width:"100%","justify-content":"end","align-items":"center"}},ee={class:"m-0"},se=["innerHTML"],te={__name:"pqrsSection",setup(d){const n=i({question:"",answer:""}),m=i({}),w=i({});i(null);const b=Q(),y=i([]),l=i({}),p=i(!1);i({});const T=a=>{p.value=!0,l.value.showDialogToAddPqrs=!0,n.value={...a}},k=()=>{p.value=!1,l.value.showDialogToAddPqrs=!0},C=a=>{m.value=a,l.value.showDeleteDialog=!0},v=async()=>{y.value=await _.getPqrsByPlaceId(b.params.section_id)},V=async a=>{l.value.showDeleteDialog=!1,await _.deletePqrs(a),v()};U(async()=>{v()}),L(()=>b.params.section_id,()=>{v()},{deep:!0});const A=async()=>{const a={question:n.value.question,answer:n.value.answer,place_id:b.params.section_id};l.value.showDialogToAddPqrs=!1,p.value?await _.updatePqrs(a,n.value.id):await _.createPqrs(a),v()};return(a,t)=>{const I=u("InputText"),c=u("Button"),g=u("Dialog"),R=u("AccordionTab"),B=u("Accordion");return h(),f(P,null,[o(g,{class:"mx-2",header:p.value?"Editar PQRS":"Crear nueva PQRS",style:{width:"50rem"},visible:l.value.showDialogToAddPqrs,"onUpdate:visible":t[2]||(t[2]=s=>l.value.showDialogToAddPqrs=s)},{footer:r(()=>[e("div",O,[o(c,{onClick:A,class:"m-0",severity:"success",label:"ENVIAR"})])]),default:r(()=>[J,o(I,{style:{width:"100%"},modelValue:n.value.question,"onUpdate:modelValue":t[0]||(t[0]=s=>n.value.question=s),editorStyle:"height: 5rem"},null,8,["modelValue"]),K,o(M(G),{modelValue:n.value.answer,"onUpdate:modelValue":t[1]||(t[1]=s=>n.value.answer=s),editorStyle:"height: 320px"},null,8,["modelValue"])]),_:1},8,["header","visible"]),o(g,{header:"Eliminar PQRS",style:{width:"20rem"},visible:l.value.showDeleteDialog,"onUpdate:visible":t[4]||(t[4]=s=>l.value.showDeleteDialog=s)},{footer:r(()=>[e("div",null,[o(c,{onClick:t[3]||(t[3]=s=>V(m.value.id)),text:"",label:"Eliminar",severity:"danger"})])]),default:r(()=>[e("p",null,[$(" Esta seguro de elimnar esta PQRS "),e("b",null,x(m.value.question),1)])]),_:1},8,["visible"]),e("div",W,[e("div",X,[o(c,{size:"small",onClick:k,label:"NUEVA PQRS",severity:"help"})]),o(B,{style:{width:"100%"},expandIcon:"pi pi-plus",collapseIcon:"pi pi-minus"},{default:r(()=>[(h(!0),f(P,null,z(y.value,(s,q)=>(h(),F(R,{key:s.id,style:{"background-color":"red"}},{header:r(()=>[e("p",Y,[e("b",null,x(s.question),1)]),e("div",Z,[o(c,{severity:"danger",onClick:E=>C(s),text:"",style:{transition:".3s ease all"},class:D([w.value[q]?"button-visible":"button-hide","p-0 m-0"]),icon:"pi pi-trash text-xl p-0"},null,8,["onClick","class"]),o(c,{class:D([w.value[q]?"button-visible":"button-hide","p-0 m-0"]),severity:"warning",onClick:E=>T(s),text:"",icon:"pi pi-pencil text-xl p-0"},null,8,["class","onClick"])])]),default:r(()=>[e("p",ee,[e("p",{innerHTML:s.answer},null,8,se)])]),_:2},1024))),128))]),_:1})])],64)}}},ne=N(te,[["__scopeId","data-v-e8b1b611"]]);export{ne as default};
