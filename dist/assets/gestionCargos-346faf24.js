import{r,l as L,E as N,I as D,h as E,a as c,o as m,c as u,d as l,w as p,b as e,F as C,K as v,U as y,t as w,e as V}from"./index-5ca1b267.js";const M={class:"text-center my-3"},U={style:{display:"flex","flex-direction":"column",gap:".5rem"}},A={class:"m-0 p-0 mt-2"},F={class:"pl-4",style:{display:"flex",gap:"1rem","align-items":"center"}},O={class:"m-0",style:{"text-transform":"uppercase"}},G={class:"mx-auto mb-4",style:{"margin-top":"6rem","max-width":"50rem"}},j=e("h2",{class:"my-6 text-center"},[e("b",null," Gestion de cargos y accesos")],-1),z={style:{"margin-top":"3rem"}},H={class:"grid p-3",style:{"align-items":"center","justify-content":"space-between",display:"flex",gap:"1rem"}},K=e("h3",{class:"px-2"},[e("b",null,"Cargos")],-1),q={style:{display:"flex",width:"100%","justify-content":"end","flex-wrap":"wrap",gap:"1rem","align-items":"center"}},J={class:"m-0 p-0",style:{"text-transform":"uppercase","min-width":"max-content"}},X={__name:"gestionCargos",setup(Q){const P=r([{}]);r([]),L();const k=r([]),f=r(!1);N(()=>{$()});const _=r(null),$=()=>{_.value={global:{value:null,matchMode:D.CONTAINS}}},I=async()=>{P.value=await v.get(`${y}/get-all-rol`)},b=r(""),R=async(a,s)=>{b.value=s,f.value=!0;const n=await v.get(`${y}/get_all-permission-group-by-group`,"Cargando"),g=await v.get(`${y}/get-all-rol-by-rol-id/${a}`,"Cargando"),x=g.map(i=>i.permission_id);n.forEach(i=>{i.permissions.forEach(o=>{var h;o.enrolled=x.includes(o.id),o.permission_rol_id=(h=g.find(t=>t.permission_id==o.id))==null?void 0:h.id,console.log(o)})}),k.value=n};E(async()=>{await I()});const T=async(a,s)=>{const n={rol_id:b.value.id,permission_id:a.id,status:s,permission_rol_id:a.permission_rol_id};console.log(n),await v.put(`${y}/toggle_permision/${a.permission_rol_id||1}/${s}`,n,"Cargando")};return(a,s)=>{const n=c("InputSwitch"),g=c("Dialog"),x=c("InputText"),i=c("Button"),o=c("column"),h=c("DataTable");return m(),u(C,null,[l(g,{visible:f.value,"onUpdate:visible":s[0]||(s[0]=t=>f.value=t),style:{width:"40rem"},modal:"",header:"gestion de permisos"},{default:p(()=>[e("h5",M,[e("b",null," ACCESOS - "+w(b.value.name),1)]),(m(!0),u(C,null,V(k.value,(t,B)=>(m(),u("div",U,[e("h6",A,[e("b",null,w(t.name),1)]),(m(!0),u(C,null,V(t.permissions,d=>(m(),u("div",F,[l(n,{onChange:S=>T(d,d.enrolled),modelValue:d.enrolled,"onUpdate:modelValue":S=>d.enrolled=S,style:{"min-width":"3rem"}},null,8,["onChange","modelValue","onUpdate:modelValue"]),e("h6",O,w(d.name),1)]))),256))]))),256))]),_:1},8,["visible"]),e("div",G,[j,e("div",z,[l(h,{paginator:!0,rows:15,style:{width:"100%"},paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",currentPageReportTemplate:"Mostrando {first} a {last} de {totalRecords} Roles",rowsPerPageOptions:[5,10,25,100],scrollable:"",showGridlines:"",scrollHeight:"60vh",stripedRows:"",class:"col-12 m-auto",value:P.value,tableStyle:"",filters:_.value},{header:p(()=>[e("div",H,[K,l(x,{class:"",modelValue:_.value.global.value,"onUpdate:modelValue":s[1]||(s[1]=t=>_.value.global.value=t),placeholder:"Buscar Cargo ..."},null,8,["modelValue"])]),e("div",q,[l(i,{size:"small",severity:"help",onClick:a.openNewIngredient,label:"Nuevo Cargo"},null,8,["onClick"])])]),default:p(()=>[l(o,{class:"py-2",style:{width:"80%"},header:"CARGO",field:"name"},{body:p(t=>[e("h6",J,w(t.data.name),1)]),_:1}),l(o,{class:"py-2",style:{width:"20%"},header:"Accion",field:"name"},{body:p(t=>[l(i,{onClick:B=>R(t.data.id,t.data),icon:"pi pi-eye",text:"",class:"p-0",label:"Accesos"},null,8,["onClick"])]),_:1})]),_:1},8,["value","filters"])])])],64)}}};export{X as default};
