import{L as l,K as _,U as h}from"./index-ba39b5e2.js";const f=l("salchi_super_cart_web_salchiget_3",{persist:{key:"salchi_super_cart_web_salchiget_3",storage:sessionStorage,paths:["cart","last_order","menu"]},state:()=>({currentProduct:{},currentSection:{},currentVideoIndex:0,currentVideoTime:0,visibles:{currentProduct:!1,addAdditionToCart:!1,last_order:""},cart:[],last_order:"",sending_order:!1,was_reserva:!1,menu:{}}),getters:{cartTotal(e){return e.cart.reduce((r,t)=>r+t.pedido_precio,0)},isProductInCart:e=>r=>e.cart.some(t=>t.pedido_productoid===r),isProductInCart2:e=>r=>{var t;return(t=e.cart.products)==null?void 0:t.some(o=>o.product.productogeneral_id===r)},getProductTotal:()=>(e,r=[],t=1)=>{let o=0;const i=parseInt(e.productogeneral_precio)||0;return o+=i*t,r&&r.length>0&&r.forEach(d=>{const c=parseInt(d.price)||0,n=parseInt(d.quantity)||1;o+=c*n}),o}},actions:{setCurrentVideoIndex(e){this.currentVideoIndex=e},setCurrentVideoTime(e){this.currentVideoTime=e},setCurrentProduct(e){this.currentProduct=e},setVisible(e,r){this.visibles[e]=r},getProductId(e){return e.producto_id?e.producto_id:e.lista_presentacion&&e.lista_presentacion.length>0&&e.lista_presentacion[0].producto_id?e.lista_presentacion[0].producto_id:(console.error("No valid product ID found for product:",e),null)},getProductPrice(e){var o,i;const r=parseInt(e.productogeneral_precio),t=parseInt((i=(o=e.lista_presentacion)==null?void 0:o[0])==null?void 0:i.producto_precio);return r||t||0},calculateTotalPrice(e,r,t=[]){let i=this.getProductPrice(e);return t.forEach(d=>{const c=parseInt(d.pedido_precio)||0,n=parseInt(d.modificadorseleccion_cantidad)||0;i+=c*n}),i*r},addProductToCart(e,r=1,t=[]){const o={productId:this.getProductId(e),additions:t.map(c=>({group_id:c.group_id,id:c.id,quantity:c.quantity}))},i=JSON.stringify(o),d=this.cart.findIndex(c=>c.signature===i);if(d!==-1){const c=this.cart[d];c.pedido_cantidad+=r;const n=this.calculateTotalPrice(e,c.pedido_cantidad,c.modificadorseleccionList);c.pedido_precio=n,this.cart[d]=c,console.log("Producto actualizado en el carrito:",c)}else{const c=e.lista_productobase?e.lista_productobase.map(s=>({pedido_productoid:parseInt(s.producto_id),pedido_cantidad:parseInt(s.productocombo_cantidad)||1,pedido_precio:parseInt(s.productocombo_precio)||0,pedido_nombre:s.producto_descripcion})):[],n=t.map(s=>({modificadorseleccion_cantidad:parseInt(s.quantity)||1,pedido_precio:parseInt(s.price)||0,modificador_id:s.group_id,modificadorseleccion_id:s.id,modificador_nombre:s.name,pedido_productoid:s.parent_id})),a=parseInt(r)||1,p=this.calculateTotalPrice(e,a,n),u={signature:i,pedido_productoid:this.getProductId(e),pedido_cantidad:a,pedido_precio:p,pedido_base_price:this.getProductPrice(e),pedido_escombo:e.productogeneral_escombo,productogeneral_urlimagen:e.productogeneral_urlimagen,pedido_nombre_producto:e.productogeneral_descripcion,lista_productocombo:c,modificadorseleccionList:n};this.cart.push(u),console.log("Producto agregado al carrito:",u)}},removeProductFromCart(e){const r=this.cart.findIndex(t=>t.signature===e);r!==-1?(this.cart.splice(r,1),console.log(`Producto con signature ${e} eliminado del carrito.`)):console.warn(`Producto con signature ${e} no encontrado en el carrito.`)},decrementProduct(e){const r=this.cart.findIndex(d=>d.signature===e);if(r===-1)return;const t=this.cart[r];if(t.pedido_cantidad<=1){this.cart.splice(r,1);return}t.pedido_cantidad,t.pedido_cantidad-=1;const o=JSON.parse(t.signature);let i=this.currentProduct;this.getProductId(i)!==o.productId&&console.warn("No coincide la ID del combo en currentProduct, precio podría no recalcularse bien."),t.pedido_precio=this.calculateTotalPrice(i,t.pedido_cantidad,t.modificadorseleccionList),this.cart[r]=t},incrementProduct(e){const r=this.cart.findIndex(d=>d.signature===e);if(r===-1)return;const t=this.cart[r];t.pedido_cantidad,t.pedido_cantidad+=1;const o=JSON.parse(t.signature);let i=this.currentProduct;this.getProductId(i)!==o.productId&&console.warn("No coincide la ID en currentProduct, precio podría no recalcularse bien."),t.pedido_precio=this.calculateTotalPrice(i,t.pedido_cantidad,t.modificadorseleccionList),this.cart[r]=t},incrementAdditional(e,r){const t=this.cart.findIndex(n=>n.signature===e);if(t===-1)return;const o=this.cart[t],i=o.modificadorseleccionList.findIndex(n=>n===r);i!==-1?o.modificadorseleccionList[i].modificadorseleccion_cantidad+=1:o.modificadorseleccionList.push({modificadorseleccion_cantidad:1,pedido_precio:parseInt(r.price)||0,modificador_id:r.group_id,modificadorseleccion_id:r.id,modificador_nombre:r.name,pedido_productoid:r.parent_id});const d=JSON.parse(o.signature);let c=this.currentProduct;this.getProductId(c)!==d.productId&&console.warn("No coincide la ID en currentProduct, precio podría no recalcularse bien."),o.pedido_precio=this.calculateTotalPrice(c,o.pedido_cantidad,o.modificadorseleccionList),this.cart[t]=o},decrementAdditional(e,r){const t=this.cart.findIndex(n=>n.signature===e);if(t===-1)return;const o=this.cart[t],i=o.modificadorseleccionList.findIndex(n=>n===r);i!==-1&&(o.modificadorseleccionList[i].modificadorseleccion_cantidad-=1,o.modificadorseleccionList[i].modificadorseleccion_cantidad<=0&&o.modificadorseleccionList.splice(i,1));const d=JSON.parse(o.signature);let c=this.currentProduct;this.getProductId(c)!==d.productId&&console.warn("No coincide la ID en currentProduct, precio podría no recalcularse bien."),o.pedido_precio=this.calculateTotalPrice(c,o.pedido_cantidad,o.modificadorseleccionList),this.cart[t]=o}}}),m=l("call-center-site",{persist:{key:"call-center-site",storage:localStorage,paths:["location","restaurant"]},state:()=>({location:{site:{},neigborhood:{}},visibles:{currentSite:!1},current_delivery:0,status:"closed",restaurant:1,categories:[10,22,26,8,9,13,27,11,4,5]}),getters:{fucion:e=>0},actions:{async func(){return func},setLocation(e){this.location=e},setVisible(e,r){this.visibles[e]=r},async setNeighborhoodPrice(){try{const e=await _.get(`${h}/neighborhood/${this.location.neigborhood.neighborhood_id}/`);return e.status===200?(this.location.neigborhood=e.data,e.data):(console.error("An error occurred while fetching the ingredients:",e.status),null)}catch(e){return console.error("An error occurred while fetching the ingredients:",e),null}},async setNeighborhoodPriceCero(){this.location.neigborhood.delivery_price=0}}});export{f as a,m as u};
