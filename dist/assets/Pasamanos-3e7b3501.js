import{r as s,G as H,D as K,i as J,q as Q,a as d,o as l,c,g as i,w as u,b as r,j as y,U as _,s as W,e as m,F as B,d as M,t as h,f as g,m as U,k as x,u as z}from"./index-9a073ae1.js";import{f as X,a as Y}from"./formatoPesos-8aa989a0.js";const Z={style:{"max-width":"1366px"},class:"m-auto"},ee={class:"m-0 my-3"},te={style:{display:"flex","justify-content":"end"}},ae={style:{"margin-top":"3rem"}},ne={class:"grid p-3",style:{"align-items":"center","justify-content":"space-between",display:"flex",gap:"1rem"}},le=r("h3",{class:"px-2"},[r("i",{class:"fa fa-bowl-rice"}),U(),r("b",null,"Pasamanos")],-1),oe={style:{display:"flex",width:"100%","justify-content":"end","flex-wrap":"wrap",gap:"1rem","align-items":"center"}},se={class:"px-2",style:{display:"flex",gap:".3rem","justify-content":"center","align-items":"center"}},ue={__name:"Pasamanos",setup(ie){s({});const b=s(!1),a=s({}),I=s([{}]),N=s([]),V=s(!1);s(!1);const v=s(!1),k=s({}),T=[{header:"Id",value:"id",width:"1"},{header:"Nombre",value:"name",type:"max-content",width:""},{header:"Unidad de medida",value:"unit_measure",type:"max-content",width:""},{header:"Iva",value:"iva",width:"10",type:"percent"},{header:"Precio de venta a las sedes",value:"purchase_price",width:"10",type:"money"},{header:"Precio de venta a las sedes + IVA",value:"purchase_price_with_iva",width:"10",type:"money"},{header:"Costo unitario",value:"unit_cost",width:"10",type:"money"},{header:"Costo unitario + IVA",value:"unit_cost_with_iva",width:"10",type:"money"},{header:"presentacion convertir a gramos",value:"convert_value",width:"10",type:"money"}],R=s([...T]);H(()=>{var t;return(t=R.value)==null?void 0:t.map(o=>o.value)});const F=s([{name:"Producto",fiel:"namerecipe_name",type:"text"},{name:"Unidad de medida de compra",fiel:"purchasing_unit_measure",type:"drop",Options:s(N),optionLable:"name"},{name:"precio de compra",fiel:"purchasing_price",type:"money"},{name:"Peso Bruto (Kg/Litros)",fiel:"net_gross_weight",type:"number"}]);K(a,async(t,o)=>{var f;a.value.purchasing_unit_measure_id=((f=t.purchasing_unit_measure)==null?void 0:f.id)||null},{deep:!0});const S=async t=>{await y.post(`${_}/pasamanos_to_pt/${t}`,{},"Convirtiendo"),P(),v.value=!1},j=t=>{v.value=!0,k.value=t},$=async()=>{const t=a.value;if(!t.name||!t.purchasing_unit_measure_id||!t.purchasing_price||!t.net_gross_weight){alert("Por favor llene todos los campos");return}V.value?await y.post(`${_}/update-ingredient/${a.value.id}`,t,"Editando ingrediente"):await y.post(`${_}/create-ingredient`,t,"creando un nuevo ingrediente"),P(),b.value=!1},P=async()=>{I.value=await y.get(`${_}/list-cdi-recipes-pasamanos`,"cargando ingredientes"),N.value=await y.get(`${_}/daily_inventory_unit_measures`)};J(async()=>{P()});const w=s(null),A=()=>{w.value={global:{value:null,matchMode:W.CONTAINS}}};return Q(()=>{A()}),(t,o)=>{const f=d("inputText"),E=d("Dropdown"),C=d("InputNumber"),p=d("Button"),L=d("Dialog"),O=d("InputText"),G=d("RouterLink"),D=d("column"),q=d("DataTable");return l(),c("div",Z,[i(L,{style:{width:"30rem"},header:V.value?"Actualizar Ingrediente":"Nuevo Ingrediente",class:"mx-2",visible:b.value,"onUpdate:visible":o[0]||(o[0]=e=>b.value=e),modal:""},{footer:u(()=>[V.value?(l(),m(p,{key:1,onClick:$,severity:"help",label:"Modificar ingrediente"})):(l(),m(p,{key:0,onClick:$,severity:"help",label:"Guardar ingrediente"}))]),default:u(()=>[(l(!0),c(B,null,M(F.value,e=>(l(),c("div",null,[r("h6",ee,h(e.name),1),e.type=="text"?(l(),m(f,{key:0,modelValue:a.value[e.fiel],"onUpdate:modelValue":n=>a.value[e.fiel]=n,style:{width:"100%"}},null,8,["modelValue","onUpdate:modelValue"])):g("",!0),e.type=="drop"?(l(),m(E,{key:1,options:e.Options,optionLabel:"name",modelValue:a.value[e.fiel],"onUpdate:modelValue":n=>a.value[e.fiel]=n,style:{width:"100%"}},null,8,["options","modelValue","onUpdate:modelValue"])):g("",!0),e.type=="money"?(l(),m(C,{key:2,modelValue:a.value[e.fiel],"onUpdate:modelValue":n=>a.value[e.fiel]=n,style:{width:"100%"},prefix:"$",locale:"es-ES","max-fraction-digits":"3"},null,8,["modelValue","onUpdate:modelValue"])):g("",!0),e.type=="number"?(l(),m(C,{key:3,modelValue:a.value[e.fiel],"onUpdate:modelValue":n=>a.value[e.fiel]=n,style:{width:"100%"}},null,8,["modelValue","onUpdate:modelValue"])):g("",!0),e.type=="persent"?(l(),m(C,{key:4,modelValue:a.value[e.fiel],"onUpdate:modelValue":n=>a.value[e.fiel]=n,style:{width:"100%"},suffix:"%",locale:"es-ES","max-fraction-digits":"3"},null,8,["modelValue","onUpdate:modelValue"])):g("",!0)]))),256))]),_:1},8,["header","visible"]),i(L,{class:"mx-2",header:"Mover",visible:v.value,"onUpdate:visible":o[3]||(o[3]=e=>v.value=e),modal:""},{footer:u(()=>[r("div",te,[i(p,{size:"small",label:"cancelar",onClick:o[1]||(o[1]=e=>v.value=!1),severity:"help"}),i(p,{size:"small",onClick:o[2]||(o[2]=e=>S(k.value.id)),label:"Convertir en PT",severity:"danger",text:""})])]),default:u(()=>{var e;return[r("h6",null,[U("seguro que desea convertir "),r("b",null,h((e=k.value)==null?void 0:e.name),1),U(" en un PT ?")])]}),_:1},8,["visible"]),r("div",ae,[i(q,{paginator:!0,rows:15,style:{width:"100%"},paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",currentPageReportTemplate:"Mostrando {first} a {last} de {totalRecords} recetas",rowsPerPageOptions:[5,10,25,100],scrollable:"",showGridlines:"",scrollHeight:"65vh",stripedRows:"",class:"col-12 m-auto",value:I.value,tableStyle:"min-width: 50rem;",filters:w.value},{header:u(()=>[r("div",ne,[le,i(O,{class:"",modelValue:w.value.global.value,"onUpdate:modelValue":o[4]||(o[4]=e=>w.value.global.value=e),placeholder:"Buscar receta ..."},null,8,["modelValue"]),r("div",oe,[i(G,{to:"/new-cdi-recipe-data-sheet-pasamanos"},{default:u(()=>[i(p,{size:"small",severity:"help",label:"Nuevo Pasamanos"})]),_:1})])])]),default:u(()=>[(l(),c(B,null,M(T,e=>i(D,{header:e.header,style:x([{},`min-width:${e.width}rem`]),field:e.value,class:"py-2"},{body:u(n=>[e.type=="money"?(l(),c("h6",{key:0,style:x([{"text-transform":"lowercase"},e.type=="max-content"?"min-width:max-content":""]),class:"my-0 p-0"},h(z(X)(n.data[e.value])||"-----------"),5)):e.type=="percent"?(l(),c("h6",{key:1,style:x([{"text-transform":"lowercase"},e.type=="max-content"?"min-width:max-content":""]),class:"my-0 p-0"},h(`${z(Y)(n.data[e.value])}%`||"-----------"),5)):(l(),c("h6",{key:2,style:x([{"text-transform":"lowercase"},e.type=="max-content"?"min-width:max-content":""]),class:"my-0 p-0"},h(n.data[e.value]||"-----------"),5))]),_:2},1032,["header","style","field"])),64)),i(D,{header:"Accion",style:{"max-width":"min-content"},field:"name",class:"py-0 px-0 m-0",frozen:"",alignFrozen:"right"},{body:u(e=>[r("div",se,[i(p,{text:"",disabled:"",style:{height:"1rem",width:"1em"},severity:"danger",icon:"pi pi-trash"}),i(p,{style:{"min-width":"max-content"},severity:"danger",onClick:n=>j(e.data),class:"p-1 mx-1",size:"small",label:"-> PT"},null,8,["onClick"])])]),_:1})]),_:1},8,["value","filters"])])])}}};export{ue as default};
