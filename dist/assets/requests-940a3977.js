import{l as M,h as A,s as S,g as t,o as s,c as u,f as n,e as c,F as q,x as G,a,t as r,u as x,q as _,r as H,k as p,n as C,d as j}from"./index-77b32d55.js";const z={class:"m-0 mb-2"},U={class:"m-0"},O={class:"my-2"},$={class:"grid p-3",style:{"align-items":"center","justify-content":"space-between",display:"flex",gap:"1rem"}},Y=a("h4",{class:"px-2"},[a("i",{class:"fa-regular fa-bars-progress"}),_(),a("b",null,"Solicitudes de requisición para aprobar")],-1),J={key:0,style:{"min-width":"max-content"},class:"m-0 p-0"},K={key:2,class:"m-0 p-0"},Q={style:{display:"flex",gap:".5rem","justify-content":"center"},class:"px-2"},Z={__name:"requests",setup(W){const f=M(),g=A(!1),F=A(null),R=()=>{F.value={global:{value:null,matchMode:G.CONTAINS}}};function P(l=new Date){const o=l.getDate(),y=l.getMonth(),d=l.getFullYear(),b=["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],h=o<10?`0${o}`:o,v=b[y];return`${h} / ${v} / ${d}`}const m=A([]),E=async l=>{g.value=!0,m.value=l};S(()=>{R()});const T=[{columnName:"Id",columnValue:"id",columnType:"other"},{columnName:"Fecha de solicitud",columnValue:"created_at_formated",columnType:"max-content"},{columnName:"Nombre del solicitante",columnValue:"creator_name",columnType:"other"},{columnName:"Cargo del solicitante",columnValue:"creator_position",columnType:"other"},{columnName:"Area de solicitud",columnValue:"area_name",columnType:"max-content"},{columnName:"Justificacion de la requisicion",columnValue:"requisition_description",columnType:"other"}],L=[{id:1,name:"Pendiente de aprobación",color:"#FFFFFF",backgroundColor:"#FF5733"},{id:2,name:"Aprobado por Gerencia",color:"#FFFFFF",backgroundColor:"#2980B9"},{id:3,name:"Publicada en web",color:"#FFFFFF",backgroundColor:"#8E44AD"},{id:4,name:"Revisión de hojas de vida",color:"#FFFFFF",backgroundColor:"#27AE60"},{id:5,name:"Filtro 1, preliminares",color:"#FFFFFF",backgroundColor:"#D35400"},{id:6,name:"Filtro 2, primera entrevista",color:"#FFFFFF",backgroundColor:"#C0392B"},{id:7,name:"Filtro 3, segunda entrevista",color:"#FFFFFF",backgroundColor:"#16A085"},{id:8,name:"Revisión de Exámenes",color:"#FFFFFF",backgroundColor:"#34495E"},{id:9,name:"Recepción de documentos",color:"#FFFFFF",backgroundColor:"#F39C12"},{id:10,name:"Contratación completada",color:"#FFFFFF",backgroundColor:"#2ECC71"},{id:12,name:"Entregado a Gestión Humana",color:"#FFFFFF",backgroundColor:"#3498DB"},{id:13,name:"Rechazado por gerencia general",color:"#FFFFFF",backgroundColor:"#E74C3C"},{id:14,name:"No requiere aprobación de la gerencia",color:"#FFFFFF",backgroundColor:"#95A5A6"},{id:15,name:"Solicitud registrada",color:"#FFFFFF",backgroundColor:"#7F8C8D"},{id:16,name:"Rechazada por Gestión Humana",color:"#FFFFFF",backgroundColor:"#E74C3C"}],D=[{id:16,area_id:13,requester_id:1082,requisition_lap_id:13,creator_id:1082,creator_name:"ANDRES FELIPE ARECHEA",created_at:"2024-10-21T22:44:19",area_name:"Marketing",validation_type_id:1,lap_name:"Rechazado por Gerencia General",created_at_formated:"21-10-2024  10:44 PM",requisition_description:"Solicitamos la aprobación de la gerencia para proceder con la contratación de un líder contable que se encargará de supervisar y optimizar las operaciones financieras durante el horario nocturno de nuestro autoservicio. Esta posición es crucial para mejorar la precisión en el manejo de las transacciones nocturnas y asegurar el cumplimiento de las normativas fiscales y empresariales. Adjuntamos el perfil del candidato ideal, la estructura de costos y el análisis de impacto esperado para su revisión y aprobación.",lap_history:[{time:"22-10-2024  01:58 PM",lap:"Aprobado por Gerencia",responsible:"BRYAN BONILLA LUNA",comment:"La gerencia reconoce la necesidad pero requiere una revisión más detallada del ROI estimado."},{time:"22-10-2024  02:05 PM",lap:"Rechazado por Gerencia General",responsible:"BRYAN BONILLA LUNA",comment:"Después de la revisión, la gerencia general decide no aprobar el aumento debido a restricciones presupuestarias actuales."}],creator_position:"Analista de Marketing"},{id:17,area_id:3,requester_id:1132,requisition_lap_id:12,creator_id:1132,creator_name:"BRYAN BONILLA LUNA",created_at:"2024-10-22T12:50:25",area_name:"Producción",validation_type_id:2,lap_name:"Entregado a Gestión Humana",created_at_formated:"22-10-2024  12:50 PM",requisition_description:"Reemplazo urgente necesario debido a la próxima licencia de maternidad de Ana Ruiz, nuestro supervisor de línea. Se requiere cubrir su posición para mantener la eficiencia operativa.",lap_history:[{time:"22-10-2024  12:50 PM",lap:"Entregado a Gestión Humana",responsible:"BRYAN BONILLA LUNA",comment:"La solicitud se ha priorizado dada la importancia crítica del rol de Ana en la producción."}],creator_position:"Gerente General"},{id:18,area_id:5,requester_id:1082,requisition_lap_id:12,creator_id:1082,creator_name:"ANDRES FELIPE ARECHEA",created_at:"2024-10-22T14:22:33",area_name:"Innovación",validation_type_id:2,lap_name:"Entregado a Gestión Humana",created_at_formated:"22-10-2024  02:22 PM",requisition_description:"Necesidad de personal adicional para apoyar un nuevo proyecto de innovación que busca explorar tecnologías emergentes en nuestra industria.",lap_history:null,creator_position:"Analista de Innovación"},{id:19,area_id:5,requester_id:1082,requisition_lap_id:12,creator_id:1082,creator_name:"ANDRES FELIPE ARECHEA",created_at:"2024-10-22T14:22:55",area_name:"Innovación",validation_type_id:2,lap_name:"Entregado a Gestión Humana",created_at_formated:"22-10-2024  02:22 PM",requisition_description:"Solicitud de incremento de equipo debido al crecimiento acelerado de nuestro proyecto piloto que requiere más recursos humanos para su expansión.",lap_history:[{time:"22-10-2024  02:22 PM",lap:"No requiere aprobación de la gerencia",responsible:"ANDRES FELIPE ARECHEA",comment:"Decisión automática por política interna debido a la categoría del proyecto."},{time:"22-10-2024  02:22 PM",lap:"Entregado a Gestión Humana",responsible:"ANDRES FELIPE ARECHEA",comment:"Enviado para la acción inmediata dada la urgencia y el impacto potencial del proyecto."}],creator_position:"Analista de Innovación"}];return(l,o)=>{const y=t("Textarea"),d=t("Button"),b=t("Dialog"),h=t("InputText"),v=t("Tag"),V=t("column"),w=t("Column"),I=t("DataTable");return s(),u(q,null,[n(b,{class:"mx-2",visible:g.value,"onUpdate:visible":o[1]||(o[1]=e=>g.value=e),modal:"",header:"Aceptar solicitud de requisicion",style:{width:"30rem"}},{footer:c(()=>[a("div",null,[n(d,{severity:"help",label:"No, Pensarlo mejor"}),n(d,{text:"",severity:"danger",label:"Si, Autorizar"})])]),default:c(()=>[a("h6",z,"Fecha: "+r(P()),1),a("h6",U,"Responsable: "+r(x(f).rawUserData.name),1),a("h6",O,[a("b",null,r(x(f).rawUserData.name),1),_(" confirmas la aprobacion de la solicitud de requisicion de "),a("b",null,r(m.value.creator_name),1),_(" para el area "),a("b",null,r(m.value.area_name),1),_(" aceptando dando por valida la siguiente justificacion: "),n(y,{class:"my-3",rows:"7",style:{width:"100%",height:"max-content",resize:"none",border:"1px solid"},readonly:"",modelValue:m.value.requisition_description,"onUpdate:modelValue":o[0]||(o[0]=e=>m.value.requisition_description=e)},null,8,["modelValue"])])]),_:1},8,["visible"]),n(I,{paginator:!0,rows:15,style:{width:"100%","max-width":"1280px"},paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",currentPageReportTemplate:"Mostrando {first} a {last} de {totalRecords} solicitudes",rowsPerPageOptions:[5,10,25,100],scrollable:"",showGridlines:"",scrollHeight:"65vh",stripedRows:"",class:"col-12 m-auto",value:D,tableStyle:"min-width: 50rem;",filters:F.value},{header:c(()=>[a("div",$,[Y,n(h,{class:"",modelValue:F.value.global.value,"onUpdate:modelValue":o[2]||(o[2]=e=>F.value.global.value=e),placeholder:"Buscar Solicitud..."},null,8,["modelValue"])])]),default:c(()=>[(s(),u(q,null,H(T,e=>n(V,{header:e.columnName,field:e.columnValue,class:"my-0 py-2"},{body:c(i=>{var k,N;return[e.columnType=="date"?(s(),u("h6",J,r((k=i.data[e.columnValue])==null?void 0:k.split("-").reverse().join("-")),1)):p("",!0),e.columnType=="max-content"?(s(),u("h6",{key:1,style:C(e.columnType=="max-content"?"min-width: max-content":""),class:"m-0 p-0"},r(i.data[e.columnValue]),5)):p("",!0),e.columnType=="other"?(s(),u("h6",K,r(i.data[e.columnValue]),1)):p("",!0),e.columnType=="money"?(s(),u("h6",{key:3,style:C(e.columnType=="max-content"?"min-width: max-content":""),class:"m-0 p-0"},r(l.formatoPesosColombianos(i.data[e.columnValue])),5)):p("",!0),e.columnValue=="lap_name"?(s(),j(v,{key:4,class:"p-2",style:C([{color:"white"},`background-color:${(N=L.find(B=>B.id==i.data.requisition_lap_id))==null?void 0:N.backgroundColor}`])},{default:c(()=>[_(r(i.data[e.columnValue]),1)]),_:2},1032,["style"])):p("",!0)]}),_:2},1032,["header","field"])),64)),n(w,{class:"my-0 py-0 px-0 mx-0",style:{},header:"Interactuar"},{body:c(e=>[a("div",Q,[n(d,{onClick:i=>E(e.data),severity:"success",icon:"pi pi-check p-0",class:"my-1 p-1"},null,8,["onClick"]),n(d,{onClick:i=>E(e.data),severity:"danger",icon:"pi pi-times p-0",class:"my-1 p-1"},null,8,["onClick"])])]),_:1})]),_:1},8,["filters"])],64)}}};export{Z as default};
