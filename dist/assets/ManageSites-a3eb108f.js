import{_ as C,f as o,h,r as _,o as i,c as f,a as s,d as p,w as v,l as m,F as N,b as O,J as y,U as S,n as A,t as D,p as M,e as z,k as G,v as J}from"./index-02988398.js";import{g as T,a as L}from"./userServices-73b58369.js";import{g as x,s as P}from"./dropDownAux-c9b90c57.js";class R{getProductsSmall(){return fetch("demo/data/products-small.json").then(e=>e.json()).then(e=>e.data)}getProducts(){return fetch("demo/data/products.json").then(e=>e.json()).then(e=>e.data)}getUsers(){return fetch("http://127.0.0.1:8000/read/users").then(e=>e.json()).then(e=>e.data)}getProductsWithOrdersSmall(){return fetch("demo/data/products-orders-small.json").then(e=>e.json()).then(e=>e.data)}}const W=n=>(M("data-v-77ffbc52"),n=n(),z(),n),q={class:"grid"},H={class:"col-12 m-auto",style:{"max-width":"1280px"}},K={class:""},Q=W(()=>s("div",{class:"my-2 col-12"},[s("p",{style:{"font-weight":"bold"},class:"text-4xl text-center pl-0 ml-0"},[s("i",{class:"fa-solid fa-book"}),G(" Documentos")])],-1)),X={class:"col-12 lg:col-6 md:col-6 xl:col-4",style:{"aspect-ratio":"4 / 3"}},Y=["onClick"],Z={class:"m-4 container-"},ee={class:"text-center cont-img-sede"},te={class:"nombre-sede-cont"},se={class:"text-5xl font-bold text-white nombre-sede"},ae={style:{width:"100%",cursor:"pointer",animation:""}},oe=["src"],re={__name:"ManageSites",setup(n){const e=t=>{localStorage.setItem("currentSiteFiles",JSON.stringify(t)),J.push(`/site/${t.site_id}/documentos`)},l=o({}),w=async t=>{try{const a=await L(t);l.value[t]=a}catch(a){console.error("Error al obtener usuarios por sede:",a)}};h(()=>{x().then(t=>{t.forEach(a=>w(a.site_id))})});const b=(t,a)=>{const c={masculino:"/images/male-avatar.png",femenino:"/images/female-avatar.png",default:"/images/who.png"};a.target.src=c[t]||c.default},k=o(null),V=o("grid");o(null);const j=o(null),F=o(null),$=new R;h(()=>{$.getProductsSmall().then(t=>k.value=t),x(),T().then(t=>B.value=t)});const B=o([]);return(t,a)=>{const c=_("Avatar"),E=_("AvatarGroup"),I=_("DataView");return i(),f("div",q,[s("div",H,[s("div",K,[Q,p(I,{value:m(P),layout:V.value,paginator:!0,rows:9,sortOrder:j.value,sortField:F.value},{grid:v(r=>[s("div",X,[s("div",{onClick:d=>e(r.data),style:{cursor:"pointer"}},[s("div",Z,[s("div",ee,[s("div",te,[p(E,null,{default:v(()=>{var d,g;return[(i(!0),f(N,null,O((d=l.value[r.data.site_id])==null?void 0:d.slice(0,4),u=>(i(),y(c,{shape:"circle",size:"large",style:{"background-color":"#fff",color:"#ffffff"},key:u.dni,image:`${m(S)}/read-product-image/96/employer-${u.dni}`,onError:U=>b(u.gender,U)},null,8,["image","onError"]))),128)),((g=l.value[r.data.site_id])==null?void 0:g.length)>6?(i(),y(c,{key:0,shape:"circle",size:"large",style:{"background-color":"red",color:"#ffffff"},label:`+${l.value[r.data.site_id].length-4}`},null,8,["label"])):A("",!0)]}),_:2},1024),s("div",se,[s("p",ae,D(r.data.site_name),1)])]),s("img",{src:`${m(S)}/read-product-image/300/site-${r.data.site_id}`,class:"w-12 imagen"},null,8,oe)])])],8,Y)])]),_:1},8,["value","layout","sortOrder","sortField"])])])])}}},ie=C(re,[["__scopeId","data-v-77ffbc52"]]);export{ie as default};
