import{d as C}from"./dailyInventoryService-d27808d2.js";import{_ as B,r as c,V as T,i as L,a as v,o as _,c as p,d as i,w as g,b as e,q as o,t as r,l as x,F as w,e as E,G as M,p as $,g as z,j as G}from"./index-2941a808.js";const a=m=>($("data-v-e3daeed8"),m=m(),z(),m),O=a(()=>e("span",{style:{color:"red"}},"Esta accion no se puede deshacer luego, piensalo bien.",-1)),A=a(()=>e("br",null,null,-1)),W=a(()=>e("br",null,null,-1)),H={style:{"text-transform":"capitalize"}},P={style:{}},Y=a(()=>e("b",{class:"text-l"},"ES CORRECTO",-1)),J=a(()=>e("b",{class:"text-l"},"PERSONALMENTE.",-1)),K=a(()=>e("br",null,null,-1)),Q=a(()=>e("br",null,null,-1)),X=a(()=>e("b",null,"Deseas continuar?",-1)),Z={style:{display:"flex","justify-content":"end"}},ee={class:"md:mx-auto p-3 md:shadow-2 mb-6",style:{"max-width":"700px","border-radius":"0.5rem","min-height":"80vh","margin-top":"3rem"}},te=a(()=>e("p",{class:"text-2xl my-3 text-center"},[e("b",null," Reportar inventario ")],-1)),se={class:"text-xl py-0 my-0"},oe=a(()=>e("b",null," Fechah : ",-1)),ae={class:"text-xl py-0 my-0",style:{"text-transform":"capitalize"}},ne=a(()=>e("b",null," Responsable : ",-1)),le={class:"text-center p-1 my-3",style:{"background-color":"#00000020","border-radius":"0.2rem"}},re={style:{"text-transform":"uppercase"}},ie={style:{"text-transform":"uppercase","font-weight":"bold"},class:"col-12 my-2 md:col-6 p-0"},de={class:"col-12 md:col-6 px-0 py-1 md:pl-3",style:{display:"flex","align-items":"center",gap:"1rem"}},ue={class:"col-12 p-0 mt-3",style:{display:"flex","justify-content":"end"}},ce={__name:"reportInventory",setup(m){c({items:[{}]});const h=c([]),y=c(!1),u=T();c([]);const D=c(!1);function I(s){const t=["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"];let n=s.getDate(),f=s.getMonth(),b=s.getFullYear();return`${n} de ${t[f]} del ${b}`}const k=s=>s.map(t=>t).map(t=>t.items).flat().map(t=>({daily_inventory_item_id:t.item_id,quantity:t.quantity,daily_inventory_unit_measure_id:t.unit_measure_id})),S=()=>{var s,t;return{daily_inventory:{responsible_id:(s=u.rawUserData)==null?void 0:s.id,site_id:(t=u.rawUserData)==null?void 0:t.site_id},daily_inventory_items:k([...h.value])}},U=()=>{const s=S();if(D.value=!0,s.daily_inventory_items.some(t=>t.quantity===null)){alert("Debes llenar todos los espacios");return}y.value=!0},V=async()=>{const s=S();await C.InsertDailyInventory(s),G.push("/daily-inventory/daily-inventory-my-reports/")};return L(async()=>{const s=await C.getGroupsWithItems();s.map(t=>t.items.map(n=>n.quantity=null)),h.value=s,console.log(s)}),(s,t)=>{var q;const n=v("Button"),f=v("Dialog"),b=v("Tag"),F=v("InputNumber");return _(),p(w,null,[i(f,{style:{width:"30rem"},class:"m-2",header:"Estas seguro Monstruo?",modal:"",visible:y.value,"onUpdate:visible":t[1]||(t[1]=l=>y.value=l)},{footer:g(()=>[e("div",Z,[i(n,{onClick:t[0]||(t[0]=l=>y.value=!1),label:"Mejor lo reviso de nuevo!",severity:"help"}),i(n,{text:"",label:"Firmar",onClick:V,severity:"danger"})])]),default:g(()=>{var l;return[O,o(),A,o(),W,o(" Hola, "),e("span",H,r((l=x(u).rawUserData)==null?void 0:l.name.toLowerCase())+" ! ",1),e("p",P,[o(" Al precionar "),i(n,{severity:"danger",text:"",class:"p-0",label:"Firmar"}),o(" das fe de que el reporte del inventario para la sede "),e("b",null,"Salchimonster "+r(x(u).rawUserData.site_name),1),o(" el dia "+r(I(new Date))+" que estas intentando enviar ",1),Y,o(" y lo has verificado "),J,o(),K,o(),Q,X])]}),_:1},8,["visible"]),e("div",ee,[te,e("p",se,[oe,o(" "+r(I(new Date)),1)]),e("p",ae,[ne,o(r((q=x(u).rawUserData)==null?void 0:q.name.toLowerCase()),1)]),(_(!0),p(w,null,E(h.value,(l,N)=>(_(),p("div",{key:N},[e("p",le,[e("b",re,r(l.group_name),1)]),(_(!0),p(w,null,E(l.items,(d,R)=>(_(),p("div",{style:{"align-items":"center"},class:"grid m-0",key:R},[e("div",ie,[o(r(d.item_name)+" ",1),i(b,{severity:"danger"},{default:g(()=>[o(r(d.unit_measure),1)]),_:2},1024)]),e("div",de,[i(F,{useGrouping:!1,showButtons:"",buttonLayout:"horizontal",min:0,maxFractionDigits:2,modelValue:d.quantity,"onUpdate:modelValue":j=>d.quantity=j,suffix:` ${d.unit_measure}`,maxDecimal:"5",style:M([{width:"100%"},d.quantity==null&&D.value?"outline:3px solid red;border-radius:0.5rem":""]),class:""},null,8,["modelValue","onUpdate:modelValue","suffix","style"])])]))),128))]))),128)),e("div",ue,[i(n,{onClick:U,severity:"help",label:"Enviar Reporte"})])])],64)}}},me=B(ce,[["__scopeId","data-v-e3daeed8"]]);export{me as default};
