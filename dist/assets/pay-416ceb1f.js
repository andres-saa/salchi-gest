import{r as ne}from"./resumen-934f1430.js";import{a as de,u as re}from"./site-eddeb704.js";import{_ as ie,j as S,k as ue,m as Y,U as ee,H as b,I as ce,r as _,o as c,c as m,a as l,e as n,f as g,u as o,F as oe,i as h,h as y,g as me,t as x,q as pe,x as _e}from"./index-78a1d656.js";import{u as ye}from"./user-f61c0d5b.js";import"./ventas-7e67a732.js";import"./formatoPesos-2bac1853.js";const i=f=>(pe("data-v-42fa893e"),f=f(),_e(),f),ge={class:"finalizar-compra-container"},he=i(()=>l("p",{class:"title"},"FINALIZAR COMPRA",-1)),fe={style:{margin:"auto","max-width":"800px"}},ve={class:"title",style:{margin:"3rem .5rem"}},Ve={class:"form-grid"},be={class:"form-column"},xe=i(()=>l("span",null,"NOMBRE",-1)),Ue={class:"form-group"},Ie=i(()=>l("span",null,"Ubicacio'n",-1)),Se={class:"form-group"},ke=i(()=>l("span",null,"Metodo Entrega",-1)),Ne={class:"form-group"},Ce=i(()=>l("span",null,"Direccio'n",-1)),Ee={class:"form-group"},De=i(()=>l("span",null,"Correo Electronico",-1)),Te={class:"form-group"},Me=i(()=>l("span",null,"Telefono",-1)),Oe={class:"form-group"},we=i(()=>l("span",null,"Placa de tu vehiculo",-1)),Re={class:"form-group"},Be={style:{display:"flex","align-items":"center",gap:"1rem"}},Fe={key:2,class:"form-group"},qe={key:0},Le={key:1},Pe=i(()=>l("span",null,"Metodo de pago",-1)),je={class:"form-group"},Ae={key:3},$e={class:"form-group"},ze=i(()=>l("span",null,"Notas",-1)),Ge={__name:"pay",setup(f){const v=S(!1),te=[{id:1,name:"Demora más de una hora",percentage:"15%"},{id:2,name:"Pedido frío",percentage:"20%"},{id:3,name:"Un pelo",percentage:"100%"},{id:4,name:"Producto dañado",percentage:"100%"},{id:5,name:"Faltante de bebida y adición",percentage:"0%"},{id:6,name:"Responderle con lo que falta",percentage:"0%"},{id:7,name:"Salsas que no son",percentage:"20%"},{id:8,name:"Si se enoja y quiere cambio",percentage:"100%"},{id:9,name:"Mala atención Call Center",percentage:"20%"},{id:10,name:"Mala atención en Punto de venta",percentage:"20%"},{id:11,name:"Influencer",percentage:"100%"},{id:12,name:"No llegó el pedido",percentage:"20%"}],V=de(),s=re(),a=ye(),U=S([]),u=S([]);ue(async()=>{a.user.order_type={},u.value=await Y.get(`${ee}/payment_methods`),U.value=await Y.get(`${ee}/get_all_order_types`)}),b(()=>a.user.order_type,r=>{(r==null?void 0:r.id)==2&&(s.current_delivery=s.location.neigborhood.delivery_price,s.location.neigborhood.delivery_price=0)}),b(v,r=>{r&&alert("El esquema de comandas cambio y el modelo actual ya no es valido, la orden se envia como una orden comun")}),b(()=>{var r,t;return(t=(r=s.location)==null?void 0:r.site)==null?void 0:t.site_id},()=>{a.user.order_type=null}),b(()=>a.user.order_type,()=>{a.user.placa=null});const ae=ce(()=>{var t,p;return((p=(t=s.location)==null?void 0:t.site)==null?void 0:p.site_id)===33?U.value.filter(d=>(d==null?void 0:d.id)!==3):U.value.filter(d=>(d==null?void 0:d.id)!==1)});return(r,t)=>{var N,C,E,D,T,M,O,w,R,B,F,q,L,P,j,A,$,z,G,H,Z,J,K,Q,W,X;const p=_("Tag"),d=_("InputText"),I=_("Dropdown"),le=_("Checkbox"),se=_("InputNumber"),k=_("Textarea");return c(),m("div",ge,[he,l("div",fe,[l("div",ve,[n(p,{severity:"success",class:"advertice"},{default:g(()=>[y(" El tiempo promedio de entrega es de 60 a 75 minutos, por favor téngalo en cuenta antes de ordenar ")]),_:1})])]),l("div",Ve,[l("div",be,[xe,l("div",Ue,[n(d,{id:"username",placeholder:"NOMBRE",modelValue:o(a).user.name,"onUpdate:modelValue":t[0]||(t[0]=e=>o(a).user.name=e)},null,8,["modelValue"])]),Ie,l("div",Se,[n(d,{onClick:t[1]||(t[1]=e=>o(s).setVisible("currentSite",!0)),modelValue:o(s).location.neigborhood.name,id:"neighborhood",placeholder:"Ubicacion",readonly:""},null,8,["modelValue"])]),ke,l("div",Ne,[n(I,{style:{width:"100%"},modelValue:o(a).user.order_type,"onUpdate:modelValue":t[2]||(t[2]=e=>o(a).user.order_type=e),id:"metodo_de_entrega",placeholder:"Metodo de entrega",options:ae.value.filter(e=>[1,2,3].includes(e.id)),optionLabel:"name"},null,8,["modelValue","options"])]),!o(a).user.order_type||((N=o(a).user.order_type)==null?void 0:N.id)!==2?(c(),m(oe,{key:0},[Ce,l("div",Ee,[n(d,{modelValue:o(a).user.address,"onUpdate:modelValue":t[3]||(t[3]=e=>o(a).user.address=e),id:"address",placeholder:"DIRECCION"},null,8,["modelValue"])])],64)):h("",!0),De,l("div",Te,[n(d,{modelValue:o(a).user.email,"onUpdate:modelValue":t[4]||(t[4]=e=>o(a).user.email=e),id:"email",placeholder:"Correo Electronico"},null,8,["modelValue"])]),Me,l("div",Oe,[n(d,{modelValue:o(a).user.phone_number,"onUpdate:modelValue":t[5]||(t[5]=e=>o(a).user.phone_number=e),id:"phone_number",mask:"999 999 9999",placeholder:"TELEFONO"},null,8,["modelValue"])]),o(a).user.order_type&&((C=o(a).user.order_type)==null?void 0:C.id)===2&&((D=(E=o(s).location)==null?void 0:E.site)==null?void 0:D.site_id)===33?(c(),m(oe,{key:1},[we,l("div",Re,[n(d,{modelValue:o(a).user.placa,"onUpdate:modelValue":t[6]||(t[6]=e=>o(a).user.placa=e),id:"placa",placeholder:"Placa de tu vehiculo"},null,8,["modelValue"])])],64)):h("",!0),l("span",Be,[n(le,{modelValue:v.value,"onUpdate:modelValue":t[7]||(t[7]=e=>v.value=e),binary:""},null,8,["modelValue"]),y(" Es una cortesía? ")]),v.value?(c(),m("div",Fe,[n(I,{style:{width:"100%"},modelValue:o(a).user.payment_method_option,"onUpdate:modelValue":t[8]||(t[8]=e=>o(a).user.payment_method_option=e),id:"payment_method",placeholder:"Porcentaje de cortesía",options:te},{option:g(e=>[y(x(e.option.name)+" ",1),n(p,null,{default:g(()=>[y(x(e.option.percentage),1)]),_:2},1024)]),value:g(e=>[e.value?(c(),m("span",qe,[y(x(e.value.name)+" ",1),n(p,null,{default:g(()=>[y(x(e.value.percentage),1)]),_:2},1024)])):(c(),m("span",Le," Selecciona un porcentaje "))]),_:1},8,["modelValue"])])):h("",!0),Pe,l("div",je,[n(I,{style:{width:"100%"},modelValue:o(a).user.payment_method_option,"onUpdate:modelValue":t[9]||(t[9]=e=>o(a).user.payment_method_option=e),id:"payment_method",placeholder:"METODO DE PAGO",options:((M=(T=o(s).location)==null?void 0:T.site)==null?void 0:M.site_id)===7?u.value.filter(e=>[9,5,8].includes(e.id)):((w=(O=o(s).location)==null?void 0:O.site)==null?void 0:w.site_id)===33||((B=(R=o(s).location)==null?void 0:R.site)==null?void 0:B.site_id)===36||((q=(F=o(s).location)==null?void 0:F.site)==null?void 0:q.site_id)===35?u.value.filter(e=>[6,8].includes(e.id)):((P=(L=o(s).location)==null?void 0:L.site)==null?void 0:P.site_id)!==33||((A=(j=o(s).location)==null?void 0:j.site)==null?void 0:A.site_id)!==36||((z=($=o(s).location)==null?void 0:$.site)==null?void 0:z.site_id)!==35?u.value.filter(e=>![7,6,8,5].includes(e.id)):u.value.filter(e=>e.id!=8),optionLabel:"name"},null,8,["modelValue","options"])]),((H=(G=o(a).user)==null?void 0:G.order_type)==null?void 0:H.id)!=2?(c(),m("span",Ae,"Domicilio")):h("",!0),l("div",$e,[((J=(Z=o(a).user)==null?void 0:Z.order_type)==null?void 0:J.id)!=2?(c(),me(se,{key:0,style:{width:"100%"},prefix:"$",min:"0",maxFractionDigits:2,modelValue:o(s).location.neigborhood.delivery_price,"onUpdate:modelValue":t[10]||(t[10]=e=>o(s).location.neigborhood.delivery_price=e),id:"payment_method",placeholder:"Domicilio",options:((Q=(K=o(s).location)==null?void 0:K.site)==null?void 0:Q.site_id)===33?u.value.filter(e=>[6,8].includes(e==null?void 0:e.id)):((X=(W=o(s).location)==null?void 0:W.site)==null?void 0:X.site_id)!==33?u.value.filter(e=>![7].includes(e==null?void 0:e.id)):u.value,optionLabel:"name"},null,8,["modelValue","options"])):h("",!0)]),ze,n(k,{modelValue:o(V).cart.order_notes,"onUpdate:modelValue":t[11]||(t[11]=e=>o(V).cart.order_notes=e),class:"order-notes",placeholder:"Notas adicionales"},null,8,["modelValue"]),l("template",null,[n(k,{modelValue:o(V).cart.order_notes,"onUpdate:modelValue":t[12]||(t[12]=e=>o(V).cart.order_notes=e),class:"order-notes",placeholder:"Notas"},null,8,["modelValue"])])]),n(ne,{class:"resumen-column"})])])}}},Xe=ie(Ge,[["__scopeId","data-v-42fa893e"]]);export{Xe as default};
