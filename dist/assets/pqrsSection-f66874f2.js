import re from"./pqrUser-02bf5e33.js";import{_ as ue,L as ce,B as de,r,l as me,q as pe,i as _e,A as ye,a as m,o as s,c as l,g as i,w as d,b as t,F as z,d as H,u as x,s as he,j as G,U as O,t as a,k,m as p,f as n,M as A,n as ve,e as Q,p as be,h as fe}from"./index-5708809f.js";import"./editor.esm-86c0ec1e.js";/* empty css                                                             */const u=V=>(be("data-v-1d6b7291"),V=V(),fe(),V),ge={style:{display:"flex","flex-direction":"column"}},xe={style:{"min-width":"max-content",margin:"0",padding:"0"},class:"p-text-secondary m-0 p-0"},ke={style:{"min-width":"max-content",margin:"0",padding:"0"},class:"p-text-secondary m-0 p-0"},we={class:"m-0"},Ve=u(()=>t("div",null,null,-1)),Te={key:0,class:"m-0",style:{"text-transform":"capitalize"}},Ce=u(()=>t("b",null,"Responsable:",-1)),qe={key:1,class:"p-0 m-0"},Ne={key:2,class:"p-0 m-0"},Se={key:3},Pe=u(()=>t("b",null,"Notas",-1)),De=u(()=>t("br",null,null,-1)),Re=u(()=>t("div",{style:{display:"flex",gap:"1rem"}},null,-1)),Ie=u(()=>t("div",null,[t("h4",{class:"mt-0 py-0"})],-1)),Le={style:{display:"flex","flex-direction":"column"}},ze={key:0},Ue=u(()=>t("b",null,"Datos del cliente",-1)),Be=[Ue],$e={key:1},je={key:2},Ee=u(()=>t("h6",null,[t("b",null,"Historial")],-1)),Me={style:{display:"flex","flex-direction":"column"}},Fe={style:{"min-width":"max-content",margin:"0",padding:"0"},class:"p-text-secondary m-0 p-0"},He={style:{"min-width":"max-content",margin:"0",padding:"0"},class:"p-text-secondary m-0 p-0"},Ge={class:"m-0"},Oe=u(()=>t("div",null,null,-1)),Ae={key:0,class:"m-0",style:{"text-transform":"capitalize"}},Qe=u(()=>t("b",null,"Responsable:",-1)),Je={key:1,class:"p-0 m-0"},Ke={key:2,class:"p-0 m-0"},We={key:3},Xe=u(()=>t("b",null,"Notas",-1)),Ye=u(()=>t("br",null,null,-1)),Ze=u(()=>t("div",{style:{display:"flex",gap:"1rem"}},null,-1)),et=u(()=>t("h6",null,[t("b",null,"Como desea proceder?")],-1)),tt={key:3},st={key:0,style:{display:"flex","justify-content":"space-between",margin:"1rem 0"}},ot=u(()=>t("h6",{class:"m-0"},"Le costo algo a la empresa?",-1)),lt={key:1},at=u(()=>t("h6",null,"Cuanto?",-1)),nt={key:2,style:{display:"flex","justify-content":"space-between",margin:"1rem 0"}},it=u(()=>t("h6",{class:"m-0"},"Le envio una orden como cortesia ?",-1)),rt={key:3},ut=u(()=>t("h6",null,"Id de la orden",-1)),ct=u(()=>t("h6",{class:"m-0 my-3"},"Detalles",-1)),dt={style:{"background-color":"#ff00002e"},class:"p-3"},mt=u(()=>t("b",null,"No preste sus credenciales de Salchigest, cada miembro de la empresa tiene los suyos, muchas gracias",-1)),pt={style:{display:"flex","justify-content":"end","margin-top":"2rem"}},_t={class:"nav_bar shadow-2 p-0 my-0 mx-2",style:{position:"sticky",top:"3rem","max-width":"900px","border-radius":"10rem","background-color":"white","z-index":"99"}},yt={class:"nav_bar--buttons p-0 m-1",style:{}},ht={key:"",class:""},vt={class:"grid p-3",style:{"align-items":"center","justify-content":"space-between",display:"flex",gap:"1rem"}},bt={class:"px-2"},ft=u(()=>t("i",{class:"fa-regular fa-bars-progress"},null,-1)),gt={style:{"text-transform":"uppercase"}},xt={style:{display:"flex",gap:"1rem"}},kt={key:0,style:{"min-width":"max-content"},class:"m-0 p-0"},wt={key:2,class:"m-0 p-0"},Vt={key:3,class:"m-0 p-0"},Tt={key:5,class:"p-2",style:{display:"flex",gap:".1rem","flex-direction":"column","align-items":"start"}},Ct={style:{display:"flex",gap:".5rem","justify-content":"center"},class:"px-2"},qt={__name:"pqrsSection",setup(V){const J=ce(),T=de(),S=r([{id:0,name:"Todos",description:"Estado inicial de la pqr",exist:!0,color:"#3498DB"}]),K=_=>T.params.section_id!=2?_.filter(c=>c.columnValue!=="red"):_,C=r({id:2,name:"Todos",description:"Estado inicial de la pqr",exist:!0,color:"#3498DB"}),W=me(),U=r([]),y=r(),X=async _=>{D.value=!0,P.value=_},Y=async _=>{R.value=!0,b.value=_},P=r([]),b=r([]),D=r(!1),R=r(!1),q=r(null),Z=()=>{q.value={global:{value:null,matchMode:he.CONTAINS}}};pe(()=>{Z()});const ee=r([{columnName:"Id",columnValue:"pqr_request_id",columnType:"other",size:"1rem",vif:!0},{columnName:"Sede",columnValue:"site_name",columnType:"other",size:"4rem",vif:!0},{columnName:"Red",columnValue:"red",columnType:"other",size:"4rem",vif:!0},{columnName:"Calificacion",columnValue:"rating",columnType:"rating",size:"10rem",vif:!0},{columnName:"Tipo",columnValue:"request_type",columnType:"other",size:"15rem",vif:!0},{columnName:"Comentarios",columnValue:"request_content",columnType:"other",size:"20rem",vif:!0},{columnName:"Estado",columnValue:"current_status",columnType:"status",size:"15rem",vif:!0}]);r({2:"#3498DB",4:"#2ECC71",5:"#16A085",6:"#E74C3C",7:"#F39C12"}),r({question:"",answer:""}),r({}),r({}),r(null);const B=r([{}]);r({}),r(!1),r({});const I=r(!1),L=r(!1),$=async()=>{B.value=await G.get(`${O}/get-all-pqrs`);const _=await G.get(`${O}/get-all-pqrs-status`);if(_){const c=new Set(S.value.map(f=>f.id));_.forEach(f=>{c.has(f.id)||(S.value.push(f),c.add(f.id))})}U.value=_};return _e(async()=>{$()}),ye(()=>T.params.section_id,()=>{$()},{deep:!0}),(_,c)=>{const f=m("Tag"),j=m("Timeline"),E=m("Dialog"),te=m("Dropdown"),M=m("Checkbox"),se=m("InputNumber"),F=m("InputText"),oe=m("Textarea"),w=m("Button"),le=m("Rating"),ae=m("column"),ne=m("Column"),ie=m("DataTable");return s(),l(z,null,[i(E,{class:"mx-2",visible:D.value,"onUpdate:visible":c[0]||(c[0]=e=>D.value=e),modal:"",header:`Historial de la pqr  ID   ${P.value.pqr_request_id}`,style:{width:"40rem"}},{default:d(()=>[i(j,{value:P.value.status_history},{opposite:d(e=>{var o,h,v,g;return[t("div",ge,[t("p",xe,a((o=e.item.timestamp)==null?void 0:o.split(" ")[0]),1),t("p",ke,a((g=(v=(h=e.item.timestamp)==null?void 0:h.split(" "))==null?void 0:v.slice(1,4))==null?void 0:g.join(" ")),1)])]}),content:d(e=>{var o;return[i(f,{style:k(`background-color:${e.item.color}`)},{default:d(()=>[t("p",we,[t("b",null,a(e.item.status),1)])]),_:2},1032,["style"]),Ve,e.item.responsible_name?(s(),l("p",Te,[Ce,p(" "+a((o=e.item.responsible_name)==null?void 0:o.toLowerCase()),1)])):n("",!0),e.item.value?(s(),l("p",qe,[p("Le costo a la empresa "),t("b",null,a(x(A)(e.item.value)),1)])):n("",!0),e.item.order_id?(s(),l("p",Ne,[p("Orden entregada "),t("b",null,a(e.item.order_id),1)])):n("",!0),e.item.notes?(s(),l("p",Se,[Pe,p(" "+a(e.item.notes),1)])):n("",!0),De,Re]}),_:1},8,["value"])]),_:1},8,["visible","header"]),Ie,i(E,{class:"mx-2",visible:R.value,"onUpdate:visible":c[4]||(c[4]=e=>R.value=e),modal:"",header:`Gestion de la pqr  ID    ${b.value.pqr_request_id}`,style:{width:"50rem"}},{footer:d(()=>[t("div",pt,[i(w,{label:"Enviar",severity:"help"})])]),default:d(()=>[t("div",Le,[b.value.user_name||b.value.user_phone?(s(),l("h6",ze,Be)):n("",!0),b.value.user_name?(s(),l("span",$e,[t("b",null,"Nombre: "+a(b.value.user_name),1)])):n("",!0),b.value.user_phone?(s(),l("span",je,[t("b",null,"Telefono: "+a(b.value.user_phone),1)])):n("",!0),Ee,i(j,{value:b.value.status_history},{opposite:d(e=>{var o,h,v,g;return[t("div",Me,[t("p",Fe,a((o=e.item.timestamp)==null?void 0:o.split(" ")[0]),1),t("p",He,a((g=(v=(h=e.item.timestamp)==null?void 0:h.split(" "))==null?void 0:v.slice(1,4))==null?void 0:g.join(" ")),1)])]}),content:d(e=>{var o;return[i(f,{style:k(`background-color:${e.item.color}`)},{default:d(()=>[t("p",Ge,[t("b",null,a(e.item.status),1)])]),_:2},1032,["style"]),Oe,e.item.responsible_name?(s(),l("p",Ae,[Qe,p(" "+a((o=e.item.responsible_name)==null?void 0:o.toLowerCase()),1)])):n("",!0),e.item.value?(s(),l("p",Je,[p("Le costo a la empresa "),t("b",null,a(x(A)(e.item.value)),1)])):n("",!0),e.item.order_id?(s(),l("p",Ke,[p("Orden entregada "),t("b",null,a(e.item.order_id),1)])):n("",!0),e.item.notes?(s(),l("p",We,[Xe,p(" "+a(e.item.notes),1)])):n("",!0),Ye,Ze]}),_:1},8,["value"]),et,i(te,{modelValue:y.value,"onUpdate:modelValue":c[1]||(c[1]=e=>y.value=e),options:U.value.filter(e=>e.id!=2),optionLabel:"name",optionValue:"id"},null,8,["modelValue","options"]),y.value?(s(),l("div",tt,[y.value==4||y.value==7?(s(),l("div",st,[ot,i(M,{binary:"",modelValue:I.value,"onUpdate:modelValue":c[2]||(c[2]=e=>I.value=e)},null,8,["modelValue"])])):n("",!0),(y.value==4||y.value==7)&&I.value?(s(),l("div",lt,[at,i(se,{style:{width:"100%"}})])):n("",!0),y.value==4||y.value==7?(s(),l("div",nt,[it,i(M,{modelValue:L.value,"onUpdate:modelValue":c[3]||(c[3]=e=>L.value=e),binary:""},null,8,["modelValue"])])):n("",!0),(y.value==4||y.value==7)&&L.value?(s(),l("div",rt,[ut,i(F,{style:{width:"100%"}})])):n("",!0),t("div",null,[ct,i(oe,{rows:"5",style:{resize:"none",width:"100%"}})]),t("h6",dt,[p("Recuerde que esta firmando como "),t("b",null,a(x(W).rawUserData.name),1),p(" y por ende se hace responsable, "),mt])])):n("",!0)])]),_:1},8,["visible","header"]),t("nav",_t,[t("ul",yt,[(s(!0),l(z,null,H(S.value,e=>(s(),l("li",ht,[i(w,{onClick:()=>C.value=e,class:ve(["nav_bar--buttons-button p-2",e.id==C.value.id?"nav_bar--buttons-button-selected":""]),label:e.name},null,8,["onClick","class","label"])]))),128))])]),i(ie,{paginator:!0,rows:15,style:{width:"100%","max-width":"1280px"},paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",currentPageReportTemplate:"Mostrando {first} a {last} de {totalRecords} solicitudes",rowsPerPageOptions:[5,10,25,100],scrollable:"",showGridlines:"",scrollHeight:"65vh",stripedRows:"",class:"col-12 m-auto",value:B.value.filter(e=>{var o,h,v;return(((o=e.current_status)==null?void 0:o.status)==((h=C.value)==null?void 0:h.name)||((v=C.value)==null?void 0:v.name)=="Todos")&&x(T).params.section_id==(e==null?void 0:e.channel_id)}),tableStyle:"min-width: 50rem;",filters:q.value},{header:d(()=>[t("div",vt,[t("h4",bt,[ft,p(),t("b",gt,[p("PQRS "),t("b",null,a(x(T).params.section),1)])]),t("div",xt,[i(F,{class:"",modelValue:q.value.global.value,"onUpdate:modelValue":c[5]||(c[5]=e=>q.value.global.value=e),placeholder:"Buscar Solicitud..."},null,8,["modelValue"]),i(w,{onClick:c[6]||(c[6]=e=>x(J).visible_add_pqr=!0),label:"Nueva PQR",severity:"help"})])])]),default:d(()=>[(s(!0),l(z,null,H(K(ee.value),e=>(s(),Q(ae,{header:e.columnName,style:k(`min-width:${e.size}`),field:e.columnValue,class:"my-0 py-0"},{body:d(o=>{var h,v,g;return[e.columnType=="date"?(s(),l("h6",kt,a((h=o.data[e.columnValue])==null?void 0:h.split("-").reverse().join("-")),1)):n("",!0),e.columnType=="max-content"?(s(),l("h6",{key:1,style:k(e.columnType=="max-content"?"min-width: max-content":""),class:"m-0 p-0"},a(o.data[e.columnValue]),5)):n("",!0),e.columnType=="other"?(s(),l("h6",wt,a(o.data[e.columnValue]),1)):n("",!0),e.columnType=="rating"?(s(),l("h6",Vt,[o.data[e.columnValue]>0?(s(),Q(le,{key:0,cancel:!1,readonly:"",modelValue:o.data[e.columnValue],"onUpdate:modelValue":N=>o.data[e.columnValue]=N},null,8,["modelValue","onUpdate:modelValue"])):n("",!0)])):n("",!0),e.columnType=="money"?(s(),l("h6",{key:4,style:k(e.columnType=="max-content"?"min-width: max-content":""),class:"m-0 p-0"},a(_.formatoPesosColombianos(o.data[e.columnValue])),5)):n("",!0),e.columnValue=="current_status"?(s(),l("div",Tt,[i(f,{style:k([{color:"white"},`background-color:${(v=o.data[e.columnValue])==null?void 0:v.color}`])},{default:d(()=>{var N;return[p(a((N=o.data[e.columnValue])==null?void 0:N.status),1)]}),_:2},1032,["style"]),t("b",null,a((g=o.data[e.columnValue])==null?void 0:g.timestamp),1)])):n("",!0)]}),_:2},1032,["header","style","field"]))),256)),i(ne,{class:"my-0 py-0 px-0 mx-0",style:{},header:"Interactuar"},{body:d(e=>[t("div",Ct,[i(w,{onClick:o=>X(e.data),severity:"info",icon:"pi pi-history p-0",class:"my-0 p-2"},null,8,["onClick"]),i(w,{onClick:o=>Y(e.data),label:"Gestionar",severity:"help",icon:"pi pi-check p-0",class:"my-0 py-2"},null,8,["onClick"])])]),_:1})]),_:1},8,["value","filters"]),i(re)],64)}}},Rt=ue(qt,[["__scopeId","data-v-1d6b7291"]]);export{Rt as default};
