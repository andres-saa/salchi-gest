import{A as L}from"./auditService-e9869ef5.js";import{f as v,h as S,r,o as s,c as a,a as e,d as l,w as i,F as p,k as c,t as n,n as f,b as x}from"./index-f52b545e.js";const U={class:"m-0 p-0 md:p-4"},M=e("div",{class:"flex flex-wrap align-items-center justify-content-between gap-2"},[e("span",{class:"text-xl text-900 font-bold"},"Auditorias")],-1),j=e("i",{class:"fa-solid fa-eye text-2xl"},null,-1),z={style:{"text-transform":"capitalize"}},E={class:"text-xl"},G=e("b",null,"Fecha de auditoría:",-1),K={key:0},O=e("b",null,"Pendientes",-1),W=[O],$={class:"p-0"},q={style:{"list-style":"none"},class:"my-2 p-0"},H={key:0},J={style:{"list-style":"none"},class:"text-danger"},Q={class:"py-0 my-0",style:{"font-weight":"bold"}},X={style:{color:"red"}},Y={key:0},Z={class:"p-0"},ee={key:0},te={key:1},le={__name:"listAudit",setup(se){const V=u=>{b.value=!0,h.value=u,L.getAuditCheckGroupsWithItems(u.id).then(y=>_.value=y)},b=v(!1),C=v(),h=v({}),_=v({});return S(()=>{L.getAudits().then(u=>C.value=u)}),(u,y)=>{const m=r("Column"),D=r("Rating"),T=r("Button"),R=r("DataTable"),P=r("Checkbox"),B=r("Tag"),F=r("Dialog");return s(),a(p,null,[e("div",U,[l(R,{value:C.value,tableStyle:"min-width: 50rem",class:"p-0",dataKey:"id",paginator:!0,rows:10,filters:u.filters,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25,100],currentPageReportTemplate:"Mostrando {first} to {last} de {totalRecords} Auditorias",responsiveLayout:"scroll",scrollable:""},{header:i(()=>[M]),default:i(()=>[l(m,{header:"Coordinador"},{body:i(t=>[c(n(t.data.coordinator_name),1)]),_:1}),l(m,{header:"Sede",class:"p-0 m-0"},{body:i(t=>[c(n(t.data.site_name),1)]),_:1}),l(m,{header:"Fecha",class:"p-0 m-0"},{body:i(t=>[c(n(t.data.audit_date),1)]),_:1}),l(m,{class:"p-0 m-0",field:"rating",header:"Calificacion",sortable:"",style:{"min-width":"12rem"}},{body:i(t=>[l(D,{modelValue:t.data.score},null,8,["modelValue"])]),_:1}),l(m,{class:"p-0 m-0",field:"inventoryStatus",header:"ver",sortable:"",style:{}},{body:i(t=>[l(T,{onClick:k=>V(t.data),text:"",severity:"help"},{default:i(()=>[j]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["value","filters"])]),l(F,{visible:b.value,"onUpdate:visible":y[0]||(y[0]=t=>b.value=t),modal:"",header:"Detalles de la Auditoría",style:{width:"30rem"}},{default:i(()=>{var t,k,w;return[_.value?(s(),a(p,{key:0},[e("h4",z,[e("b",null,n((t=h.value.site_name)==null?void 0:t.toLowerCase())+" - "+n((k=h.value.coordinator_name)==null?void 0:k.toLowerCase()),1)]),e("p",E,[G,c(" "+n(h.value.audit_date),1)]),((w=_.value[1])==null?void 0:w.length)>[0]?(s(),a("h5",K,W)):f("",!0),(s(!0),a(p,null,x(_.value[1],(o,g)=>(s(),a("div",{key:g},[e("ul",$,[e("li",q,[l(P,{class:"mr-3",binary:!0}),c(" "+n(o.item_description)+" ",1),l(B,{severity:o.resolved?"succes":"danger"},{default:i(()=>[c(n(o.resolved?"resuelto":"pendiente"),1)]),_:2},1032,["severity"]),o.warning_text?(s(),a("ul",H,[e("li",J,[e("p",Q," ("+n(o.warning_date)+")",1),e("span",X,n(o.warning_text),1)])])):f("",!0)])])]))),128)),(s(!0),a(p,null,x(_.value[0],(o,g)=>{var A;return s(),a("div",{key:g},[(A=o==null?void 0:o.items)!=null&&A.some(d=>d==null?void 0:d.status)?(s(),a("h5",Y,[e("b",null,n(o.group_name),1)])):f("",!0),e("ul",Z,[(s(!0),a(p,null,x(o.items,(d,N)=>(s(),a("li",{style:{"list-style":"none"},class:"my-2 p-0",key:N},[d.status?(s(),a("div",ee,[l(P,{class:"mr-3",readonly:"",modelValue:d.status,"onUpdate:modelValue":I=>d.status=I,binary:!0},null,8,["modelValue","onUpdate:modelValue"]),c(" "+n(d.description)+" ",1)])):f("",!0)]))),128))])])}),128))],64)):(s(),a("p",te,"Información de la auditoría no disponible."))]}),_:1},8,["visible"])],64)}}};export{le as default};
