import"./pqrsService-fca681eb.js";import{_ as ne,E as ce,a0 as ue,j as a,G as ie,l as re,z as me,k as de,H as R,r as h,o,c,e as r,a as d,F as I,b as B,f as _,A as pe,m as z,U as q,d as _e,t as m,g as C,i as x,n as g,h as N,q as he,x as ve}from"./index-bc571c19.js";/* empty css                                                                */import{u as y,a as M}from"./xlsx-4cca7150.js";const U=V=>(he("data-v-09579e22"),V=V(),ve(),V),ye={class:"page-wrap theme-bw"},fe={class:"nav_bar"},be={class:"nav_bar--buttons"},ge={class:"table-toolbar"},Ve={class:"toolbar-title"},ke=U(()=>d("i",{class:"fa-regular fa-bars-progress"},null,-1)),we={class:"toolbar-actions"},Te={class:"search-wrap"},Ce=U(()=>d("i",{class:"pi pi-search"},null,-1)),xe={key:0,class:"m-0 p-0 cell mono",style:{"min-width":"max-content"}},Ne={key:1,class:"m-0 p-0 cell",style:{"min-width":"max-content"}},ze={key:2,class:"m-0 p-0 cell",style:{"min-width":"max-content"}},qe={key:3,class:"m-0 p-0 cell",style:{"min-width":"max-content"}},Pe={key:4,class:"m-0 p-0"},Fe={key:5,class:"m-0 p-0 cell"},$e={key:6,class:"pill-col"},De={class:"mono"},Se={key:7,class:"pill-col"},Ee={key:8,class:"pill-col"},Re={key:9,class:"pill-col"},Ie={class:"row-actions"},Be={__name:"Franquicias",setup(V){ce();const P=ue(),L=a(""),j=a(),A=ie(),H=a([{name:"Pendiente"},{name:"Tomada en cuenta"},{name:"Descartada"}]),O=async()=>{const t=w.value.filter(l=>l.status==v.value.name).map(l=>{const p={};return f.value.forEach(n=>{p[n.columnName]=l[n.columnValue]}),p}),u=y.json_to_sheet(t);function b(l){const n=parseFloat(l)*10;return Math.min(n,50)}u["!cols"]=f.value.map(l=>({wch:b(l.size)}));const i=y.book_new();y.book_append_sheet(i,u,"Usuarios"),M(i,`Reporte de franquicias ${v.value.name}.xlsx`)},G=async()=>{const t=w.value.map(l=>{const p={};return f.value.forEach(n=>{p[n.columnName]=l[n.columnValue]}),p}),u=y.json_to_sheet(t);function b(l){const n=parseFloat(l)*10;return Math.min(n,50)}u["!cols"]=f.value.map(l=>({wch:b(l.size)}));const i=y.book_new();y.book_append_sheet(i,u,"Usuarios"),M(i,"Reporte de franquicias todas.xlsx")},W=t=>t,v=a({name:"Pendiente"});re();const Z=a([]),J=a(),K=t=>{P.require({message:"¿Está seguro de que desea tomar en cuenta esta solicitud?",header:"Confirmación",icon:"pi pi-exclamation-triangle",accept:()=>{X(t)},reject:()=>{}})},Q=t=>{P.require({message:"¿Está seguro de que desea descartar esta solicitud?",header:"Confirmación",icon:"pi pi-exclamation-triangle",accept:()=>{Y(t)},reject:()=>{}})},X=async t=>{t.status="Tomada en cuenta",await z.put(`${q}/update_franquicia_request/${t.id}`,t)},Y=async t=>{t.status="Descartada",await z.put(`${q}/update_franquicia_request/${t.id}`,t)};a([]),a([]),a(!1),a(!1);const k=a(null),ee=()=>{k.value={global:{value:null,matchMode:pe.CONTAINS}}};me(()=>{ee()});const f=a([{columnName:"Id",columnValue:"id",columnType:"other",size:"1.2rem",vif:!0},{columnName:"Fecha y Hora",columnValue:"formatted_date",columnType:"other",size:"4rem",vif:!0},{columnName:"Nombre",columnValue:"name",columnType:"other",size:"3rem",vif:!0},{columnName:"Telefono",columnValue:"phone",columnType:"other",size:"3rem",vif:!0},{columnName:"Email",columnValue:"email",columnType:"other",size:"4rem",vif:!0},{columnName:"Motivo",columnValue:"reason",columnType:"other",size:"20rem",vif:!0},{columnName:"Capacidad de inversion",columnValue:"investment_capacity",columnType:"other",size:"4rem",vif:!0},{columnName:"Zona de interes",columnValue:"zone_of_interest",columnType:"other",size:"3rem",vif:!0},{columnName:"Ciudad",columnValue:"city",columnType:"other",size:"3rem",vif:!0},{columnName:"Esta en sector gastronomico?",columnValue:"is_in_gastronomic_sector",columnType:"bool",size:"3rem"},{columnName:"Participara en la operacion?",columnValue:"will_participate_in_operation",columnType:"bool",size:"3rem",vif:!0},{columnName:"Fuente de ingresos",columnValue:"source_of_income",columnType:"other",size:"4rem",vif:!0},{columnName:"Estado",columnValue:"status",columnType:"other",size:"3rem",vif:!0}]);a({2:"#3498DB",4:"#2ECC71",5:"#16A085",6:"#E74C3C",7:"#F39C12"}),a({question:"",answer:""}),a({}),a({}),a(null);const w=a([{}]);a({}),a(!1),a({});const ae=a(!1),te=a(),se=a(!1),F=async()=>{w.value=await z.get(`${q}/get_franquicia_request`),Z.value=status};de(async()=>{F()}),R(J,()=>{oe()});const oe=()=>{te.value=null,L.value="",j.value=null,ae.value=!1,se.value=!1};return a(),R(()=>A.params.section_id,()=>{F()},{deep:!0}),(t,u)=>{const b=h("ConfirmDialog"),i=h("Button"),l=h("InputText"),p=h("Rating"),n=h("Tag"),$=h("Column"),le=h("DataTable");return o(),c("div",ye,[r(b),d("nav",fe,[d("ul",be,[(o(!0),c(I,null,B(H.value,e=>(o(),c("li",{key:e.name,class:"nav_bar--item"},[r(i,{onClick:()=>v.value=e,class:_e(["nav_bar--buttons-button p-button-text",e.name==v.value.name?"nav_bar--buttons-button-selected":""]),label:e.name,icon:"pi pi-check",iconPos:"left"},null,8,["onClick","class","label"])]))),128))])]),r(le,{paginator:!0,rows:15,class:"col-12 mt-5 fancy-table",value:w.value.filter(e=>e.status==v.value.name),filters:k.value,scrollable:"",showGridlines:"",stripedRows:"",scrollHeight:"65vh",tableStyle:"min-width: 64rem; width:100%;",paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",currentPageReportTemplate:"Mostrando {first} a {last} de {totalRecords} solicitudes",rowsPerPageOptions:[5,10,25,100]},{header:_(()=>[d("div",ge,[d("h4",Ve,[ke,d("b",null," Solicitudes de franquicias "+m(v.value.name),1)]),d("div",we,[d("span",Te,[Ce,r(l,{modelValue:k.value.global.value,"onUpdate:modelValue":u[0]||(u[0]=e=>k.value.global.value=e),placeholder:"Buscar solicitud...",class:"w-full"},null,8,["modelValue"])]),r(i,{onClick:u[1]||(u[1]=e=>O()),label:"Descargar Registros",icon:"pi pi-download",severity:"help",class:"toolbar-btn"}),r(i,{onClick:u[2]||(u[2]=e=>G()),label:"Descargar Todo",icon:"pi pi-download",severity:"help",class:"toolbar-btn"})])])]),default:_(()=>[(o(!0),c(I,null,B(W(f.value),e=>(o(),C($,{key:e.columnValue,header:e.columnName,field:e.columnValue,style:g(`min-width:${e.size}`),class:"my-0 py-2"},{body:_(s=>{var D,S,E;return[e.columnType=="date"?(o(),c("h6",xe,m(((D=s.data[e.columnValue])==null?void 0:D.split("-").reverse().join("-"))||"---------"),1)):e.columnType=="bool"?(o(),c("h6",Ne,m((s.data[e.columnValue]?"Sí":"No")||"---------"),1)):e.columnType=="max-content"?(o(),c("h6",ze,m(s.data[e.columnValue]||"---------"),1)):e.columnType=="money"?(o(),c("h6",qe,m(t.formatoPesosColombianos(s.data[e.columnValue])||"---------"),1)):e.columnType=="rating"?(o(),c("div",Pe,[s.data[e.columnValue]>0?(o(),C(p,{key:0,cancel:!1,readonly:"",modelValue:s.data[e.columnValue],"onUpdate:modelValue":T=>s.data[e.columnValue]=T},null,8,["modelValue","onUpdate:modelValue"])):x("",!0)])):e.columnValue!=="current_status"&&e.columnValue!=="channel"&&e.columnValue!=="tag_name"&&e.columnValue!=="restaurant"?(o(),c("h6",Fe,m(s.data[e.columnValue]||"---------"),1)):e.columnValue=="current_status"?(o(),c("div",$e,[r(n,{class:"status-pill bw-pill",style:g(`background-color:${(S=s.data[e.columnValue])==null?void 0:S.color}`)},{default:_(()=>{var T;return[N(m(((T=s.data[e.columnValue])==null?void 0:T.status)||"---------"),1)]}),_:2},1032,["style"]),d("b",De,m(((E=s.data[e.columnValue])==null?void 0:E.timestamp)||"---------"),1)])):e.columnValue=="channel"?(o(),c("div",Se,[r(n,{class:"status-pill bw-pill",style:g(`background-color:${s.data.channel_color}`)},{default:_(()=>[N(m(s.data[e.columnValue]||"---------"),1)]),_:2},1032,["style"])])):e.columnValue=="tag_name"?(o(),c("div",Ee,[r(n,{class:"status-pill bw-pill",style:g(`background-color:${s.data.tag_color}`)},{default:_(()=>[N(m(s.data[e.columnValue]),1)]),_:2},1032,["style"])])):e.columnValue=="restaurant"?(o(),c("div",Re,[r(n,{class:"status-pill bw-pill",style:g(`background-color:${s.data.restaurant_color}`)},{default:_(()=>[N(m(s.data[e.columnValue]),1)]),_:2},1032,["style"])])):x("",!0)]}),_:2},1032,["header","field","style"]))),128)),r($,{header:"Interactuar",class:"my-0 py-2 px-0 mx-0"},{body:_(e=>[d("div",Ie,[e.data.status!="Tomada en cuenta"?(o(),C(i,{key:0,onClick:s=>K(e.data),label:"Tomar en cuenta",icon:"pi pi-check",severity:"help",class:"action-btn"},null,8,["onClick"])):x("",!0),e.data.status!="Descartada"?(o(),C(i,{key:1,onClick:s=>Q(e.data),label:"Descartar",icon:"pi pi-times",severity:"danger",class:"action-btn"},null,8,["onClick"])):x("",!0)])]),_:1})]),_:1},8,["value","filters"])])}}},Ae=ne(Be,[["__scopeId","data-v-09579e22"]]);export{Ae as default};
