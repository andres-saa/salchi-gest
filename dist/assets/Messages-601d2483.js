import{I as Ye,i as K,G as D,h as l,D as N,C as Ze,J as Ee,M as Ke,g as R,o as s,c as i,f as g,e as H,a as r,F as I,q as X,k as c,t as C,n as w,d as z,u as Ae,r as Se,L as je,b as Xe,H as W,j as pe,p as et,m as tt,N as De,_ as ot}from"./index-8122cb18.js";import{u as st,P as at}from"./Messages.vue_vue_type_style_index_0_scoped_e58ecd0d_lang-8dd43c50.js";const p=U=>(et("data-v-e58ecd0d"),U=U(),tt(),U),it={key:0},rt=["src"],lt=["src"],nt=["href"],dt=p(()=>r("i",{class:"pi pi-file"},null,-1)),ct={style:{color:"white",margin:"0","font-weight":"300"}},ut=["innerHTML"],mt=["innerHTML"],pt={style:{color:"white",margin:"0","font-weight":"300",position:"absolute",bottom:".5rem",right:"1rem","min-width":"max-content",display:"flex",gap:".5rem"}},_t={style:{opacity:".5"}},ht={key:0,class:"fa-solid fa-check-double",style:{color:"greenyellow"}},gt={key:1,class:"fa-solid fa-check",style:{color:"greenyellow"}},ft={key:2,class:"fa-solid fa-check",style:{color:"gray"}},vt={key:1,style:{position:"absolute",left:"-8px",top:"0",color:"#2f2f41"},viewBox:"0 0 8 13",height:"13",width:"8"},yt=p(()=>r("path",{opacity:"0.13",fill:"#0000000",d:"M1.533,3.568L8,12.193V1H2.812C1.042,1,0.474,2.156,1.533,3.568z"},null,-1)),wt=p(()=>r("path",{fill:"currentColor",d:"M1.533,2.568L8,11.193V0L2.812,0C1.042,0,0.474,1.156,1.533,2.568z"},null,-1)),kt=[yt,wt],bt={key:2,style:{position:"absolute",right:"-8px",top:"0",color:"#0a3744"},viewBox:"0 0 8 13",height:"13",width:"8"},xt=p(()=>r("path",{opacity:"0.13",d:"M5.188,1H0v11.193l6.467-8.625C7.526,2.156,6.958,1,5.188,1z"},null,-1)),Ct=p(()=>r("path",{fill:"currentColor",d:"M5.188,0H0v11.193l6.467-8.625C7.526,1.156,6.958,0,5.188,0z"},null,-1)),Mt=[xt,Ct],Lt={style:{display:"flex",gap:"1rem","flex-direction":"column",padding:"1rem  0rem"}},Tt={style:{display:"flex"}},$t=p(()=>r("i",{class:"fa fa-laugh-wink emoji-picker"},null,-1)),Et={key:0,style:{position:"absolute",inset:"0",background:"#00000080","z-index":"500000",display:"flex","align-items":"center","justify-content":"center",color:"#fff","font-size":"1.6rem","pointer-events":"none"}},At={style:{position:"relative",height:"100%",width:"100%"}},St={style:{margin:"0",color:"white","font-weight":"400"}},jt=p(()=>r("i",{class:"fa-solid fa-message text-xl p-1"},null,-1)),Dt=p(()=>r("i",{class:"fa-solid fa-message text-xl p-1"},null,-1)),Rt=["src","onClick"],Ht=["src"],It=["href"],zt=p(()=>r("i",{class:"pi pi-file"},null,-1)),Ut=["src","onClick"],Bt=["src"],Vt=["href"],Ft=p(()=>r("i",{class:"pi pi-file"},null,-1)),Ot={style:{color:"white",margin:"0","font-weight":"300"}},Pt=["innerHTML"],Nt=["innerHTML"],Wt=["onClick"],Qt={style:{color:"white",margin:"0","font-weight":"300"}},qt=["innerHTML"],Gt=["innerHTML"],Jt=["onClick"],Yt={style:{color:"white",margin:"0","font-weight":"300",position:"absolute",bottom:".5rem",right:"1rem","min-width":"max-content",display:"flex",gap:".5rem"}},Zt={style:{opacity:".5"}},Kt={key:0,class:"fa-solid fa-check-double",style:{color:"greenyellow"}},Xt={key:1,class:"fa-solid fa-check",style:{color:"greenyellow"}},eo={key:2,class:"fa-solid fa-check",style:{color:"gray"}},to={key:4,style:{position:"absolute",left:"-8px",top:"0",color:"#2f2f41"},viewBox:"0 0 8 13",height:"13",width:"8"},oo=p(()=>r("path",{opacity:"0.13",fill:"#0000000",d:"M1.533,3.568L8,12.193V1H2.812C1.042,1,0.474,2.156,1.533,3.568z"},null,-1)),so=p(()=>r("path",{fill:"currentColor",d:"M1.533,2.568L8,11.193V0L2.812,0C1.042,0,0.474,1.156,1.533,2.568z"},null,-1)),ao=[oo,so],io={key:5,style:{position:"absolute",right:"-8px",top:"0",color:"#0a3744"},viewBox:"0 0 8 13",height:"13",width:"8"},ro=p(()=>r("path",{opacity:"0.13",d:"M5.188,1H0v11.193l6.467-8.625C7.526,2.156,6.958,1,5.188,1z"},null,-1)),lo=p(()=>r("path",{fill:"currentColor",d:"M5.188,0H0v11.193l6.467-8.625C7.526,1.156,6.958,0,5.188,0z"},null,-1)),no=[ro,lo],co={key:1,style:{height:"100%",width:"3rem","min-width":"3rem","aspect-ratio":"1/1","background-color":"rgb(3 88 95 / 53%)","border-radius":"50%",display:"flex","align-items":"center","justify-content":"center","text-transform":"uppercase"}},uo={style:{margin:"0",color:"white","font-weight":"400"}},mo={key:0,style:{display:"flex",gap:"1rem","justify-content":"end",width:"100%"}},po={style:{"background-color":"#0a3744","max-width":"20rem",width:"100%","border-radius":".5rem",height:"4rem"}},_o={style:{color:"white",margin:"0","font-weight":"300",display:"flex","align-items":"center",gap:".5rem",height:"100%",padding:"1rem 1rem 1rem 1rem"}},ho=p(()=>r("i",{class:"pi pi-send",style:{color:"white"}},null,-1)),go=p(()=>r("div",{style:{height:"100%",width:"3rem","min-width":"3rem","aspect-ratio":"1/1","background-color":"rgb(3 88 95 / 53%)","border-radius":"50%",display:"flex","align-items":"center","justify-content":"center","text-transform":"uppercase",padding:".5rem"}},[r("img",{style:{height:"2rem",width:"2rem","aspect-ratio":"1/1","object-fit":"contain"},src:"https://backend.salchimonster.com/read-photo-product/xai0dVnL",alt:""})],-1)),fo={key:0,style:{"text-align":"center",opacity:"0.6"}},vo={key:1,style:{"max-height":"60vh","overflow-y":"auto"}},yo={key:0,style:{position:"relative","border-radius":".3rem"}},wo=["src"],ko={key:1,style:{position:"relative"}},bo=["src"],xo={key:2,style:{position:"relative"}},Co=p(()=>r("img",{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/8/87/PDF_file_icon.svg/1200px-PDF_file_icon.svg.png",style:{width:"10rem"}},null,-1)),Mo={style:{flex:"1 1 auto"}},Lo={style:{width:"100%","justify-content":"end",display:"flex"}},To={key:0,style:{"background-color":"#00000080",position:"fixed",width:"100vw",height:"100vh",left:"0",top:"0","z-index":"1000000",display:"flex","align-items":"center","justify-content":"center",opacity:"1"}},$o={style:{"max-height":"90vh",position:"relative","max-width":"90vw"}},Eo=["src"],Ao=Ye({__name:"Messages",props:{send_function:{type:Function,default:()=>{}},change_expiration:{type:Function,default:()=>{}},send_text:{type:Function,default:()=>{}}},emits:["down"],setup(U,{expose:Re,emit:So}){const _e=e=>{e.target.closest(".emoji-picker")||(M.value=!1)};K(()=>{document.addEventListener("click",_e)}),D(()=>{document.removeEventListener("click",_e)});const M=l(!1),B=l(null),V=l(!1),He=st();function Q(e){var a;Array.from(((a=e.clipboardData)==null?void 0:a.items)||[]).forEach(d=>{if(d.kind==="file"){const m=d.getAsFile();if(!m)return;_.value.push({file:m,name:m.name||`pasted-${Date.now()}.${m.type.split("/")[1]||"bin"}`,type:m.type,caption:"",preview:URL.createObjectURL(m)}),L.value=!0}})}const ee=U;K(()=>window.addEventListener("paste",Q)),D(()=>window.removeEventListener("paste",Q)),K(()=>{window.addEventListener("paste",Q)}),D(()=>{window.removeEventListener("paste",Q)});const Ie=e=>{E.value+=e.i,M.value=!1},q=l(!1),_=l([]),L=l(!1),te=l(!1),he=l(""),oe=e=>{te.value=!0,he.value=`${e}?size=visual`};function se(e){const t=_.value.splice(e,1);t.length&&t[0].preview&&URL.revokeObjectURL(t[0].preview)}function ze(){alert("removeAllfiles"),_.value.forEach(e=>e.preview&&URL.revokeObjectURL(e.preview)),_.value=[]}function Ue(e){e.currentTarget===e.target&&(q.value=!1)}function T(e){return`${W}/files/${e.file_type}s/${e.file_id}?size=thumbnail`}function ge(){_.value.forEach(e=>e.preview&&URL.revokeObjectURL(e.preview)),_.value=[]}N(L,e=>{e||ge()}),D(()=>{ge()});const Be=async e=>{if(!(e.message_data.current_status_id>=3||e._marking)){e._marking=!0;try{await pe.post(`${W}/read-message/${e.message_data.id}/${f.params.restaurant_id}`,!1),e.message_data.current_status_id=3}catch(t){console.error("No se pudo marcar como leÃ­do",t)}}},fe=()=>{E.value="",M.value=!1},Ve=e=>{ee.send_text(e,n.value),E.value="",V.value=!1},ve=e=>{e.preventDefault(),q.value=!1,Array.from(e.dataTransfer.files||[]).forEach(a=>{const d={file:a,name:a.name,type:a.type,caption:"",preview:""};a.type.startsWith("image/")&&(d.preview=URL.createObjectURL(a)),_.value.push(d)}),_.value.length&&(L.value=!0)},Fe=()=>{const e=[..._.value];L.value=!1,_.value.forEach(t=>t.preview&&URL.revokeObjectURL(t.preview)),_.value=[],ee.send_function(e)},Oe=()=>{if(!u.value)return;const e=u.value.getBoundingClientRect();k.value.forEach((t,a)=>{if(t.message_data.employer_id||t.message_data.current_status_id>=3)return;const d=u.value.children[a];if(!d)return;const m=d.getBoundingClientRect();m.top>=e.top&&m.bottom<=e.bottom&&Be(t)})};N(V,e=>{e||fe()}),l(!1);const f=Ze(),ye=e=>{if(!e)return"";const t=e.split(" "),a=Array.from(t[0])[0],d=t[1]?Array.from(t[1])[0]:"";return a+d};let h=null,G=null,ae=!0;const ie=l(!0),k=l([]),re=l({}),u=l(null),$=l(!1),b=l(0),E=l(""),J=l(0),we=l(20),A=l(!1),le=l(!1),F=l(!1),ne=l({}),n=l({message_data:{id:3559,user_id:10,restaurant_id:1,content:`final del mensaje
`,created_at:"2025-05-03T02:16:30.361038+00:00",current_status_id:1,employer_id:1082,employer_name:"ANDRES FELIPE ARrECHEA",wa_id:"wamid.HBgMNTczMjI2ODkyOTg4FQIAERgSQzg4QzYyQzg0MDg0RkY2OEVDAA==",wa_timestamp:"1746238590",context_message_id:"wamid.HBgMNTczMjI2ODkyOTg4FQIAERgSNDIyNUIxQkZEMkE1MTA4RDA3AA==",local_dt:"2025-05-02T21:16:30",file_type:null,file_id:null},time:"09:16 PM",date:"02/05/2025",day_label:"hoy",contest:{message_data:{id:3490,user_id:10,restaurant_id:1,content:"fsfs",created_at:"2025-05-03T01:28:04.499413+00:00",current_status_id:1,employer_id:1082,employer_name:"ANDRES FELIPE ARrECHEA",wa_id:"wamid.HBgMNTczMjI2ODkyOTg4FQIAERgSNDIyNUIxQkZEMkE1MTA4RDA3AA==",wa_timestamp:"1746235684",context_message_id:"null",file_type:null,file_id:null,local_dt:"2025-05-02T20:28:04",time:"08:28 PM",date:"02/05/2025",day_label:"hoy"},time:"08:28 PM",date:"02/05/2025",day_label:"hoy"}});l({});const ke=e=>{V.value=!0,n.value=e},de=e=>{ne.value[e]=!ne.value[e]},O=e=>!!ne.value[e];function S(e){if(!e)return"";let t=e.replace(/\n/g,"<br/>");return t=t.replace(/\*([^*]+)\*/g,"<strong>$1</strong>"),t=t.replace(/((https?:\/\/|www\.)[^\s<]+)/g,a=>`<a href="${a.startsWith("http")?a:`https://${a}`}" target="_blank" style="color:#42a5f5;text-decoration:underline;">${a}</a>`),t}const Pe=Ee(()=>({position:"absolute",zIndex:"300000",height:"3rem",width:"3rem",borderRadius:"50%",bottom:"5rem",right:"2rem",backgroundColor:F.value?"rgb(33, 150, 243)":"rgba(255, 255, 255,.1)",color:"white",border:"none",padding:"0.5rem 1rem",cursor:"pointer"})),Ne=Ee(()=>({position:"absolute",zIndex:"300000",height:"2rem",display:"flex",alignItems:"center",justifyContent:"center",width:"2rem",borderRadius:"50%",bottom:"5rem",right:"1rem",backgroundColor:"rgb(156, 39, 176)",color:"white",border:"none",padding:"0.5rem 1rem",cursor:"pointer"})),j=(e,t="thumbnail")=>`${W}/files/images/${e.message_data.file_id}?size=${t}`,ce=async(e=!0)=>{var a,d,m;if(me.value=!1,A.value=!0,(a=B.value)==null||a.abort(),B.value=new AbortController,J.value=0,le.value=!1,!f.params.user_id||!f.params.restaurant_id)return;const t=await pe.get(`${W}/conversation/${f.params.restaurant_id}/${f.params.user_id}/${J.value}/20`,!1,{signal:B.value.signal});k.value=((d=t==null?void 0:t[0])==null?void 0:d.messages)||[],re.value=((m=t==null?void 0:t[0])==null?void 0:m.user)||{},setTimeout(()=>{me.value=!0},0),ie.value&&(ie.value=!1),A.value=!1};N(F,e=>{e||(b.value=0)});const We=async e=>{const t=k.value.findIndex(a=>a.message_data.wa_id===e.message_data.wa_id);t!==-1?k.value[t]=e:f.params.user_id===e.message_data.wa_user_id&&(k.value.push(e),e.message_data.employer_id||($.value=!0,b.value++)),await De()},Qe=async()=>{var m;if(A.value||le.value)return;A.value=!0;const e=u.value?u.value.scrollHeight:0,t=J.value+we.value,a=await pe.get(`${W}/conversation/${f.params.restaurant_id}/${f.params.user_id}/${t}/${we.value}`,!1),d=((m=a==null?void 0:a[0])==null?void 0:m.messages)||[];if(d.length===0)le.value=!0;else{k.value=[...d,...k.value],J.value=t,await De();const Z=u.value.scrollHeight;u.value.scrollTop=Z-e}A.value=!1},be=()=>{if(Oe(),!u.value)return;const{scrollTop:e,scrollHeight:t,clientHeight:a}=u.value;e<50&&Qe(),e+a>=t-50?($.value=!1,F.value=!1):$.value=!0},qe=()=>{u.value&&(u.value.scrollTo({bottom:0}),$.value=!1,F.value=!1),b.value=0},Y=()=>{u.value&&(setTimeout(()=>{u.value.scrollTo({top:u.value.scrollHeight})},100),$.value=!1,F.value=!1),b.value=0};function xe(){G&&(clearTimeout(G),G=null),h&&(ae=!1,h.close(1e3,"routeâ€‘change"),h.onopen=h.onmessage=h.onerror=h.onclose=null,h=null)}function ue(){if(!f.params.user_id)return;const e=`wss://sockets-service.salchimonster.com/ws/${f.params.user_id}`;h=new WebSocket(e),ae=!0,h.onopen=()=>{console.log("ðŸŸ¢ Conectado a",e)},h.onmessage=t=>{const a=JSON.parse(t.data);a&&(We(a),ee.change_expiration(!1))},h.onerror=t=>console.error("WebSocket error",t),h.onclose=t=>{console.log("ðŸ”´ Socket cerrado",t.reason||t.code),ae&&(G=window.setTimeout(ue,5e3))}}K(()=>{ce(),ue(),u.value&&u.value.addEventListener("scroll",be)}),D(()=>{h&&h.close(),u.value&&u.value.removeEventListener("scroll",be)}),N(()=>f.params,()=>{ie.value=!0,k.value=[],xe(),ce(),Y(),ue(),b.value=0}),D(()=>{var e;(e=B.value)==null||e.abort(),xe()}),Ke((e,t,a)=>{var d;(d=B.value)==null||d.abort(),a()});const me=l(!0);return N(()=>f.params,()=>{ce()}),Re({scrollToBottom:qe,scrollToBottomNoSmooth:Y,getAllFiles:()=>_.value.map(e=>e.file)}),(e,t)=>{const a=R("Button"),d=R("Textarea"),m=R("Dialog"),Z=R("ProgressSpinner"),Ge=R("progressSpinner"),Je=R("InputText");return s(),i(I,null,[g(m,{visible:V.value,"onUpdate:visible":t[5]||(t[5]=o=>V.value=o),close:()=>fe,header:"Acciones del mensaje",modal:!0,style:w([{width:"90vw",maxWidth:" 50rem"},{"background-color":"rgb(0, 1, 22)",display:"flex"}]),closable:!0,dismissableMask:!1},{default:H(()=>{var o,v,y;return[r("div",{style:w([n.value.message_data.employer_id?"background-color:#0a3744;border-radius:.5rem 0 .5rem .5rem;":"background-color:#2f2f41;border-radius:0 .5rem .5rem .5rem;",{padding:"1rem 1rem 2.5rem 1rem","overflow-wrap":"break-word","word-break":"break-word","max-width":"100%","min-width":"10rem",position:"relative",display:"flex","flex-direction":"column",gap:".5rem"}])},[n.value.message_data.file_type?(s(),i(I,{key:0},[n.value.message_data.file_type==="image"?(s(),i("div",it,[r("img",{class:"img-fluid",src:j(n.value),onClick:t[0]||(t[0]=x=>oe(j(n.value))),style:{"border-radius":".3rem",width:"18rem","object-fit":"contain","aspect-ratio":"1 / 1",cursor:"pointer"}},null,8,rt)])):n.value.message_data.file_type==="audio"?(s(),i("audio",{key:1,src:T(n.value.message_data),controls:"",style:{width:"100%","min-width":"20rem","max-width":"100%","background-color":"white","border-radius":".5rem"}},null,8,lt)):(s(),i("a",{key:2,href:T(n.value.message_data),target:"_blank",style:{color:"#2196f3","text-decoration":"none","align-self":"flex-start",display:"flex","align-items":"center",gap:".5rem"}},[dt,X(" Descargar archivo ")],8,nt))],64)):c("",!0),r("h6",ct,[O(n.value.message_data.id)?(s(),i("span",{key:1,innerHTML:S(n.value.message_data.content)},null,8,mt)):(s(),i("span",{key:0,innerHTML:S(((o=n.value.message_data.content)==null?void 0:o.substring(0,200))+(((v=n.value.message_data.content)==null?void 0:v.length)>200?"â€¦":""))},null,8,ut)),((y=n.value.message_data.content)==null?void 0:y.length)>200?(s(),i("button",{key:2,onClick:t[1]||(t[1]=x=>de(e.message.message_data.id)),style:{background:"none",border:"none",color:"#2196f3",cursor:"pointer",padding:"0 .5rem"}}," Ver "+C(O(n.value.message_data.id)?"menos":"mÃ¡s"),1)):c("",!0)]),r("h6",pt,[r("span",_t,C(n.value.time),1),n.value.message_data.current_status_id==3&&n.value.message_data.employer_id?(s(),i("i",ht)):n.value.message_data.current_status_id==2&&n.value.message_data.employer_id?(s(),i("i",gt)):n.value.message_data.current_status_id==1&&n.value.message_data.employer_id?(s(),i("i",ft)):c("",!0)]),n.value.message_data.employer_id?(s(),i("svg",bt,Mt)):(s(),i("svg",vt,kt))],4),r("div",Lt,[r("div",null,[M.value?(s(),z(Ae(at),{key:0,class:"emoji-picker",native:!0,style:{position:"absolute",bottom:"4rem","z-index":"1000"},onSelect:Ie})):c("",!0),g(a,{style:{position:"absolute",right:"-1rem"}})]),g(d,{modelValue:E.value,"onUpdate:modelValue":t[2]||(t[2]=x=>E.value=x),autoResize:"",rows:"4",placeholder:"Escribe un mensajeâ€¦",style:{width:"100%","background-color":""}},null,8,["modelValue"]),r("div",Tt,[g(a,{class:"emoji-picker",text:"",style:{"font-size":"2rem"},onClick:t[3]||(t[3]=x=>M.value=!M.value)},{default:H(()=>[$t]),_:1}),g(a,{label:"Responder",icon:"pi pi-send",severity:"help",style:{width:"100%"},onClick:t[4]||(t[4]=x=>Ve(E.value))})])])]}),_:1},8,["visible","close"]),r("div",{style:{height:"100%",position:"relative",display:"flex","justify-content":"center"},onDragover:t[8]||(t[8]=je(()=>{},["prevent"])),onDragenter:t[9]||(t[9]=o=>q.value=!0),onDragleave:Ue,onDrop:ve,class:Xe(me.value?"container-messages":".container-oculto")},[q.value?(s(),i("div",Et," Suelte aquÃ­ ")):c("",!0),A.value?(s(),z(Z,{key:1,style:{width:"50px",height:"50px",position:"absolute","z-index":"100",color:"white"},strokeWidth:"8",fill:"transparent",animationDuration:".3s","aria-label":"Custom ProgressSpinner"})):c("",!0),r("div",At,[r("div",{ref_key:"messagesContainer",ref:u,style:{padding:"1rem",display:"flex","flex-direction":"column",gap:"0rem","overflow-y":"auto",height:"100%","padding-bottom":"4rem"}},[(s(!0),i(I,null,Se(k.value,o=>{var v,y,x,Ce,Me,Le,Te,$e;return s(),i("div",{key:o.message_data.id},[r("div",{class:"message",style:w([o.message_data.employer_id?"justify-content: end;":"justify-content: start;",{width:"100%",display:"flex",gap:"1rem","padding-bottom":"1rem"}])},[o.message_data.employer_id?c("",!0):(s(),i("div",{key:0,style:w([`background-color:${(v=re.value)==null?void 0:v.color}`,{height:"100%",width:"3rem","aspect-ratio":"1/1","border-radius":"50%",display:"flex","align-items":"center","justify-content":"center","text-transform":"uppercase"}])},[r("h5",St,C(ye((y=re.value)==null?void 0:y.name)),1)],4)),r("div",{style:w([o.message_data.employer_id?"background-color:#0a3744;border-radius:.5rem 0 .5rem .5rem;":"background-color:#2f2f41;border-radius:0 .5rem .5rem .5rem;",{padding:"1rem 1rem 2.5rem 1rem","overflow-wrap":"break-word","word-break":"break-word","max-width":"60%","min-width":"15rem",position:"relative",display:"flex","flex-direction":"column",gap:".5rem"}])},[o.message_data.employer_id?(s(),z(a,{key:0,class:"options",style:{color:"white"},onClick:P=>ke(o)},{default:H(()=>[jt]),_:2},1032,["onClick"])):c("",!0),o.message_data.employer_id?c("",!0):(s(),z(a,{key:1,class:"options2",style:{color:"white"},onClick:P=>ke(o)},{default:H(()=>[Dt]),_:2},1032,["onClick"])),o.message_data.file_type?(s(),i(I,{key:2},[o.message_data.file_type==="image"?(s(),i("img",{key:0,class:"img-fluid",src:j(o),onClick:P=>oe(j(o)),style:{"max-width":"38rem","border-radius":".3rem",width:"18rem","object-fit":"cover","aspect-ratio":"1 / 1",cursor:"pointer"}},null,8,Rt)):o.message_data.file_type==="audio"?(s(),i("audio",{key:1,src:T(o.message_data),controls:"",style:{width:"100%","min-width":"20rem","max-width":"100%","background-color":"white","border-radius":".5rem"}},null,8,Ht)):(s(),i("a",{key:2,href:T(o.message_data),target:"_blank",style:{color:"#2196f3","text-decoration":"none","align-self":"flex-start",display:"flex","align-items":"center",gap:".5rem"}},[zt,X(" Descargar archivo ")],8,It))],64)):c("",!0),o.contest?(s(),i("div",{key:3,class:"message",style:w([o.message_data.employer_id?"justify-content: end;":"justify-content: start;",{width:"100%",display:"flex",gap:"1rem"}])},[r("div",{style:w([o.message_data.employer_id?"background-color:#0a3744;border-radius:.5rem 0 .5rem .5rem;":"background-color:#2f2f41;border-radius:0 .5rem .5rem .5rem;",{"overflow-wrap":"break-word","word-break":"break-word","max-width":"100%","min-width":"10rem",position:"relative",display:"flex",opacity:".5","flex-direction":"column",gap:".5rem"}])},[o.contest.message_data.file_type?(s(),i(I,{key:0},[o.contest.message_data.file_type==="image"?(s(),i("img",{key:0,class:"img-fluid",src:j(o.contest),onClick:P=>oe(j(o.contest)),style:{"max-width":"38rem","border-radius":".3rem",width:"18rem","object-fit":"cover",cursor:"pointer"}},null,8,Ut)):o.contest.message_data.file_type==="audio"?(s(),i("audio",{key:1,src:T(o.contest.message_data),controls:"",style:{width:"100%","min-width":"20rem","max-width":"100%","background-color":"white","border-radius":".5rem"}},null,8,Bt)):(s(),i("a",{key:2,href:T(o.contest.message_data),target:"_blank",style:{color:"#2196f3","text-decoration":"none","align-self":"flex-start",display:"flex","align-items":"center",gap:".5rem"}},[Ft,X(" Descargar archivo ")],8,Vt))],64)):c("",!0),r("h6",Ot,[O(o.message_data.id)?(s(),i("span",{key:1,innerHTML:S(o.contest.message_data.content)},null,8,Nt)):(s(),i("span",{key:0,innerHTML:S(((x=o.contest.message_data.content)==null?void 0:x.substring(0,200))+(((Ce=o.contest.message_data.content)==null?void 0:Ce.length)>30?"â€¦":""))},null,8,Pt)),((Me=o.contest.message_data.content)==null?void 0:Me.length)>30?(s(),i("button",{key:2,onClick:P=>de(o.contest.message_data.id),style:{background:"none",border:"none",color:"#2196f3",cursor:"pointer",padding:"0 .5rem"}},null,8,Wt)):c("",!0)])],4)],4)):c("",!0),r("h6",Qt,[O(o.message_data.id)?(s(),i("span",{key:1,innerHTML:S(o.message_data.content)},null,8,Gt)):(s(),i("span",{key:0,innerHTML:S(((Le=o.message_data.content)==null?void 0:Le.substring(0,200))+(((Te=o.message_data.content)==null?void 0:Te.length)>200?"â€¦":""))},null,8,qt)),(($e=o.message_data.content)==null?void 0:$e.length)>200?(s(),i("button",{key:2,onClick:P=>de(o.message_data.id),style:{background:"none",border:"none",color:"#2196f3",cursor:"pointer",padding:"0 .5rem"}}," Ver "+C(O(o.message_data.id)?"menos":"mÃ¡s"),9,Jt)):c("",!0)]),r("h6",Yt,[r("span",Zt,C(o.date)+" - "+C(o.time),1),o.message_data.current_status_id==3&&o.message_data.employer_id?(s(),i("i",Kt)):o.message_data.current_status_id==2&&o.message_data.employer_id?(s(),i("i",Xt)):o.message_data.current_status_id==1&&o.message_data.employer_id?(s(),i("i",eo)):c("",!0)]),o.message_data.employer_id?(s(),i("svg",io,no)):(s(),i("svg",to,ao))],4),o.message_data.employer_id?(s(),i("div",co,[r("h5",uo,C(ye(o.message_data.employer_name)),1)])):c("",!0)],4)])}),128)),Ae(He).sending?(s(),i("div",mo,[r("div",po,[r("h6",_o,[ho,X(),g(Ge,{style:{width:"1.5rem",height:"1.5rem",color:"white"},strokeWidth:"8",fill:"transparent",animationDuration:".3s","aria-label":"Custom ProgressSpinner"})])]),go])):c("",!0)],512),$.value||b.value>0?(s(),z(a,{key:0,icon:"pi pi-angle-down",onClick:Y,style:w(Pe.value)},null,8,["style"])):c("",!0),b.value>0?(s(),z(a,{key:1,label:b.value,onClick:Y,style:w(Ne.value)},null,8,["label","style"])):c("",!0)]),g(m,{visible:L.value,"onUpdate:visible":t[6]||(t[6]=o=>L.value=o),header:"Archivos a enviar",modal:!0,style:w([{width:"90vw",maxWidth:"40rem"},{"background-color":"rgb(0, 1, 22)",display:"flex"}]),onDragover:t[7]||(t[7]=je(()=>{},["prevent"])),onDrop:ve,close:ze,closable:!0,dismissableMask:!1},{footer:H(()=>[r("div",Lo,[g(a,{label:"Enviar",icon:"pi pi-check",severity:"success",onClick:Fe,disabled:_.value.length===0},null,8,["disabled"])])]),default:H(()=>[_.value.length===0?(s(),i("div",fo," Arrastra archivos aquÃ­ ")):(s(),i("div",vo,[(s(!0),i(I,null,Se(_.value,(o,v)=>(s(),i("div",{key:v,style:{display:"flex","align-items":"center","flex-direction":"column",position:"relative",gap:"1rem","margin-bottom":"1rem",padding:"1rem"}},[o.type.startsWith("image/")?(s(),i("div",yo,[r("img",{src:o.preview,style:{width:"30rem","box-shadow":"0 0 1rem #00000090","object-fit":"cover","border-radius":".3rem"}},null,8,wo),g(a,{icon:"pi pi-times",severity:"danger",onClick:y=>se(v),style:{position:"absolute",width:"1.5rem",height:"1.5rem",right:"0","border-radius":".3rem"}},null,8,["onClick"])])):o.type.startsWith("audio/")?(s(),i("div",ko,[r("audio",{src:o.preview,controls:"",style:{width:"100%"}},null,8,bo),g(a,{icon:"pi pi-times",severity:"danger",onClick:y=>se(v),style:{position:"absolute",width:"1.5rem",height:"1.5rem",right:"0","border-radius":".3rem"}},null,8,["onClick"])])):(s(),i("div",xo,[Co,g(a,{icon:"pi pi-times",severity:"danger",onClick:y=>se(v),style:{position:"absolute",width:"1.5rem",height:"1.5rem",right:"0","border-radius":".3rem"}},null,8,["onClick"])])),r("span",Mo,C(o.name),1),g(Je,{modelValue:o.caption,"onUpdate:modelValue":y=>o.caption=y,placeholder:"Texto opcionalâ€¦",style:{flex:"1 1 auto",width:"100%","background-color":"#ffffff20"}},null,8,["modelValue","onUpdate:modelValue"])]))),128))]))]),_:1},8,["visible"])],34),te.value?(s(),i("div",To,[r("div",$o,[r("img",{style:{height:"90vh","max-width":"100%"},src:he.value},null,8,Eo),g(a,{onClick:t[10]||(t[10]=()=>te.value=!1),style:{position:"absolute",right:"-1rem",top:"-1rem",border:"3px solid black"},icon:"pi pi-times",severity:"danger",rounded:""})])])):c("",!0)],64)}}}),Ho=ot(Ao,[["__scopeId","data-v-e58ecd0d"]]);export{Ho as default};
