import{_ as G,z as J,f as Q,r as T,o as s,J as W,w as p,a as e,t as n,l as a,X as x,q as R,P as j,k as M,c as l,F as m,b as g,n as d,v as Z,p as X,e as K,Y as ee,Q as te,R as se,d as _}from"./index-6ff075da.js";import{u as E,w as ae}from"./xlsx-4f9172c7.js";const h=w=>(X("data-v-5f8be31f"),w=w(),K(),w),le={style:{"border-radius":"1rem",overflow:"hidden"}},ne=h(()=>e("div",{class:"P-0 mt-0",style:{"background-color":"var(--orange-500)"}},[e("div",{class:"header p-4",style:{display:"flex","justify-content":"space-between","align-items":"center"}},[e("div",{style:{display:"flex"}},[e("img",{class:"p-0",src:ee,style:{filter:"brightness(0) invert()",width:"",height:"3rem","object-fit":"contain"},alt:""}),e("span",{style:{width:"min-content","font-weight":"bold",color:"white"}},"INVERSIONES SALCHIMONSTER")]),e("div",{style:{display:"flex","flex-direction":"column","max-width":"40%"}},[e("span",{class:"text-left text-sm",style:{"text-align":"end",width:"min-content","font-weight":"bold",color:"white"}},"TERMINOS Y CONDICIONES "),e("small",{class:"mt-2 text-left",style:{color:"white","max-width":""}},"Lorem ipsum dolor sit amet consectetur, adipisi")])])],-1)),oe={class:"P-0",style:{"background-color":"var(--gray-200)"}},ie={class:"header p-4",style:{display:"flex","justify-content":"space-between"}},re={style:{"font-weight":"bold",display:"flex","flex-direction":"column","max-width":"50%"}},de=h(()=>e("span",{class:"text-xl mb-2",style:{width:"min-content","font-weight":"bold",color:"rgb(0, 0, 0)"}},"Factura",-1)),ce={style:{display:"flex",gap:"1rem","justify-content":"space-between"}},he=h(()=>e("div",{style:{display:"flex","flex-direction":"column"}},[e("span",null," Orden No."),e("span",null," Sede"),e("span",null," Fecha"),e("span",null," Metodo de pago")],-1)),_e=h(()=>e("div",{style:{display:"flex","font-weight":"200","flex-direction":"column"}},[e("span",null," |"),e("span",null," | "),e("span",null," |"),e("span",null," |")],-1)),me={style:{display:"flex","font-weight":"400","flex-direction":"column"}},ue={style:{"font-weight":"bold",display:"flex","flex-direction":"column","max-width":"40%"}},pe=h(()=>e("span",{class:"text-xl mb-2",style:{width:"min-content","font-weight":"bold",color:"rgb(0, 0, 0)"}},"Balance",-1)),ge={style:{display:"flex",gap:"1rem","justify-content":"space-between"}},ye=h(()=>e("div",{style:{display:"flex","flex-direction":"column"}},[e("span",null," Subtotal"),e("span",null," Domicilio"),e("span",{class:"text-2xl"}," Total")],-1)),fe=h(()=>e("div",{style:{display:"flex","font-weight":"200","flex-direction":"column"}},[e("span",null," | "),e("span",null," |"),e("span",null," |")],-1)),xe={style:{display:"flex","font-weight":"400","flex-direction":"column"}},we={class:"text-xl",style:{"font-weight":"bold","border-top":"2px solid red"}},be=h(()=>e("p",{class:"text-xl text-center",style:{"font-weight":"bold",color:"rgb(255, 255, 255)","background-color":"black"}},"Datos de usuario",-1)),ve={class:"p-4",style:{display:"flex",gap:"1rem","justify-content":"start"}},Me={style:{display:"flex","font-weight":"400",height:"4rem","aspect-ratio":"1 / 1","background-color":"rgb(255, 255, 255)","border-radius":"50%","flex-direction":"column","align-items":"center","justify-content":"center"}},ke=h(()=>e("div",{style:{display:"flex","font-weight":"200","flex-direction":"column"}},[e("span",null," |"),e("span",null," | "),e("span",null," |")],-1)),Se={style:{display:"flex","flex-direction":"column"}},Oe={style:{"text-transform":"capitalize"}},Ce=h(()=>e("span",{style:{"font-weight":"bold"}}," Nombre :",-1)),Ne={style:{"text-transform":"capitalize"}},Te=h(()=>e("span",{style:{"font-weight":"bold"}},"DIRECCION :",-1)),De=h(()=>e("span",{style:{"font-weight":"bold"}}," TELEFONO : ",-1)),Pe={class:"P-0",style:{"background-color":"var(--white-200)"}},Fe={class:"header py-4",style:{display:"flex","justify-content":"space-between"}},Ie={style:{"font-weight":"bold",display:"flex","flex-direction":"column",width:"100%"}},Ee=h(()=>e("span",{class:"text-xl pl-4 mb-2",style:{width:"min-content","font-weight":"bold",color:"rgb(0, 0, 0)"}},"Productos",-1)),Re={class:"m-0 p-0"},je={class:"text-l p-1 text-center my-2",style:{"font-weight":"bold",width:"100","background-color":"var(--gray-200)",color:"black"}},Le={class:"px-4 py-0",style:{display:"flex",gap:"1rem",width:"100%","justify-content":"space-between"}},ze={style:{display:"flex","flex-direction":"column","font-weight":"500"}},Ve={key:0,class:"",style:{"font-weight":"bold"}},$e={class:"ml-4"},Ae={key:2,class:"",style:{"font-weight":"bold"}},Be={class:"ml-4"},He={key:4,class:"",style:{"font-weight":"bold"}},Ue={class:"ml-4"},Ye={key:6,class:"",style:{"font-weight":"bold"}},qe={class:"ml-4"},Ge={key:8,class:"",style:{"font-weight":"bold"}},Je={class:"ml-4"},Qe=h(()=>e("div",{style:{display:"flex","font-weight":"200","flex-direction":"column"}},null,-1)),We={style:{display:"flex","font-weight":"400","flex-direction":"column"}},Xe={key:0,class:"text-right",style:{}},Ke={class:"ml-4 text-right",style:{}},Ze={key:2,class:"text-right",style:{}},et={class:"ml-4 text-right"},tt={key:4,class:"text-right",style:{}},st={class:"ml-4 text-right"},at={key:5,class:"text-right",style:{}},lt={class:"ml-4 text-right"},nt={key:6,class:"text-right",style:{}},ot={class:"ml-4"},it={__name:"orderDialog",setup(w){const o=J();return Q(!0),(c,P)=>{const I=T("Dialog");return s(),W(I,{style:Z([{"background-color":""},{width:"40rem"}]),visible:a(o).visibleOrder.visible,"onUpdate:visible":P[0]||(P[0]=N=>a(o).visibleOrder.visible=N),modal:"",header:"Orden"},{default:p(()=>{var N,F,y,b,f,v;return[e("div",le,[ne,e("div",oe,[e("div",ie,[e("div",re,[de,e("div",ce,[he,_e,e("div",me,[e("span",null,n(a(o).visibleOrder.order.order_id),1),e("span",null,n(a(o).visibleOrder.order.site_name),1),e("span",null,n((F=(N=a(o).visibleOrder.order)==null?void 0:N.status)==null?void 0:F.timestamp.split(" ")[0]),1),e("span",null,n((y=a(o).visibleOrder.order)==null?void 0:y.payment_method),1)])])]),e("div",ue,[pe,e("div",ge,[ye,fe,e("div",xe,[e("span",null,n(a(x)(a(o).visibleOrder.order.total_price)),1),e("span",null,n(a(x)(a(o).visibleOrder.order.delivery_price)),1),e("span",we,n(a(x)(a(o).visibleOrder.order.total_price+a(o).visibleOrder.order.delivery_price)),1)])])])]),be,e("div",ve,[e("div",Me,[e("i",{class:R(["text-2xl",a(j).USER])},null,2)]),ke,e("div",Se,[e("span",Oe,[Ce,M(" "+n((b=a(o).visibleOrder.order.user_data)==null?void 0:b.user_name),1)]),e("span",Ne,[Te,M(" "+n((f=a(o).visibleOrder.order.user_data)==null?void 0:f.user_address),1)]),e("span",null,[De,M(" "+n((v=a(o).visibleOrder.order.user_data)==null?void 0:v.user_phone),1)])])])]),e("div",Pe,[e("div",Fe,[e("div",Ie,[Ee,(s(!0),l(m,null,g(a(o).visibleOrder.order.products,t=>{var O,C,k,i,u,S,D,L,z,V,$,A,B,H,U,Y,q;return s(),l("div",Re,[e("p",je,[M(n(t.name)+" ",1),e("span",null,n(a(x)(t.price)),1)]),e("div",Le,[e("div",ze,[((O=t.salsas)==null?void 0:O.length)>0?(s(),l("span",Ve," Salsas")):d("",!0),((C=t.salsas)==null?void 0:C.length)>0?(s(!0),l(m,{key:1},g(t.salsas,r=>(s(),l("span",$e,n(r),1))),256)):d("",!0),((k=t.adiciones)==null?void 0:k.length)>0?(s(),l("span",Ae," Adiciones")):d("",!0),((i=t.adiciones)==null?void 0:i.length)>0?(s(!0),l(m,{key:3},g(t.adiciones,r=>(s(),l("span",Be,n(r.name),1))),256)):d("",!0),((u=t.cambios)==null?void 0:u.length)>0?(s(),l("span",He," Cambios")):d("",!0),((S=t.cambios)==null?void 0:S.length)>0?(s(!0),l(m,{key:5},g(t.cambios,r=>(s(),l("span",Ue,n(r.name),1))),256)):d("",!0),((D=t.toppings)==null?void 0:D.length)>0?(s(),l("span",Ye," Toppings")):d("",!0),((L=t.toppings)==null?void 0:L.length)>0?(s(!0),l(m,{key:7},g(t.toppings,r=>(s(),l("span",qe,n(r==null?void 0:r.name),1))),256)):d("",!0),((z=t.acompanantes)==null?void 0:z.length)>0?(s(),l("span",Ge," Acompanantes")):d("",!0),((V=t.acompanantes)==null?void 0:V.length)>0?(s(!0),l(m,{key:9},g(t.acompanantes,r=>(s(),l("span",Je,n(r.name),1))),256)):d("",!0)]),Qe,e("div",We,[(($=t.salsas)==null?void 0:$.length)>0?(s(),l("span",Xe," --------------")):d("",!0),((A=t.salsas)==null?void 0:A.length)>0?(s(!0),l(m,{key:1},g(t.salsas,r=>(s(),l("span",Ke," ..."))),256)):d("",!0),((B=t.adiciones)==null?void 0:B.length)>0?(s(),l("span",Ze," --------------")):d("",!0),((H=t.adiciones)==null?void 0:H.length)>0?(s(!0),l(m,{key:3},g(t.adiciones,r=>(s(),l("span",et,n(a(x)(r.price)),1))),256)):d("",!0),((U=t.cambios)==null?void 0:U.length)>0?(s(),l("span",tt," --------------")):d("",!0),(s(!0),l(m,null,g(t.cambios,r=>(s(),l("span",st,n(a(x)(r.price)),1))),256)),((Y=t.topping)==null?void 0:Y.length)>0?(s(),l("span",at," --------------")):d("",!0),(s(!0),l(m,null,g(t.toppings,r=>(s(),l("span",lt,n(a(x)(r==null?void 0:r.price)),1))),256)),((q=t.acompanantes)==null?void 0:q.length)>0?(s(),l("span",nt," --------------")):d("",!0),(s(!0),l(m,null,g(t.acompanantes,r=>(s(),l("span",ot,n(a(x)(r.price)),1))),256))])])])}),256))])])])])]}),_:1},8,["visible"])}}},rt=G(it,[["__scopeId","data-v-5f8be31f"]]);const dt=w=>(X("data-v-873c37cf"),w=w(),K(),w),ct={class:"card p-0 m-0 col-12 my-4",style:{}},ht={class:"flex flex-wrap align-items-center justify-content-between gap-2"},_t={class:"text-xl text-900 font-bold"},mt={class:"flex flex-column md:flex-row md:justify-content-between md:align-items-center",style:{"background-color":""}},ut={class:"block mt-2 md:mt-0 p-input-icon-left py-0"},pt=dt(()=>e("i",{class:"pi pi-search"},null,-1)),gt={class:"motivo"},yt={__name:"ordenes",setup(w){const o=Q(null),c=J();te(()=>{P()});const P=()=>{o.value={global:{value:null,matchMode:se.CONTAINS}}},I=y=>{switch(y){case"enviada":return"success";case"cancelada":return"danger";default:return null}},N=async()=>{var f;let y=[...c.salesReport.total_sales.orders_info];if(c.order_status=c.order_status=="enviada"?"cancelada":"enviada",await c.fetchSalesReport(),y=y.concat([...c.salesReport.total_sales.orders_info]),!((f=o==null?void 0:o.value)!=null&&f.global.value))return y;const b=o.value.global.value.trim().toLowerCase();return y.filter(v=>Object.values(v).some(t=>t&&t.toString().trim().toLowerCase().includes(b)))},F=async()=>{const b=(await N()).map(t=>{var O,C,k,i,u,S;return{"Orden No":t.order_id,Monto:t.total_price,Sede:t.site_name,Fecha:(O=t.status.timestamp)==null?void 0:O.split(" ")[0],Hora:(C=t.status.timestamp)==null?void 0:C.split(" ")[1],Estado:t.status.status,Domicilio:t.delivery_price,"Metodo de pago":t.payment_method,"razon de la cancelacion":((k=t.status)==null?void 0:k.reazon)||"es una orden enviada","Nombre del usuario":(i=t.user_data)==null?void 0:i.user_name,"telefono del usuario":(u=t.user_data)==null?void 0:u.user_phone,"direccion del usuario":(S=t.user_data)==null?void 0:S.user_address}}),f=E.json_to_sheet(b);f["!cols"]=[{wch:Math.max(8,2)},{wch:Math.max(10,5)},{wch:Math.max(12,4)},{wch:Math.max(10,5)},{wch:Math.max(5,4)},{wch:Math.max(10,6)},{wch:Math.max(5,9)},{wch:Math.max(25,14)},{wch:Math.max(40,19)},{wch:Math.max(20,8)},{wch:Math.max(10,18)},{wch:Math.max(40,16)},{wch:Math.max(15,15)},{wch:Math.max(18,16)},{wch:Math.max(25,21)},{wch:Math.max(20,18)},{wch:Math.max(25,26)},{wch:Math.max(20,20)},{wch:Math.max(15,14)},{wch:Math.max(15,12)},{wch:Math.max(20,18)},{wch:Math.max(18,16)},{wch:Math.max(20,3)},{wch:Math.max(18,16)},{wch:Math.max(18,18)},{wch:Math.max(12,11)},{wch:Math.max(18,16)},{wch:Math.max(16,14)},{wch:Math.max(18,16)},{wch:Math.max(18,16)},{wch:Math.max(22,22)},{wch:Math.max(15,15)},{wch:Math.max(18,17)},{wch:Math.max(35,34)},{wch:Math.max(40,44)},{wch:Math.max(10,7)},{wch:Math.max(20,17)}];const v=E.book_new();E.book_append_sheet(v,f,"Usuarios"),ae(v,"Base de datos empleados Salchimonster.xlsx")};return(y,b)=>{var k;const f=T("Button"),v=T("InputText"),t=T("Column"),O=T("Tag"),C=T("DataTable");return s(),l(m,null,[(s(!0),l(m,null,g((k=a(c).salesReport.total_sales)==null?void 0:k.orders_info,i=>(s(),l("div"))),256)),_(f,{size:"small",class:"py-2",severity:"success",onClick:F},{default:p(()=>[e("i",{class:R(["pr-3",a(j).DOWNLOAD])},null,2),M(" Descargar reporte")]),_:1}),e("div",ct,[_(C,{paginator:"",value:a(c).salesReport.total_sales.orders_info,tableStyle:"min-width: 50rem",rows:5,filters:o.value,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25,100],currentPageReportTemplate:"Mostrando {first} a {last} de {totalRecords} ordenes",responsiveLayout:"scroll",scrollable:"","scroll-height":"62vh"},{header:p(()=>[e("div",ht,[e("span",_t,"Ordenes "+n(a(c).order_status)+"s entre "+n(a(c).formatDate(a(c).dateRange.startDate))+" y "+n(a(c).formatDate(a(c).dateRange.endDate)),1),e("div",mt,[e("span",ut,[pt,_(v,{class:"",modelValue:o.value.global.value,"onUpdate:modelValue":b[0]||(b[0]=i=>o.value.global.value=i),placeholder:"Search..."},null,8,["modelValue"])])])])]),default:p(()=>[_(t,{field:"order_id",header:"Id"},{body:p(i=>[M(n(i.data.order_id)+" ",1)]),_:1}),_(t,{field:"total_price",header:"Monto"},{body:p(i=>[M(n(a(x)(i.data.total_price)),1)]),_:1}),_(t,{field:"site_name",header:"Sede"},{body:p(i=>[M(n(a(x)(i.data.site_name)),1)]),_:1}),_(t,{field:"status.timestamp",header:"Fecha y hora",headerStyle:"width:10rem; min-width:8rem "},{body:p(i=>[M(n(i.data.status.timestamp),1)]),_:1}),a(c).order_status=="cancelada"?(s(),W(t,{key:0,headerStyle:"width:5rem; min-width:20rem; ",field:"status.reazon",header:"Motivo"},{body:p(i=>{var u;return[e("span",gt,n((u=i.data.status.reazon)==null?void 0:u.toLowerCase())+".",1)]}),_:1})):d("",!0),_(t,{field:"category",header:""}),_(t,{header:"Status"},{body:p(i=>{var u,S,D;return[_(O,{value:(u=i.data.status)==null?void 0:u.status,severity:I((D=(S=i.data)==null?void 0:S.status)==null?void 0:D.status)},null,8,["value","severity"])]}),_:1}),_(t,{header:"Aacciones",frozen:"",alignFrozen:"right"},{body:p(i=>[_(f,{onClick:u=>a(c).setVisibleOrder(!0,i.data),text:""},{default:p(()=>[e("i",{class:R(["text-2xl col-12 p-0",a(j).EYE])},null,2)]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["value","filters"])]),_(rt)],64)}}},wt=G(yt,[["__scopeId","data-v-873c37cf"]]);export{wt as default};
