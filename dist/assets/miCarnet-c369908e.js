import{f as h,U as m,T as p,h as $,r as y,o as f,c as g,a as e,l,t as a,d as _,n as E,w as S,F as j,$ as x,q as D,P as I,k as N}from"./index-1c5dd315.js";import z from"./html2canvas.esm-e0a7d97b.js";const B="/images/logo blanco.png",T={class:"col-12",style:{display:"flex","justify-content":"center","flex-direction":"column","align-items":"center"}},q=e("p",{class:"px-3 py-0 mt-3 text-center text-4xl col-12",style:{"font-weight":"bold"}},"Mi carnet",-1),O={class:"carnet mb-8 mt-8 p-3",style:{"background-color":"rgba(255, 255, 255, 0)",display:"flex",width:"min-content","justify-content":"center","align-items":"center",transform:"scale(1.4)","border-radius":"0.7rem"}},R={class:"p-0 content",style:{"border-radius":"0.7rem"}},V={class:"P-7",style:{width:"5.5cm","max-width":"100%",height:"8.5cm","box-shadow":"0 0 10px rgba(0, 0, 0, 0.281)","border-radius":"0.5rem",display:"flex","justify-content":"center",overflow:"hidden",position:"relative"}},A=e("div",{style:{width:"11cm",height:"11cm","border-radius":"50%","background-color":"rgba(255,98,0,255)","box-shadow":"0 0 10px rgba(0, 0, 0, 0.288)",position:"absolute",bottom:"5cm"}},null,-1),F=["src"],L=e("div",{style:{position:"absolute",display:"flex","align-items":"center",top:"0.5cm"}},[e("img",{style:{width:"0.8cm","object-fit":"contain"},src:B,alt:""}),e("span",{class:"ml-2 text-white",style:{"font-weight":"bold"}}," Salchimonster")],-1),M={class:"info",style:{position:"absolute",top:"4.8cm"}},W={class:"px-3 py-0 my-0 text-center text-sm",style:{"font-weight":"bold","text-transform":"uppercase"}},G={class:"px-3 py-0 mb-3 text-center text-sm",style:{"text-transform":"capitalize"}},J={class:"px-3 py-0 my-0 text-center",style:{"font-size":"0.7rem"}},H={class:"px-3 py-0 my-0 text-center",style:{"font-size":"0.7rem"}},K={class:"px-3 py-0 mt-3 text-center text-sm",style:{"font-weight":"bold"}},Q={key:0,class:"col-12",style:{display:"flex","justify-content":"center"}},X={class:"col-12",style:{display:"flex","justify-content":"center"}},te={__name:"miCarnet",setup(Y){const s=h({}),i=h(!1),b=async o=>{fetch(`${m}/employer/dni/${o}`).then(t=>{if(!t.ok)throw new Error("Network response was not ok");return t.json()}).then(t=>{console.log("Employer data:",t),s.value=t}).catch(t=>{console.error("There has been a problem with your fetch operation:",t),s.value={}})},w=async()=>{i.value=!0;try{const o=document.querySelector(".carnet"),t=document.querySelector(".content");if(!o){console.error("Elemento carnet no encontrado");return}const n=document.querySelector(".fotoPerfil");if(!n){console.error("Elemento fotoPerfil no encontrado");return}n.src=C,t.style.border="1px solid  rgba(255,98,0,255)",await new Promise((P,U)=>{n.onload=P,n.onerror=U});const c=(await z(o,{scale:2,useCORS:!0,allowTaint:!1})).toDataURL("image/png").replace("image/png","image/octet-stream"),r=document.createElement("a");r.download=`carnet-${x()}.png`,r.href=c,document.body.appendChild(r),r.click(),document.body.removeChild(r),t.style.border="none",i.value=!1}catch(o){console.error("Error al descargar el carnet:",o)}};function v(o){return`https://api.allorigins.win/raw?url=${encodeURIComponent(o)}`}const k=`${m}/read-product-image/600/employer-${p()}`,C=v(k);return $(()=>{b(p())}),(o,t)=>{var d,c;const n=y("ProgressSpinner"),u=y("Button");return f(),g(j,null,[e("div",T,[q,e("div",O,[e("div",R,[e("div",V,[A,e("img",{class:"fotoPerfil",style:{position:"absolute",width:"3cm","z-index":"99",height:"3cm","object-fit":"cover","border-radius":"50%",top:"1.5cm"},src:`${l(m)}/read-product-image/600/employer-${l(p)()}`,alt:""},null,8,F),L,e("div",M,[e("p",W,a(s.value.name)+"x",1),e("p",G,a(s.value.position),1),e("p",J,"Email: "+a(((d=s.value)==null?void 0:d.email)||""),1),e("p",H,"Telefono: "+a(((c=s.value)==null?void 0:c.phone)||""),1),e("p",K,"ID "+a(l(x)()),1)])])])])]),i.value?(f(),g("div",Q,[_(n,{style:{width:"50px",height:"50px"},strokeWidth:"8",fill:"var(--surface-ground)",animationDuration:".5s","aria-label":"Custom ProgressSpinner"})])):E("",!0),e("div",X,[_(u,{onClick:t[0]||(t[0]=r=>w())},{default:S(()=>[e("i",{class:D([l(I).DOWNLOAD,"mr-2"])},null,2),N(" Descargar")]),_:1})])],64)}}};export{te as default};
