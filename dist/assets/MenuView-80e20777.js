import"./formatoPesos-e824e30b.js";import{u as ae,a as z,f as se}from"./site-fd561950.js";import{h as t,y as O,a9 as ge,U as V,_ as Y,D as N,i as A,g as B,o as i,d as j,e as E,a as e,k as S,f as h,c as r,u as c,b as ne,t as k,p as F,m as H,G as X,W as ce,F as L,r as q,M as he,C as re,I as be,z as fe,n as ye,j as we}from"./index-281a46b6.js";/* empty css                                                                 */import"./ventas-adb62281.js";/* empty css                                                               */t({});t({});const Q=t([{name:"Menu",to:"",menus:[{category:{id:1,name:"Salchipapas"},products:[]}]},{name:"Sedes",to:"sedes"},{name:"Carta",to:"menu"},{name:"Rastrear pedido",to:"rastrear-pedido"},{name:"Colaboraciones",to:"colaboraciones"}]),$e=t(!1);t(1.042);t({products:[],total:0});t([]);t(0);t();t(!1);const me=t(!1);t({});t({});t({});t({});t(!1);t([]);t([]);t([]);t([]);t([]);t(!1);const ie=t(O.currentRoute);t();t(localStorage.getItem("currentNeigborhood"));const ke=()=>{const d=t(localStorage.getItem("currentNeigborhood"));(ie.value.fullPath=="/menu"||ie.value.fullPath=="/sedes")&&(me.value=!1),!d.value&&ie.value.fullPath!="/menu"&&(me.value=!0)},ve={async getSiteById(d){try{const o=await ge.get(`${V}/site/${d}`);return o.status===200?o.data:(console.error("An error occurred while fetching the ingredients:",o.status),null)}catch(o){return console.error("An error occurred while fetching the ingredients:",o),null}}};const G=d=>(F("data-v-3f8a3844"),d=d(),H(),d),Ce={class:"dialog-content"},xe=G(()=>e("b",{class:"dialog-title"},null,-1)),Se={class:"form-container"},Pe={class:"form-group"},Ie={class:"label-spinner"},Be=G(()=>e("label",{for:"city-dropdown",class:"label"},"¿En qué ciudad te encuentras?",-1)),Ve={key:0,class:"form-group"},Ee={class:"label-spinner"},Ne=G(()=>e("label",{for:"neighborhood-dropdown",class:"label"},"¿Cuál es tu barrio?",-1)),De={key:0,class:"loading-neighborhood"},Le=G(()=>e("p",{class:"loading-text"},"Buscando barrios...",-1)),Te={class:"image-container"},qe=["src"],Ae={key:1,src:"https://backend.salchimonster.com/read-photo-product/xai0dVnL",style:{"object-fit":"contain"},alt:"Vista previa de la sede"},Me={key:2,class:"image-overlay"},Ue={class:"site-info"},Re=G(()=>e("span",{class:"brand-name"},"SALCHIMONSTER ",-1)),We={class:"site-name"},je={class:"button-container"},Oe={__name:"siteDialog",setup(d){const o=ae();z(),N(()=>o.location.site.site_id,()=>{location.reload()});const _=t({ciudad:!1,barrio:!1}),P=t([]),w=t({}),u=t(null),n=t({site:{name:"default"}}),a=t([]),m=()=>{n.value={site:{site_name:"default"}}};N(u,async()=>{u.value&&u.value.city_id===15?(n.value={neighborhood_id:5881,name:"NEW JERSEY",delivery_price:0,site_id:33,city_id:15},w.value=await ve.getSiteById(33),a.value=[]):(m(),f())});const f=async()=>{if(u.value&&u.value.city_id){const p=await b(u.value.city_id);a.value=p}else a.value=[]};N(u,()=>{f()}),N(n,async()=>{n.value.site_id?w.value=await ve.getSiteById(n.value.site_id):w.value={}},{immediate:!0});const v=async()=>{const p={site:w.value,neigborhood:n.value,city:u.value};o.setLocation(p),o.setVisible("currentSite",!1)},D=async()=>{try{_.value.ciudad=!0;const p=await fetch(`${V}/cities`);if(p.ok){const C=await p.json();P.value=C}}catch(p){console.error("Error obteniendo ciudades:",p)}finally{_.value.ciudad=!1}},b=async p=>{try{_.value.barrio=!0;const C=await fetch(`${V}/neighborhoods/by-city/${p}`);return C.ok?await C.json():[]}catch(C){return console.error("Error obteniendo barrios:",C),[]}finally{_.value.barrio=!1}};return A(()=>{D()}),(p,C)=>{var U,R;const M=B("ProgressSpinner"),J=B("Dropdown"),Z=B("Button"),ee=B("Dialog");return i(),j(ee,{closable:((R=(U=c(o).location)==null?void 0:U.site)==null?void 0:R.pe_site_id)>0,style:{width:"30rem","max-width":"96%"},visible:c(o).visibles.currentSite,"onUpdate:visible":C[2]||(C[2]=T=>c(o).visibles.currentSite=T),header:"Selección de sede",modal:!0,class:"dialog"},{default:E(()=>{var T,K,s,l,y,I;return[e("div",Ce,[xe,e("div",Se,[e("div",Pe,[e("div",Ie,[Be,_.value.ciudad?(i(),j(M,{key:0,class:"spinner",strokeWidth:"8",fill:"var(--white)",animationDuration:".5s","aria-label":"Cargando ciudades"})):S("",!0)]),h(J,{id:"city-dropdown",modelValue:u.value,"onUpdate:modelValue":C[0]||(C[0]=W=>u.value=W),onClick:m,options:P.value,optionLabel:"city_name",placeholder:"SELECCIONA UNA CIUDAD",class:"dropdown",required:""},null,8,["modelValue","options"])]),u.value&&u.value.city_id!==15?(i(),r("div",Ve,[e("div",Ee,[Ne,_.value.barrio?(i(),r("div",De,[h(M,{class:"spinner",strokeWidth:"8",fill:"var(--white)",animationDuration:".5s","aria-label":"Buscando barrios"}),Le])):S("",!0)]),h(J,{id:"neighborhood-dropdown",modelValue:n.value,"onUpdate:modelValue":C[1]||(C[1]=W=>n.value=W),disabled:!a.value.length,options:a.value,optionLabel:"name",placeholder:"Selecciona un barrio",filter:"",filterPlaceholder:"Escribe el nombre de tu barrio",class:"dropdown",required:""},null,8,["modelValue","disabled","options"])])):S("",!0),e("div",Te,[(T=n.value)!=null&&T.site_id?(i(),r("img",{key:0,src:`${c(V)}/read-product-image/600/site-${(K=n.value)==null?void 0:K.site_id}`,class:ne({"default-image":((s=n.value.site)==null?void 0:s.name)==="default"}),alt:"Vista previa de la sede"},null,10,qe)):(i(),r("img",Ae)),(l=n.value)!=null&&l.site_id?(i(),r("div",Me,[e("p",Ue,[Re,e("span",We,k((y=w.value)==null?void 0:y.site_name),1)])])):S("",!0)]),e("div",je,[h(Z,{label:"Guardar",onClick:v,disabled:!((I=n.value)!=null&&I.name),class:"save-button"},null,8,["disabled"])])])])]}),_:1},8,["closable","visible"])}}},ze=Y(Oe,[["__scopeId","data-v-3f8a3844"]]);const Ye=d=>(F("data-v-37c06b51"),d=d(),H(),d),Fe={ref:"categoryBar",style:{position:"sticky","box-shadow":"0 1rem .5rem #00000020",top:"3rem",padding:".2rem","z-index":"99",display:"flex","align-items":"center","background-color":"white","overflow-x":"auto"}},He=Ye(()=>e("span",{class:"text-lg",style:{"min-width":"max-content"}},"Nuevo pedido",-1)),Ge={class:"container",style:{"justify-content":"start","align-items":"center"}},Je={class:"container",style:{"justify-content":"start","align-items":"center"}},Ke=["id"],Qe=["onClick"],Xe=["src"],Ze={__name:"BarraCategorias",setup(d){const o=ae(),_=z(),P=[10,26,8,9,13,27,11,4,5,110,112,113,111,109,115,118,119,116,117];X(()=>{var u,n,a;return(a=(n=(u=_==null?void 0:_.menu)==null?void 0:u.listaCategorias)==null?void 0:n.filter(m=>o.categories.includes(parseInt(m.categoria_id))))==null?void 0:a.sort((m,f)=>P.indexOf(parseInt(m.categoria_id))-P.indexOf(parseInt(f.categoria_id)))});const w=u=>{O.push(`/call-center-vender/${u}`);const n=document.getElementById(u);if(n){const f=n.getBoundingClientRect().top+window.pageYOffset-160;window.scrollTo({top:f,behavior:"smooth"})}_.currentSection=u,setTimeout(()=>{const a=document.getElementById(`categoryButton-${u}`);a&&a.scrollIntoView({behavior:"smooth",inline:"center",block:"nearest"})},1e3)};return ce(()=>{}),(u,n)=>{var m,f;const a=B("Button");return i(),r("div",Fe,[h(a,{onClick:n[0]||(n[0]=v=>c(o).visibles.currentSite=!0),severity:"help",class:"ml-4 text-lg titulo",style:{"font-weight":"400","min-height":"100%","border-radius":"10rem","text-transform":"uppercase","min-width":"max-content"}},{default:E(()=>[He]),_:1}),e("div",Ge,[e("div",Je,[(i(!0),r(L,null,q((f=(m=c(_))==null?void 0:m.menu)==null?void 0:f.filter(v=>v.products&&v.visible),(v,D)=>(i(),r("div",{key:v.categoria_id,id:"categoryButton-"+v.categoria_id,class:"container-button"},[e("a",{onClick:he(b=>w(v.categoria_id),["prevent"])},[h(a,{class:ne(["bar-button",{selected:c(_).currentSection===v.categoria_id}]),label:v.categoria_descripcion},{default:E(()=>{var b,p;return[e("img",{src:`${c(V)}/get-image?image_url=${(p=(b=v.products)==null?void 0:b[0])==null?void 0:p.productogeneral_urlimagen}`,alt:""},null,8,Xe),e("span",null,[e("b",null,k(v.categoria_descripcion),1)])]}),_:2},1032,["class","label"])],8,Qe)],8,Ke))),128))])])],512)}}},et=Y(Ze,[["__scopeId","data-v-37c06b51"]]);const tt=d=>(F("data-v-6956ec67"),d=d(),H(),d),ot={class:"fixed-cart-bar background"},st={class:"cart-button"},it=tt(()=>e("i",{class:"cart-icon icono pi pi-shopping-cart"},null,-1)),at=["src"],nt={key:0,class:"extra-products"},ct={class:"extra-products-text"},rt={__name:"barra",setup(d){t(localStorage.getItem("currenSiteWsp"));const o=z();t(O.currentRoute);let _;re();const P=()=>{w.value=!1,clearTimeout(_),_=setTimeout(()=>{w.value=!0},500)};A(()=>{window.addEventListener("scroll",P)}),be(()=>{window.removeEventListener("scroll",P),clearTimeout(_)});const w=t(!0),u=()=>{O.push("/call-center-vender/cart")};return(n,a)=>{const m=B("Button");return i(),r("div",ot,[c(o).cart.length>0?(i(),r("div",{key:0,onClick:u,class:ne(["cart-bar",{hidden:!w.value}])},[e("button",st,[it,(i(!0),r(L,null,q(c(o).cart.slice(0,4),f=>(i(),r("div",{key:f.id,class:"product-item"},[h(m,{class:"quantity-button",label:`${f.pedido_cantidad}`,severity:"danger",rounded:""},null,8,["label"]),e("img",{class:"img-cart",onMouseover:a[0]||(a[0]=()=>n.vueMenu=!0),src:`${c(V)}/get-image?image_url=${f.productogeneral_urlimagen}`,alt:"Product Image"},null,40,at)]))),128)),c(o).cart.length>4?(i(),r("div",nt,[e("p",ct," +"+k(c(o).cart.length-4),1)])):S("",!0)])],2)):S("",!0)])}}},lt=Y(rt,[["__scopeId","data-v-6956ec67"]]);const le=d=>(F("data-v-9c991f11"),d=d(),H(),d),dt={key:0,class:"change-dialog-content"},ut=["onClick"],_t=["src"],pt={class:"header-container"},mt={style:{display:"flex","align-items":"center","justify-content":"center",gap:"2rem"}},vt={class:"cart-addition-quantity-control"},gt={readonly:"",class:"cart-addition-quantity-label"},ht={class:"footer-container"},bt={class:"dialog-main-content"},ft=["src"],yt={class:"details"},wt=le(()=>e("h3",{class:"text description"},"DESCRIPCION",-1)),$t={style:{margin:"1rem 0"}},kt={style:{margin:"1rem 0"}},Ct={class:"modificador-row-content"},xt={class:"adicion modificador-nombre"},St={class:"modificador-price-quantity"},Pt={key:0,class:"modificador-price"},It={key:0,style:{"margin-right":".5rem"}},Bt={key:1},Vt={class:"modificador-quantity-btns"},Et={key:1,readonly:"",class:"quantity-input"},Nt={key:0,class:"includes-title"},Dt=le(()=>e("strong",null,"INCLUYE",-1)),Lt=[Dt],Tt={class:"product-base-grid"},qt={class:"product-base-desc"},At={class:"product-base-item-header"},Mt={class:"product-base-qty"},Ut=["src"],Rt=le(()=>e("div",{style:{"border-top":".3rem solid","margin-top":".5rem",opacity:".2"}},null,-1)),Wt={__name:"VistaProducto",setup(d){const o=z(),_=re();fe();const P=t(!1),w=t(!1),u=t(!1),n=t(1);N(()=>o.visibles.currentProduct,s=>{s||(P.value=w.value=u.value=!1),b.value={},p.value={},n.value=1},{deep:!0});const a=t(null),m=t(!1),f=s=>{const l={producto_cambio_id:a.value.producto_id,producto_descripcion:a.value.producto_descripcion,producto_precio:a.value.producto_precio,producto_urlimagen:a.value.producto_urlimagen},y=a.value.lista_productoCambio.findIndex(I=>I.producto_cambio_id===s.producto_cambio_id);y!==-1&&a.value.lista_productoCambio.splice(y,1,l),a.value.producto_id=s.producto_id,a.value.producto_descripcion=s.producto_descripcion,a.value.producto_precio=s.producto_precio,a.value.producto_urlimagen=s.producto_urlimagen,m.value=!1,v()},v=()=>{let s=0;o.currentProduct.lista_productobase.forEach(l=>{s+=parseFloat(l.producto_precio)*parseInt(l.productocombo_cantidad)}),o.currentProduct.productogeneral_precio&&(s+=parseFloat(o.currentProduct.productogeneral_precio)),o.currentProduct.totalPrice=s},D=s=>{a.value=s,m.value=!0},b=t({}),p=t({}),C=(s,l)=>{var y;if((y=p.value)!=null&&y[s==null?void 0:s.modificadorseleccion_nombre]){const I={...s,modificadorseleccion_cantidad:1,modificador_id:l};b.value[I.modificadorseleccion_id]=I}else delete b.value[s.modificadorseleccion_id]},M=s=>{var l;(l=p.value)!=null&&l[s==null?void 0:s.modificadorseleccion_nombre]&&b.value[s.modificadorseleccion_id].modificadorseleccion_cantidad++},J=s=>{b.value[s.modificadorseleccion_id].modificadorseleccion_cantidad>1&&b.value[s.modificadorseleccion_id]&&b.value[s.modificadorseleccion_id].modificadorseleccion_cantidad--},Z=s=>{const l=Object.values(b.value);o.addProductToCart(s,n.value,l),b.value={},o.setVisible("currentProduct",!1)};N(()=>o.visibles.currentProduct,s=>{});const ee=t([]);N(()=>o.visibles.addAdditionToCart,async s=>{s||(b.value={},ee.value=[])},{deep:!0});const U=t(window.innerWidth),R=()=>{U.value=window.innerWidth};window.addEventListener("resize",R),ce(()=>{window.removeEventListener("resize",R)});const T=X(()=>K.value?{width:"90%","max-width":"40rem"}:{width:"90%","max-width":"1200px"}),K=X(()=>U.value<1200);return A(()=>{setTimeout(()=>{_.params.product_id&&(o.currentProduct=o.menu.data.find(s=>s.productogeneral_id==_.params.product_id),o.visibles.currentProduct=!0)},1e3)}),(s,l)=>{const y=B("Button"),I=B("Dialog"),W=B("Checkbox");return i(),r(L,null,[h(I,{visible:m.value,"onUpdate:visible":l[1]||(l[1]=x=>m.value=x),style:{"max-width":"20rem"},closable:!1,modal:!0,class:"change-dialog"},{header:E(()=>[e("h3",null,"Elige una alternativa para "+k(a.value.producto_descripcion),1)]),default:E(()=>[a.value?(i(),r("div",dt,[(i(!0),r(L,null,q(a.value.lista_productoCambio,x=>(i(),r("div",{class:"change-option shadow-4",key:x.producto_cambio_id,onClick:te=>f(x)},[e("img",{class:"change-option-img",src:`${c(V)}/get-image?image_url=${x.producto_urlimagen}`,alt:""},null,8,_t),e("p",null,[e("strong",null,k(x.producto_descripcion),1)])],8,ut))),128)),h(y,{onClick:l[0]||(l[0]=x=>{m.value=!1}),severity:"danger",icon:"pi pi-times",class:"close-change-dialog-btn"})])):S("",!0)]),_:1},8,["visible"]),h(I,{closable:!1,visible:c(o).visibles.currentProduct,"onUpdate:visible":l[6]||(l[6]=x=>c(o).visibles.currentProduct=x),style:ye(T.value),header:`${c(o).currentProduct.productogeneral_descripcion}`,modal:!0,class:"container product-dialog"},{header:E(()=>[e("div",pt,[e("h3",null,k(c(o).currentProduct.productogeneral_descripcion),1),e("h3",null,k(c(se)(c(o).currentProduct.productogeneral_precio||c(o).currentProduct.lista_presentacion[0].producto_precio)),1)])]),footer:E(()=>[e("div",mt,[e("div",vt,[h(y,{onClick:l[3]||(l[3]=x=>n.value>1?n.value-=1:0),severity:"danger",style:{"border-radius":".5rem 0 0 .5rem",width:"3rem"},class:"cart-addition-quantity-btn-minus",icon:"pi pi-minus"}),e("span",gt,k(n.value),1),h(y,{onClick:l[4]||(l[4]=x=>n.value+=1),severity:"danger",style:{"border-radius":"0 .5rem .5rem 0",width:"3rem"},class:"cart-addition-quantity-btn-plus",icon:"pi pi-plus"})]),e("div",ht,[h(y,{class:"add-cart-footer-btn",onClick:l[5]||(l[5]=x=>Z(c(o).currentProduct)),label:"Agregar al carrito",icon:"pi pi-shopping-cart"})])])]),default:E(()=>{var x,te,de;return[h(y,{class:"add-cart-button",onClick:l[2]||(l[2]=$=>c(o).setVisible("currentProduct",!1)),severity:"danger",icon:"pi pi-times"}),e("div",bt,[e("div",null,[e("img",{style:{position:"sticky",top:"0"},class:"product-image",src:`${c(V)}/get-image?image_url=${c(o).currentProduct.productogeneral_urlimagen}`,alt:""},null,8,ft)]),e("div",yt,[wt,e("p",$t,k((x=c(o).currentProduct.productogeneral_descripcionweb)==null?void 0:x.toLowerCase()),1),(i(!0),r(L,null,q(c(o).currentProduct.lista_agrupadores,$=>(i(),r("div",{key:$.modificador_id},[e("h3",kt,[e("strong",null,k($.modificador_nombre),1)]),e("div",null,[(i(!0),r(L,null,q($.listaModificadores,g=>{var ue,_e,pe;return i(),r("div",{class:"modificador-row",key:g.modificadorseleccion_id},[h(W,{class:"modificador-checkbox",onChange:()=>C(g,$.modificador_id),binary:"",modelValue:p.value[g.modificadorseleccion_nombre],"onUpdate:modelValue":oe=>p.value[g.modificadorseleccion_nombre]=oe},null,8,["onChange","modelValue","onUpdate:modelValue"]),e("div",Ct,[e("span",xt,k(g.modificadorseleccion_nombre),1),e("div",St,[g.modificadorseleccion_precio>0?(i(),r("span",Pt,[((ue=b.value[g.modificadorseleccion_id])==null?void 0:ue.modificadorseleccion_cantidad)>0?(i(),r("b",It,k(c(se)(g.modificadorseleccion_precio*parseInt((_e=b.value[g.modificadorseleccion_id])==null?void 0:_e.modificadorseleccion_cantidad))),1)):(i(),r("b",Bt,k(c(se)(g.modificadorseleccion_precio)),1))])):S("",!0),e("div",Vt,[p.value[g.modificadorseleccion_nombre]&&g.modificadorseleccion_precio>0&&$.modificador_esmultiple>0?(i(),j(y,{key:0,onClick:oe=>J(g),class:"quantity-btn",severity:"danger",icon:"pi pi-minus"},null,8,["onClick"])):S("",!0),p.value[g.modificadorseleccion_nombre]&&g.modificadorseleccion_precio>0&&$.modificador_esmultiple>0?(i(),r("span",Et,k(((pe=b.value[g.modificadorseleccion_id])==null?void 0:pe.modificadorseleccion_cantidad)||1),1)):S("",!0),p.value[g.modificadorseleccion_nombre]&&g.modificadorseleccion_precio>0&&$.modificador_esmultiple>0?(i(),j(y,{key:2,onClick:oe=>M(g),class:"quantity-btn",severity:"danger",icon:"pi pi-plus"},null,8,["onClick"])):S("",!0)])])])])}),128))])]))),128)),((de=(te=c(o).currentProduct)==null?void 0:te.lista_productobase)==null?void 0:de.length)>0?(i(),r("h3",Nt,Lt)):S("",!0),e("div",Tt,[(i(!0),r(L,null,q(c(o).currentProduct.lista_productobase,$=>(i(),r("div",{class:"product-base-item",key:$.producto_id},[e("h3",qt,k($.producto_descripcion),1),e("div",At,[e("h3",Mt,k(Math.round($.productocombo_cantidad))+" x ",1),e("img",{class:"product-base-img",src:`${c(V)}/get-image?image_url=${$.producto_urlimagen}`,alt:""},null,8,Ut),$.lista_productoCambio&&$.lista_productoCambio.length>0?(i(),j(y,{key:0,class:"product-base-change-btn",label:"Cambiar",onClick:g=>D($)},null,8,["onClick"])):S("",!0)]),Rt]))),128))])])])]}),_:1},8,["visible","style","header"])],64)}}},jt=Y(Wt,[["__scopeId","data-v-9c991f11"]]);const Ot=d=>(F("data-v-855a83a7"),d=d(),H(),d),zt={class:"px-0 mx-0 mt-5",style:{"min-height":"100vh"}},Yt={key:0,style:{height:"80vh",display:"flex","align-items":"center","justify-content":"center"}},Ft=Ot(()=>e("p",{class:"text-center text-4xl md:text-6xl"},[e("b",null,"Por favor seleccione una categoria")],-1)),Ht=[Ft],Gt={__name:"MenuView",setup(d){const o=re();t(O.currentRoute),t(localStorage.getItem("currentNeigborhood"));const _=ae(),P=z(),w=t(window.innerWidth);X(()=>w.value<800);const u=()=>{w.value=window.innerWidth};A(async()=>{var v,D;(v=_.location.site)==null||v.site_id;const m=(D=_.location.site)==null?void 0:D.pe_site_id,f=await we.get(`${V}/tiendas/${m||1}/products`);P.menu=f.categorias}),A(async()=>{window.addEventListener("resize",u),ke()}),ce(()=>{window.removeEventListener("resize",u)});const n=t(Q.value[0].menus[0]);return t({}),N(Q,()=>{n.value={category:Q.value[0].menus[1].category,products:Q.value[0].menus[1].products},console.log("cambio")}),t([{name:"S",id:1,imagen:"/images/logo.png",codigos:[10,26,8,9,13,27,11,4,5,110,112,113,111,109,115,118,119,116,117]},{name:"B",id:2,imagen:"https://backend.salchimonster.com/read-photo-product/mm9Ohnu7",codigos:[5,22,18,4]},{name:"P",id:4,imagen:"https://backend.salchimonster.com/read-photo-product/a1roeK3y",codigos:[19,24,4,5]}]),A(async()=>{$e.value=!0}),(m,f)=>{const v=B("RouterView");return i(),r("div",zt,[h(ze),h(et),h(v),h(lt),c(o).path=="/call-center-vender"?(i(),r("div",Yt,Ht)):S("",!0),h(jt)])}}},to=Y(Gt,[["__scopeId","data-v-855a83a7"]]);export{to as default};
