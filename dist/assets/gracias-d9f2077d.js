import{a as Ee,u as Se}from"./site-c5e796e6.js";import{u as De}from"./user-a037868b.js";import{_ as we,y as Pe,j as g,k as ve,m as j,U as L,I as me,r as T,o as n,c as a,e as c,f as p,a as e,N as ae,t as r,u as s,ad as N,h as m,g as E,i as d,d as Oe,F as U,b as de,q as xe,x as ke,C as Te,K as Ve}from"./index-bc571c19.js";import{f as h}from"./formatoPesos-2293ab52.js";import{u as Ie}from"./ventas-5c424dc4.js";const l=S=>(xe("data-v-1a9c103a"),S=S(),ke(),S),Re=l(()=>e("h3",null,[e("b",null,"TRASLADO DE SEDE")],-1)),Ne=l(()=>e("span",{for:"responsible"},"SELECCIONE LA SEDE DESTINO",-1)),Ae=l(()=>e("h3",null,[e("b",null,"Cambiar Valor del Domicilio")],-1)),je=l(()=>e("span",null,"Valor actual del domicilio",-1)),Le=l(()=>e("span",null,"Nuevo valor del domicilio",-1)),Ue=l(()=>e("h3",null,[e("b",null,"Cancelar Orden")],-1)),ze=l(()=>e("span",{for:"responsible"},"Responsable",-1)),Me=l(()=>e("span",{for:"reason"},"Razón",-1)),Be=l(()=>e("h3",null,[e("b",null,"Cancelar Orden")],-1)),Fe=l(()=>e("span",{class:"advert",style:{"text-transform":"lowercase",color:"red","font-weight":"bold"}}," Desde el 16 de mayo de 2024, la cancelación de órdenes requerirá autorización.",-1)),He=l(()=>e("span",{for:"responsible"},"Responsable",-1)),qe=l(()=>e("span",{for:"reason"},"Razón",-1)),Ge={style:{"text-transform":"capitalize"}},Ke={class:"col-12 mb-0 pb-0 px-0 m-0",style:{display:"flex","justify-content":"space-between",gap:"1rem"}},Ye={class:""},Ze={id:"factura",style:{width:"100%"}},Je=l(()=>e("i",{class:"pi pi-whatsapp mr-2"},null,-1)),Qe=l(()=>e("br",null,null,-1)),We={class:"",style:{width:"auto"}},Xe={class:"",id:"id",style:{"font-weight":"bold","min-width":"100%",width:"max-content","text-align":"center",color:"black",margin:"0rem"}},et={class:"",id:"id",style:{"font-weight":"bold","min-width":"100%",width:"max-content","text-align":"center",color:"black",margin:"0rem"}},tt={style:{padding:"0",color:"black","text-align":"center",margin:"auto","margin-bottom":"1rem",width:"max-content","min-width":"max-content",display:"flex","justify-content":"center","flex-direction":"column"}},st=l(()=>e("div",{class:"",style:{"font-weight":"bold",color:"white",margin:"0","background-color":"black","align-items":"center",display:"grid","grid-template-columns":"auto auto"}},[e("div",{class:"px-2",style:{width:"100%"}},[e("b",null," productos")]),e("div",{class:"px-2"},[e("p",{style:{"text-align":"end","font-weight":"bold"}},[e("b",null," total ")])])],-1)),ot={style:{display:"grid",gap:"0 1rem","grid-template-columns":"auto auto"}},rt={key:0,class:"p-0 m-0"},lt=l(()=>e("br",null,null,-1)),nt={key:1,class:"p-0 m-0"},it=l(()=>e("br",null,null,-1)),at={key:0,style:{"text-align":"end",color:"black"}},dt={key:1,style:{"text-align":"end",color:"black"}},ct={key:0,class:"p-0 m-0"},ut=l(()=>e("b",null,"COMBO INCLUYE",-1)),_t=[ut],pt={class:"p-0 m-0 ml-5",style:{}},mt={style:{display:"flex",width:"","justify-content":"space-between"},class:"p-0 m-0"},bt={class:"p-0 m-0",style:{}},yt={class:"p-0 m-0",style:{"text-align":"end"}},ht=l(()=>e("div",{style:{"background-color":"rgba(0, 0, 0, 0.286)",height:"1px"}},null,-1)),vt={class:"",style:{display:"grid","margin-top":"1rem","grid-template-columns":"auto auto"}},gt=l(()=>e("div",{class:""},[e("span",{style:{"font-weight":"bold"}},[e("b",null,"Subtotal")])],-1)),ft={class:""},Ot={style:{"text-align":"end","font-weight":"bold",color:"black"}},wt=l(()=>e("div",{class:""},[e("span",{class:"m-0",style:{"font-weight":"bold"}},[e("b",null,"Domicilio")])],-1)),xt={class:""},kt={class:"m-0 p-0",style:{"text-align":"end","font-weight":"bold",color:"black"}},Ct=l(()=>e("div",{class:""},[e("span",{style:{"font-weight":"bold",color:"black"}},[e("b",null,"Total")])],-1)),$t={class:""},Et={class:"m-0 p-0",style:{"text-align":"end",color:"black","font-weight":"bold"}},St=l(()=>e("div",{class:""},null,-1)),Dt=l(()=>e("p",{class:"px-2",style:{"font-weight":"bold","background-color":"black",color:"white",padding:"0",margin:"0","margin-top":"0.5rem"}},[e("b",null,"Notas")],-1)),Pt={class:"notas p-2 m-0",style:{border:"1px solid",margin:"0",color:"black",padding:"0.5rem"}},Tt=l(()=>e("p",{class:"px-2",style:{"background-color":"black","font-weight":"bold","margin-top":"1rem",color:"white"}},[e("b",null,"cliente")],-1)),Vt={style:{display:"grid",gap:"1rem 2rem","grid-template-columns":"auto auto","align-items":"start"}},It=l(()=>e("div",{class:"",style:{}},[e("span",null,[e("b",null,"Nombre")])],-1)),Rt={class:""},Nt={style:{"text-align":"start",color:"black"}},At={key:0,class:"",style:{}},jt=l(()=>e("span",null,[e("b",null,"Cedula / Nit")],-1)),Lt=[jt],Ut={key:1,class:""},zt={style:{"text-align":"start",color:"black"}},Mt=l(()=>e("div",{class:"",style:{}},[e("span",null,[e("b",null,"Metodo de entrega")])],-1)),Bt={class:""},Ft={style:{"text-align":"start",color:"black"}},Ht={key:2,class:"",style:{}},qt=l(()=>e("span",null,[e("b",null,"Fecha de entrega")],-1)),Gt=[qt],Kt={key:3,class:""},Yt={style:{"text-align":"start",color:"black"}},Zt={key:4,class:"",style:{}},Jt=l(()=>e("span",null,[e("b",null,"Placa del vehiculo")],-1)),Qt=[Jt],Wt={key:5,class:""},Xt={style:{"text-align":"start",color:"black"}},es=l(()=>e("div",{style:{}},[e("span",null,[e("b",null,"telefono")])],-1)),ts={style:{"text-align":"start",color:"black"}},ss={key:6,style:{}},os=l(()=>e("span",null,[e("b",null,"Correo")],-1)),rs=[os],ls={key:7},ns={style:{"text-align":"start",color:"black"}},is={key:8,style:{}},as=l(()=>e("span",null,[e("b",null,"direccion ")],-1)),ds=[as],cs={key:9,style:{}},us={style:{"text-align":"start",color:"black"}},_s=l(()=>e("div",null,[e("span",null,[e("b",null,"metodo de pago")])],-1)),ps={style:{"text-align":"start",color:"black"}},ms={class:"col-12 mb-0 pb-0 px-0 m-0",style:{display:"flex","justify-content":"space-between",gap:"1rem"}},bs={class:"mt-4",style:{display:"flex","align-items":"center",gap:"1rem"}},ys={class:""},hs={id:"factura",style:{width:"100%"}},vs=l(()=>e("i",{class:"pi pi-whatsapp mr-2"},null,-1)),gs=l(()=>e("br",null,null,-1)),fs={class:"",style:{width:"auto"}},Os={class:"",id:"id",style:{"font-weight":"bold","min-width":"100%",width:"max-content","text-align":"center",color:"black",margin:"0rem"}},ws={class:"",id:"id",style:{"font-weight":"bold","min-width":"100%",width:"max-content","text-align":"center",color:"black",margin:"0rem"}},xs={style:{padding:"0",color:"black","text-align":"center",margin:"auto","margin-bottom":"1rem",width:"max-content","min-width":"max-content",display:"flex","justify-content":"center","flex-direction":"column"}},ks=l(()=>e("div",{class:"",style:{"font-weight":"bold",color:"white",margin:"0","background-color":"black","align-items":"center",display:"grid",gap:"1rem","grid-template-columns":"1fr 3fr 1fr 1fr 1fr"}},[e("div",{class:"px-2",style:{width:"100%"}},[e("b",null," Cant.")]),e("div",{class:"px-0",style:{width:"100%"}},[e("b",null," producto")]),e("div",{class:"px-0",style:{width:"100%"}},[e("b",null," pres.")]),e("div",{class:"px-0",style:{width:"100%"}},[e("b",null," V. Kilo")]),e("div",{class:"px-2"},[e("p",{style:{"text-align":"end","font-weight":"bold"}},[e("b",null," total ")])])],-1)),Cs={style:{display:"grid",gap:"0 1rem","grid-template-columns":"1fr 3fr 1fr 1fr 1fr"}},$s={key:0,class:"p-0 m-0"},Es=l(()=>e("br",null,null,-1)),Ss={key:1,class:"p-0 m-0"},Ds=l(()=>e("br",null,null,-1)),Ps={key:2,class:"p-0 m-0"},Ts=l(()=>e("br",null,null,-1)),Vs={key:3,class:"p-0 m-0"},Is=l(()=>e("br",null,null,-1)),Rs={key:0,style:{"text-align":"start",color:"black"}},Ns={key:1,style:{"text-align":"start",color:"black"}},As={key:0,style:{"text-align":"end",color:"black"}},js={key:1,style:{"text-align":"end",color:"black"}},Ls={style:{display:"flex",width:"","justify-content":"space-between"},class:"p-0 m-0"},Us={class:"p-0 m-0",style:{}},zs={class:"p-0 m-0",style:{"text-align":"end"}},Ms=l(()=>e("div",{style:{"background-color":"rgba(0, 0, 0, 0.286)",height:"1px"}},null,-1)),Bs={class:"",style:{display:"grid","margin-top":"1rem","grid-template-columns":"auto auto"}},Fs=l(()=>e("div",{class:""},[e("span",{style:{"font-weight":"bold"}},[e("b",null,"Subtotal")])],-1)),Hs={class:""},qs={style:{"text-align":"end","font-weight":"bold",color:"black"}},Gs=l(()=>e("div",{class:""},[e("span",{class:"m-0",style:{"font-weight":"bold"}},[e("b",null,"Domicilio")])],-1)),Ks={class:""},Ys={class:"m-0 p-0",style:{"text-align":"end","font-weight":"bold",color:"black"}},Zs=l(()=>e("div",{class:""},[e("span",{style:{"font-weight":"bold",color:"black"}},[e("b",null,"Total")])],-1)),Js={class:""},Qs={class:"m-0 p-0",style:{"text-align":"end",color:"black","font-weight":"bold"}},Ws=l(()=>e("div",{class:""},null,-1)),Xs=l(()=>e("p",{class:"px-2",style:{"font-weight":"bold","background-color":"black",color:"white",padding:"0",margin:"0","margin-top":"0.5rem"}},[e("b",null,"Notas")],-1)),eo={class:"notas p-2 m-0",style:{border:"1px solid",margin:"0",color:"black",padding:"0.5rem"}},to=l(()=>e("p",{class:"px-2",style:{"background-color":"black","font-weight":"bold","margin-top":"1rem",color:"white"}},[e("b",null,"cliente")],-1)),so={style:{display:"grid",gap:"1rem 2rem","grid-template-columns":"auto auto","align-items":"start"}},oo=l(()=>e("div",{class:"",style:{}},[e("span",null,[e("b",null,"Nombre")])],-1)),ro={class:""},lo={style:{"text-align":"start",color:"black"}},no={key:0,class:"",style:{}},io=l(()=>e("span",null,[e("b",null,"Cedula / Nit")],-1)),ao=[io],co={key:1,class:""},uo={style:{"text-align":"start",color:"black"}},_o=l(()=>e("div",{class:"",style:{}},[e("span",null,[e("b",null,"Metodo de entrega")])],-1)),po={class:""},mo={style:{"text-align":"start",color:"black"}},bo={key:2,class:"",style:{}},yo=l(()=>e("span",null,[e("b",null,"Fecha de entrega")],-1)),ho=[yo],vo={key:3,class:""},go={style:{"text-align":"start",color:"black"}},fo={key:4,class:"",style:{}},Oo=l(()=>e("span",null,[e("b",null,"Placa del vehiculo")],-1)),wo=[Oo],xo={key:5,class:""},ko={style:{"text-align":"start",color:"black"}},Co=l(()=>e("div",{style:{}},[e("span",null,[e("b",null,"telefono")])],-1)),$o={style:{"text-align":"start",color:"black"}},Eo={key:6,style:{}},So=l(()=>e("span",null,[e("b",null,"Correo")],-1)),Do=[So],Po={key:7},To={style:{"text-align":"start",color:"black"}},Vo={key:8,style:{}},Io=l(()=>e("span",null,[e("b",null,"direccion ")],-1)),Ro=[Io],No={key:9,style:{}},Ao={style:{"text-align":"start",color:"black"}},jo=l(()=>e("div",null,[e("span",null,[e("b",null,"metodo de pago")])],-1)),Lo={style:{"text-align":"start",color:"black"}},Uo={key:10},zo=l(()=>e("span",null,[e("b",null,"Estado del pago")],-1)),Mo=[zo],Bo={key:11},Fo=l(()=>e("span",{style:{"text-align":"start",color:"black"}}," Aprobado ",-1)),Ho=[Fo],qo={key:12},Go=l(()=>e("span",null,[e("b",null,"Referencia de pago")],-1)),Ko=[Go],Yo={key:13},Zo={style:{"text-align":"start",color:"black"}},Jo={class:"col-12 mb-0 pb-0 px-0 m-0",style:{display:"flex","justify-content":"space-between",gap:"1rem"}},Qo={class:"mt-4",style:{display:"flex","align-items":"center",gap:"1rem"}},Wo=l(()=>e("h3",null,[e("b",null,"Cambiar Método de Pago")],-1)),Xo=l(()=>e("span",{for:"paymentMethod"},"Método de Pago actual",-1)),er={for:"paymentMethod"},tr=l(()=>e("span",{for:"paymentMethod"},"Nuevo método de Pago",-1)),sr={__name:"ResumenGracias",setup(S){const t=Pe(),v=g(!1),D=g(t.currentOrder.delivery_price),z=async()=>{const _=D.value;await j.put(`${L}/changue-delivery/${t.currentOrder.order_id}`,{price:_}),v.value=!1,t.numberOders==1?t.numberOders=2:t.numberOders=1,t.visibles.currentOrder=!1},V=g(!1),I=g(null),M=g([]);ve(async()=>{try{const _=await j.get(`${L}/payment_methods`);M.value=_}catch(_){console.error("Error al obtener métodos de pago:",_)}t.currentOrder.value=t.currentOrder,ye.value=await j.get(`${L}/sites`)});const be=async()=>{if(I.value)try{await j.put(`${L}/change-method/${t.currentOrder.order_id}/${I.value}`,`Cambiando método de pago para la orden ${t.currentOrder.order_id}`),V.value=!1,t.visibles.currentOrder=!1,console.log("Método de pago cambiado exitosamente")}catch(_){console.error("Error al cambiar el método de pago:",_)}},$=_=>{var w,u,x,C;const o=(C=(x=(u=(w=_.latest_status_timestamp)==null?void 0:w.split("T")[1])==null?void 0:u.split(":"))==null?void 0:x.slice(0,2))==null?void 0:C.join(":");switch(_.current_status){case"enviada":return`El pedido fue enviado a su domicilio a las ${o}`;case"cancelada":return`El pedido fue cancelado a las ${o}
Responsable: ${_.responsible}
Razón: ${_.reason}`;case"en preparacion":return`El pedido está en preparación desde las ${o} y será enviado en breve.`;case"generada":return`Hemos recibido su pedido a las ${o} y empezaremos a prepararlo en breve. Gracias por su espera.`;default:return""}},P=g(0),f=g(!1),A=me(()=>t.currentOrder.pe_json.listaPedidos.reduce((_,o)=>{var u;let w=o.pedido_cantidad*o.pedido_precio;if(o.modificadorseleccionList&&o.modificadorseleccionList.length>0){const C=((u=o.modificadorseleccionList)==null?void 0:u.filter(B=>B.pedido_productoid==o.pedido_productoid)).reduce((B,F)=>B+F.modificadorseleccion_cantidad*F.pedido_precio,0);w+=C}return _+w},0));me(()=>A.value+t.currentOrder.delivery_price);const ue=async()=>{var o;const _={order_id:t.currentOrder.order_id,responsible:(o=O.value.responsible)==null?void 0:o.name,reason:O.value.reason};await N.create_cancellling_request(_),f.value=!1,t.Notification.pause(),t.Notification.currentTime=0},R=g(!1),_e=()=>{const _=document.getElementById("factura").innerHTML,o=window.open("","_blank");o.document.write("<html><head><title>Factura</title>");const w=document.getElementsByTagName("style");for(let u=0;u<w.length;u++)o.document.write(w[u].outerHTML);o.document.write("<style>  @media print { html{height: min-content;}  *{text-transform:uppercase;align-items:center; width:100%; font-family: sans-serif;padding:0;margin:0; font-size:o.9rem !IMPORTANT} body {  -webkit-print-color-adjust: exact; /* Chrome, Safari */ color-adjust: exact; /* Firefox */ } }  </style>"),o.document.write("</head><body>"),o.document.write(_),o.document.write("</body></html>"),o.document.close(),o.print(),setTimeout(()=>{o.close()},.01)},ye=g([]);ve(async()=>{t.currentOrder.value=t.currentOrder,ye.value=await j.get(`${L}/sites`)});const he=g(!1),pe=g(!1),O=g({responsible:null,reason:"Sin razon"}),ge=g([{name:"Restaurante",value:"restaurant"},{name:"Cliente",value:"client"}]),fe=()=>{O.value.responsible&&N.cancelOrder(t.currentOrder.order_id,O.value.reason,O.value.responsible.name).then(_=>{_&&(he.value=!1,console.log("Order canceled successfully"))}).catch(_=>{console.error("Failed to cancel order:",_)})},Ce=async()=>{const _=t.currentOrder.order_id,o=P.value;await j.put(`${L}/traslate-order`,{site_id:o,order_id:_},`trasladando orden ${_}`),t.visibles.currentOrder=!1,pe.value=!1},$e=()=>{console.log(`Orden: ${t.currentOrder.order_id}, Nuevo Valor de Domicilio: ${D.value}`),v.value=!1};return(_,o)=>{const w=T("Dropdown"),u=T("Button"),x=T("Dialog"),C=T("Tag"),B=T("InputNumber"),F=T("Textarea");return n(),a(U,null,[c(x,{visible:pe.value,"onUpdate:visible":o[2]||(o[2]=i=>pe.value=i),closeOnEscape:"",closable:!0,modal:"",style:{width:"30rem"}},{header:p(()=>[Re]),default:p(()=>[e("form",{onSubmit:ae(fe,["prevent"]),style:{display:"flex",gap:"1rem","flex-direction":"column","align-items":"start"}},[Ne,c(w,{style:{width:"100%"},id:"responsible",modelValue:P.value,"onUpdate:modelValue":o[0]||(o[0]=i=>P.value=i),optionValue:"site_id",options:ye.value.filter(i=>i.show_on_web),optionLabel:"site_name",placeholder:"Seleccione la sede destino"},null,8,["modelValue","options"]),c(u,{onClick:o[1]||(o[1]=i=>Ce()),style:{width:"100%","border-radius":"0.5rem"},label:"Trasladar",type:"submit",class:"p-button-danger"})],32)]),_:1},8,["visible"]),c(x,{visible:v.value,"onUpdate:visible":o[5]||(o[5]=i=>v.value=i),closeOnEscape:"",closable:!0,modal:"",style:{width:"30rem"}},{header:p(()=>[Ae]),default:p(()=>[e("form",{onSubmit:ae($e,["prevent"]),style:{display:"flex",gap:"1rem","flex-direction":"column","align-items":"start"}},[je,c(C,{class:"px-4",severity:"warning"},{default:p(()=>[e("b",null,r(s(h)(s(t).currentOrder.delivery_price)),1)]),_:1}),Le,c(B,{style:{width:"100%"},modelValue:D.value,"onUpdate:modelValue":o[3]||(o[3]=i=>D.value=i),mode:"currency",currency:"COP",locale:"es-CO",maxFractionalDigits:"0",placeholder:"Ingresa el nuevo valor",required:""},null,8,["modelValue"]),c(u,{style:{width:"100%","border-radius":"0.5rem"},label:"Cambiar",type:"submit",class:"p-button-help",onClick:o[4]||(o[4]=i=>z())})],32)]),_:1},8,["visible"]),e("div",null,[c(x,{visible:he.value,"onUpdate:visible":o[8]||(o[8]=i=>he.value=i),closeOnEscape:"",closable:!0,modal:"",style:{width:"30rem"}},{header:p(()=>[Ue]),default:p(()=>[e("form",{onSubmit:ae(fe,["prevent"]),style:{display:"flex",gap:"1rem","flex-direction":"column","align-items":"start"}},[ze,c(w,{style:{width:"100%"},id:"responsible",modelValue:O.value.responsible,"onUpdate:modelValue":o[6]||(o[6]=i=>O.value.responsible=i),options:ge.value,optionLabel:"name",placeholder:"Selecciona un responsable"},null,8,["modelValue","options"]),Me,c(F,{style:{resize:"none","text-transform":"lowercase",width:"100%"},id:"reason",modelValue:O.value.reason,"onUpdate:modelValue":o[7]||(o[7]=i=>O.value.reason=i),rows:"5",placeholder:"Escribe la razón de la cancelación"},null,8,["modelValue"]),c(u,{style:{width:"100%","border-radius":"0.5rem"},label:"cancelar",type:"submit",class:"p-button-danger"})],32)]),_:1},8,["visible"]),c(x,{visible:f.value,"onUpdate:visible":o[11]||(o[11]=i=>f.value=i),closeOnEscape:"",closable:!0,modal:"",style:{width:"30rem"}},{header:p(()=>[Be]),default:p(()=>[e("form",{onSubmit:ae(ue,["prevent"]),style:{display:"flex",gap:"1rem","flex-direction":"column","align-items":"start"}},[Fe,He,c(w,{style:{width:"100%"},id:"responsible",modelValue:O.value.responsible,"onUpdate:modelValue":o[9]||(o[9]=i=>O.value.responsible=i),options:ge.value,optionLabel:"name",placeholder:"Selecciona un responsable"},null,8,["modelValue","options"]),qe,c(F,{style:{resize:"none","text-transform":"lowercase",width:"100%"},id:"reason",modelValue:O.value.reason,"onUpdate:modelValue":o[10]||(o[10]=i=>O.value.reason=i),rows:"5",placeholder:"Escribe la razón de la cancelación"},null,8,["modelValue"]),c(u,{style:{width:"100%","border-radius":"0.5rem"},label:"solicitar cancelacion",type:"submit",class:"p-button-danger"})],32)]),_:1},8,["visible"]),c(x,{closable:!1,style:{width:"30rem"},modal:"",visible:R.value,"onUpdate:visible":o[14]||(o[14]=i=>R.value=i)},{footer:p(()=>[e("div",Ke,[c(u,{text:"",size:"small",onClick:o[12]||(o[12]=()=>{s(N).deliveryZero(s(t).currentOrder.order_id),R.value=!1}),style:{"border-radius":"0.3rem",width:"100%"},severity:"danger",label:"si"}),c(u,{onClick:o[13]||(o[13]=i=>R.value=!1),size:"small",style:{"border-radius":"0.3rem",width:"100%"},severity:"danger",label:"no"})])]),default:p(()=>[e("span",Ge,[m(" Esta seguro de llevar a $0.00 el valor del domicilio para la orden "),e("b",null,r(s(t).currentOrder.order_id),1),m(" del cliente "),e("b",null,r(s(t).currentOrder.user_name),1),m("? ")])]),_:1},8,["visible"]),s(t).currentOrder.site_id!=32?(n(),E(x,{key:0,class:"mx-3",closeOnEscape:"",closable:!1,visible:s(t).visibles.currentOrder,"onUpdate:visible":o[22]||(o[22]=i=>s(t).visibles.currentOrder=i),modal:"",style:{"max-height":"95vh",width:"35rem",position:"relative"}},{footer:p(()=>[e("div",ms,[s(t).currentOrder.current_status=="generada"?(n(),E(u,{key:0,size:"small",onClick:o[15]||(o[15]=i=>s(N).prepareOrder(s(t).currentOrder.order_id)),style:{"border-radius":"0.3rem",width:"100%"},severity:"success",label:"Preparar"})):d("",!0),s(t).currentOrder.current_status=="en preparacion"?(n(),E(u,{key:1,size:"small",onClick:o[16]||(o[16]=i=>s(N).sendOrder(s(t).currentOrder.order_id)),style:{"border-radius":"0.3rem",width:"100%"},severity:"success",label:"enviar"})):d("",!0),c(u,{size:"small",style:{"border-radius":"0.3rem",width:"100%"},onClick:o[17]||(o[17]=()=>pe.value=!0),severity:"warning",label:"TRASLADO"}),c(u,{size:"small",style:{"border-radius":"0.3rem",width:"100%"},onClick:o[18]||(o[18]=i=>f.value=!0),severity:"danger",label:"CANCELAR "})]),e("div",bs,[c(u,{style:{width:"100%"},icon:"pi pi-sync",onClick:o[19]||(o[19]=i=>V.value=!0),label:" metodo de pago",severity:"success"}),c(u,{icon:"pi pi-sync",onClick:o[20]||(o[20]=i=>v.value=!0),label:" Domicilio",class:"p-button-warning",style:{width:"100%"}})])]),default:p(()=>{var i,H,q,G,K,Y,Z,J,Q,W,X,ee,te,se,oe,re,le,b;return[e("div",Ye,[e("div",null,[e("p",{class:Oe(`estado ${(H=(i=s(t).currentOrder)==null?void 0:i.current_status)==null?void 0:H.split(" ")[0]}`)},r($(s(t).currentOrder)),3)])]),e("div",Ze,[s(t).currentOrder.responsible_id?(n(),E(C,{key:0,style:{},class:"tag mb-2",severity:"success"},{default:p(()=>[Je,m(" TRANSFERENCIA APROBADA")]),_:1})):d("",!0),m(),Qe,s(t).currentOrder.responsible_id?(n(),E(C,{key:1,class:"tag",severity:"success"},{default:p(()=>[m(r(s(t).currentOrder.name),1)]),_:1})):d("",!0),e("div",We,[e("p",Xe," ID:"+r(s(t).currentOrder.order_id),1),e("p",et,r(s(t).currentOrder.user_name)+" "+r(s(t).currentOrder.second_name)+" "+r(s(t).currentOrder.first_last_name)+" "+r(s(t).currentOrder.second_last_name),1),e("p",tt,[e("b",null," fecha: "+r((G=(q=s(t).currentOrder.latest_status_timestamp)==null?void 0:q.split("T")[0].split("-"))==null?void 0:G.reverse().join("-")),1),e("b",null," Hora: "+r((J=(Z=(Y=(K=s(t).currentOrder.latest_status_timestamp)==null?void 0:K.split("T")[1])==null?void 0:Y.split(":"))==null?void 0:Z.slice(0,2))==null?void 0:J.join(":")),1)]),st,(n(!0),a(U,null,de((X=(W=(Q=s(t))==null?void 0:Q.currentOrder)==null?void 0:W.pe_json)==null?void 0:X.listaPedidos,y=>{var ne,ie;return n(),a("div",null,[e("div",ot,[((ne=s(t).currentOrder)==null?void 0:ne.site_id)==32?(n(),a("p",rt,[e("b",null," ( "+r(y.pedido_cantidad)+" kg ) ",1),m(" "+r(y.pedido_nombre_producto)+" ( "+r(y.pedido_cantidad/y.presentacion)+" "+r(y.presentation_unit_measure)+") ",1),lt])):(n(),a("p",nt,[e("b",null," ( "+r(y.pedido_cantidad)+" ) ",1),m(" "+r(y.pedido_nombre_producto)+" ",1),it])),e("div",null,[y.pedido_base_price?(n(),a("p",at,r(s(h)(y.pedido_base_price*y.pedido_cantidad)),1)):(n(),a("p",dt,r(s(h)(y.pedido_precio)),1))])]),((ie=y.lista_productocombo)==null?void 0:ie.length)>0?(n(),a("p",ct,_t)):d("",!0),y.lista_productocombo?(n(!0),a(U,{key:1},de(y.lista_productocombo,k=>(n(),a("p",pt,[m(" -- "),e("b",null,r(k.pedido_cantidad),1),m(" "+r(k.pedido_nombre),1)]))),256)):d("",!0),(n(!0),a(U,null,de(y.modificadorseleccionList,k=>(n(),a("div",mt,[e("p",bt,[m(" - ( "+r(y.pedido_cantidad)+" ) ",1),e("b",null,r(k.modificadorseleccion_cantidad),1),m(" "+r(k.modificadorseleccion_nombre),1)]),e("p",yt,r(s(h)(k.pedido_precio*k.modificadorseleccion_cantidad*y.pedido_cantidad)),1)]))),256)),ht])}),256)),e("div",vt,[gt,e("div",ft,[e("p",Ot,[e("b",null,r(s(h)(s(t).currentOrder.pe_json.delivery.delivery_pagocon-((te=(ee=s(t).currentOrder.pe_json)==null?void 0:ee.delivery)==null?void 0:te.delivery_costoenvio))),1)])]),wt,e("div",xt,[e("p",kt,[e("b",null,r(s(h)((oe=(se=s(t).currentOrder.pe_json)==null?void 0:se.delivery)==null?void 0:oe.delivery_costoenvio)),1)])]),Ct,e("div",$t,[e("p",Et,[e("b",null,r(s(h)(s(t).currentOrder.pe_json.delivery.delivery_pagocon)),1)])]),St]),Dt,e("p",Pt,r((re=s(t).currentOrder.order_notes)==null?void 0:re.toLowerCase()),1),Tt,e("div",Vt,[It,e("div",Rt,[e("span",Nt,r(s(t).currentOrder.user_name)+" "+r(s(t).currentOrder.second_name)+" "+r(s(t).currentOrder.first_last_name)+" "+r(s(t).currentOrder.second_last_name),1)]),s(t).currentOrder.site_id==32?(n(),a("div",At,Lt)):d("",!0),s(t).currentOrder.site_id==32?(n(),a("div",Ut,[e("span",zt,r(s(t).currentOrder.cedula_nit),1)])):d("",!0),Mt,e("div",Bt,[e("span",Ft,r(s(t).currentOrder.order_type),1)]),s(t).currentOrder.site_id==32?(n(),a("div",Ht,Gt)):d("",!0),s(t).currentOrder.site_id==32?(n(),a("div",Kt,[e("p",Yt,r(s(t).currentOrder.pe_json.delivery.delivery_horaentrega),1)])):d("",!0),s(t).currentOrder.placa?(n(),a("div",Zt,Qt)):d("",!0),s(t).currentOrder.placa?(n(),a("div",Wt,[e("p",Xt,r(s(t).currentOrder.placa),1)])):d("",!0),es,e("div",null,[e("span",ts,r(s(t).currentOrder.user_phone),1)]),s(t).currentOrder.site_id==32?(n(),a("div",ss,rs)):d("",!0),s(t).currentOrder.site_id==32?(n(),a("div",ls,[e("span",ns,r(s(t).currentOrder.email),1)])):d("",!0),s(t).currentOrder.order_type!="Pasar a recoger"?(n(),a("div",is,ds)):d("",!0),s(t).currentOrder.order_type!="Pasar a recoger"?(n(),a("div",cs,[e("span",us,r((le=s(t).currentOrder.user_address)==null?void 0:le.toLowerCase()),1)])):d("",!0),_s,e("div",null,[e("span",ps,r((b=s(t).currentOrder.payment_method)==null?void 0:b.toLowerCase()),1)])])])]),c(u,{class:"shadow-4",onClick:o[21]||(o[21]=y=>s(t).setVisible("currentOrder",!1)),icon:"pi pi-times",rounded:"",severity:"danger",style:{position:"absolute",top:"-1rem","border-radius":"50%",right:"-1rem"}})]}),_:1},8,["visible"])):(n(),E(x,{key:1,class:"mx-3",closeOnEscape:"",closable:!1,visible:s(t).visibles.currentOrder,"onUpdate:visible":o[29]||(o[29]=i=>s(t).visibles.currentOrder=i),modal:"",style:{"max-height":"95vh",width:"50rem",position:"relative"}},{footer:p(()=>[e("div",Jo,[s(t).currentOrder.current_status=="generada"?(n(),E(u,{key:0,size:"small",onClick:o[23]||(o[23]=i=>s(N).prepareOrder(s(t).currentOrder.order_id)),style:{"border-radius":"0.3rem",width:"100%"},severity:"success",label:"Preparar"})):d("",!0),s(t).currentOrder.current_status=="en preparacion"?(n(),E(u,{key:1,size:"small",onClick:o[24]||(o[24]=i=>s(N).sendOrder(s(t).currentOrder.order_id)),style:{"border-radius":"0.3rem",width:"100%"},severity:"success",label:"enviar"})):d("",!0),c(u,{size:"small",style:{"border-radius":"0.3rem",width:"100%"},onClick:_e,severity:"warning",label:"imprimir"}),c(u,{size:"small",style:{"border-radius":"0.3rem",width:"100%"},onClick:o[25]||(o[25]=i=>f.value=!0),severity:"danger",label:"CANCELAR "})]),e("div",Qo,[c(u,{style:{width:"100%"},icon:"pi pi-sync",onClick:o[26]||(o[26]=i=>V.value=!0),label:" metodo de pago",severity:"success"}),c(u,{icon:"pi pi-sync",onClick:o[27]||(o[27]=i=>v.value=!0),label:" Domicilio",class:"p-button-warning",style:{width:"100%"}})])]),default:p(()=>{var i,H,q,G,K,Y,Z,J,Q,W,X,ee,te,se,oe,re,le;return[e("div",ys,[e("div",null,[e("p",{class:Oe(`estado ${(H=(i=s(t).currentOrder)==null?void 0:i.current_status)==null?void 0:H.split(" ")[0]}`)},r($(s(t).currentOrder)),3)])]),e("div",hs,[s(t).currentOrder.responsible_id?(n(),E(C,{key:0,style:{},class:"tag mb-2",severity:"success"},{default:p(()=>[vs,m(" TRANSFERENCIA APROBADA")]),_:1})):d("",!0),m(),gs,s(t).currentOrder.responsible_id?(n(),E(C,{key:1,class:"tag",severity:"success"},{default:p(()=>[m(r(s(t).currentOrder.name),1)]),_:1})):d("",!0),e("div",fs,[e("p",Os," ID:"+r(s(t).currentOrder.order_id),1),e("p",ws,r(s(t).currentOrder.user_name)+" "+r(s(t).currentOrder.second_name)+" "+r(s(t).currentOrder.first_last_name)+" "+r(s(t).currentOrder.second_last_name),1),e("p",xs,[e("b",null," fecha: "+r((q=s(t).currentOrder.latest_status_timestamp)==null?void 0:q.split("T")[0]),1),e("b",null," Hora: "+r((Z=(Y=(K=(G=s(t).currentOrder.latest_status_timestamp)==null?void 0:G.split("T")[1])==null?void 0:K.split(":"))==null?void 0:Y.slice(0,2))==null?void 0:Z.join(":")),1)]),ks,(n(!0),a(U,null,de((W=(Q=(J=s(t))==null?void 0:J.currentOrder)==null?void 0:Q.pe_json)==null?void 0:W.listaPedidos,b=>{var y,ne,ie;return n(),a("div",null,[e("div",Cs,[((y=s(t).currentOrder)==null?void 0:y.site_id)==32?(n(),a("p",$s,[e("b",null," ( "+r(b.pedido_cantidad)+" "+r(b.unit_measure)+" ) ",1),Es])):d("",!0),((ne=s(t).currentOrder)==null?void 0:ne.site_id)==32?(n(),a("p",Ss,[m(r(b.pedido_nombre_producto)+" ",1),Ds])):d("",!0),((ie=s(t).currentOrder)==null?void 0:ie.site_id)==32?(n(),a("p",Ps,[m(r(b.presentacion)+" "+r(b.unit_measure)+" ",1),Ts])):(n(),a("p",Vs,[e("b",null," ( "+r(b.pedido_cantidad)+" ) ",1),m(" "+r(b.pedido_nombre_producto)+" ",1),Is])),e("div",null,[b.pedido_base_price?(n(),a("p",Rs,r(s(h)(b.pedido_precio)),1)):(n(),a("p",Ns,r(s(h)(b.pedido_precio)),1))]),e("div",null,[b.pedido_base_price?(n(),a("p",As,r(s(h)(b.pedido_base_price*b.pedido_cantidad)),1)):(n(),a("p",js,r(s(h)(b.pedido_precio)),1))])]),(n(!0),a(U,null,de(b.modificadorseleccionList,k=>(n(),a("div",Ls,[e("p",Us,[m(" - ( "+r(b.pedido_cantidad)+" ) ",1),e("b",null,r(k.modificadorseleccion_cantidad),1),m(" "+r(k.modificadorseleccion_nombre),1)]),e("p",zs,r(s(h)(k.pedido_precio*k.modificadorseleccion_cantidad*b.pedido_cantidad)),1)]))),256)),Ms])}),256)),e("div",Bs,[Fs,e("div",Hs,[e("p",qs,[e("b",null,r(s(h)(s(t).currentOrder.pe_json.delivery.delivery_pagocon-((ee=(X=s(t).currentOrder.pe_json)==null?void 0:X.delivery)==null?void 0:ee.delivery_costoenvio))),1)])]),Gs,e("div",Ks,[e("p",Ys,[e("b",null,r(s(h)((se=(te=s(t).currentOrder.pe_json)==null?void 0:te.delivery)==null?void 0:se.delivery_costoenvio)),1)])]),Zs,e("div",Js,[e("p",Qs,[e("b",null,r(s(h)(s(t).currentOrder.pe_json.delivery.delivery_pagocon)),1)])]),Ws]),Xs,e("p",eo,r((oe=s(t).currentOrder.order_notes)==null?void 0:oe.toLowerCase()),1),to,e("div",so,[oo,e("div",ro,[e("span",lo,r(s(t).currentOrder.user_name)+" "+r(s(t).currentOrder.second_name)+" "+r(s(t).currentOrder.first_last_name)+" "+r(s(t).currentOrder.second_last_name),1)]),s(t).currentOrder.site_id==32?(n(),a("div",no,ao)):d("",!0),s(t).currentOrder.site_id==32?(n(),a("div",co,[e("span",uo,r(s(t).currentOrder.cedula_nit),1)])):d("",!0),_o,e("div",po,[e("span",mo,r(s(t).currentOrder.order_type),1)]),s(t).currentOrder.site_id==32?(n(),a("div",bo,ho)):d("",!0),s(t).currentOrder.site_id==32?(n(),a("div",vo,[e("p",go,r(s(t).currentOrder.pe_json.delivery.delivery_horaentrega),1)])):d("",!0),s(t).currentOrder.placa?(n(),a("div",fo,wo)):d("",!0),s(t).currentOrder.placa?(n(),a("div",xo,[e("p",ko,r(s(t).currentOrder.placa),1)])):d("",!0),Co,e("div",null,[e("span",$o,r(s(t).currentOrder.user_phone),1)]),s(t).currentOrder.site_id==32?(n(),a("div",Eo,Do)):d("",!0),s(t).currentOrder.site_id==32?(n(),a("div",Po,[e("span",To,r(s(t).currentOrder.email),1)])):d("",!0),s(t).currentOrder.order_type!="Pasar a recoger"?(n(),a("div",Vo,Ro)):d("",!0),s(t).currentOrder.order_type!="Pasar a recoger"?(n(),a("div",No,[e("span",Ao,r((re=s(t).currentOrder.user_address)==null?void 0:re.toLowerCase()),1)])):d("",!0),jo,e("div",null,[e("span",Lo,r((le=s(t).currentOrder.payment_method)==null?void 0:le.toLowerCase()),1)]),s(t).currentOrder.epayco_ref?(n(),a("div",Uo,Mo)):d("",!0),s(t).currentOrder.epayco_ref?(n(),a("div",Bo,Ho)):d("",!0),s(t).currentOrder.epayco_ref?(n(),a("div",qo,Ko)):d("",!0),s(t).currentOrder.epayco_ref?(n(),a("div",Yo,[e("span",Zo,r(s(t).currentOrder.epayco_ref),1)])):d("",!0)])])]),c(u,{class:"shadow-4",onClick:o[28]||(o[28]=b=>s(t).setVisible("currentOrder",!1)),icon:"pi pi-times",rounded:"",severity:"danger",style:{position:"absolute",top:"-1rem","border-radius":"50%",right:"-1rem"}})]}),_:1},8,["visible"]))]),c(x,{visible:V.value,"onUpdate:visible":o[31]||(o[31]=i=>V.value=i),closeOnEscape:"",closable:!0,modal:"",style:{width:"30rem"}},{header:p(()=>[Wo]),default:p(()=>[e("form",{onSubmit:ae(be,["prevent"]),style:{display:"flex",gap:"1rem","flex-direction":"column","align-items":"start"}},[Xo,c(C,{class:"px-4",severity:"warning"},{default:p(()=>[e("span",er,[e("b",null,r(s(t).currentOrder.payment_method),1)])]),_:1}),tr,c(w,{style:{width:"100%"},id:"paymentMethod",modelValue:I.value,"onUpdate:modelValue":o[30]||(o[30]=i=>I.value=i),options:M.value,optionLabel:"name",optionValue:"id",placeholder:"Selecciona un método de pago",required:""},null,8,["modelValue","options"]),c(u,{style:{width:"100%","border-radius":"0.5rem"},label:"Cambiar",type:"submit",class:"p-button-help"})],32)]),_:1},8,["visible"])],64)}}},or=we(sr,[["__scopeId","data-v-1a9c103a"]]);const ce=S=>(xe("data-v-c97b9935"),S=S(),ke(),S),rr={class:"p-2 col-12 my-6",style:{height:"auto","min-height":"90vh",padding:".5rem",display:"flex",gap:"rem","justify-content":"center","align-items":"center"}},lr={class:"shadow-7 p-0",style:{"border-radius":"0.5rem","max-width":"500px",display:"flex","flex-direction":"column",gap:"0rem","font-size":"1.3rem"}},nr={class:"text-4xl text-center m-0",style:{"font-weight":"bold","text-align":"center"}},ir=ce(()=>e("p",{class:"text-2xl text-center m-0",style:{"font-weight":"bold","text-align":"center"}},"🔥MUCHAS GRACIAS POR TU COMPRA!🔥",-1)),ar={class:"text-4xl text-center my-0",style:{"font-weight":"bold","text-transform":"uppercase","text-align":"center"}},dr=ce(()=>e("span",{class:"text-2xl"},"ID DEL PEDIDO",-1)),cr=ce(()=>e("br",null,null,-1)),ur=ce(()=>e("p",{class:"text-2xl text-center my-3 p-3",style:{"border-radius":".3rem","background-color":"var(--primary-color)",padding:"1rem",color:"white"}}," Hemos recibido tu pedido y en breve será despachado",-1)),_r=ce(()=>e("div",null,null,-1)),pr={id:"factura",style:{width:"100%","text-transform":"uppercase"}},mr={style:{display:"flex",gap:"1rem",padding:"1rem","min-width":"100%"}},br={style:{width:"100%"}},yr={__name:"gracias",setup(S){const t=g(""),v=Ee(),D=De(),z=Se(),V=Ie(),I=Te(),M=me(()=>{var A,ue,R,_e;const $=((ue=(A=v==null?void 0:v.location)==null?void 0:A.site)==null?void 0:ue.site_id)??((_e=(R=z==null?void 0:z.location)==null?void 0:R.site)==null?void 0:_e.site_id)??null;return`${[33,35,36].includes(Number($))?"https://usa.salchimonster.com":"https://salchimonster.com"}/pagar/${v.last_order}`});async function be(){const $=M.value;try{await navigator.clipboard.writeText($),I.add({severity:"success",summary:"¡Copiado!",detail:"El enlace se copió al portapapeles",life:2500})}catch{const f=document.createElement("input");f.value=$,document.body.appendChild(f),f.select(),document.execCommand("copy"),f.remove(),I.add({severity:"info",summary:"Copiado con método alternativo",detail:"Tu navegador no soporta la API moderna de portapapeles",life:3e3})}}return ve(()=>{V.setLoading(!1,"enviando tu pedido"),t.value=`Hola soy *${D.user.name.toUpperCase()}* 🤗 acabo de hacer el siguiente pedido en la página web. El número de la orden es *#${v.last_order}*.


  *Escribo para Realizar la Transferecia*


  *Muchas Gracias* 🙏`,console.log(t.value)}),me(()=>{const $="https://api.whatsapp.com/send",P=new URLSearchParams({phone:"573053447255",text:t.value});return`${$}?${P.toString()}`}),Ve(()=>{D.user={name:"",neigborhood:"",address:"",phone_number:"",payment_method_option:"",was_reserva:!1},v.cart=[]}),($,P)=>{const f=T("InputText"),A=T("Button");return n(),a("div",rr,[e("div",lr,[e("p",nr," 🤩"+r(s(D).user.name.toUpperCase())+"🤩",1),ir,e("p",ar,[dr,m(),cr,m(" #"+r(s(v).last_order),1)]),ur,_r,e("div",pr,[c(or)]),e("div",mr,[e("div",br,[c(f,{style:{width:"100%"},value:M.value},null,8,["value"])]),c(A,{onClick:be,style:{"min-width":"max-content"},label:"Copiar link ",icon:"pi pi-copy",severity:"help"})])])])}}},wr=we(yr,[["__scopeId","data-v-c97b9935"]]);export{wr as default};
