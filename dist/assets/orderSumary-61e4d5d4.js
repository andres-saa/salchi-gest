import{_ as O,j as L,E as k,k as R,z as N,A as $,H as E,r as A,o as _,c as w,a as r,t as d,u as o,e as l,f as s,U as I,d as n,p as T,F as B,b as F,g as j,n as M,q as U,x as V}from"./index-fe1dadbb.js";/* empty css                                                                    */import{f as g}from"./formatoPesos-2293ab52.js";const b=h=>(U("data-v-79b61d73"),h=h(),V(),h),z={class:"col-12 p-0 md:p-2 m-auto",style:{}},G=b(()=>r("p",{class:"text-xl px-0 mx-0 my-3 pb-0",style:{"font-weight":"bold"}}," RESUMEN DE VENTAS",-1)),q={class:"text-l px-0 my-4 text-900 font-bold",style:{"text-transform":"uppercase"}},H=b(()=>r("template",null,null,-1)),W=b(()=>r("p",{class:"text-xl px-0 mx-0 my-6 pb-0",style:{"font-weight":"bold"}}," REPORTE CALLCENTER",-1)),X=b(()=>r("template",null,null,-1)),J={__name:"orderSumary",setup(h){const f=L(null),D={LILIAN:"var(--red-100)",ALEXANDRA:"var(--yellow-100)"},x=L();function v(y){const p=new Date(y),a={weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0};return new Intl.DateTimeFormat("es-CO",a).format(p)}const t=k(),u=async()=>{t.setLoading(!0,"cargando reporte");const y=t.formatDate(t.dateRange.startDate),p=t.formatDate(t.dateRange.endDate),a=t.selectedSites.map(i=>i.site_id).join(","),m=new URLSearchParams({site_ids:a,start_date:y,end_date:p}),e=`${I}/sales_report_sumary?${m.toString()}`;try{const i=await fetch(e,{method:"GET",headers:{"Content-Type":"application/json"}});if(!i.ok)throw t.setLoading(!1,"cargando reporte"),new Error(`HTTP error! status: ${i.status}`);const c=await i.json();if(t.sumaryData=c,c){const S=Object.keys(c.callcenter_report[0]);S?x.value=S:x.value=[]}t.setLoading(!1,"cargando reporte")}catch(i){console.error("Fetch error:",i),t.setLoading(!1,"cargando reporte")}};R(async()=>{await u()}),N(()=>{C()});const C=()=>{f.value={global:{value:null,matchMode:$.CONTAINS}}};return E(()=>t.dateRange,async()=>{await u()},{deep:!0}),E(()=>t.reportar,async()=>{await u()},{deep:!0}),(y,p)=>{const a=A("Column"),m=A("DataTable");return _(),w("div",z,[G,r("p",q,d(v(o(t).formatDate(o(t).dateRange.startDate)))+" -> "+d(v(o(t).formatDate(o(t).dateRange.endDate))),1),l(m,{style:{"box-shadow":"0 0 1rem #00000030","border-radius":".5rem",overflow:"hidden"},loading:o(t).loading.visible,stripedRows:"",showGridLines:"",value:o(t).sumaryData.total_sales,tableStyle:"min-width: 100%  max-width:500px",rows:11,filters:f.value,responsiveLayout:"scroll",scrollable:""},{default:s(()=>[H,l(a,{field:"order_id",header:"SEDE   ",class:"py-0 px-0",headerStyle:"width:12rem;min-width:3rem"},{body:s(e=>[r("p",{class:n(["text",e.data.site_name=="TOTAL"?"bold":""]),style:{"min-width":"max-content"}},d(e.data.site_name),3)]),_:1}),l(a,{field:"order_id",header:"#_BOT",class:"py-0 px-0",headerStyle:"width:12rem;min-width:3rem;color:var(--green-500)"},{body:s(e=>[r("p",{class:n(["text",e.data.site_name=="TOTAL"?"bold":""]),style:{"min-width":"max-content","background-color":"#22c55e5c"}},d(e.data.orders_chatbot),3)]),_:1}),l(a,{field:"order_id",header:"$_BOT",class:"py-0 px-0",headerStyle:"width:12rem;min-width:3rem;color:var(--green-500)"},{body:s(e=>[r("p",{class:n(["text",e.data.site_name=="TOTAL"?"bold":""]),style:{"min-width":"max-content","background-color":"#22c55e5c"}},d(o(T)(e.data.sales_chatbot)||"$ 0"),3)]),_:1}),l(a,{field:"order_id",header:"#_WEB",class:"py-0 px-0",headerStyle:"width:12rem;min-width:3rem;color:var(--primary-color)"},{body:s(e=>[r("p",{class:n(["text",e.data.site_name=="TOTAL"?"bold":""]),style:{"min-width":"max-content","background-color":"#ff620061"}},d(e.data.orders_web),3)]),_:1}),l(a,{field:"order_id",header:"$_WEB",class:"py-0 px-0",headerStyle:"width:12rem;min-width:3rem;color:var(--primary-color)"},{body:s(e=>[r("p",{class:n(["text",e.data.site_name=="TOTAL"?"bold":""]),style:{"min-width":"max-content","background-color":"#ff620061"}},d(o(g)(e.data.sales_web)||"$ 0"),3)]),_:1}),l(a,{field:"order_id",header:"#_C.CENTER",class:"py-0 px-0",headerStyle:"width:12rem;min-width:3rem"},{body:s(e=>[r("p",{class:n(["text",e.data.site_name=="TOTAL"?"bold":""]),style:{"min-width":"max-content","background-color":"var(--blue-100)"}},d(e.data.orders_callcenter),3)]),_:1}),l(a,{field:"order_id",header:"$_C.CENTER",class:"py-0 px-0",headerStyle:"width:12rem;min-width:3rem"},{body:s(e=>[r("p",{class:n(["text",e.data.site_name=="TOTAL"?"bold":""]),style:{"min-width":"max-content","background-color":"var(--blue-100)"}},d(o(g)(e.data.sales_callcenter)),3)]),_:1}),l(a,{field:"order_id",header:"#_TOTAL_ENV",class:"py-0 px-0",headerStyle:"width:3rem;min-width:3rem; min-width:max-content"},{body:s(e=>[r("p",{class:n(["text",e.data.site_name=="TOTAL"?"bold":""]),style:{"min-width":"max-content","background-color":"#ffff0042"}},d(e.data.total_orders_sent),3)]),_:1}),l(a,{field:"order_id",header:"$_TOTAL_ENV",class:"py-0 px-0",headerStyle:"width:3rem;min-width:2rem"},{body:s(e=>[r("p",{class:n(["text",e.data.site_name=="TOTAL"?"bold":""]),style:{"min-width":"max-content","background-color":"#ffff0042"}},d(o(T)(e.data.total_sales_sent)||"$ 0"),3)]),_:1}),l(a,{field:"order_id",header:"CANC",class:"py-0 px-0",headerStyle:"width:3rem;min-width:3rem"},{body:s(e=>[r("p",{class:n(["text",e.data.site_name=="TOTAL"?"bold":""]),style:{"min-width":"max-content","background-color":"var(--red-100)"}},d(e.data.total_orders_cancelled||0),3)]),_:1}),l(a,{field:"order_id",header:"$_CANC",class:"py-0 px-0",headerStyle:"width:12rem;min-width:3rem"},{body:s(e=>[r("p",{class:n(["text",e.data.site_name=="TOTAL"?"bold":""]),style:{"min-width":"max-content","background-color":"var(--red-100)"}},d(o(T)(e.data.total_sales_cancelled)||"$ 0.0"),3)]),_:1})]),_:1},8,["loading","value","filters"]),W,l(m,{style:{"box-shadow":"0 0 1rem #00000030","border-radius":".5rem",overflow:"hidden"},loading:o(t).loading.visible,stripedRows:"",showGridLines:"",value:o(t).sumaryData.callcenter_report,tableStyle:"min-width: 100%  max-width:500px",rows:11,filters:f.value,responsiveLayout:"scroll",scrollable:""},{default:s(()=>[X,(_(!0),w(B,null,F(x.value,e=>{var i;return _(),j(a,{style:M([`background-color:${D[e==null?void 0:e.split(" ").slice(0,1)]}`,{"text-transform":"uppercase"}]),header:(e==null?void 0:e.split(" ").slice(0,1).join(" "))+" "+((i=e==null?void 0:e.split(" "))==null?void 0:i.reverse()[0]),field:"order_id",class:"py-0 px-0",headerStyle:"width:12rem;min-width:3rem"},{body:s(c=>[e!=null&&e.includes("Dinero")?(_(),w("p",{key:1,class:n(["text",c.data["SEDE "]=="TOTAL"?"bold":""]),style:{"min-width":"max-content"}},d(o(g)(c.data[e])),3)):(_(),w("p",{key:0,class:n(["text",c.data["SEDE "]=="TOTAL"?"bold":""]),style:{"min-width":"max-content"}},d(c.data[e]),3))]),_:2},1032,["style","header"])}),256))]),_:1},8,["loading","value","filters"])])}}},Z=O(J,[["__scopeId","data-v-79b61d73"]]);export{Z as default};
