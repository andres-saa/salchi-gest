import"./pqrsService-3f8cf583.js";import{_ as Ie,r as i,A as Fe,s as Ce,B as Be,l as Ae,j as Ge,k as O,U as z,C as De,a as f,o as l,c as n,g as u,w as p,b as t,F as B,d as Y,m as _,u as k,f as c,q as m,t as o,v as He,D as Me,n as Qe,e as J,p as Xe,h as Ye,E as Je}from"./index-bc16c4b7.js";import"./editor.esm-ec85fb20.js";/* empty css                                                             */import{F as Ke}from"./FileSaver.min-cc8488c4.js";import We from"./pqrUser-7adb8062.js";import"./_commonjsHelpers-23102255.js";/* empty css                                                                */const r=K=>(Xe("data-v-5929a78c"),K=K(),Ye(),K),Ze={style:{display:"flex","flex-direction":"column"}},et={style:{"min-width":"max-content",margin:"0",padding:"0"},class:"p-text-secondary m-0 p-0"},tt={style:{"min-width":"max-content",margin:"0",padding:"0"},class:"p-text-secondary m-0 p-0"},st={class:"m-0"},lt=r(()=>t("div",null,null,-1)),at={key:0,class:"m-0",style:{"text-transform":"capitalize"}},ot=r(()=>t("b",null,"Responsable:",-1)),nt={key:1,class:"p-0 m-0"},it={key:2,class:"p-0 m-0"},rt={key:3},ut=r(()=>t("b",null,"Notas",-1)),dt=r(()=>t("br",null,null,-1)),ct=r(()=>t("div",{style:{display:"flex",gap:"1rem"}},null,-1)),mt={style:{display:"flex","flex-direction":"column"}},pt=r(()=>t("h6",{class:"mx-0 my-0"},[t("b",null,"TIPO")],-1)),_t={style:{display:"flex","align-items":"center",gap:"1rem"}},yt=r(()=>t("h6",{class:"mx-0 my-0"},[t("b",null,"CANAL")],-1)),ht={class:"m-0 p-0",style:{display:"flex","align-items":"center",gap:"1rem"}},vt=r(()=>t("h6",{class:"mt-3 mb-2"},[t("b",null,"CONTEXTO")],-1)),bt={style:{display:"flex",gap:"1rem"}},ft={style:{display:"flex","flex-direction":"column"}},xt={key:0,class:"mt-3 mb-3"},gt=r(()=>t("b",null,"DATOS DEL CLIENTE",-1)),wt=[gt],kt={style:{display:"flex",gap:"1rem"}},Vt={style:{display:"flex","flex-direction":"column"}},St={key:0},Tt=r(()=>t("b",null,"Nombre: ",-1)),Rt={key:1},Ct=r(()=>t("b",null,"Telefono: ",-1)),Dt={key:2},$t=r(()=>t("b",null,"Direccion: ",-1)),qt={key:3},jt=r(()=>t("b",null,"Orden: ",-1)),Pt=r(()=>t("h6",null,[t("b",null,"HISTORIAL")],-1)),Nt={style:{display:"flex",gap:"1rem"}},Et={style:{display:"flex","flex-direction":"column"}},Ot={style:{display:"flex","flex-direction":"column"}},zt={style:{"min-width":"max-content",margin:"0",padding:"0"},class:"p-text-secondary m-0 p-0"},Lt={style:{"min-width":"max-content",margin:"0",padding:"0"},class:"p-text-secondary m-0 p-0"},Ut={class:"m-0"},It=r(()=>t("div",null,null,-1)),Ft={key:0,class:"m-0",style:{"text-transform":"capitalize"}},Bt=r(()=>t("b",null,"Responsable:",-1)),At={key:1,class:"p-0 m-0"},Gt={key:2,class:"p-0 m-0"},Ht={key:3},Mt=r(()=>t("b",null,"Notas",-1)),Qt=r(()=>t("br",null,null,-1)),Xt=r(()=>t("div",{style:{display:"flex",gap:"1rem"}},null,-1)),Yt=r(()=>t("h6",null,[t("b",null,"Como desea proceder?")],-1)),Jt={key:1},Kt={key:0,style:{display:"flex","justify-content":"space-between",margin:"1rem 0"}},Wt=r(()=>t("h6",{class:"m-0"},"Le dio una cortesia del 100% ?",-1)),Zt={key:1,style:{display:"flex","justify-content":"space-between",margin:"1rem 0"}},es=r(()=>t("h6",{class:"m-0"},"Le dio un bono de descuento?",-1)),ts={key:2},ss=r(()=>t("h6",{class:"m-0 my-3"},"porcentaje del descuento ",-1)),ls={key:3},as=r(()=>t("h6",{class:"m-0 my-3"},"Valor de la orden",-1)),os={key:4},ns=r(()=>t("h6",{class:"m-0 my-3"},"Id de la orden",-1)),is=r(()=>t("h6",{class:"m-0 my-3"},"Detalles",-1)),rs={style:{"background-color":"#ff00002e"},class:"p-3"},us=r(()=>t("b",null,"No preste sus credenciales de Salchigest, cada miembro de la empresa tiene los suyos, muchas gracias",-1)),ds={style:{display:"flex","justify-content":"end","margin-top":"2rem"}},cs={style:{"min-width":"1200px"}},ms={class:"nav_bar shadow-2 p-0 my-0 mx-3",style:{position:"sticky",top:"3rem","max-width":"1200px","background-color":"white","z-index":"99"}},ps={class:"nav_bar--buttons p-0 m-1",style:{}},_s={key:"",class:"",style:{display:"flex","align-items":"center"}},ys={style:{display:"flex","justify-content":"center",width:"100%","max-width":"1200px","align-items":"end",gap:"1rem"},class:"mt-0 px-1"},hs=r(()=>t("h6",null,[t("b",null," Desde")],-1)),vs=r(()=>t("h6",null,[t("b",null,"Hasta")],-1)),bs=r(()=>t("h6",null,[t("b",null,"Sedes")],-1)),fs={style:{display:"flex","align-items":"center",gap:"1rem"}},xs=r(()=>t("h6",{class:"m-0"},[t("b",null,"MODOS")],-1)),gs={style:{"text-align":"right",margin:"1rem"}},ws=r(()=>t("div",{class:"px-0 mt-2",style:{display:"flex",width:"100%","align-items":"center","justify-content":"end",gap:"1rem","max-width":"1200px"}},null,-1)),ks={class:"scroll-container",style:{}},Vs={style:{display:"flex","max-width":"1200px",overflow:"hidden","align-items":"start"}},Ss={class:"grid p-3",style:{"align-items":"center","justify-content":"space-between",display:"flex",gap:"1rem"}},Ts={class:"px-2"},Rs=r(()=>t("i",{class:"fa-regular fa-bars-progress"},null,-1)),Cs={style:{"text-transform":"uppercase"}},Ds={style:{display:"flex",gap:"1rem"}},$s={key:0,style:{"min-width":"max-content"},class:"m-0 p-0"},qs={key:1,style:{"min-width":"max-content"},class:"m-0 p-0"},js={key:3,style:{"text-align":"justify","min-width":"max-content"},class:"m-0 p-0"},Ps={key:4,style:{"text-align":"justify"},class:"m-0 p-0"},Ns={key:5,class:"m-0 p-0"},Es={key:1},Os={key:7,class:"p-2",style:{display:"flex",gap:".1rem","flex-direction":"column","align-items":"center"}},zs={key:8,class:"p-2",style:{display:"flex",gap:".1rem","flex-direction":"column","align-items":"center"}},Ls={key:9,class:"p-2",style:{display:"flex",gap:".1rem","flex-direction":"column","align-items":"center"}},Us={key:10,class:"p-2",style:{display:"flex",gap:".1rem","flex-direction":"column","align-items":"start"}},Is={style:{display:"flex",gap:".4rem","justify-content":"center"},class:"px-2"},Fs={style:{"max-width":"1010px"},class:"m-auto my-6"},Bs={class:"m-0 px-0"},As=r(()=>t("i",{class:"pi pi-arrow-right"},null,-1)),Gs={style:{"max-width":"1010px"},class:"mx-auto my-6"},Hs={class:"m-0 px-0"},Ms=r(()=>t("i",{class:"pi pi-arrow-right"},null,-1)),Qs={style:{"max-width":"1010px"},class:"mx-auto my-3"},Xs={class:"m-0 px-0"},Ys=r(()=>t("i",{class:"pi pi-arrow-right"},null,-1)),Js=r(()=>t("div",null,null,-1)),Ks={style:{display:"flex",gap:"1rem","align-items":"center"},class:"my-4"},Ws=r(()=>t("h6",{class:"m-0"},[t("b",null,"Tipo de grafica")],-1)),Zs=r(()=>t("div",null,null,-1)),el={__name:"pqrsSection",setup(K){const $e=()=>{if(!Q.value||Q.value.length===0)return alert("No hay PQRs disponibles para descargar."),null;const d=h=>{const y=new Date(h),g=y.getFullYear(),w=String(y.getMonth()+1).padStart(2,"0"),T=String(y.getDate()).padStart(2,"0");return`${g}-${w}-${T}`},s=d(A.value),b=d(M.value),S=Q.value.filter(h=>{var I;if(!((I=h.current_status)!=null&&I.timestamp))return!1;const[y,g,w]=h.current_status.timestamp.split(" ")[0].split("-"),T=`${w}-${g}-${y}`;return T>=s&&T<=b});if(S.length===0)return alert("No hay PQRs en el rango de fechas seleccionado."),null;const D=S.filter(h=>h.tag_name&&h.tag_name.toUpperCase()!=="CORTESÍAS").reduce((h,y)=>{const g=y.site_name||"Sin Sede";return h[g]||(h[g]=[]),h[g].push(y),h},{});return{hojas:Object.keys(D).map(h=>({hoja:h,title:`Reporte de PQRs - Sede: ${h}`,column_widths:{ID:15,Clasificacion:30,Descripción:60,Fecha:15,Hora:10,Estado:45,"Observación del estado":50,Responsable:50},data:D[h].sort((y,g)=>{const w=y.tag_name||"",T=g.tag_name||"";return w.localeCompare(T)}).map(y=>{var T,I,le,ae,F;let g="--------",w="--------";if((T=y.current_status)!=null&&T.timestamp){const P=y.current_status.timestamp.split(" ");P.length>=2?(g=P[0],w=P.slice(1).join(" ")):g=y.current_status.timestamp}return{ID:y.pqr_request_id,Clasificacion:y.tag_name||"Sin Clasificación",Descripción:y.request_content,Fecha:g,Hora:w,Estado:((I=y.current_status)==null?void 0:I.status)||"N/A","Observación del estado":((le=y.current_status)==null?void 0:le.notes)||"--------",Responsable:((F=(ae=y.current_status)==null?void 0:ae.responsible_name)==null?void 0:F.toUpperCase())||"--------"}})}))}},qe=async()=>{try{const d=$e();if(!d)return;const s=await Je.post("https://excel-creator.salchimonster.com/crear-excel",d,{responseType:"blob"}),b=new Blob([s.data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});Ke.saveAs(b,"Reporte_PQRs.xlsx")}catch(d){console.error("Error al descargar el Excel:",d),alert("Ocurrió un error al intentar descargar el archivo Excel.")}},je=[{name:"Lineas",value:"line"},{name:"Barras",value:"bar"}],ne=i([]),ie=i([]),re=i({name:"Barras",value:"bar"}),Pe=Fe(),de=i([]);function $(d){const s=new Date(d);if(isNaN(s))throw new Error("Fecha inválida");const b=s.getFullYear(),S=String(s.getMonth()+1).padStart(2,"0"),j=String(s.getDate()).padStart(2,"0");return`${b}-${S}-${j}`}const W=i(""),C=i(),q=i(),A=i(),M=i(),Ne=async(d,s)=>{if(!d||!s){alert("Por favor, proporciona tanto la fecha de inicio como la fecha de fin.");return}await ke(d,s),q.value=d,C.value=s};Ce(()=>{C.value=new Date;const d=new Date;d.setDate(d.getDate()-15),q.value=d,A.value=q.value,M.value=C.value});const ce=i([]),me=i([]),pe=i([]),_e=i([]),ye=i([]),he=i([]),ve=i([{name:"Basico",x:0},{name:"Reportes Generales",x:-100},{name:"Reportes Graficados",x:-200}]),Z=i(),be=Be(),fe=i([]),ue=i({id:2,name:"Generada",description:"Estado inicial de la pqr",exist:!0,color:"#3498DB"}),V=Ae(),xe=i([]),x=i(),Ee=async d=>{ee.value=!0,v.value=d},ge=i([]),v=i([]),we=i(!1),ee=i(!1),L=i(null),Oe=()=>{L.value={global:{value:null,matchMode:He.CONTAINS}}};Ce(()=>{Oe()});const ze=i([{columnName:"Id",columnValue:"pqr_request_id",columnType:"other",size:"1rem",vif:!0},{columnName:"Estado",columnValue:"current_status",columnType:"status",size:"15rem",vif:!0},{columnName:"Tipo",columnValue:"request_type",columnType:"other",size:"15rem",vif:!0},{columnName:"Clasificacion",columnValue:"tag_name",columnType:"tag",size:"1rem",vif:!0},{columnName:"Restaurante",columnValue:"restaurant",columnType:"restaurant",size:"1rem",vif:!0},{columnName:"Id orden",columnValue:"order_id",columnType:"order_id",size:"1rem",vif:!0},{columnName:"Canal",columnValue:"channel",columnType:"tag",size:"4rem",vif:!0},{columnName:"Sede",columnValue:"site_name",columnType:"other",size:"4rem",vif:!0},{columnName:"Red",columnValue:"red",columnType:"other",size:"4rem",vif:!0},{columnName:"Calificacion",columnValue:"rating",columnType:"rating",size:"10rem",vif:!0},{columnName:"Comentarios",columnValue:"request_content",columnType:"other",size:"40rem",vif:!0},{columnName:"Responsable",columnValue:"responsible_name",columnType:"responsible_name",size:"20rem",vif:!1}]);i({2:"#3498DB",4:"#2ECC71",5:"#16A085",6:"#E74C3C",7:"#F39C12"}),i({question:"",answer:""}),i({}),i({}),i(null);const Q=i([{}]);i({}),i(!1),i({});const X=i(!1),U=i(),G=i(!1),te=async()=>{Q.value=await O.get(`${z}/get-all-pqrs`);const d=await O.get(`${z}/get-all-pqrs-status`);xe.value=d,fe.value=d},ke=async(d,s)=>{if(!d||!C)return;const b=$(d),S=$(s),j=await O.get(`${z}/get-pqrs-by-date-range/${b}/${S}`),D=await O.get(`${z}/get-pqrs-by-date-range-types/${b}/${S}`),H=await O.get(`${z}/get_pqrs_by_responsible_and_state/${b}/${S}`);ce.value=j,me.value=Object.keys(j[0]),pe.value=D,_e.value=Object.keys(D[0]),ye.value=H,he.value=Object.keys(H[0]),de.value=await O.post(`${z}/get_daily_pqrs_report/${b}/${S}`,{ids:ie.value.map(h=>h.site_id)})};Ge(async()=>{await te(),ne.value=await O.get(`${z}/sites`),ne.value.filter(d=>d.show_on_web),await ke(q.value,C.value)}),De(x,()=>{Ve(q.value,C.value)});const Ve=()=>{U.value=null,W.value="",Z.value=null,X.value=!1,G.value=!1},se=i(),Le=async()=>{const d=se.value&&U.value?(U.value-U.value*(se.value/100)).toFixed(2):U.value,s={pqr_request_id:v.value.pqr_request_id,status_id:x.value,responsible_id:V.rawUserData.id,value:d||null,notes:W.value,order_id:Z.value||null};try{await O.post(`${z}/change-pqr-status`,s),te(),ee.value=!1,Ve()}catch(b){console.error("Error al enviar la actualización de la PQR:",b)}};return De(()=>be.params.section_id,()=>{te()},{deep:!0}),(d,s)=>{const b=f("Tag"),S=f("Timeline"),j=f("Dialog"),D=f("Dropdown"),H=f("Checkbox"),h=f("InputNumber"),y=f("InputText"),g=f("Textarea"),w=f("Button"),T=f("Calendar"),I=f("MultiSelect"),le=f("Rating"),ae=f("column"),F=f("Column"),P=f("DataTable"),Ue=f("Chart");return l(),n(B,null,[u(j,{class:"mx-2",visible:we.value,"onUpdate:visible":s[0]||(s[0]=e=>we.value=e),modal:"",header:`Historial de la pqr  ID   ${ge.value.pqr_request_id}`,style:{width:"40rem"}},{default:p(()=>[u(S,{value:ge.value.status_history},{opposite:p(e=>{var a,R,N,E;return[t("div",Ze,[t("p",et,o((a=e.item.timestamp)==null?void 0:a.split(" ")[0]),1),t("p",tt,o((E=(N=(R=e.item.timestamp)==null?void 0:R.split(" "))==null?void 0:N.slice(1,4))==null?void 0:E.join(" ")),1)])]}),content:p(e=>{var a;return[u(b,{style:_(`background-color:${e.item.color}`)},{default:p(()=>[t("p",st,[t("b",null,o(e.item.status),1)])]),_:2},1032,["style"]),lt,e.item.responsible_name?(l(),n("p",at,[ot,m(" "+o((a=e.item.responsible_name)==null?void 0:a.toLowerCase()),1)])):c("",!0),e.item.value?(l(),n("p",nt,[m("Le costo a la empresa "),t("b",null,o(e.item),1)])):c("",!0),e.item.order_id?(l(),n("p",it,[m("Orden entregada "),t("b",null,o(e.item.order_id),1)])):c("",!0),e.item.notes?(l(),n("p",rt,[ut,m(" "+o(e.item.notes),1)])):c("",!0),dt,ct]}),_:1},8,["value"])]),_:1},8,["visible","header"]),u(j,{class:"mx-2",visible:ee.value,"onUpdate:visible":s[8]||(s[8]=e=>ee.value=e),modal:"",header:`GESTION DE LA PQR  ID:    ${v.value.pqr_request_id}`,style:{width:"50rem"}},{footer:p(()=>[t("div",ds,[u(w,{onClick:Le,label:"Enviar",severity:"help"})])]),default:p(()=>[t("div",mt,[pt,t("p",_t,o(v.value.request_type),1),yt,t("p",ht,o(v.value.channel),1),vt,t("div",bt,[t("div",{style:_([{width:"100%","max-width":".4rem","border-radius":"45rem","box-sizing":"border-box"},`background-color:${v.value.channel_color}`])},null,4),t("div",ft,[t("p",null,o(v.value.request_content),1)])]),v.value.user_name||v.value.user_phone?(l(),n("h6",xt,wt)):c("",!0),t("div",kt,[t("div",{style:_([{width:"100%","max-width":".4rem","border-radius":"45rem","box-sizing":"border-box"},`background-color:${v.value.channel_color}`])},null,4),t("div",Vt,[v.value.user_name?(l(),n("span",St,[Tt,m(" "+o(v.value.user_name),1)])):c("",!0),v.value.user_phone?(l(),n("span",Rt,[Ct,m(" "+o(v.value.user_phone),1)])):c("",!0),v.value.user_address?(l(),n("span",Dt,[$t,m(" "+o(v.value.user_address),1)])):c("",!0),v.value.order_id?(l(),n("span",qt,[jt,m(" "+o(v.value.order_id),1)])):c("",!0)])]),Pt,t("div",Nt,[t("div",{style:_([{width:"100%","max-width":".4rem","border-radius":"45rem","box-sizing":"border-box"},`background-color:${v.value.status_history[0].color}`])},null,4),t("div",Et,[u(S,{value:v.value.status_history},{opposite:p(e=>{var a,R,N,E;return[t("div",Ot,[t("p",zt,o((a=e.item.timestamp)==null?void 0:a.split(" ")[0]),1),t("p",Lt,o((E=(N=(R=e.item.timestamp)==null?void 0:R.split(" "))==null?void 0:N.slice(1,4))==null?void 0:E.join(" ")),1)])]}),content:p(e=>{var a;return[u(b,{style:_(`background-color:${e.item.color}`)},{default:p(()=>[t("p",Ut,[t("b",null,o(e.item.status),1)])]),_:2},1032,["style"]),It,e.item.responsible_name?(l(),n("p",Ft,[Bt,m(" "+o((a=e.item.responsible_name)==null?void 0:a.toLowerCase()),1)])):c("",!0),e.item.value?(l(),n("p",At,[m("Le costo a la empresa "),t("b",null,o(k(Me)(e.item.value)),1)])):c("",!0),e.item.order_id?(l(),n("p",Gt,[m("Orden entregada "),t("b",null,o(e.item.order_id),1)])):c("",!0),e.item.notes?(l(),n("p",Ht,[Mt,m(" "+o(e.item.notes),1)])):c("",!0),Qt,Xt]}),_:1},8,["value"])])]),Yt,u(D,{modelValue:x.value,"onUpdate:modelValue":s[1]||(s[1]=e=>x.value=e),options:xe.value.filter(e=>e.id!=2),optionLabel:"name",optionValue:"id"},null,8,["modelValue","options"]),x.value?(l(),n("div",Jt,[x.value==4||x.value==7?(l(),n("div",Kt,[Wt,u(H,{binary:"",modelValue:X.value,"onUpdate:modelValue":s[2]||(s[2]=e=>X.value=e)},null,8,["modelValue"])])):c("",!0),x.value==4||x.value==7?(l(),n("div",Zt,[es,u(H,{modelValue:G.value,"onUpdate:modelValue":s[3]||(s[3]=e=>G.value=e),binary:""},null,8,["modelValue"])])):c("",!0),(x.value==4||x.value==7)&&G.value?(l(),n("div",ts,[ss,u(h,{modelValue:se.value,"onUpdate:modelValue":s[4]||(s[4]=e=>se.value=e),style:{width:"100%"}},null,8,["modelValue"])])):c("",!0),(x.value==4||x.value==7)&&X.value||G.value?(l(),n("div",ls,[as,u(h,{modelValue:U.value,"onUpdate:modelValue":s[5]||(s[5]=e=>U.value=e),style:{width:"100%"}},null,8,["modelValue"])])):c("",!0),(x.value==4||x.value==7)&&G.value||X.value?(l(),n("div",os,[ns,u(y,{modelValue:Z.value,"onUpdate:modelValue":s[6]||(s[6]=e=>Z.value=e),style:{width:"100%"}},null,8,["modelValue"])])):c("",!0),t("div",null,[is,u(g,{modelValue:W.value,"onUpdate:modelValue":s[7]||(s[7]=e=>W.value=e),rows:"5",style:{resize:"none",width:"100%"}},null,8,["modelValue"])]),t("h6",rs,[m("Recuerde que esta firmando como "),t("b",null,o(k(V).rawUserData.name),1),m(" y por ende se hace responsable, "),us])])):c("",!0)])]),_:1},8,["visible","header"]),t("div",cs,[t("nav",ms,[t("ul",ps,[(l(!0),n(B,null,Y(fe.value,e=>(l(),n("li",_s,[u(b,{style:_([`background-color:${e.color}`,{height:"1.3rem","aspect-ratio":"1 / 1","border-radius":"50%"}])},null,8,["style"]),m(),u(w,{onClick:()=>{ue.value=e,k(V).currentSection_pqr=ve.value[0]},class:Qe(["nav_bar--buttons-button p-2",e.id==ue.value.id?"nav_bar--buttons-button-selected":""]),label:e.name},null,8,["onClick","class","label"])]))),128))])]),t("div",ys,[t("div",{class:"my-0 px-0",style:_([k(V).currentSection_pqr.x!=0?"opacity:1":"opacity:0",{display:"flex",transition:"all ease .5s","align-items":"end",gap:"1rem"}])},[hs,u(T,{style:{"max-width":"7.5rem"},disabled:k(V).currentSection_pqr.x==0,modelValue:A.value,"onUpdate:modelValue":s[9]||(s[9]=e=>A.value=e),dateFormat:"dd-mm-yy"},null,8,["disabled","modelValue"]),vs,u(T,{style:{"max-width":"7.5rem"},disabled:!A.value||k(V).currentSection_pqr.x==0,modelValue:M.value,"onUpdate:modelValue":s[10]||(s[10]=e=>M.value=e),dateFormat:"dd-mm-yy"},null,8,["disabled","modelValue"]),k(V).currentSection_pqr.x==-200?(l(),n(B,{key:0},[bs,u(I,{style:{"max-width":"17rem","min-width":"15rem"},options:ne.value.filter(e=>e.show_on_web),optionLabel:"site_name",modelValue:ie.value,"onUpdate:modelValue":s[11]||(s[11]=e=>ie.value=e),placeholder:"SEDES"},null,8,["options","modelValue"])],64)):c("",!0),u(w,{style:{"min-width":"max-content"},disabled:k(V).currentSection_pqr.x==0,onClick:s[12]||(s[12]=e=>Ne(A.value,M.value)),severity:"help",label:"Buscar",icon:"pi pi-search"},null,8,["disabled"])],4),t("div",fs,[xs,t("div",null,[u(D,{style:{width:"10rem"},optionLabel:"name",placeholder:"Avanzado",modelValue:k(V).currentSection_pqr,"onUpdate:modelValue":s[13]||(s[13]=e=>k(V).currentSection_pqr=e),options:ve.value},null,8,["modelValue","options"])]),u(w,{onClick:s[14]||(s[14]=e=>k(Pe).visible_add_pqr=!0),icon:"pi pi-plus",label:"Nueva PQR",severity:"help"}),t("div",gs,[u(w,{onClick:qe,label:"Descargar PQRs como Excel",icon:"pi pi-file-excel",severity:"success",class:"p-button-sm"})])])]),ws,t("div",ks,[t("div",Vs,[u(P,{style:_([`transform:translateX(${k(V).currentSection_pqr.x}%);transition: .5s all ease;`,{width:"100%"}]),paginator:!0,rows:15,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",currentPageReportTemplate:"Mostrando {first} a {last} de {totalRecords} solicitudes",rowsPerPageOptions:[5,10,25,100],scrollable:"",showGridlines:"",scrollHeight:"65vh",stripedRows:"",class:"col-12 m-auto p-2",value:Q.value.filter(e=>{var a,R;return((a=e.current_status)==null?void 0:a.status)==((R=ue.value)==null?void 0:R.name)}),tableStyle:"min-width: 50rem;",filters:L.value},{header:p(()=>[t("div",Ss,[t("h4",Ts,[Rs,m(),t("b",Cs,[m("PQRS "),t("b",null,o(k(be).params.section),1)])]),t("div",Ds,[u(y,{class:"",modelValue:L.value.global.value,"onUpdate:modelValue":s[15]||(s[15]=e=>L.value.global.value=e),placeholder:"Buscar Solicitud..."},null,8,["modelValue"])])])]),default:p(()=>[(l(!0),n(B,null,Y(ze.value,e=>(l(),J(ae,{header:e.columnName,style:_(`min-width:${e.size}`),field:e.columnValue,class:"my-0 py-2"},{body:p(a=>{var R,N,E,Se,Te,Re;return[e.columnType=="date"?(l(),n("h6",$s,o(((R=a.data[e.columnValue])==null?void 0:R.split("-").reverse().join("-"))||"---------"),1)):c("",!0),e.columnType=="responsible_name"?(l(),n("h6",qs,o(((Se=(E=(N=a.data)==null?void 0:N.status_history)==null?void 0:E[0])==null?void 0:Se.responsible_name)||"No se ha interactuado"),1)):c("",!0),e.columnType=="max-content"?(l(),n("h6",{key:2,style:_(e.columnType=="max-content"?"min-width: max-content":""),class:"m-0 p-0"},o(a.data[e.columnValue]||"---------"),5)):c("",!0),e.columnType=="order_id"?(l(),n("h6",js,o(a.data[e.columnValue]||"---------"),1)):c("",!0),e.columnType=="other"?(l(),n("h6",Ps,o(a.data[e.columnValue]||"---------"),1)):c("",!0),e.columnType=="rating"?(l(),n("h6",Ns,[a.data[e.columnValue]>0?(l(),J(le,{key:0,cancel:!1,readonly:"",modelValue:a.data[e.columnValue],"onUpdate:modelValue":oe=>a.data[e.columnValue]=oe},null,8,["modelValue","onUpdate:modelValue"])):(l(),n("span",Es," ------------"))])):c("",!0),e.columnType=="money"?(l(),n("h6",{key:6,style:_(e.columnType=="max-content"?"min-width: max-content":""),class:"m-0 p-0"},o(d.formatoPesosColombianos(a.data[e.columnValue])||"---------"),5)):c("",!0),e.columnValue=="current_status"?(l(),n("div",Os,[u(b,{style:_([{color:"white","text-align":"center"},`background-color:${(Te=a.data[e.columnValue])==null?void 0:Te.color}`])},{default:p(()=>{var oe;return[m(o(((oe=a.data[e.columnValue])==null?void 0:oe.status)||"---------"),1)]}),_:2},1032,["style"]),t("b",null,o(((Re=a.data[e.columnValue])==null?void 0:Re.timestamp)||"---------"),1)])):c("",!0),e.columnValue=="channel"?(l(),n("div",zs,[u(b,{style:_([{color:"white","text-align":"center"},`background-color:${a.data.channel_color}`])},{default:p(()=>[m(o(a.data[e.columnValue]||"---------"),1)]),_:2},1032,["style"])])):c("",!0),e.columnValue=="tag_name"?(l(),n("div",Ls,[u(b,{style:_([{color:"white","text-align":"center"},`background-color:${a.data.tag_color}`])},{default:p(()=>[m(o(a.data[e.columnValue]),1)]),_:2},1032,["style"])])):c("",!0),e.columnValue=="restaurant"?(l(),n("div",Us,[u(b,{style:_([{color:"white"},`background-color:${a.data.restaurant_color}`])},{default:p(()=>[m(o(a.data[e.columnValue]),1)]),_:2},1032,["style"])])):c("",!0)]}),_:2},1032,["header","style","field"]))),256)),u(F,{class:"my-0 py-0 px-0 mx-0",style:{},frozen:"",alignFrozen:"right",header:"Interactuar"},{body:p(e=>[t("div",Is,[u(w,{onClick:a=>Ee(e.data),label:"Gestionar",severity:"help",icon:"pi pi-check p-0",class:"my-0 py-2"},null,8,["onClick"])])]),_:1})]),_:1},8,["style","value","filters"]),t("div",{style:_([`transform:translateX(${k(V).currentSection_pqr.x}%);transition: .5s all ease;`,{"min-width":"100%","max-height":"80vh",overflow:"auto",margin:"auto"}])},[t("div",Fs,[t("h4",Bs,[t("b",null,[m(" REPORTE POR ESTADO "+o($(q.value).split("-").reverse().join("-"))+" ",1),As,m(" "+o($(C.value).split("-").reverse().join("-")),1)])]),u(P,{rows:15,style:{"max-width":"1200px","box-shadow":"0 0 1rem #00000030","border-radius":".5rem"},scrollable:"",showGridlines:"",scrollHeight:"65vh",stripedRows:"",class:"col-12 m-auto my-4",value:ce.value,tableStyle:"min-width: 50rem;",filters:L.value},{header:p(()=>[]),default:p(()=>[(l(!0),n(B,null,Y(me.value,e=>(l(),J(F,{class:"p-0 text-center",style:{"max-width":"min-content","text-transform":"uppercase"},header:e},{body:p(a=>[t("div",null,[a.data.sede=="total"?(l(),n("h6",{key:0,class:"m-0 py-1 px-2 text-xl",style:_([{display:"flex","background-color":"var(--blue-100)"},e!="sede"?"justify-content: center;":"justify-content: start;"])},[t("b",null,o(a.data[e]),1)],4)):(l(),n("h6",{key:1,class:"m-0 py-1 px-2",style:_([{display:"flex","justify-content":"center"},e!="sede"?"justify-content: center;":"justify-content: start;"])},o(a.data[e]),5))])]),_:2},1032,["header"]))),256))]),_:1},8,["value","filters"])]),t("div",Gs,[t("h4",Hs,[t("b",null,[m(" REPORTE POR RESPONSABLES "+o($(q.value).split("-").reverse().join("-"))+" ",1),Ms,m(" "+o($(C.value).split("-").reverse().join("-")),1)])]),u(P,{rows:15,style:{"max-width":"1200px","box-shadow":"0 0 1rem #00000030","border-radius":".5rem"},scrollable:"",showGridlines:"",scrollHeight:"65vh",stripedRows:"",class:"col-12 m-auto my-4",value:ye.value,tableStyle:"min-width: 50rem;",filters:L.value},{header:p(()=>[]),default:p(()=>[(l(!0),n(B,null,Y(he.value,e=>(l(),J(F,{class:"p-0 text-center",style:{"max-width":"min-content","text-transform":"uppercase"},header:e},{body:p(a=>[t("div",null,[a.data.responsible_name=="total"?(l(),n("h6",{key:0,class:"m-0 py-1 px-2 text-xl",style:_([{display:"flex","text-align":"center","background-color":"var(--blue-100)"},e!="responsible_name"?"justify-content: center;":"justify-content: start;"])},[t("b",null,o(a.data[e]),1)],4)):a.data.responsible_name=="pendiente"?(l(),n("h6",{key:1,class:"m-0 py-1 px-2",style:_([{display:"flex","text-align":"center",color:"var(--red-900)","background-color":"var(--red-100)"},e!="responsible_name"?"justify-content: center;":"justify-content: start;"])},[t("b",null,o(a.data[e]),1)],4)):(l(),n("h6",{key:2,class:"m-0 py-1 px-2",style:_([{display:"flex","text-align":"start"},e!="responsible_name"?"justify-content: center;":"justify-content: start;"])},o(a.data[e]),5))])]),_:2},1032,["header"]))),256))]),_:1},8,["value","filters"])]),t("div",Qs,[t("h4",Xs,[t("b",null,[m(" REPORTE POR TIPOS "+o($(q.value).split("-").reverse().join("-"))+" ",1),Ys,m(" "+o($(C.value).split("-").reverse().join("-")),1)])]),u(P,{rows:15,style:{"max-width":"1200px","box-shadow":"0 0 1rem #00000030","border-radius":".2rem","background-color":"white"},scrollable:"",showGridlines:"",scrollHeight:"65vh",stripedRows:"",class:"col-12 m-auto my-4",value:pe.value,tableStyle:"min-width: 50rem;",filters:L.value},{header:p(()=>[]),default:p(()=>[(l(!0),n(B,null,Y(_e.value,e=>(l(),J(F,{class:"p-0 text-center",style:{"max-width":"min-content","text-transform":"uppercase"},header:e},{body:p(a=>[t("div",null,[a.data.sede=="TOTAL"?(l(),n("h6",{key:0,class:"m-0 py-1 px-2 text-xl",style:_([{display:"flex","background-color":"var(--blue-100)"},e!="sede"?"justify-content: center;":"justify-content: start;"])},[t("b",null,o(a.data[e]),1)],4)):(l(),n("h6",{key:1,class:"m-0 py-1 px-2",style:_([e!="sede"?"justify-content: center;":"justify-content: start;",{display:"flex"}])},o(a.data[e]),5))])]),_:2},1032,["header"]))),256))]),_:1},8,["value","filters"])]),Js],4),t("div",{class:"p-3",style:_([`transform:translateX(${k(V).currentSection_pqr.x}%);transition: .5s all ease;`,{"min-width":"100%","max-height":"80vh",overflow:"auto",margin:"auto"}])},[t("div",Ks,[Ws,u(D,{modelValue:re.value,"onUpdate:modelValue":s[16]||(s[16]=e=>re.value=e),options:je,optionLabel:"name"},null,8,["modelValue"])]),u(Ue,{type:re.value.value,data:de.value,class:"h-[10rem] p-2 h-50",style:{width:"100%","box-shadow":"0 0 10px rgba(0, 0, 0, .2)","border-radius":".5rem"}},null,8,["type","data"]),Zs],4)])]),u(We,{onReload:s[17]||(s[17]=e=>te())})])],64)}}},ul=Ie(el,[["__scopeId","data-v-5929a78c"]]);export{ul as default};
