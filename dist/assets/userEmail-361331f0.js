import{J as I,j as h,k as U,m as N,U as b,r as M,o as x,c as C,a as i,e as a,u as o,a6 as r,f as s,a2 as u,h as S,t as L,a7 as T,a4 as k,A as n,q as E,x as P,_ as R}from"./index-3b25a85f.js";const V=p=>(E("data-v-c4eb07d6"),p=p(),P(),p),$={class:"container"},O=V(()=>i("h3",null,[i("strong",null,"Códigos generados y redimidos para recolección de emails")],-1)),F={class:"table-container"},A={class:"toolbar"},B={class:"p-input-icon-left"},D=V(()=>i("i",{class:"pi pi-search"},null,-1)),j=I({__name:"userEmail",setup(p){const g=h([]),_=h(!1),f=h(!1);async function w(){f.value=!0;try{const c=await fetch(`${b}/get-users-code`,{method:"GET"});if(!c.ok)throw new Error("Error al descargar el archivo.");const d=await c.blob(),v=window.URL.createObjectURL(d),e=document.createElement("a");e.href=v,e.download="users-codes.xlsx",e.click(),window.URL.revokeObjectURL(v)}catch(c){console.error(c)}finally{f.value=!1}}const y=[{label:"Todos",value:null},{label:"Sí",value:!0},{label:"No",value:!1}],m=h({global:{value:null,matchMode:n.CONTAINS},code:{value:null,matchMode:n.CONTAINS},redimido:{value:null,matchMode:n.EQUALS},user_name:{value:null,matchMode:n.CONTAINS},user_phone:{value:null,matchMode:n.CONTAINS},user_address:{value:null,matchMode:n.CONTAINS},email:{value:null,matchMode:n.CONTAINS}});return U(async()=>{_.value=!0;try{g.value=await N.get(`${b}/get-users-code-plain`)}finally{_.value=!1}}),(c,d)=>{const v=M("Button");return x(),C("div",$,[O,i("div",F,[i("div",A,[i("span",B,[D,a(o(r),{modelValue:m.value.global.value,"onUpdate:modelValue":d[0]||(d[0]=e=>m.value.global.value=e),placeholder:"Buscar en todos los campos…",style:{width:"100%","max-width":"350px"},class:"p-inputtext-sm"},null,8,["modelValue"])]),a(v,{label:"Descargar Excel",icon:"pi pi-download",class:"p-button-help p-button-sm ml-3",onClick:w,loading:f.value},null,8,["loading"])]),a(o(k),{filters:m.value,"onUpdate:filters":d[1]||(d[1]=e=>m.value=e),value:g.value,loading:_.value,paginator:"",stripedRows:"",paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport",currentPageReportTemplate:"{first} – {last} de {totalRecords}",rows:20,rowsPerPageOptions:[15,20,30,50,100],responsiveLayout:"scroll",filterDisplay:"row",removableSort:"",sortMode:"multiple",dataKey:"code",showGridlines:"",globalFilterFields:["code","user_name","user_phone","user_address","email"]},{default:s(()=>[a(o(u),{field:"code",header:"Código",sortable:"",filterMatchMode:"contains",class:"py-1"},{filter:s(({filterModel:e,filterCallback:t})=>[a(o(r),{style:{width:"10rem"},modelValue:e.value,"onUpdate:modelValue":l=>e.value=l,onInput:l=>t(),placeholder:"Filtrar",class:"p-column-filter"},null,8,["modelValue","onUpdate:modelValue","onInput"])]),_:1}),a(o(u),{field:"redimido",header:"Redimido",sortable:"",dataType:"boolean",filterMatchMode:"equals",class:"py-1"},{body:s(({data:e})=>[S(L(e.redimido?"Sí":"No"),1)]),filter:s(({filterModel:e,filterCallback:t})=>[a(o(T),{modelValue:e.value,"onUpdate:modelValue":l=>e.value=l,options:y,optionLabel:"label",optionValue:"value",placeholder:"Todos",class:"p-column-filter",onChange:l=>t(),style:{width:"8rem"}},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),a(o(u),{field:"user_name",header:"Nombre",sortable:"",filterMatchMode:"contains",class:"py-1"},{filter:s(({filterModel:e,filterCallback:t})=>[a(o(r),{modelValue:e.value,"onUpdate:modelValue":l=>e.value=l,onInput:l=>t(),placeholder:"Filtrar",class:"p-column-filter"},null,8,["modelValue","onUpdate:modelValue","onInput"])]),_:1}),a(o(u),{field:"user_phone",header:"Teléfono",sortable:"",filterMatchMode:"contains",class:"py-1"},{filter:s(({filterModel:e,filterCallback:t})=>[a(o(r),{modelValue:e.value,"onUpdate:modelValue":l=>e.value=l,onInput:l=>t(),placeholder:"Filtrar",class:"p-column-filter"},null,8,["modelValue","onUpdate:modelValue","onInput"])]),_:1}),a(o(u),{field:"user_address",header:"Dirección",sortable:"",filterMatchMode:"contains",class:"py-1"},{filter:s(({filterModel:e,filterCallback:t})=>[a(o(r),{modelValue:e.value,"onUpdate:modelValue":l=>e.value=l,onInput:l=>t(),placeholder:"Filtrar",class:"p-column-filter"},null,8,["modelValue","onUpdate:modelValue","onInput"])]),_:1}),a(o(u),{field:"email",header:"Email",sortable:"",filterMatchMode:"contains",class:"py-1"},{filter:s(({filterModel:e,filterCallback:t})=>[a(o(r),{modelValue:e.value,"onUpdate:modelValue":l=>e.value=l,onInput:l=>t(),placeholder:"Filtrar",class:"p-column-filter"},null,8,["modelValue","onUpdate:modelValue","onInput"])]),_:1})]),_:1},8,["filters","value","loading"])])])}}});const G=R(j,[["__scopeId","data-v-c4eb07d6"]]);export{G as default};
