import{_ as D,j as _,y as T,k as O,m as N,U as L,r as a,o as d,c as u,a as e,e as l,f as B,t as M,u as I,i as p,q as P,x as R}from"./index-73931183.js";const o=b=>(P("data-v-8232bf59"),b=b(),R(),b),q={class:"container"},z={class:"navbar"},Y={class:"navbar-content"},$={class:"navbar-left"},F=o(()=>e("h5",{class:"title"},[e("strong",null,"Editar Descuento")],-1)),J={key:0,style:{display:"flex",gap:"1rem"}},W=o(()=>e("h6",{class:"m-0",style:{"max-width":"40rem"}},"Estoy actualizando al ultimo menu de restaurant, sino has hecho cambios recientes ignora este mensaje ...",-1)),G={key:1,style:{display:"flex",gap:"1rem"}},H=o(()=>e("i",{class:"pi pi-check text-5xl",style:{color:"green"}},null,-1)),K=o(()=>e("h5",null,"Menu actualizado, Puedes Editar tu descuento a gusto",-1)),Q=[H,K],X={class:"navbar-right"},Z=o(()=>e("h1",{class:"section-title"},[e("b",null,"Descuento")],-1)),ee={style:{display:"flex"}},te={class:"discount card discount-grid"},se=o(()=>e("div",{class:"form-label"},[e("h5",null,[e("b",null,"Nombre")]),e("h5",null,"Asigna un nombre a tu descuento")],-1)),oe=o(()=>e("hr",{class:"grid-divider"},null,-1)),ie=o(()=>e("div",{class:"form-label"},[e("h5",null,[e("b",null,"Tiendas")]),e("h5",null,"¿En qué tiendas se puede aplicar el descuento?")],-1)),le={class:"form-checkbox"},ne={style:{width:"100%","max-width":"100%"}},ae=o(()=>e("hr",{class:"grid-divider"},null,-1)),de=o(()=>e("div",{class:"form-label"},[e("h5",null,[e("b",null,"Tipo de descuento")]),e("h5",null,"Selecciona el tipo de descuento que quieres aplicar")],-1)),ue={class:"card-light-full card",style:{width:"100%"}},ce={style:{"grid-area":"nombre"}},re={class:"form-label"},_e=o(()=>e("h5",null,"¿Cómo le gustaría que se aplicara su descuento? ",-1)),pe={key:0,style:{"grid-area":"articulo",display:"flex",gap:"1rem",width:"100%"}},me={style:{display:"flex","flex-direction":"column",width:"100%"}},he=o(()=>e("h5",null,"Articulo",-1)),ve={style:{"grid-area":"detalles",display:"flex",gap:"1rem"}},ye={key:0,style:{display:"flex","flex-direction":"column",width:"100%"}},fe=o(()=>e("h5",null,"Item",-1)),ge={key:1,style:{display:"flex","flex-direction":"column",width:"100%"}},be=o(()=>e("h5",null,"Obtenga",-1)),xe={style:{"grid-area":"tipo",display:"flex",gap:"1rem"}},Ve={key:0,style:{display:"flex","flex-direction":"column",width:"100%"}},we=o(()=>e("h5",null,"Tipo",-1)),Ee={key:1,style:{display:"flex","flex-direction":"column",width:"100%"}},ke=o(()=>e("h5",null,"Cantidad de descuento",-1)),Ae={key:2,style:{display:"flex","flex-direction":"column",width:"100%"}},Se=o(()=>e("h5",null,"Porcentaje de descuento",-1)),Ce={style:{"grid-area":"minimo",display:"flex",gap:"1rem"}},Ie={key:0,style:{display:"flex","flex-direction":"column",width:"100%"}},Ue=o(()=>e("h5",null,"Pedido minimo",-1)),je={class:"form-checkbox",style:{"grid-area":"limite"}},Ne=o(()=>e("h5",null," Límite de una redención por comensal.",-1)),Le=o(()=>e("div",{class:"form-label"},[e("h5",null,[e("b",null,"Código de descuento")]),e("h5",{class:"m-0"},"Este es el código que tus clientes pueden ingresar para canjear el descuento. ")],-1)),Be={style:{height:"100%",display:"flex","align-items":"end"}},De=o(()=>e("h1",{style:{margin:"4rem 0"}},[e("b",null,"Distribución")],-1)),Te={class:"discount card discount-grid"},Oe=o(()=>e("div",{class:"form-label"},[e("h5",null,[e("b",null,"Comparte el descuento a través de mensaje de texto. ")]),e("h5",null,"Envía un mensaje de texto a tus clientes con el código de descuento ")],-1)),Me={style:{display:"flex","justify-content":"end"}},Pe=o(()=>e("hr",{class:"grid-divider"},null,-1)),Re=o(()=>e("div",{class:"form-label"},[e("h5",null,[e("b",null,"Mostrar en el banner del menú ")]),e("h5",null,"Mantén el descuento siempre visible para tus comensales agregándolo al banner de descuento. ")],-1)),qe={style:{display:"flex","justify-content":"end"}},ze=o(()=>e("hr",{class:"grid-divider"},null,-1)),Ye=o(()=>e("h1",null,[e("b",null,"Ajustes Avanzados")],-1)),$e={class:"discount card",style:{display:"flex",gap:"4rem","align-items":"end"}},Fe={class:"form-label"},Je=o(()=>e("h5",null,[e("b",null,"Duración ")],-1)),We=o(()=>e("h5",null,"Establezca una fecha de inicio y opcionalmente una fecha final para su cupón ",-1)),Ge={style:{display:"flex",gap:"1rem",width:"100%","justify-content":"en"}},He=o(()=>e("h5",{class:"m-0"},"No expira ",-1)),Ke={style:{display:"flex","justify-content":"end",gap:"1rem"}},Qe=o(()=>e("h5",null,[e("b",null,"Inicio ")],-1)),Xe=o(()=>e("h5",null,[e("b",null,"Final ")],-1)),Ze={__name:"discountEdit",setup(b){const A=_([{}]);_([]);const S=_(!0),C=_(!1),U=_({data:{sites:[{site_id:4,site_name:"JAMUNDI"},{site_id:32,site_name:"ACOPI YUMBO"},{site_id:29,site_name:"CITY U"},{site_id:8,site_name:"SUBA"},{site_id:33,site_name:"NEW JERSEY"},{site_id:11,site_name:"LAURELES"},{site_id:9,site_name:"MONTES"},{site_id:10,site_name:"KENNEDY"},{site_id:1,site_name:"BRETAÑA"},{site_id:30,site_name:"USAQUEN"},{site_id:3,site_name:"CANEY"},{site_id:7,site_name:"MODELIA"},{site_id:35,site_name:"FILADELPHIA"},{site_id:2,site_name:"FLORA"}],discount_types:[{id:1,name:"Descuento por pedido"},{id:2,name:"Compra 1, llevate 1 gratis"},{id:3,name:"Descuento por item"}],details_types:[{id:1,name:"Monto fijo"},{id:2,name:"porcentaje"}]}}),x=T(),r={1:["tipo","cantidad_descuento","minimo"],2:["item","obtenga","tipo","cantidad_descuento","minimo"],3:["articulo","tipo","cantidad_descuento","minimo"]},s=_({discount_name:"amor y amistad",code:"amistad-90",type:{id:2,name:"Compra 1, llevate 1 gratis"},detail_type_id:{id:2,name:"porcentaje"},amount:4005,percent:10,sites:[{site_id:1,site_name:"BRETAÑA",pe_site_id:2},{site_id:3,site_name:"CANEY",pe_site_id:7},{site_id:2,site_name:"FLORA",pe_site_id:1}],status:"active",redent:2,sell:2e3,id:1,min_purchase:12,product_id:234,gift_id:234,gift_json:{name:"CLASIC MONSTERCONO + BEBIDA",product_id:"356"},product_json:{name:"CLASIC MONSTERCONO + BEBIDA",product_id:"356"},start_date:"2025-07-24T00:36:06.399091+00:00",end_date:"2025-07-24T00:36:06.399091+00:00"}),V=_({1:{}});O(async()=>{const w=await N.get(`${L}/sites`);A.value=w.filter(t=>t.show_on_web).map(t=>({site_name:t.site_name,site_id:t.site_id,pe_site_id:t.pe_site_id}));for(const t of A.value){if(C.value=!0,V.value[t.pe_site_id])console.log(V.value[t.pe_site_id]);else{const c=await N.get(`${L}/tiendas/${t.pe_site_id}/products`);V.value[t.pe_site_id]=c}C.value=!1}await j()});const j=async()=>{var c;const w=s.value.sites,t=[];for(const E of w){const k=E.pe_site_id,m=V.value[k];if(m.categorias&&Array.isArray(m.categorias))for(const y of m.categorias)y.products&&Array.isArray(y.products)&&t.push(...(c=y.products)==null?void 0:c.map(n=>{var h,f;if((h=n.lista_presentacion)!=null&&h[0].productogeneral_id){if(t.findIndex(v=>{var g;return v.product_id==((g=n.lista_presentacion)==null?void 0:g[0].productogeneral_id)})===-1)return{product_id:(f=n.lista_presentacion)==null?void 0:f[0].productogeneral_id,name:n.productogeneral_descripcion}}else if(t.findIndex(v=>v.product_id==n.productogeneral_id)===-1)return{product_id:n.productogeneral_id,name:n.productogeneral_descripcion}}).filter(Boolean));console.log(`Productos fusionados para el sitio ${k}:`,t)}x.marketing_menu=t};return(w,t)=>{const c=a("Button"),E=a("RouterLink"),k=a("ProgressSpinner"),m=a("InputText"),y=a("MultiSelect"),n=a("Dropdown"),h=a("InputNumber"),f=a("Checkbox"),v=a("InputSwitch"),g=a("Calendar");return d(),u("div",q,[e("nav",z,[e("div",Y,[e("div",$,[l(E,{to:"/marketing/discounts/"},{default:B(()=>[l(c,{icon:"pi pi-times",text:"",class:"btn-close"})]),_:1}),F]),C.value?(d(),u("div",J,[l(k,{style:{width:"40px",height:"40px"},strokeWidth:"8",fill:"transparent",animationDuration:".5s","aria-label":"Custom ProgressSpinner"}),W])):(d(),u("div",G,Q)),e("div",X,[l(E,{to:"/marketing/discounts/"},{default:B(()=>[l(c,{label:"Cancelar",text:"",class:"btn-cancel"})]),_:1}),l(c,{label:"Guardar",severity:"help",class:"btn-save"})])])]),Z,e("div",ee,[e("div",te,[se,l(m,{style:{"text-transform":"uppercase"},placeholder:"Nombre del descuento",modelValue:s.value.discount_name,"onUpdate:modelValue":t[0]||(t[0]=i=>s.value.discount_name=i),class:"input-large"},null,8,["modelValue"]),oe,ie,e("div",le,[e("div",ne,[l(y,{display:"chip",optionLabel:"site_name",onChange:j,modelValue:s.value.sites,"onUpdate:modelValue":t[1]||(t[1]=i=>s.value.sites=i),options:A.value,style:{width:"30rem","max-width":"30rem"}},null,8,["modelValue","options"])])]),ae,de,l(n,{disabled:"",style:{"text-transform":"uppercase"},options:U.value.data.discount_types,modelValue:s.value.type,"onUpdate:modelValue":t[2]||(t[2]=i=>s.value.type=i),optionLabel:"name",class:"input-large"},null,8,["options","modelValue"]),e("div",ue,[e("div",ce,[e("div",re,[e("h5",null,[e("b",null,M(s.value.type.name),1)]),_e])]),r[s.value.type.id].includes("articulo")?(d(),u("div",pe,[e("div",me,[he,l(n,{disabled:"",modelValue:s.value.product_json,"onUpdate:modelValue":t[3]||(t[3]=i=>s.value.product_json=i),options:I(x).marketing_menu,filter:"",filterPlaceholder:"Busca un producto",optionLabel:"name",style:{width:"100%"},placeholder:""},null,8,["modelValue","options"])])])):p("",!0),e("div",ve,[r[s.value.type.id].includes("item")?(d(),u("div",ye,[fe,l(n,{disabled:"",style:{"max-width":"20rem"},modelValue:s.value.product_json,"onUpdate:modelValue":t[4]||(t[4]=i=>s.value.product_json=i),options:I(x).marketing_menu,filter:"",filterPlaceholder:"Busca un producto",optionLabel:"name",placeholder:"",class:"input-large"},null,8,["modelValue","options"])])):p("",!0),r[s.value.type.id].includes("obtenga")?(d(),u("div",ge,[be,l(n,{disabled:"",style:{width:"100%","max-width":"20rem"},optionLabel:"name",modelValue:s.value.gift_json,"onUpdate:modelValue":t[5]||(t[5]=i=>s.value.gift_json=i),options:I(x).marketing_menu,filter:"",filterPlaceholder:"Busca un producto para regalar",placeholder:"",class:"input-large"},null,8,["modelValue","options"])])):p("",!0)]),e("div",xe,[r[s.value.type.id].includes("tipo")?(d(),u("div",Ve,[we,l(n,{style:{"text-transform":"uppercase"},disabled:"",options:U.value.data.details_types,modelValue:s.value.detail_type_id,"onUpdate:modelValue":t[6]||(t[6]=i=>s.value.detail_type_id=i),optionLabel:"name",placeholder:"",class:"input-large"},null,8,["options","modelValue"])])):p("",!0),r[s.value.type.id].includes("cantidad_descuento")&&s.value.detail_type_id.id==1?(d(),u("div",Ee,[ke,l(h,{disabled:"",inputStyle:"background-color: white !important",modelValue:s.value.amount,"onUpdate:modelValue":t[7]||(t[7]=i=>s.value.amount=i),prefix:"$",style:{width:"100%"}},null,8,["modelValue"])])):p("",!0),r[s.value.type.id].includes("cantidad_descuento")&&s.value.detail_type_id.id==2?(d(),u("div",Ae,[Se,l(h,{disabled:"",inputStyle:"background-color: white !important",max:100,min:1,modelValue:s.value.percent,"onUpdate:modelValue":t[8]||(t[8]=i=>s.value.percent=i),suffix:"%",style:{width:"100%","text-transform":"capitalize"}},null,8,["modelValue"])])):p("",!0)]),e("div",Ce,[r[s.value.type.id].includes("minimo")?(d(),u("div",Ie,[Ue,l(h,{disabled:"",modelValue:s.value.min_purchase,"onUpdate:modelValue":t[9]||(t[9]=i=>s.value.min_purchase=i),inputStyle:"background-color: white !important",prefix:"$",style:{width:"100%","text-transform":"capitalize"}},null,8,["modelValue"])])):p("",!0)]),e("div",je,[l(f),Ne])]),Le,e("div",Be,[l(m,{disabled:"",style:{"text-transform":"uppercase"},placeholder:"Nombre del descuento",modelValue:s.value.code,"onUpdate:modelValue":t[10]||(t[10]=i=>s.value.code=i),class:"input-large"},null,8,["modelValue"])])])]),De,e("div",Te,[Oe,e("div",Me,[l(v)]),Pe,Re,e("div",qe,[l(v)]),ze]),Ye,e("div",$e,[e("div",Fe,[Je,We,e("div",Ge,[l(f,{binary:"true",modelValue:S.value,"onUpdate:modelValue":t[11]||(t[11]=i=>S.value=i)},null,8,["modelValue"]),He])]),e("div",Ke,[e("div",null,[Qe,l(g,{"show-time":"","hour-format":"12",modelValue:s.value.start_date,"onUpdate:modelValue":t[12]||(t[12]=i=>s.value.start_date=i)},null,8,["modelValue"])]),e("div",null,[Xe,l(g,{disabled:S.value,"show-time":"","hour-format":"12",modelValue:s.value.end_date,"onUpdate:modelValue":t[13]||(t[13]=i=>s.value.end_date=i)},null,8,["disabled","modelValue"])])])])])}}},tt=D(Ze,[["__scopeId","data-v-8232bf59"]]);export{tt as default};
