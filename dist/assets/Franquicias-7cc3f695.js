import"./pqrUser.vue_vue_type_style_index_0_scoped_508d9820_lang-9e912f5c.js";import{_ as re,L as ue,S as ie,r as a,A as ce,l as me,q as de,i as pe,D as I,a as y,o,c as r,g as m,b as p,F as z,d as R,w as h,s as _e,j as q,U as S,n as ye,m as g,t as d,e as N,f as u,k as f,p as he,h as fe}from"./index-94a9853b.js";import{u as k,a as U}from"./xlsx-4cca7150.js";const B=w=>(he("data-v-3274cedd"),w=w(),fe(),w),ve={class:"nav_bar shadow-2 p-0 my-0 mx-2",style:{position:"sticky",top:"3rem","max-width":"900px","border-radius":"10rem","background-color":"white","z-index":"99"}},ge={class:"nav_bar--buttons p-0 m-1",style:{}},ke={key:"",class:"",style:{display:"flex","align-items":"center"}},be={class:"grid p-3",style:{"align-items":"center","justify-content":"space-between",display:"flex",gap:"1rem"}},xe={class:"px-2"},we=B(()=>p("i",{class:"fa-regular fa-bars-progress"},null,-1)),Ve={style:{"text-transform":"uppercase"}},Te=B(()=>p("b",null,null,-1)),Ce={style:{display:"flex",gap:"1rem"}},Ne={key:0,style:{"min-width":"max-content"},class:"m-0 p-0"},ze={key:1,style:{"min-width":"max-content"},class:"m-0 p-0"},qe={key:3,class:"m-0 p-0"},Se={key:4,class:"m-0 p-0"},De={key:6,class:"p-2",style:{display:"flex",gap:".1rem","flex-direction":"column","align-items":"start"}},Pe={key:7,class:"p-2",style:{display:"flex",gap:".1rem","flex-direction":"column","align-items":"start"}},Fe={key:8,class:"p-2",style:{display:"flex",gap:".1rem","flex-direction":"column","align-items":"start"}},$e={key:9,class:"p-2",style:{display:"flex",gap:".1rem","flex-direction":"column","align-items":"start"}},Ee={style:{display:"flex",gap:".5rem","justify-content":"center","flex-direction":"column"},class:"px-2"},Ie={__name:"Franquicias",setup(w){ue();const D=ie(),L=a(""),M=a(),j=ce(),A=a([{name:"Pendiente"},{name:"Tomada en cuenta"},{name:"Descartada"}]),O=async()=>{const t=T.value.filter(n=>n.status==v.value.name).map(n=>{const _={};return b.value.forEach(l=>{_[l.columnName]=n[l.columnValue]}),_}),i=k.json_to_sheet(t);function x(n){const l=parseFloat(n)*10;return Math.min(l,50)}i["!cols"]=b.value.map(n=>({wch:x(n.size)}));const c=k.book_new();k.book_append_sheet(c,i,"Usuarios"),U(c,`Reporte de franquicias ${v.value.name}.xlsx`)},H=async()=>{const t=T.value.map(n=>{const _={};return b.value.forEach(l=>{_[l.columnName]=n[l.columnValue]}),_}),i=k.json_to_sheet(t);function x(n){const l=parseFloat(n)*10;return Math.min(l,50)}i["!cols"]=b.value.map(n=>({wch:x(n.size)}));const c=k.book_new();k.book_append_sheet(c,i,"Usuarios"),U(c,"Reporte de franquicias todas.xlsx")},W=t=>t,v=a({name:"Pendiente"});me();const G=a([]),Q=a(),X=t=>{D.require({message:"¿Está seguro de que desea tomar en cuenta esta solicitud?",header:"Confirmación",icon:"pi pi-exclamation-triangle",accept:()=>{J(t)},reject:()=>{}})},Z=t=>{D.require({message:"¿Está seguro de que desea descartar esta solicitud?",header:"Confirmación",icon:"pi pi-exclamation-triangle",accept:()=>{K(t)},reject:()=>{}})},J=async t=>{t.status="Tomada en cuenta",await q.put(`${S}/update_franquicia_request/${t.id}`,t)},K=async t=>{t.status="Descartada",await q.put(`${S}/update_franquicia_request/${t.id}`,t)};a([]),a([]),a(!1),a(!1);const V=a(null),Y=()=>{V.value={global:{value:null,matchMode:_e.CONTAINS}}};de(()=>{Y()});const b=a([{columnName:"Id",columnValue:"id",columnType:"other",size:"1rem",vif:!0},{columnName:"Fecha y Hora",columnValue:"formatted_date",columnType:"other",size:"3rem",vif:!0},{columnName:"Nombre",columnValue:"name",columnType:"other",size:"2rem",vif:!0},{columnName:"Telefono",columnValue:"phone",columnType:"other",size:"2rem",vif:!0},{columnName:"Email",columnValue:"email",columnType:"other",size:"3rem",vif:!0},{columnName:"Motivo",columnValue:"reason",columnType:"other",size:"20rem",vif:!0},{columnName:"Capacidad de inversion",columnValue:"investment_capacity",columnType:"other",size:"3rem",vif:!0},{columnName:"Zona de interes",columnValue:"zone_of_interest",columnType:"other",size:"2rem",vif:!0},{columnName:"Ciudad",columnValue:"city",columnType:"other",size:"2rem",vif:!0},{columnName:"Esta en sector gastronomico?",columnValue:"is_in_gastronomic_sector",columnType:"bool",size:"2rem"},{columnName:"Participara en la operacion?",columnValue:"will_participate_in_operation",columnType:"bool",size:"2rem",vif:!0},{columnName:"Fuente de ingresos",columnValue:"source_of_income",columnType:"other",size:"3rem",vif:!0},{columnName:"Estado",columnValue:"status",columnType:"other",size:"3rem",vif:!0}]);a({2:"#3498DB",4:"#2ECC71",5:"#16A085",6:"#E74C3C",7:"#F39C12"}),a({question:"",answer:""}),a({}),a({}),a(null);const T=a([{}]);a({}),a(!1),a({});const ee=a(!1),ae=a(),te=a(!1),P=async()=>{T.value=await q.get(`${S}/get_franquicia_request`),G.value=status};pe(async()=>{P()}),I(Q,()=>{se()});const se=()=>{ae.value=null,L.value="",M.value=null,ee.value=!1,te.value=!1};return a(),I(()=>j.params.section_id,()=>{P()},{deep:!0}),(t,i)=>{const x=y("ConfirmDialog"),c=y("Button"),n=y("InputText"),_=y("Rating"),l=y("Tag"),oe=y("column"),ne=y("Column"),le=y("DataTable");return o(),r(z,null,[m(x),p("nav",ve,[p("ul",ge,[(o(!0),r(z,null,R(A.value,e=>(o(),r("li",ke,[m(c,{onClick:()=>v.value=e,class:ye(["nav_bar--buttons-button p-2",e.name==v.value.name?"nav_bar--buttons-button-selected":""]),label:e.name},null,8,["onClick","class","label"])]))),128))])]),m(le,{paginator:!0,rows:15,style:{width:"100%"},paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",currentPageReportTemplate:"Mostrando {first} a {last} de {totalRecords} solicitudes",rowsPerPageOptions:[5,10,25,100],scrollable:"",showGridlines:"",scrollHeight:"65vh",stripedRows:"",class:"col-12 mX-auto mt-7",value:T.value.filter(e=>e.status==v.value.name),tableStyle:"min-width: 50rem;",filters:V.value},{header:h(()=>[p("div",be,[p("h4",xe,[we,g(),p("b",Ve,[g("SOLICITUDES DE FRANQUICIAS "+d(v.value.name)+" ",1),Te])]),p("div",Ce,[m(n,{class:"",modelValue:V.value.global.value,"onUpdate:modelValue":i[0]||(i[0]=e=>V.value.global.value=e),placeholder:"Buscar Solicitud..."},null,8,["modelValue"]),m(c,{onClick:i[1]||(i[1]=e=>O()),label:"Descargar Registros",severity:"help"}),m(c,{onClick:i[2]||(i[2]=e=>H()),label:"Descargar Todo",severity:"help"})])])]),default:h(()=>[(o(!0),r(z,null,R(W(b.value),e=>(o(),N(oe,{header:e.columnName,style:f(`min-width:${e.size}`),field:e.columnValue,class:"my-0 py-2"},{body:h(s=>{var F,$,E;return[e.columnType=="date"?(o(),r("h6",Ne,d(((F=s.data[e.columnValue])==null?void 0:F.split("-").reverse().join("-"))||"---------"),1)):u("",!0),e.columnType=="bool"?(o(),r("h6",ze,d(s.data[e.columnValue]?"Si":"No"),1)):u("",!0),e.columnType=="max-content"?(o(),r("h6",{key:2,style:f(e.columnType=="max-content"?"min-width: max-content":""),class:"m-0 p-0"},d(s.data[e.columnValue]||"---------"),5)):u("",!0),e.columnType=="other"?(o(),r("h6",qe,d(s.data[e.columnValue]||"---------"),1)):u("",!0),e.columnType=="rating"?(o(),r("h6",Se,[s.data[e.columnValue]>0?(o(),N(_,{key:0,cancel:!1,readonly:"",modelValue:s.data[e.columnValue],"onUpdate:modelValue":C=>s.data[e.columnValue]=C},null,8,["modelValue","onUpdate:modelValue"])):u("",!0)])):u("",!0),e.columnType=="money"?(o(),r("h6",{key:5,style:f(e.columnType=="max-content"?"min-width: max-content":""),class:"m-0 p-0"},d(t.formatoPesosColombianos(s.data[e.columnValue])||"---------"),5)):u("",!0),e.columnValue=="current_status"?(o(),r("div",De,[m(l,{style:f([{color:"white"},`background-color:${($=s.data[e.columnValue])==null?void 0:$.color}`])},{default:h(()=>{var C;return[g(d(((C=s.data[e.columnValue])==null?void 0:C.status)||"---------"),1)]}),_:2},1032,["style"]),p("b",null,d(((E=s.data[e.columnValue])==null?void 0:E.timestamp)||"---------"),1)])):u("",!0),e.columnValue=="channel"?(o(),r("div",Pe,[m(l,{style:f([{color:"white"},`background-color:${s.data.channel_color}`])},{default:h(()=>[g(d(s.data[e.columnValue]||"---------"),1)]),_:2},1032,["style"])])):u("",!0),e.columnValue=="tag_name"?(o(),r("div",Fe,[m(l,{style:f([{color:"white"},`background-color:${s.data.tag_color}`])},{default:h(()=>[g(d(s.data[e.columnValue]),1)]),_:2},1032,["style"])])):u("",!0),e.columnValue=="restaurant"?(o(),r("div",$e,[m(l,{style:f([{color:"white"},`background-color:${s.data.restaurant_color}`])},{default:h(()=>[g(d(s.data[e.columnValue]),1)]),_:2},1032,["style"])])):u("",!0)]}),_:2},1032,["header","style","field"]))),256)),m(ne,{class:"my-0 py-2 px-0 mx-0",style:{},header:"Interactuar"},{body:h(e=>[p("div",Ee,[e.data.status!="Tomada en cuenta"?(o(),N(c,{key:0,onClick:s=>X(e.data),style:{"min-width":"max-content"},label:"Tomar en cuenta",severity:"help",icon:"pi pi-check p-0",class:"my-0 py-2"},null,8,["onClick"])):u("",!0),e.data.status!="Descartada"?(o(),N(c,{key:1,onClick:s=>Z(e.data),label:"Descartar",severity:"danger",icon:"pi pi-times p-0",class:"my-0 py-2"},null,8,["onClick"])):u("",!0)])]),_:1})]),_:1},8,["value","filters"])],64)}}},Le=re(Ie,[["__scopeId","data-v-3274cedd"]]);export{Le as default};
