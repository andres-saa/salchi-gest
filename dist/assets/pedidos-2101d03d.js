import{_ as U,Y as P,a as w,o,c as l,g as d,w as y,m as i,t as h,b as e,F as k,d as O,e as x,f as m,k as j,u as b,X as z,p as L,h as M,r as V,Z as F,i as R,E as W,D as N,n as Y,$ as Z,a0 as D}from"./index-5fe7872a.js";import{D as q}from"./OrderItem.vue_vue_type_style_index_0_scoped_bbba8067_lang-91adba7b.js";import{s as G}from"./siteService-74d3c528.js";import"./ventas-597cfbc8.js";import"./formatoPesos-8aa989a0.js";const H="/images/WhatsApp.svg.webp",S=n=>(L("data-v-bbba8067"),n=n(),M(),n),J={style:{display:"flex","align-items":"center","justify-content":"space-between"}},X={style:{display:"flex","align-items":"center",gap:".5rem","flex-wrap":"wrap"}},K={style:{"min-width":"max-content",color:"black"}},Q={style:{width:"3rem",height:"100%"}},ee={style:{position:"relative"}},te=["src"],se={class:"text-xl",style:{display:"flex",gap:"1rem","align-items":"center"}},oe={style:{"min-width":"max-content",color:"black"}},re={key:1,style:{"font-weight":"bold"}},le=S(()=>e("b",null,"RESPONSABLE:",-1)),ae={key:4},ie=S(()=>e("b",null,"OBSERVACIONES:",-1)),de=S(()=>e("i",{class:"pi pi-whatsapp mr-2"},null,-1)),ne=S(()=>e("br",null,null,-1)),ce={key:7},_e=S(()=>e("p",{style:{color:"black"},class:"py-0 my-1"},[e("b",null,"Vendido por")],-1)),pe={key:9,class:"pr-2",style:{height:"2rem",position:"absolute",bottom:"1rem",right:".5rem"},src:H,alt:""},ue={key:10,class:"pr-2",style:{height:"1.5rem",position:"absolute",bottom:"1rem",right:".5rem"},src:z,alt:""},he={__name:"OrderItem",props:{order:{type:Object,default:{}}},setup(n){const c=P(),a=()=>{c.setVisible("currentOrder",!0),c.setOrder(s.order)},s=n;return(v,g)=>{var r,u,E,$,t,T;const _=w("Tag"),B=w("Button"),C=w("ProgressSpinner"),p=w("P");return o(),l("div",{onClick:a,class:"col-12",style:j([b(c).currentSearchingOrder.order_id==s.order.order_id?"border:3px solid var(--primary-color)":"",{"background-color":"rgba(255, 255, 255, 0.506)",padding:".6rem",position:"relative","border-radius":"0.5rem",cursor:"pointer"}])},[d(_,{style:{"border-radius":".3rem"},class:"text mb-2",severity:s.order.user_phone=="1111111111"?"danger":"help"},{default:y(()=>{var f;return[i(h(s.order.user_phone=="1111111111"?"ES UNA PRUEBA, RELAJATE":`CLIENTE --> ${(f=s.order.user_name)==null?void 0:f.toUpperCase()}`),1)]}),_:1},8,["severity"]),e("div",J,[e("div",X,[e("b",K," #"+h((r=s.order)==null?void 0:r.order_id),1),(o(!0),l(k,null,O(s.order.products.slice(0,3),f=>(o(),l("div",Q,[e("div",ee,[e("img",{style:{width:"100%","border-radius":"10%","background-color":"white"},src:`https://backend.salchimonster.com/read-photo-product/${f.img_identifier}/96`,alt:""},null,8,te),d(B,{severity:"danger",class:"p-0",rounded:"",label:f.quantity,style:{width:"1.5rem",position:"absolute",top:"-.5rem",right:"-.5rem","z-index":"99",height:"1.5rem","border-radius":"1rem"}},null,8,["label"])])]))),256))]),e("span",se,[e("b",oe,h((T=(t=($=(E=(u=s.order)==null?void 0:u.latest_status_timestamp)==null?void 0:E.split("T")[1])==null?void 0:$.split(".")[0])==null?void 0:t.split(":").slice(0,2))==null?void 0:T.join(":")),1),s.order.current_status=="en preparacion"?(o(),x(C,{key:0,style:{width:"50px",height:"50px"},strokeWidth:"8",animationDuration:".5s","aria-label":"Custom ProgressSpinner"})):m("",!0)])]),s.order.calcel_sol_state!=null?(o(),x(_,{key:0,style:{"border-radius":".3rem"},severity:s.order.calcel_sol_state?"success":"danger"},{default:y(()=>[i(h(s.order.calcel_sol_state?"REVISADO":" EN REVISION..."),1)]),_:1},8,["severity"])):m("",!0),i(),s.order.calcel_sol_state?(o(),l("span",re," Y ")):m("",!0),s.order.calcel_sol_state?(o(),x(_,{key:2,style:{"border-radius":".3rem"},severity:s.order.calcel_sol_asnwer?"success":"danger"},{default:y(()=>[i(h(s.order.calcel_sol_asnwer?"APROBADO":"RECHAZADO"),1)]),_:1},8,["severity"])):m("",!0),s.order.calcel_sol_state?(o(),x(p,{key:3,class:"m-0"},{default:y(()=>{var f;return[le,i(" "+h((f=s.order.cancelation_solve_responsible)==null?void 0:f.split(" ").slice(0,3).join(" ")),1)]}),_:1})):m("",!0),s.order.responsible_observation?(o(),l("span",ae,[e("p",null,[ie,i(" "+h(s.order.responsible_observation||"sin observaciones"),1)])])):m("",!0),s.order.responsible_id?(o(),x(_,{key:5,style:{"border-radius":".3rem"},severity:"success"},{default:y(()=>[de,i(" TRANSFERENCIA APROBADA")]),_:1})):m("",!0),i(),ne,s.order.responsible_id?(o(),x(_,{key:6,style:{"border-radius":".3rem"},severity:"success"},{default:y(()=>[i(h(s.order.name),1)]),_:1})):m("",!0),s.order.inserted_by_name?(o(),l("div",ce,[_e,d(_,{style:{"border-radius":".3rem","background-color":"black"}},{default:y(()=>[i(h(s.order.inserted_by_name)+" -> ",1)]),_:1})])):(o(),x(_,{key:8,style:{"border-radius":".3rem","background-color":"var(--primary-color)"}},{default:y(()=>[i(" DIRECTO DE WEB -> ")]),_:1})),s.order.inserted_by_name?(o(),l("img",pe)):(o(),l("img",ue))],4)}}},I=U(he,[["__scopeId","data-v-bbba8067"]]);const A=n=>(L("data-v-99fa3c2c"),n=n(),M(),n),ye={class:"grid xl:mx-0 mx-0 py-0 mt-6 px-0",style:{"background-color":"white",width:"100%"}},me={class:"pb-0 p-0",style:{display:"flex","flex-wrap":"wrap",gap:"1rem","list-style":"none","overflow-x":"auto"}},be={style:{display:"flex",gap:"1rem"}},fe=["vif"],ve={class:"shadow-4 contenedor pb-2",style:{overflow:"hidden","background-color":"#ffad53"}},ge={style:{height:"100%",width:"100%"}},xe=A(()=>e("p",{class:"col-12 text-center shadow-4",style:{"background-color":"#ffffff61"}},[e("span",{class:"text-center text-2xl",style:{color:"black","font-weight":"bold"}},[e("i",{class:"pi pi-envelope text-2xl"}),i(" RECIBIDOS")])],-1)),we={class:"lg:pb-8",style:{height:"100%","overflow-y":"auto"}},ke={class:"px-3 py-2"},Oe={class:"md:px-2 xl:pt-5 p-0 col-12 xl:col-4 top"},Se={class:"shadow-4 contenedor pb-2",style:{overflow:"hidden","background-color":"#8e3693"}},Ee={style:{height:"100%",width:"100%"}},$e=A(()=>e("p",{class:"col-12 text-center shadow-4",style:{"background-color":"#ffffff61"}},[e("span",{class:"text-center text-2xl",style:{color:"black","font-weight":"bold"}},[e("i",{class:"pi pi-clock text-2xl"}),i(" EN PREPARACION")])],-1)),Ie={class:"lg:pb-8",style:{height:"100%","overflow-y":"auto"}},Ae={class:"px-3 py-2"},Be={class:"md:px-2 xl:pt-5 p-0 col-12 xl:col-4 top"},Ce={class:"shadow-4 contenedor pb-2",style:{overflow:"hidden","background-color":"#00bf7a"}},Te={class:"lg:pb-8",style:{height:"100%",width:"100%"}},Ve=A(()=>e("p",{class:"col-12 text-center shadow-4",style:{"background-color":"#ffffff61"}},[e("span",{class:"text-center text-2xl",style:{color:"black","font-weight":"bold"}},[e("i",{class:"pi pi-send text-2xl"}),i(" ENVIADOS")])],-1)),Ne={style:{height:"100%","overflow-y":"auto"}},Pe={class:"px-3 py-2"},Re={key:0,class:"md:px-2 xl:pt-5 p-0 col-12 xl:col-4 top"},De={class:"shadow-4 contenedor pb-2",style:{overflow:"hidden","background-color":"red"}},Ue={class:"lg:pb-8",style:{height:"100%",width:"100%"}},je=A(()=>e("p",{class:"col-12 text-center shadow-4",style:{"background-color":"#ffffff61"}},[e("span",{class:"text-center text-2xl",style:{color:"black","font-weight":"bold"}},[e("i",{class:"pi pi-times text-2xl"}),i(" CANCELADOS")])],-1)),Le={style:{height:"100%","overflow-y":"auto"}},Me={class:"px-3 py-2"},ze={__name:"pedidos",setup(n){P();const c=V([]),a=P(),s=F(),v=V(""),g=V("");R(()=>{a.startOrderUpdates()}),W(()=>{a.stopOrderUpdates()}),R(async()=>{c.value=await G.getSites(),a.getTodayOrders()}),N(()=>s.site,()=>{a.getTodayOrders()}),N(v,()=>{g.value=""}),N(g,()=>{v.value=""});const _=()=>{var p;if(v.value!="")B(v.value);else if(g.value!="")C((p=g.value)==null?void 0:p.split(" ").join(""));else return},B=async p=>{const r=await D.getOrderById(p);r!=null&&r.order_id?(a.setVisible("currentOrder",!0),a.setOrder(r),s.site=c.value.filter(u=>u.site_id==r.site_id)[0],a.currentSearchingOrder=r):alert("Orden no encontrada")},C=async p=>{const r=await D.getOrderByPhone(p);r!=null&&r.order_id?(a.setVisible("currentOrder",!0),a.setOrder(r),s.site=c.value.filter(u=>u.site_id==r.site_id)[0],a.currentSearchingOrder=r):alert("Orden no encontrada")};return(p,r)=>{const u=w("Button"),E=w("InputText"),$=w("InputMask");return o(),l("div",ye,[e("div",{class:Y([c.value.length>0?"apear":"hide","col-12 py-0 px-2 shadow-1 my-0"])},[e("nav",null,[e("ul",me,[(o(!0),l(k,null,O(c.value.filter(t=>t.show_on_web),t=>(o(),l("li",null,[d(u,{class:"p-2 mb-2",onClick:T=>b(s).site=t,style:j([b(s).site.site_id==t.site_id?"box-shadow:0 5px 0px var(--primary-color)":"",{"min-width":"max-content","border-radius":"0",color:"black"}]),text:"",label:t.site_name},null,8,["onClick","style","label"])]))),256)),e("li",be,[d(E,{style:{},modelValue:v.value,"onUpdate:modelValue":r[0]||(r[0]=t=>v.value=t),modelModifiers:{trim:!0},placeholder:"Buscar por id (sin #)"},null,8,["modelValue"]),i(),d($,{modelValue:g.value,"onUpdate:modelValue":r[1]||(r[1]=t=>g.value=t),prefix:"+57",id:"basic",mask:"999 999 9999",placeholder:"Buscar por telefono"},null,8,["modelValue"]),d(u,{onClick:r[2]||(r[2]=t=>_()),severity:"help",icon:"pi pi-search",label:"Buscar"})])])])],2),d(q),e("div",{vif:b(a).TodayOrders.filter(t=>t.current_status=="generada").length>0?"apear":"hide",class:"md:px-2 xl:pt-5 p-0 col-12 xl:col-4 top"},[e("div",ve,[e("div",ge,[xe,e("div",we,[(o(!0),l(k,null,O(b(a).TodayOrders.filter(t=>t.current_status=="generada"),t=>(o(),l("div",ke,[d(I,{order:t},null,8,["order"])]))),256))])])])],8,fe),e("div",Oe,[e("div",Se,[e("div",Ee,[$e,e("div",Ie,[(o(!0),l(k,null,O(b(a).TodayOrders.filter(t=>t.current_status=="en preparacion"),t=>(o(),l("div",Ae,[d(I,{order:t},null,8,["order"])]))),256))])])])]),e("div",Be,[e("div",Ce,[e("div",Te,[Ve,e("div",Ne,[d(Z,{name:"fade",tag:"div"},{default:y(()=>[(o(!0),l(k,null,O(b(a).TodayOrders.filter(t=>t.current_status=="enviada"),t=>(o(),l("div",Pe,[d(I,{id:t.order_id,order:t},null,8,["id","order"])]))),256))]),_:1})])])])]),b(a).TodayOrders.filter(t=>t.current_status=="cancelada").length>0?(o(),l("div",Re,[e("div",De,[e("div",Ue,[je,e("div",Le,[(o(!0),l(k,null,O(b(a).TodayOrders.filter(t=>t.current_status=="cancelada"),t=>(o(),l("div",Me,[d(I,{order:t},null,8,["order"])]))),256))])])])])):m("",!0)])}}},Ge=U(ze,[["__scopeId","data-v-99fa3c2c"]]);export{Ge as default};
