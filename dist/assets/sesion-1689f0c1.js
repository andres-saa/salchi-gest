import{_ as T,z as P,r as f,k,y as L,a as b,o as d,c as l,b as e,d as p,w as N,B,n as E,C as z,T as D,m as I,t as _,F as $,e as C,u as S,v as V,D as w,j as M,U as O,q as R}from"./index-e6a95173.js";import{f as q}from"./formatoPesos-2a38d2e7.js";import{a as j,u as F}from"./site-b78540a3.js";/* empty css                                                                    */import{u as U}from"./ventas-c9e5e337.js";const A={class:"container shadow-3 col-12",style:{"border-radius":"0.5rem","background-color":"white",height:"100%",position:"relative",overflow:""}},H=["src"],J={key:0,style:{width:"100%",display:"flex","justify-content":"center","align-items":"center","aspect-ratio":"1 / 1","background-color":"rgb(255, 255, 255)","object-fit":"contain","border-radius":"0.5rem"}},W={class:"texto",style:{}},G={style:{display:"flex",gap:"1rem",height:"100%","flex-direction":"column","justify-content":"space-between"}},K={style:{display:"flex","justify-content":"space-between","align-items":"center"}},Q={style:{"text-transform":"uppercase"}},X=["v-lazy"],Y={style:{display:"flex","justify-content":"space-between","align-items":"c"}},Z={style:{display:"flex","align-items":"center",gap:"1rem"}},tt={class:"text-xl"},et={__name:"TarjetaMenu",props:{product:{type:Object,default:{}},index:{type:Number,default:12}},setup(y){const u=j(),i=P(),m=t=>{u.addProductToCart(t),i.add({severity:"success",summary:"Exito",detail:"Producto agregado al carrito",life:3e3})},r=f(!1),g=()=>{r.value=!0},h=t=>{u.setCurrentProduct(t),u.setVisible("currentProduct",!0)},s=y;k(()=>{const t=new IntersectionObserver(o=>{o.forEach(c=>{if(c.isIntersecting){const n=c.target;n.src=n.dataset.src,r.value[n.dataset.index]=!0,t.unobserve(n)}})},{threshold:.1});document.querySelectorAll("img.lazy").forEach((o,c)=>{o.dataset.index=c,t.observe(o)})});const a=L(()=>s.product.product_description.substring(0,100)+"...");return(t,o)=>{var v;const c=b("ProgressSpinner"),n=b("Button");return d(),l("div",A,[e("div",{class:"imagen",style:{display:"flex",overflow:"hidden","align-items":"center"},onClick:o[0]||(o[0]=x=>h(s.product))},[p(D,{name:"fade"},{default:N(()=>[B(e("img",{onLoad:g,class:E(r.value?"cargado":"sin-cargar"),style:{width:"100%","aspect-ratio":"1 / 1","border-radius":"0.5rem",cursor:"pointer","background-color":"rgb(255, 255, 255)","object-fit":"contain"},src:`https://backend.salchimonster.com/read-product-image/300/${s.product.product_name}`,alt:""},null,42,H),[[z,r.value]])]),_:1}),r.value?I("",!0):(d(),l("div",J,[p(c,{style:{width:"60px",height:"60px"},strokeWidth:"8",animationDuration:".2s","aria-label":"Custom ProgressSpinner"})]))]),e("div",W,[e("div",G,[e("div",K,[e("span",null,[e("b",Q,_(s.product.product_name),1)]),(d(),l($,null,C([1],x=>e("img",{class:"character",style:{width:"6rem"},"v-lazy":`/images/characters/${s.index}.png`,alt:""},null,8,X)),64))]),e("span",null,_((v=a.value)==null?void 0:v.toLocaleLowerCase()),1),e("div",Y,[p(n,{icon:"pi pi-heart text-2xl",text:"",rounded:"",style:{color:"red"}}),e("div",Z,[e("span",tt,[e("b",null,_(S(q)(s.product.price)),1)])])])])]),p(n,{style:{position:"absolute",right:"-1rem",top:"-1rem"},onClick:o[1]||(o[1]=x=>m(s.product)),severity:"danger",rounded:"",icon:"pi pi-plus text-xl fw-100"})])}}},st=T(et,[["__scopeId","data-v-e47f1dc0"]]),ot={class:"grid p-1 pb-8",style:{"max-width":"1024px",margin:"auto",position:"relative"}},rt={class:"text-center text-3xl col-12",style:{"font-weight":"bold",display:"flex",gap:"1rem","align-items":"center"}},at=e("div",{style:{width:"100%",height:"5px","background-color":"#ff6200"}},null,-1),nt=e("div",{style:{width:"100%",height:"5px","background-color":"#ff6200"}},null,-1),pt={__name:"sesion",setup(y){j();const u=F(),i=U(),m=f([]),r=V();k(async()=>{g(),await w()}),M(()=>r.params.category_id,async()=>{r.params.category_id&&(g(),await w())},{deep:!0});const g=async h=>{const s=u.location.site.site_id,a=r.params.category_id;if(a&&s){i.setLoading(!0,"cargando productos");try{let t=await fetch(`${O}/products-active/category-id/${a}/site/${s}`);if(!t.ok)throw i.setLoading(!1,"cargando productos"),new Error(`HTTP error! status: ${t.status}`);i.setLoading(!1,"cargando productos");let o=await t.json();m.value=o}catch(t){i.setLoading(!1,"cargando productos"),console.error("Error fetching data: ",t)}}};return f(JSON.parse(localStorage.getItem("currentNeigborhood"))),(h,s)=>(d(),l("div",ot,[e("p",rt,[at,R(" "+_(S(r).params.menu_name)+" ",1),nt]),(d(!0),l($,null,C(m.value,(a,t)=>(d(),l("div",{key:a.id,class:"col-12 md:col-4 lg:col-3 sm:col-6"},[p(st,{style:{width:"100%"},id:`tarjeta-${t}`,index:t+1,product:a},null,8,["id","index","product"])]))),128))]))}};export{pt as default};
