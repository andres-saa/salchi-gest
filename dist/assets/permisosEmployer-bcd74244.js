import{_ as oe,f as c,u as ae,O as le,g as A,h as ne,r as h,o as D,c as O,a as e,d as l,n as q,w as n,v as ie,F as re,Q as de,U as S,k as d,t as i,q as I,l as U,P as M,p as ce,e as ue,bY as J}from"./index-e37a2320.js";const a=C=>(ce("data-v-ab3ae43f"),C=C(),ue(),C),pe={class:"col-12 m-auto p-0"},me={key:0,class:"col-12",style:{display:"flex","flex-direction":"column","pointer-events":"none","align-items":"center","justify-content":"center",position:"fixed","z-index":"1000",left:"0",top:"0",height:"100%","background-color":"rgba(0, 0, 0, 0.5)"}},he=a(()=>e("p",{class:"text-3xl",style:{"font-weight":"bold",color:"white","text-shadow":"0 0 10px rgba(0, 0, 0, 0.551)"}},"CARGANDO PERMISOS",-1)),_e={style:{display:"flex"}},fe={class:"flex flex-column md:flex-row md:justify-content-between md:align-items-center"},ve=a(()=>e("p",{class:"m-0 text-2xl my-4"},"permisos ",-1)),ye={class:"block mt-2 md:mt-0 p-input-icon-left"},be=a(()=>e("i",{class:"pi pi-search"},null,-1)),ge=a(()=>e("span",{class:"p-column-title"},"Code",-1)),xe=a(()=>e("span",{class:"p-column-title"},"Code",-1)),we=a(()=>e("span",{class:"p-column-title"},"Code",-1)),ke=a(()=>e("span",{class:"p-column-title"},"Code",-1)),Se=a(()=>e("span",{class:"p-column-title"},"Code",-1)),Ce=a(()=>e("span",{class:"p-column-title"},"Code",-1)),Pe=a(()=>e("span",{class:"p-column-title"},"Code",-1)),ze={style:{display:"flex",gap:"1rem"}},Ee=a(()=>e("div",null,null,-1)),Re={class:"a4-size p-0 lg:p-6 mi-clase mt-4"},Ie=a(()=>e("img",{class:"m-auto",src:"https://salchimonster.com/images/logo.png",style:{width:"10%"},alt:""},null,-1)),je={style:{"font-size":"11pt","font-weight":"normal",color:"black","font-family":"Arial, Helvetica, sans-serif"}},Ne=a(()=>e("h6",{class:"text-center",style:{"font-size":"11pt","font-weight":"bold",color:"black","font-family":"Arial, Helvetica, sans-serif"}}," INVERSIONES SALCHIMONSTER SAS ",-1)),Te=a(()=>e("h6",{style:{"font-size":"11pt","font-weight":"normal",color:"black","font-family":"Arial, Helvetica, sans-serif"},class:"text-center"},"NIT: 901.420.874-0",-1)),$e={class:"text-center py-4",style:{"font-weight":"bold","text-transform":"uppercase"}},Ae=a(()=>e("span",{style:{"text-transform":"capitalize"}},null,-1)),De={class:"text-l",style:{"font-size":"11pt","font-weight":"normal",color:"black","font-family":"Arial, Helvetica, sans-serif"}},Oe={class:"p-0 m-0"},Ue=a(()=>e("span",{style:{"font-weight":"bold"}},"Fecha de la solicitud: ",-1)),Me={style:{"border-bottom":"1px solid","padding-bottom":"0","padding-right":"2rem"}},Le={class:"p-0 m-0",style:{width:"100%"}},Fe=a(()=>e("span",{style:{"font-weight":"bold"}},"Nombre: ",-1)),Ve={style:{width:"100%","border-bottom":"1px solid","padding-bottom":"0","padding-right":"3rem"}},Be={class:"p-0 m-0"},He=a(()=>e("span",{style:{"font-weight":"bold"}},"Cargo: ",-1)),qe={style:{"border-bottom":"1px solid","padding-bottom":"0","padding-right":"2rem"}},Je={class:"p-0 m-0"},Ke=a(()=>e("span",{style:{"font-weight":"bold"}},"IdentificaciÃ³n No: ",-1)),Ye={style:{"border-bottom":"1px solid","padding-bottom":"0","padding-right":"2rem"}},Ge={style:{display:"flex","justify-content":"start",gap:"2rem",border:"1px solid","margin-top":"2rem"},class:"p-2"},Qe={style:{display:"flex","flex-direction":"column"},class:""},We=a(()=>e("div",{style:{"font-weight":"bold"}}," Desde ",-1)),Ze={style:{display:"flex","flex-direction":"column"}},Xe=a(()=>e("div",{style:{"font-weight":"bold"}}," Hasta ",-1)),et={style:{display:"flex","justify-content":"start",gap:"2rem",border:"1px solid","margin-top":"2rem"},class:"p-2"},tt={style:{display:"flex","flex-direction":"column"},class:""},st={style:{display:"flex","flex-direction":"column"}},ot=a(()=>e("div",{style:{"font-weight":"bold"}}," Observaciones ",-1)),at={style:{display:"flex","justify-content":"start",gap:"2rem",border:"1px solid","margin-top":"2rem"},class:"p-2"},lt={style:{display:"flex","flex-direction":"column"},class:""},nt={style:{display:"flex","flex-direction":"column"}},it=a(()=>e("div",{class:"mb-2",style:{"font-weight":"bold"}}," Estado actual ",-1)),rt={class:"mb-1"},dt=a(()=>e("span",{style:{"font-weight":"bold"}},"Resumen:",-1)),ct={class:"mb-1"},ut=a(()=>e("span",{style:{"font-weight":"bold"}},"Fecha:",-1)),pt={class:"mb-1"},mt=a(()=>e("span",{style:{"font-weight":"bold"}}," Responsable Id:",-1)),ht={key:0},_t=a(()=>e("span",{style:{"font-weight":"bold"}},"Motivos del rechazo:",-1)),ft={class:"col-12 md:col-6 m-auto p-0",style:{display:"flex",gap:"1rem",overflow:"hidden","justify-content":"space-around",position:"absolute",top:"0rem",right:"0","background-color":"rgba(255, 255, 255, 0)te"}},vt=a(()=>e("span",{class:"p-input-icon-left",style:{width:"100%"}},[e("i",{class:"pi pi-pencil"})],-1)),yt=a(()=>e("span",{class:"text-center col-12 p-0"},"Si, continuar",-1)),bt=a(()=>e("span",{class:"text-center col-12 p-0"},"No, talvez luego",-1)),gt=a(()=>e("h6",null,"Razones para rechazar este permiso ",-1)),xt=a(()=>e("span",{class:"p-input-icon-left",style:{width:"100%"}},[e("i",{class:"pi pi-pencil"})],-1)),wt=a(()=>e("span",{class:"text-center col-12 p-0"},"Si, continuar",-1)),kt=a(()=>e("span",{class:"text-center col-12 p-0"},"No, talvez luego",-1)),St={__name:"permisosEmployer",setup(C){const K=c(null),_=ae(),Y=c(_.params.status),f=c(_.params.tipo),b=c(_.params.status),j=c(""),G=()=>{P.value={global:{value:null,matchMode:de.CONTAINS}}},g=c(!1),N=c("2029-12-21 16:19"),r=c(),P=c(null),v=c([]),y=c({}),z=c(!1),E=c(!1),L=c([]),F=c(!0);le(()=>{G()}),A(()=>_.params.status,s=>{Y.value=s}),A(()=>_.params.tipo,s=>{f.value=s,console.log(f),x(s,b.value).then(t=>v.value=t)}),A(()=>_.params.status,s=>{b.value=s,x(f.value).then(t=>v.value=t)});const Q=async s=>{g.value=!0,r.value=s,T(s.employer_id)},V=s=>{z.value=!0,r.value=s,T(s.employer_id)},B=s=>{E.value=!0,r.value=s,T(s.employer_id)};function W(s){s.status={status:"aprobado",timestamp:N.value,responsable:J()},s.history.push({...s.status}),fetch(`${S}/permission/${s.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}).then(t=>{t.json(),g.value=!1,z.value=!1,x(f.value,b.value).then(m=>v.value=m)}).then(t=>console.log("Permiso aprobado:",t)).catch(t=>console.error("Error:",t))}function Z(s){s.status={status:"rechazado",timestamp:N.value,razones:j.value,responsable:J()},s.history.push({...s.status}),fetch(`${S}/permission/${s.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}).then(t=>{t.json(),E.value=!1,g.value=!1,x(f.value,b.value).then(m=>v.value=m)}).then(t=>console.log("Permiso rechazado:",t)).catch(t=>console.error("Error:",t))}function R(s){var t=new Date(s),m={day:"numeric",month:"long",year:"numeric"};return t.toLocaleDateString("es-ES",m)}const X=async()=>{fetch(`${S}/server_time`).then(s=>{if(!s.ok)throw new Error("Network response was not ok");return s.json()}).then(s=>{console.log("Employer data:",s),N.value=s}).catch(s=>{console.error("There has been a problem with your fetch operation:",s),mensaje.value="error"})};function ee(s){s||(s="2029-12-21 16:19");const t=["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"];let[m,H]=s.split(" "),[u,p,$]=m.split("-").map(Number),w=t[p-1];return`${$} de ${w} de ${u}`}const T=async s=>{fetch(`${S}/employer/${s}`).then(t=>{if(!t.ok)throw new Error("Network response was not ok");return t.json()}).then(t=>{console.log("Employer data:",t),y.value=t}).catch(t=>{console.error("There has been a problem with your fetch operation:",t)})};async function x(){const s=`${S}/permissions/  `;try{const t=await fetch(s);if(!t.ok)throw new Error(`Error al obtener los permisos: ${t.status}`);return F.value=!1,await t.json()}catch(t){throw console.error("Error en getPermissions:",t),t}}return ne(()=>{x(f.value,b.value).then(s=>v.value=s),X()}),(s,t)=>{const m=h("ProgressSpinner"),H=h("InputText"),u=h("Column"),p=h("Button"),$=h("DataTable"),w=h("Dialog"),te=h("Textarea");return D(),O(re,null,[e("div",pe,[F.value?(D(),O("div",me,[he,e("div",_e,[l(m,{style:{width:"100px",height:"100px"},strokeWidth:"4",fill:"var(--surface-ground)",animationDuration:".5s","aria-label":"Custom ProgressSpinner"})])])):q("",!0),l($,{ref_key:"dt",ref:K,value:v.value,selection:L.value,"onUpdate:selection":t[1]||(t[1]=o=>L.value=o),dataKey:"id",paginator:!0,rows:10,filters:P.value,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25,100],currentPageReportTemplate:"Mostrando {first} a {last} de {totalRecords} permisoes",responsiveLayout:"scroll",scrollable:"","scroll-height":"62vh"},{header:n(()=>[e("div",fe,[ve,e("span",ye,[be,l(H,{class:"",modelValue:P.value.global.value,"onUpdate:modelValue":t[0]||(t[0]=o=>P.value.global.value=o),placeholder:"Buscar..."},null,8,["modelValue"])])])]),default:n(()=>[l(u,{class:"p-2",selectionMode:"multiple",headerStyle:"width: 3rem; ",frozen:""}),l(u,{class:"p-2",field:"id",header:"Id",sortable:!0,headerStyle:"width:3rem; min-width:min-content; "},{body:n(o=>[ge,d(i(o.data.id),1)]),_:1}),l(u,{class:"p-2",field:"tipo",header:"Tipo",sortable:!0,headerStyle:"width:10rem; min-width:min-content; "},{body:n(o=>[xe,d(i(o.data.tipo),1)]),_:1}),l(u,{class:"p-2",field:"employer_id",header:" empleado",sortable:!0,headerStyle:"width:10rem; min-width:max-content; "},{body:n(o=>[we,d(i(o.data.employer_id),1)]),_:1}),l(u,{class:"p-2",field:"start_date",header:"fecha de inicio",sortable:!0,headerStyle:"width:15rem; min-width:10rem; "},{body:n(o=>[ke,d(i(o.data.start_date),1)]),_:1}),l(u,{class:"p-2",field:"end_date",header:"fecha finalizacion",sortable:!0,headerStyle:"width:15rem; min-width:max-content; "},{body:n(o=>[Se,d(i(o.data.end_date),1)]),_:1}),l(u,{class:"p-2",field:"observations",header:"Observaciones del empleado",sortable:!0,headerStyle:"width:30rem; min-width:max-content; "},{body:n(o=>[Ce,d(i(o.data.observations),1)]),_:1}),l(u,{class:"p-2",field:"status.status",header:"Estado",sortable:!0,headerStyle:"width:10rem; min-width:max-content; "},{body:n(o=>[Pe,e("div",{class:I(["p-2",o.data.status.status]),style:{"border-radius":"10rem"}},i(o.data.status.status),3)]),_:1}),l(u,{class:"p-2",field:"location",header:"Acciones",sortable:!0,frozen:"",alignFrozen:"right",headerStyle:"width:min-content; min-width:min-content; "},{body:n(o=>[e("div",ze,[l(p,{class:"p-0",outlined:"",severity:"info",label:"Small",onClick:k=>Q(o.data),text:""},{default:n(()=>[e("i",{class:I(["text-xl",U(M).EYE]),style:{"font-weight":"bold"}},null,2)]),_:2},1032,["onClick"]),l(p,{class:"p-0",disabled:o.data.status.status=="aprobado",outlined:"",severity:"success",label:"Small",text:"",onClick:k=>V(o.data),style:{display:"flex","justify-content":"center"}},{default:n(()=>[e("i",{class:I(["text-xl",U(M).CHECK]),style:{"font-weight":"bold"}},null,2)]),_:2},1032,["disabled","onClick"]),l(p,{class:"p-0",disabled:o.data.status.status=="rechazado"&&o.data.status.status!="aprobado",outlined:"",severity:"danger",label:"Small",onClick:k=>B(o.data),style:{display:"flex","justify-content":"center"},text:""},{default:n(()=>[e("i",{class:I(["text-xl",U(M).TIMES]),style:{"font-weight":"bold"}},null,2)]),_:2},1032,["disabled","onClick"])])]),_:1})]),_:1},8,["value","selection","filters"]),Ee]),l(w,{style:ie([{border:"none","box-shadow":"none"},{width:"700px"}]),visible:g.value,"onUpdate:visible":t[4]||(t[4]=o=>g.value=o),header:"Revizar permiso",modal:!0,class:"p-fluid m-2 pt-8"},{default:n(()=>{var o,k;return[e("div",Re,[Ie,e("h6",je,i(ee(r.value.status.timestamp)),1),Ne,Te,e("h6",$e,[d("FORMATO SOLICITUD DE PERMISO "+i(r.value.tipo)+" ",1),Ae]),e("h5",De,[e("p",Oe,[Ue,d(),e("span",Me,i(R(r.value.start_date)),1)]),e("p",Le,[Fe,d(),e("span",Ve,i(y.value.name),1)]),e("p",Be,[He,d(),e("span",qe,i(y.value.position),1)]),e("p",Je,[Ke,d(),e("span",Ye,i(y.value.dni),1)]),e("div",Ge,[e("div",Qe,[We,e("div",null,i(R(r.value.start_date)),1)]),e("div",Ze,[Xe,e("div",null,i(R(r.value.end_date)),1)])]),e("div",et,[e("div",tt,[e("div",st,[ot,e("div",null,i(r.value.observations),1)])])]),e("div",at,[e("div",lt,[e("div",nt,[it,e("div",rt,[dt,d(" "+i(r.value.status.status),1)]),e("div",ct,[ut,d(" "+i(R(r.value.status.timestamp)),1)]),e("div",pt,[mt,d(" "+i((o=r.value.status)==null?void 0:o.responsable),1)]),r.value.status.status=="rechazado"?(D(),O("div",ht,[_t,d(" "+i((k=r.value.status)==null?void 0:k.razones),1)])):q("",!0)])])])])]),e("div",ft,[l(p,{class:"text-center",onClick:t[2]||(t[2]=se=>V(r.value)),style:{"background-color":"rgb(105, 255, 157)",color:"rgba(0, 0, 0, 0.864)",border:"none",display:"flex","justify-content":"center"}},{default:n(()=>[d(" APROBAR ")]),_:1}),l(p,{onClick:t[3]||(t[3]=se=>B(r.value)),style:{"background-color":"rgb(255, 125, 125)",color:"rgba(0, 0, 0, 0.864)",border:"none",display:"flex","justify-content":"center"}},{default:n(()=>[d(" RECHAZAR")]),_:1})])]}),_:1},8,["visible"]),l(w,{header:"Confirmacion",visible:z.value,"onUpdate:visible":t[6]||(t[6]=o=>z.value=o),style:{width:"350px"},modal:!0},{default:n(()=>[e("h5",null,"Seguro que desea aceptar el permiso de "+i(y.value.name),1),vt,l(p,{onClick:t[5]||(t[5]=o=>W(r.value)),style:{margin:"auto","background-color":"rgb(105, 255, 157)",color:"black",border:"none"},class:"m-auto my-4 text-center"},{default:n(()=>[yt]),_:1}),l(p,{style:{"background-color":"rgb(255, 156, 156)",color:"rgba(0, 0, 0, 0.864)",border:"none"},class:"m-auto my-4 ml-4 text-center"},{default:n(()=>[bt]),_:1})]),_:1},8,["visible"]),l(w,{header:"Confirmacion",visible:E.value,"onUpdate:visible":t[9]||(t[9]=o=>E.value=o),style:{width:"350px"},modal:!0},{default:n(()=>[e("h5",null,"Seguro que desea Rechazar el permiso de "+i(y.value.name)+"?",1),gt,l(te,{modelValue:j.value,"onUpdate:modelValue":t[7]||(t[7]=o=>j.value=o),style:{"max-width":"100%","min-width":"100%","min-height":"100px"},class:"col-12"},null,8,["modelValue"]),xt,l(p,{onClick:t[8]||(t[8]=o=>Z(r.value)),style:{margin:"auto","background-color":"rgb(105, 255, 157)",color:"black",border:"none"},class:"m-auto my-4 text-center"},{default:n(()=>[wt]),_:1}),l(p,{style:{"background-color":"rgb(255, 156, 156)",color:"rgba(0, 0, 0, 0.864)",border:"none"},class:"m-auto my-4 ml-4 text-center"},{default:n(()=>[kt]),_:1})]),_:1},8,["visible"])],64)}}},Pt=oe(St,[["__scopeId","data-v-ab3ae43f"]]);export{Pt as default};
