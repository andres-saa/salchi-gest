import{x as a,h as s,U as n,y as u}from"./index-ecc0c64b.js";const d={async getOrdersTransfer(){const t=a();try{t.setLoading(!0);const e=await s.get(`${n}/order-to-transfer/`);return e.status===200?(t.setLoading(!1),e.data):(console.error("An error occurred while fetching the ingredients:",e.status),t.setLoading(!1),null)}catch(e){return t.setLoading(!1),console.error("An error occurred while fetching the ingredients:",e),null}},async getOrdersBySite(t){const e=a();try{e.setLoading(!0);const r=await s.get(`${n}/order-by-site/${t}`);return r.status===200?(e.setLoading(!1),r.data):(console.error("An error occurred while fetching the ingredients:",r.status),e.setLoading(!1),null)}catch(r){return e.setLoading(!1),console.error("An error occurred while fetching the ingredients:",r),null}},async UpdateOrdersBySite(t){a();try{const e=await s.get(`${n}/order-by-site/${t}`);return e.status===200?e.data:(console.error("An error occurred while fetching the ingredients:",e.status),null)}catch(e){return console.error("An error occurred while fetching the ingredients:",e),null}},async getOrderCount(t){try{const e=await s.get(`${n}/get_order_count_by_site_id/${t}`);return e.status===200?e.data:(console.error("An error occurred while fetching the ingredients:",e.status),null)}catch(e){return console.error("An error occurred while fetching the ingredients:",e),null}},async getOrderById(t){const e=a();try{e.setLoading(!0);const r=await s.get(`${n}/order-by-id/${t}`);return r.status===200?(e.setLoading(!1),r.data):(console.error("An error occurred while fetching the ingredients:",r.status),e.setLoading(!1),null)}catch(r){return console.error("An error occurred while fetching the ingredients:",r),e.setLoading(!1),null}},async getOrderByPhone(t){const e=a();try{e.setLoading(!0);const r=await s.get(`${n}/order-by-phone/${t}`);return r.status===200?(e.setLoading(!1),r.data):(console.error("An error occurred while fetching the ingredients:",r.status),e.setLoading(!1),null)}catch(r){return console.error("An error occurred while fetching the ingredients:",r),e.setLoading(!1),null}},async is_recent_order_generated(t){try{const e=await s.get(`${n}/recent-order/${t}`);return e.status===200?e.data:(console.error("An error occurred while fetching the ingredients:",e.status),null)}catch(e){return console.error("An error occurred while fetching the ingredients:",e),null}},async prepareOrder(t){const e=c();e.setVisible("currentOrder",!1);try{const r=await s.post(`${n}/order/${t}/prepare`);return r.status===200?(e.Notification.pause(),e.Notification.currentTime=0,e.getTodayOrders(),r.data):(console.error("An error occurred while preparing the order:",r.status),null)}catch(r){return console.error("An error occurred while preparing the order:",r),null}},async cancelOrder(t,e,r){const o=c();o.Notification.pause(),o.Notification.currentTime=0,o.setVisible("currentOrder",!1);const h={reason:e,responsible:r};try{const i=await s.post(`${n}/order/${t}/cancel`,h);return i.status===200?(o.getTodayOrders(),o.setVisible("currentOrder",!1),i.data):(console.error("An error occurred while cancelling the order:",i.status),null)}catch(i){return console.error("An error occurred while cancelling the order:",i),null}},async sendOrder(t){const e=c();e.setVisible("currentOrder",!1);try{const r=await s.post(`${n}/order/${t}/send`);return r.status===200?(e.getTodayOrders(),e.setVisible("currentOrder",!1),r.data):(console.error("An error occurred while sending the order:",r.status),null)}catch(r){return console.error("An error occurred while sending the order:",r),null}},async create_cancellling_request(t){const e=c();e.setVisible("currentOrder",!1);try{const r=await s.post(`${n}/insert-cancellation-order`,t);return r.status===200?(e.getTodayOrders(),e.setVisible("currentOrder",!1),r.data):(console.error("An error occurred while sending the order:",r.status),null)}catch(r){return console.error("An error occurred while sending the order:",r),null}},async deliveryZero(t){const e=c();e.setVisible("currentOrder",!1);try{const r=await s.put(`${n}/delivery_zero/${t}`);return r.status===200?(e.getTodayOrders(),e.setVisible("currentOrder",!1),r.data):(console.error("An error occurred while sending the order:",r.status),null)}catch(r){return console.error("An error occurred while sending the order:",r),null}}},l=u("site",{persist:{key:"site",storage:localStorage,paths:[]},state:()=>({site:{site_id:1}}),getters:{},actions:{setSite(t){this.site=t}}}),c=u("cart",{persist:{key:"order",storage:localStorage,paths:["currentCountOrders","numberCancellationRequests"]},state:()=>({currentOrder:{},visibles:{currentOrder:!1},TodayOrders:[],Notification:new Audio("/sound/pip.mp3"),webSocket:null,currentCountOrders:0,last_order_id:0,currentSearchingOrder:{},numberCancellationRequests:0}),getters:{},actions:{setVisible(t,e){this.visibles[t]=e},setOrder(t){this.currentOrder=t},async getTodayOrders(){const t=l();t.site.site_id&&(this.TodayOrders=await d.getOrdersBySite(t.site.site_id))},async updateTodayOrders(){const t=l();t.site.site_id&&(this.TodayOrders=await d.UpdateOrdersBySite(t.site.site_id))},startOrderUpdates(){this.interval=setInterval(()=>{this.updateTodayOrders()},1e4)},stopOrderUpdates(){clearInterval(this.interval)}}});export{l as a,d as o,c as u};
