import{r as s,B as G,J as H,C as J,s as $,a as p,o as u,c as D,g as i,w as g,b as n,t as T,u as c,e as f,f as v,k as b,U as V,v as K,F as Q,d as W,R as _,q as z,x as X}from"./index-35b299a4.js";/* empty css                                                     */const Y={style:{"max-width":"500px"},class:"m-auto px-3 my-8"},Z={class:"m-0 my-3"},ee={style:{display:"flex","justify-content":"end"}},te=n("h6",null," Ingrediente",-1),ae=n("h6",null," Unidad de medida",-1),ne=n("h6",null," Cantidad",-1),le=n("h6",null," Cantidad antes de merma",-1),oe={style:{display:"flex","justify-content":"end"}},ie=n("h6",null," Ingrediente",-1),se=n("h6",null," Unidad de medida",-1),de=n("h6",null," Cantidad",-1),re=n("h6",null," Cantidad antes de merma",-1),ue={style:{display:"flex","justify-content":"end"}},me={class:"text-center",style:{"margin-top":"3rem"}},pe=n("i",{class:"fa-solid fa-bowl-rice mr-2"},null,-1),ce={style:{"text-transform":"uppercase"}},ve={class:"grid mx-0 md:mx-0",style:{"margin-top":"3rem"}},_e={class:"col-12 p-0 md:p-4"},ye=n("h5",{style:{},class:"py-3 m-0"}," Ingrediente asociado",-1),ge=n("h5",{style:{},class:"py-3 m-0"}," Iva",-1),fe=n("h5",{style:{},class:"py-3 m-0"}," Unidad de medida",-1),he=n("h5",{style:{},class:"py-3 m-0"}," Presentacion convertir a gramos",-1),be={class:"col-12 my-4 px-0",style:{display:"flex","justify-content":"end"}},ke={__name:"NewCDIrecipeDataSheetPasamanos",setup(Ve){const I=s(!1),a=s({}),P=async()=>{var d;const o={...l.value};if(!a.value||o.iva===null||!((d=o.unitMeasure)!=null&&d.id)||!o.convert_value){alert("por favor llene todos los campos");return}const t={cdi_recipe_data_sheet:{name:a.value.ingredient_name,iva:o.iva,pasamanos:!0},cdi_recipe_data_sheet_on_ingredient:{unit_measure_id:o.unitMeasure.id,convert_value:o.convert_value},cdi_recipe_data_Ingredient:{ingredient_id:a.value.id,unit_measure_id:o.unitMeasure.id,quantity:1,cdi_recipe_data_sheet_id:0}};console.log(t);const m=await b.post(`${V}/create-cdi-recipe-data-sheet-pasamanos/`,t,"Creando receta");X.push({name:"cdi_recipe_data_sheet_pasamanos",params:{product_id:m,recipe_name:a.value.ingredient_name}}),q.value=!1};G();const q=s(!1),E=s({}),M=s(!1),l=s({name:null,portion_size:33,portion_number:0,preparation_time:"00:00",cooking_time:"00:00",service_temperature:0,selling_price:0,taxes:0,presentation:"Informacion no proporcionada",preparation_equipment:"Informacion no proporcionada",elaboration:"Informacion no proporcionada"}),w=s([{}]),x=s([]);s(!1);const U=s(!1);s([{label:"Costo total del bache",field:"portion_size"},{label:"Costo total por kilo",field:"portion_number"},{label:"Costo con MP, Mano Obra y CIF",field:"preparation_time"},{label:"Precio de venta kilo con 15%",field:"cooking_time"},{label:"Precio de venta kilo con 19% IVA",field:"service_temperature"}]);const A=async()=>{const o=E.value.id;await b.delete(`${V}/delete-recipe-data-ingredient/${o}`,"Borrando ingrediente"),U.value=!1,k()},B=async()=>{const o={...a.value},t={ingredient_id:o.ingredient.id,recipe_data_sheet_id:N.value.recipe_data_sheet.id,unit_measure_id:o.unitMeasure.id,quantity:o.quantity,quantity_before_shrinkage:o.quantity_before_shrinkage};await b.put(`${V}/update-recipe-data-ingredient/${a.value.id}`,t,"modificando ingrediente"),k(),I.value=!1},R=s([...[{header:"Nombre",value:"ingredient_name",type:"max-content",width:""},{header:"Unidad de medida",value:"unit_measure",width:"10",type:"max-content"},{header:"Cantidad",value:"quantity",width:"number",type:"number"},{header:"Cantidad Antes de merma",value:"quantity_before_shrinkage",type:"max-content",type:"number"},{header:"Costo unitario",value:"unit_cost",width:"number",type:"money"},{header:"Porcentaje del costo",value:"total_cost",width:"number",type:"calc_percent"},{header:"Costo total",value:"total_cost",width:"number",type:"money"}]]);H(()=>{var o;return(o=R.value)==null?void 0:o.map(t=>t.value)});const L=s([{name:"Tamano de la porcion",fiel:"portion_size",type:"number"},{name:"Numero de porciones",fiel:"portion_number",type:"number"},{name:"Tiempo de preparacion",fiel:"preparation_time",type:"time"},{name:"Tiempo de coccion",fiel:"cooking_time",type:"time"},{name:"Temperatura de servicio",fiel:"service_temperature",type:"number"},{name:"Precio de venta",fiel:"selling_price",type:"money"},{name:"Impuestos",fiel:"taxes",type:"percent"},{name:"presentacion",fiel:"presentation",type:"textArea"},{name:"Equipo de preparacion",fiel:"preparation_equipment",type:"textArea"},{name:"Elaboracion",fiel:"elaboration",type:"textArea"}]);J(l,async(o,t)=>{var m;l.value.purchasing_unit_measure_id=((m=o.purchasing_unit_measure)==null?void 0:m.id)||null},{deep:!0});const F=async o=>{const t={...o},m=d=>{if(typeof d=="string")return/^\d{2}:\d{2}:\d{2}$/.test(d)?d.slice(0,5):d;if(d instanceof Date&&!isNaN(d.getTime())){const S=d.getHours().toString().padStart(2,"0"),y=d.getMinutes().toString().padStart(2,"0");return`${S}:${y}`}else return console.error("El tiempo proporcionado no es una fecha vÃ¡lida"),""};t.preparation_time=m(t.preparation_time),t.cooking_time=m(t.cooking_time),console.log(t),await b.put(`${V}/update-recipe-data-sheet/${t.id}`,t,"Modificando receta"),M.value=!1,await k()},N=s({recipe_data_sheet:[{init:!0,id:13,portion_size:0,portion_number:0,preparation_time:"00:00:00",cooking_time:"00:00:00",service_temperature:0,selling_price:0,taxes:0,presentation:"",preparation_equipment:"",elaboration:"",product_id:100,exist:!0,created_at:"2024-08-02T21:54:57.980587+00:00"}],ingredients:[]}),k=async()=>{w.value=await b.get(`${V}/get-cdi-prices-table`,"cargando ingredientes"),x.value=await b.get(`${V}/daily_inventory_unit_measures`)};$(async()=>{await k()});const j=s(null),O=()=>{j.value={global:{value:null,matchMode:K.CONTAINS}}};return $(()=>{O()}),(o,t)=>{const m=p("inputText"),d=p("Textarea"),S=p("Calendar"),y=p("Button"),C=p("Dialog"),h=p("Dropdown");return p("InputText"),p("column"),p("DataTable"),u(),D("div",Y,[i(C,{style:{width:"40rem"},header:"Actualizar receta",class:"mx-2",visible:M.value,"onUpdate:visible":t[1]||(t[1]=e=>M.value=e),modal:""},{footer:g(()=>[i(y,{onClick:t[0]||(t[0]=e=>F(l.value)),severity:"danger",class:"mt-4",label:"Modificar Receta"})]),default:g(()=>[(u(!0),D(Q,null,W(L.value,e=>(u(),D("div",null,[n("h6",Z,T(e.name),1),e.type=="text"?(u(),f(m,{key:0,modelValue:l.value[e.fiel],"onUpdate:modelValue":r=>l.value[e.fiel]=r,style:{width:"100%"}},null,8,["modelValue","onUpdate:modelValue"])):v("",!0),e.type=="textArea"?(u(),f(d,{key:1,modelValue:l.value[e.fiel],"onUpdate:modelValue":r=>l.value[e.fiel]=r,rows:"6",style:{width:"100%","min-width":"100%",resize:"none"}},null,8,["modelValue","onUpdate:modelValue"])):v("",!0),e.type=="time"?(u(),f(S,{key:2,timeOnly:"",modelValue:l.value[e.fiel],"onUpdate:modelValue":r=>l.value[e.fiel]=r,rows:"6",style:{width:"100%"}},null,8,["modelValue","onUpdate:modelValue"])):v("",!0),e.type=="money"?(u(),f(c(_),{key:3,modelValue:l.value[e.fiel],"onUpdate:modelValue":r=>l.value[e.fiel]=r,style:{width:"100%"},locale:"es-ES","max-fraction-digits":"3",prefix:"$"},null,8,["modelValue","onUpdate:modelValue"])):v("",!0),e.type=="number"?(u(),f(c(_),{key:4,locale:"es-ES","max-fraction-digits":"3",modelValue:l.value[e.fiel],"onUpdate:modelValue":r=>l.value[e.fiel]=r,style:{width:"100%"}},null,8,["modelValue","onUpdate:modelValue"])):v("",!0),e.type=="percent"?(u(),f(c(_),{key:5,locale:"es-ES","max-fraction-digits":"3",modelValue:l.value[e.fiel],"onUpdate:modelValue":r=>l.value[e.fiel]=r,style:{width:"100%"},suffix:"%"},null,8,["modelValue","onUpdate:modelValue"])):v("",!0)]))),256))]),_:1},8,["visible"]),i(C,{class:"mx-2",header:"Eliminar ingrediente",visible:U.value,"onUpdate:visible":t[4]||(t[4]=e=>U.value=e),modal:""},{footer:g(()=>[n("div",ee,[i(y,{size:"small",label:"cancelar",onClick:t[2]||(t[2]=e=>U.value=!1),severity:"help"}),i(y,{size:"small",onClick:t[3]||(t[3]=e=>A()),label:"Eliminar ingrediente",severity:"danger",text:""})])]),default:g(()=>{var e;return[n("h6",null,[z("seguro que desea eliminar el Ingrediente "),n("b",null,T((e=E.value)==null?void 0:e.ingredient_name),1),z(" ?")])]}),_:1},8,["visible"]),i(C,{style:{width:"30rem"},header:"Nuevo Ingrediente",class:"mx-2",visible:q.value,"onUpdate:visible":t[9]||(t[9]=e=>q.value=e),modal:""},{footer:g(()=>[n("div",oe,[i(y,{class:"m-0",size:"small",label:"Agregar",onClick:o.addIngredintToRecipe,severity:"help"},null,8,["onClick"])])]),default:g(()=>[te,i(h,{modelValue:a.value.ingredient,"onUpdate:modelValue":t[5]||(t[5]=e=>a.value.ingredient=e),options:w.value,filter:"",optionLabel:"ingredient_name",style:{width:"100%"}},null,8,["modelValue","options"]),ae,i(h,{modelValue:a.value.unitMeasure,"onUpdate:modelValue":t[6]||(t[6]=e=>a.value.unitMeasure=e),options:x.value,optionLabel:"name",style:{width:"100%"}},null,8,["modelValue","options"]),ne,i(c(_),{modelValue:a.value.quantity,"onUpdate:modelValue":t[7]||(t[7]=e=>a.value.quantity=e),locale:"es-ES","max-fraction-digits":"3",style:{width:"100%"}},null,8,["modelValue"]),le,i(c(_),{modelValue:a.value.quantity_before_shrinkage,"onUpdate:modelValue":t[8]||(t[8]=e=>a.value.quantity_before_shrinkage=e),locale:"es-ES","max-fraction-digits":"3",style:{width:"100%"}},null,8,["modelValue"])]),_:1},8,["visible"]),i(C,{style:{width:"30rem"},header:"Editar Ingrediente",class:"mx-2",visible:I.value,"onUpdate:visible":t[14]||(t[14]=e=>I.value=e),modal:""},{footer:g(()=>[n("div",ue,[i(y,{class:"m-0",size:"small",label:"Guardar",onClick:B,severity:"help"})])]),default:g(()=>[ie,i(h,{modelValue:a.value.ingredient,"onUpdate:modelValue":t[10]||(t[10]=e=>a.value.ingredient=e),options:w.value,optionLabel:"ingredient_name",style:{width:"100%"}},null,8,["modelValue","options"]),se,i(h,{modelValue:a.value.unitMeasure,"onUpdate:modelValue":t[11]||(t[11]=e=>a.value.unitMeasure=e),options:x.value,optionLabel:"name",style:{width:"100%"}},null,8,["modelValue","options"]),de,i(c(_),{modelValue:a.value.quantity,"onUpdate:modelValue":t[12]||(t[12]=e=>a.value.quantity=e),locale:"es-ES","max-fraction-digits":"3",style:{width:"100%"}},null,8,["modelValue"]),re,i(c(_),{modelValue:a.value.quantity_before_shrinkage,"onUpdate:modelValue":t[13]||(t[13]=e=>a.value.quantity_before_shrinkage=e),locale:"es-ES","max-fraction-digits":"3",style:{width:"100%"}},null,8,["modelValue"])]),_:1},8,["visible"]),n("h2",me,[pe,n("b",ce,T(l.value.name||"Nuevo pasamanos"),1)]),n("div",ve,[n("div",_e,[ye,i(h,{modelValue:a.value,"onUpdate:modelValue":t[15]||(t[15]=e=>a.value=e),placeholder:"Ingrediente pasamanos",options:w.value,filter:"",optionLabel:"name",style:{width:"100%"}},null,8,["modelValue","options"]),ge,i(c(_),{locale:"es-ES","max-fraction-digits":"3",modelValue:l.value.iva,"onUpdate:modelValue":t[16]||(t[16]=e=>l.value.iva=e),suffix:"%",placeholder:"Iva cuando se usa como ingrediente",style:{width:"100%"}},null,8,["modelValue"]),fe,i(h,{options:x.value,optionLabel:"name",modelValue:l.value.unitMeasure,"onUpdate:modelValue":t[17]||(t[17]=e=>l.value.unitMeasure=e),placeholder:"Un. med. cuando se usa como ingrediente",style:{width:"100%"}},null,8,["options","modelValue"]),he,i(c(_),{modelValue:l.value.convert_value,"onUpdate:modelValue":t[18]||(t[18]=e=>l.value.convert_value=e),placeholder:"Para Kilogramos en 1000",style:{width:"100%"},locale:"es-ES","max-fraction-digits":"3"},null,8,["modelValue"]),n("div",be,[N.value.recipe_data_sheet.init?v("",!0):(u(),f(y,{key:0,size:"small",severity:"info",onClick:P,label:"Crear Pasamanos"}))])]),v("",!0)]),v("",!0)])}}};export{ke as default};
