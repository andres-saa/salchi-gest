import{I as Je,i as Z,G as j,h as l,D as K,C as Ye,J as Ee,M as Ze,g as D,o as s,c as a,f as g,e as R,a as i,F as H,q as X,k as c,t as C,n as w,d as I,u as $e,r as Ae,L as Se,b as Ke,H as P,j as pe,p as Xe,m as et,N as je,_ as tt}from"./index-d6f027a1.js";import{u as ot,P as st}from"./Messages.vue_vue_type_style_index_0_scoped_32580997_lang-53b5ec46.js";const p=z=>(Xe("data-v-32580997"),z=z(),et(),z),at={key:0},it=["src"],rt=["src"],lt=["href"],nt=p(()=>i("i",{class:"pi pi-file"},null,-1)),dt={style:{color:"white",margin:"0","font-weight":"300"}},ct=["innerHTML"],ut=["innerHTML"],mt={style:{color:"white",margin:"0","font-weight":"300",position:"absolute",bottom:".5rem",right:"1rem","min-width":"max-content",display:"flex",gap:".5rem"}},pt={style:{opacity:".5"}},_t={key:0,class:"fa-solid fa-check-double",style:{color:"greenyellow"}},ht={key:1,class:"fa-solid fa-check",style:{color:"greenyellow"}},gt={key:2,class:"fa-solid fa-check",style:{color:"gray"}},ft={key:1,style:{position:"absolute",left:"-8px",top:"0",color:"#2f2f41"},viewBox:"0 0 8 13",height:"13",width:"8"},vt=p(()=>i("path",{opacity:"0.13",fill:"#0000000",d:"M1.533,3.568L8,12.193V1H2.812C1.042,1,0.474,2.156,1.533,3.568z"},null,-1)),yt=p(()=>i("path",{fill:"currentColor",d:"M1.533,2.568L8,11.193V0L2.812,0C1.042,0,0.474,1.156,1.533,2.568z"},null,-1)),wt=[vt,yt],kt={key:2,style:{position:"absolute",right:"-8px",top:"0",color:"#0a3744"},viewBox:"0 0 8 13",height:"13",width:"8"},bt=p(()=>i("path",{opacity:"0.13",d:"M5.188,1H0v11.193l6.467-8.625C7.526,2.156,6.958,1,5.188,1z"},null,-1)),xt=p(()=>i("path",{fill:"currentColor",d:"M5.188,0H0v11.193l6.467-8.625C7.526,1.156,6.958,0,5.188,0z"},null,-1)),Ct=[bt,xt],Mt={style:{display:"flex",gap:"1rem","flex-direction":"column",padding:"1rem  0rem"}},Lt={style:{display:"flex"}},Tt=p(()=>i("i",{class:"fa fa-laugh-wink emoji-picker"},null,-1)),Et={key:0,style:{position:"absolute",inset:"0",background:"#00000080","z-index":"500000",display:"flex","align-items":"center","justify-content":"center",color:"#fff","font-size":"1.6rem","pointer-events":"none"}},$t={style:{position:"relative",height:"100%",width:"100%"}},At={style:{margin:"0",color:"white","font-weight":"400"}},St=p(()=>i("i",{class:"fa-solid fa-message text-xl p-1"},null,-1)),jt=p(()=>i("i",{class:"fa-solid fa-message text-xl p-1"},null,-1)),Dt=["src","onClick"],Rt=["src"],Ht=["href"],It=p(()=>i("i",{class:"pi pi-file"},null,-1)),zt=["src","onClick"],Ut=["src"],Bt=["href"],Vt=p(()=>i("i",{class:"pi pi-file"},null,-1)),Ft={style:{color:"white",margin:"0","font-weight":"300"}},Ot=["innerHTML"],Pt=["innerHTML"],Nt=["onClick"],Wt={style:{color:"white",margin:"0","font-weight":"300"}},Qt=["innerHTML"],qt=["innerHTML"],Gt=["onClick"],Jt={style:{color:"white",margin:"0","font-weight":"300",position:"absolute",bottom:".5rem",right:"1rem","min-width":"max-content",display:"flex",gap:".5rem"}},Yt={style:{opacity:".5"}},Zt={key:0,class:"fa-solid fa-check-double",style:{color:"greenyellow"}},Kt={key:1,class:"fa-solid fa-check",style:{color:"greenyellow"}},Xt={key:2,class:"fa-solid fa-check",style:{color:"gray"}},eo={key:4,style:{position:"absolute",left:"-8px",top:"0",color:"#2f2f41"},viewBox:"0 0 8 13",height:"13",width:"8"},to=p(()=>i("path",{opacity:"0.13",fill:"#0000000",d:"M1.533,3.568L8,12.193V1H2.812C1.042,1,0.474,2.156,1.533,3.568z"},null,-1)),oo=p(()=>i("path",{fill:"currentColor",d:"M1.533,2.568L8,11.193V0L2.812,0C1.042,0,0.474,1.156,1.533,2.568z"},null,-1)),so=[to,oo],ao={key:5,style:{position:"absolute",right:"-8px",top:"0",color:"#0a3744"},viewBox:"0 0 8 13",height:"13",width:"8"},io=p(()=>i("path",{opacity:"0.13",d:"M5.188,1H0v11.193l6.467-8.625C7.526,2.156,6.958,1,5.188,1z"},null,-1)),ro=p(()=>i("path",{fill:"currentColor",d:"M5.188,0H0v11.193l6.467-8.625C7.526,1.156,6.958,0,5.188,0z"},null,-1)),lo=[io,ro],no={key:1,style:{height:"100%",width:"3rem","min-width":"3rem","aspect-ratio":"1/1","background-color":"rgb(3 88 95 / 53%)","border-radius":"50%",display:"flex","align-items":"center","justify-content":"center","text-transform":"uppercase"}},co={style:{margin:"0",color:"white","font-weight":"400"}},uo={key:0,style:{display:"flex",gap:"1rem","justify-content":"end",width:"100%"}},mo={style:{"background-color":"#0a3744","max-width":"20rem",width:"100%","border-radius":".5rem",height:"4rem"}},po={style:{color:"white",margin:"0","font-weight":"300",display:"flex","align-items":"center",gap:".5rem",height:"100%",padding:"1rem 1rem 1rem 1rem"}},_o=p(()=>i("i",{class:"pi pi-send",style:{color:"white"}},null,-1)),ho=p(()=>i("div",{style:{height:"100%",width:"3rem","min-width":"3rem","aspect-ratio":"1/1","background-color":"rgb(3 88 95 / 53%)","border-radius":"50%",display:"flex","align-items":"center","justify-content":"center","text-transform":"uppercase",padding:".5rem"}},[i("img",{style:{height:"2rem",width:"2rem","aspect-ratio":"1/1","object-fit":"contain"},src:"https://backend.salchimonster.com/read-photo-product/xai0dVnL",alt:""})],-1)),go={key:0,style:{"text-align":"center",opacity:"0.6"}},fo={key:1,style:{"max-height":"60vh","overflow-y":"auto"}},vo={key:0,style:{position:"relative","border-radius":".3rem"}},yo=["src"],wo={key:1,style:{position:"relative"}},ko=["src"],bo={key:2,style:{position:"relative"}},xo=p(()=>i("img",{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/8/87/PDF_file_icon.svg/1200px-PDF_file_icon.svg.png",style:{width:"10rem"}},null,-1)),Co={style:{flex:"1 1 auto"}},Mo={style:{width:"100%","justify-content":"end",display:"flex"}},Lo={key:0,style:{"background-color":"#00000080",position:"fixed",width:"100vw",height:"100vh",left:"0",top:"0","z-index":"1000000",display:"flex","align-items":"center","justify-content":"center",opacity:"1"}},To={style:{"max-height":"90vh",position:"relative","max-width":"90vw"}},Eo=["src"],$o=Je({__name:"Messages",props:{send_function:{type:Function,default:()=>{}},change_expiration:{type:Function,default:()=>{}},send_text:{type:Function,default:()=>{}}},emits:["down"],setup(z,{expose:De,emit:Ao}){const _e=e=>{e.target.closest(".emoji-picker")||(M.value=!1)};Z(()=>{document.addEventListener("click",_e)}),j(()=>{document.removeEventListener("click",_e)});const M=l(!1),U=l(null),N=l(!1),Re=ot();function W(e){var r;Array.from(((r=e.clipboardData)==null?void 0:r.items)||[]).forEach(d=>{if(d.kind==="file"){const m=d.getAsFile();if(!m)return;_.value.push({file:m,name:m.name||`pasted-${Date.now()}.${m.type.split("/")[1]||"bin"}`,type:m.type,caption:"",preview:URL.createObjectURL(m)}),L.value=!0}})}const ee=z;Z(()=>window.addEventListener("paste",W)),j(()=>window.removeEventListener("paste",W)),Z(()=>{window.addEventListener("paste",W)}),j(()=>{window.removeEventListener("paste",W)});const He=e=>{B.value+=e.i,M.value=!1},Q=l(!1),_=l([]),L=l(!1),te=l(!1),he=l(""),oe=e=>{te.value=!0,he.value=`${e}?size=visual`};function se(e){const t=_.value.splice(e,1);t.length&&t[0].preview&&URL.revokeObjectURL(t[0].preview)}function Ie(){alert("removeAllfiles"),_.value.forEach(e=>e.preview&&URL.revokeObjectURL(e.preview)),_.value=[]}function ze(e){e.currentTarget===e.target&&(Q.value=!1)}function T(e){return`${P}/files/${e.file_type}s/${e.file_id}?size=thumbnail`}function ge(){_.value.forEach(e=>e.preview&&URL.revokeObjectURL(e.preview)),_.value=[]}K(L,e=>{e||ge()}),j(()=>{ge()});const Ue=async e=>{if(!(e.message_data.current_status_id>=3||e._marking)){e._marking=!0;try{await pe.post(`${P}/read-message/${e.message_data.id}/${f.params.restaurant_id}`,!1),e.message_data.current_status_id=3}catch(t){console.error("No se pudo marcar como leÃ­do",t)}}},Be=e=>{ee.send_text(e,n.value),B.value="",N.value=!1},fe=e=>{e.preventDefault(),Q.value=!1,Array.from(e.dataTransfer.files||[]).forEach(r=>{const d={file:r,name:r.name,type:r.type,caption:"",preview:""};r.type.startsWith("image/")&&(d.preview=URL.createObjectURL(r)),_.value.push(d)}),_.value.length&&(L.value=!0)},Ve=()=>{const e=[..._.value];L.value=!1,_.value.forEach(t=>t.preview&&URL.revokeObjectURL(t.preview)),_.value=[],ee.send_function(e)},Fe=()=>{if(!u.value)return;const e=u.value.getBoundingClientRect();k.value.forEach((t,r)=>{if(t.message_data.employer_id||t.message_data.current_status_id>=3)return;const d=u.value.children[r];if(!d)return;const m=d.getBoundingClientRect();m.top>=e.top&&m.bottom<=e.bottom&&Ue(t)})};l(!1);const f=Ye(),ve=e=>{if(!e)return"";const t=e.split(" "),r=Array.from(t[0])[0],d=t[1]?Array.from(t[1])[0]:"";return r+d};let h=null,q=null,ae=!0;const ie=l(!0),k=l([]),re=l({}),u=l(null),E=l(!1),b=l(0),B=l(""),G=l(0),ye=l(20),$=l(!1),le=l(!1),V=l(!1),ne=l({}),n=l({message_data:{id:3559,user_id:10,restaurant_id:1,content:`final del mensaje
`,created_at:"2025-05-03T02:16:30.361038+00:00",current_status_id:1,employer_id:1082,employer_name:"ANDRES FELIPE ARrECHEA",wa_id:"wamid.HBgMNTczMjI2ODkyOTg4FQIAERgSQzg4QzYyQzg0MDg0RkY2OEVDAA==",wa_timestamp:"1746238590",context_message_id:"wamid.HBgMNTczMjI2ODkyOTg4FQIAERgSNDIyNUIxQkZEMkE1MTA4RDA3AA==",local_dt:"2025-05-02T21:16:30",file_type:null,file_id:null},time:"09:16 PM",date:"02/05/2025",day_label:"hoy",contest:{message_data:{id:3490,user_id:10,restaurant_id:1,content:"fsfs",created_at:"2025-05-03T01:28:04.499413+00:00",current_status_id:1,employer_id:1082,employer_name:"ANDRES FELIPE ARrECHEA",wa_id:"wamid.HBgMNTczMjI2ODkyOTg4FQIAERgSNDIyNUIxQkZEMkE1MTA4RDA3AA==",wa_timestamp:"1746235684",context_message_id:"null",file_type:null,file_id:null,local_dt:"2025-05-02T20:28:04",time:"08:28 PM",date:"02/05/2025",day_label:"hoy"},time:"08:28 PM",date:"02/05/2025",day_label:"hoy"}});l({});const we=e=>{N.value=!0,n.value=e},de=e=>{ne.value[e]=!ne.value[e]},F=e=>!!ne.value[e],A=e=>{if(!e)return"";let t=e.replace(/\n/g,"<br/>");return t=t.replace(/\*([^*]+)\*/g,"<strong>$1</strong>"),t},Oe=Ee(()=>({position:"absolute",zIndex:"300000",height:"3rem",width:"3rem",borderRadius:"50%",bottom:"5rem",right:"2rem",backgroundColor:V.value?"rgb(33, 150, 243)":"rgba(255, 255, 255,.1)",color:"white",border:"none",padding:"0.5rem 1rem",cursor:"pointer"})),Pe=Ee(()=>({position:"absolute",zIndex:"300000",height:"2rem",display:"flex",alignItems:"center",justifyContent:"center",width:"2rem",borderRadius:"50%",bottom:"5rem",right:"1rem",backgroundColor:"rgb(156, 39, 176)",color:"white",border:"none",padding:"0.5rem 1rem",cursor:"pointer"})),S=(e,t="thumbnail")=>`${P}/files/images/${e.message_data.file_id}?size=${t}`,ce=async(e=!0)=>{var r,d,m;if(me.value=!1,$.value=!0,(r=U.value)==null||r.abort(),U.value=new AbortController,G.value=0,le.value=!1,!f.params.user_id||!f.params.restaurant_id)return;const t=await pe.get(`${P}/conversation/${f.params.restaurant_id}/${f.params.user_id}/${G.value}/20`,!1,{signal:U.value.signal});k.value=((d=t==null?void 0:t[0])==null?void 0:d.messages)||[],re.value=((m=t==null?void 0:t[0])==null?void 0:m.user)||{},setTimeout(()=>{me.value=!0},0),ie.value&&(ie.value=!1),$.value=!1};K(V,e=>{e||(b.value=0)});const Ne=async e=>{const t=k.value.findIndex(r=>r.message_data.wa_id===e.message_data.wa_id);t!==-1?k.value[t]=e:f.params.user_id===e.message_data.wa_user_id&&(k.value.push(e),e.message_data.employer_id||(E.value=!0,b.value++)),await je()},We=async()=>{var m;if($.value||le.value)return;$.value=!0;const e=u.value?u.value.scrollHeight:0,t=G.value+ye.value,r=await pe.get(`${P}/conversation/${f.params.restaurant_id}/${f.params.user_id}/${t}/${ye.value}`,!1),d=((m=r==null?void 0:r[0])==null?void 0:m.messages)||[];if(d.length===0)le.value=!0;else{k.value=[...d,...k.value],G.value=t,await je();const Y=u.value.scrollHeight;u.value.scrollTop=Y-e}$.value=!1},ke=()=>{if(Fe(),!u.value)return;const{scrollTop:e,scrollHeight:t,clientHeight:r}=u.value;e<50&&We(),e+r>=t-50?(E.value=!1,V.value=!1):E.value=!0},Qe=()=>{u.value&&(u.value.scrollTo({bottom:0}),E.value=!1,V.value=!1),b.value=0},J=()=>{u.value&&(setTimeout(()=>{u.value.scrollTo({top:u.value.scrollHeight})},100),E.value=!1,V.value=!1),b.value=0};function be(){q&&(clearTimeout(q),q=null),h&&(ae=!1,h.close(1e3,"routeâ€‘change"),h.onopen=h.onmessage=h.onerror=h.onclose=null,h=null)}function ue(){if(!f.params.user_id)return;const e=`wss://sockets-service.salchimonster.com/ws/${f.params.user_id}`;h=new WebSocket(e),ae=!0,h.onopen=()=>{console.log("ðŸŸ¢ Conectado a",e)},h.onmessage=t=>{const r=JSON.parse(t.data);r&&(Ne(r),ee.change_expiration(!1))},h.onerror=t=>console.error("WebSocket error",t),h.onclose=t=>{console.log("ðŸ”´ Socket cerrado",t.reason||t.code),ae&&(q=window.setTimeout(ue,5e3))}}Z(()=>{ce(),ue(),u.value&&u.value.addEventListener("scroll",ke)}),j(()=>{h&&h.close(),u.value&&u.value.removeEventListener("scroll",ke)}),K(()=>f.params,()=>{ie.value=!0,k.value=[],be(),ce(),J(),ue(),b.value=0}),j(()=>{var e;(e=U.value)==null||e.abort(),be()}),Ze((e,t,r)=>{var d;(d=U.value)==null||d.abort(),r()});const me=l(!0);return K(()=>f.params,()=>{ce()}),De({scrollToBottom:Qe,scrollToBottomNoSmooth:J,getAllFiles:()=>_.value.map(e=>e.file)}),(e,t)=>{const r=D("Button"),d=D("Textarea"),m=D("Dialog"),Y=D("ProgressSpinner"),qe=D("progressSpinner"),Ge=D("InputText");return s(),a(H,null,[g(m,{visible:N.value,"onUpdate:visible":t[5]||(t[5]=o=>N.value=o),close:M.value=!1,header:"Acciones del mensaje",modal:!0,style:w([{width:"90vw",maxWidth:" 30rem"},{"background-color":"rgb(0, 1, 22)",display:"flex"}]),closable:!0,dismissableMask:!1},{default:R(()=>{var o,v,y;return[i("div",{style:w([n.value.message_data.employer_id?"background-color:#0a3744;border-radius:.5rem 0 .5rem .5rem;":"background-color:#2f2f41;border-radius:0 .5rem .5rem .5rem;",{padding:"1rem 1rem 2.5rem 1rem","overflow-wrap":"break-word","word-break":"break-word","max-width":"100%","min-width":"10rem",position:"relative",display:"flex","flex-direction":"column",gap:".5rem"}])},[n.value.message_data.file_type?(s(),a(H,{key:0},[n.value.message_data.file_type==="image"?(s(),a("div",at,[i("img",{class:"img-fluid",src:S(n.value),onClick:t[0]||(t[0]=x=>oe(S(n.value))),style:{"border-radius":".3rem",width:"18rem","object-fit":"contain","aspect-ratio":"1 / 1",cursor:"pointer"}},null,8,it)])):n.value.message_data.file_type==="audio"?(s(),a("audio",{key:1,src:T(n.value.message_data),controls:"",style:{width:"100%","min-width":"20rem","max-width":"100%","background-color":"white","border-radius":".5rem"}},null,8,rt)):(s(),a("a",{key:2,href:T(n.value.message_data),target:"_blank",style:{color:"#2196f3","text-decoration":"none","align-self":"flex-start",display:"flex","align-items":"center",gap:".5rem"}},[nt,X(" Descargar archivo ")],8,lt))],64)):c("",!0),i("h6",dt,[F(n.value.message_data.id)?(s(),a("span",{key:1,innerHTML:A(n.value.message_data.content)},null,8,ut)):(s(),a("span",{key:0,innerHTML:A(((o=n.value.message_data.content)==null?void 0:o.substring(0,200))+(((v=n.value.message_data.content)==null?void 0:v.length)>200?"â€¦":""))},null,8,ct)),((y=n.value.message_data.content)==null?void 0:y.length)>200?(s(),a("button",{key:2,onClick:t[1]||(t[1]=x=>de(e.message.message_data.id)),style:{background:"none",border:"none",color:"#2196f3",cursor:"pointer",padding:"0 .5rem"}}," Ver "+C(F(n.value.message_data.id)?"menos":"mÃ¡s"),1)):c("",!0)]),i("h6",mt,[i("span",pt,C(n.value.time),1),n.value.message_data.current_status_id==3&&n.value.message_data.employer_id?(s(),a("i",_t)):n.value.message_data.current_status_id==2&&n.value.message_data.employer_id?(s(),a("i",ht)):n.value.message_data.current_status_id==1&&n.value.message_data.employer_id?(s(),a("i",gt)):c("",!0)]),n.value.message_data.employer_id?(s(),a("svg",kt,Ct)):(s(),a("svg",ft,wt))],4),i("div",Mt,[i("div",null,[M.value?(s(),I($e(st),{key:0,class:"emoji-picker",native:!0,style:{position:"absolute",bottom:"4rem","z-index":"1000"},onSelect:He})):c("",!0),g(r,{style:{position:"absolute",right:"-1rem"}})]),g(d,{modelValue:B.value,"onUpdate:modelValue":t[2]||(t[2]=x=>B.value=x),autoResize:"",rows:"4",placeholder:"Escribe un mensajeâ€¦",style:{width:"100%","background-color":""}},null,8,["modelValue"]),i("div",Lt,[g(r,{class:"emoji-picker",text:"",style:{"font-size":"2rem"},onClick:t[3]||(t[3]=x=>M.value=!M.value)},{default:R(()=>[Tt]),_:1}),g(r,{label:"Responder",icon:"pi pi-send",severity:"help",style:{width:"100%"},onClick:t[4]||(t[4]=x=>Be(B.value))})])])]}),_:1},8,["visible","close"]),i("div",{style:{height:"100%",position:"relative",display:"flex","justify-content":"center"},onDragover:t[8]||(t[8]=Se(()=>{},["prevent"])),onDragenter:t[9]||(t[9]=o=>Q.value=!0),onDragleave:ze,onDrop:fe,class:Ke(me.value?"container-messages":".container-oculto")},[Q.value?(s(),a("div",Et," Suelte aquÃ­ ")):c("",!0),$.value?(s(),I(Y,{key:1,style:{width:"50px",height:"50px",position:"absolute","z-index":"100",color:"white"},strokeWidth:"8",fill:"transparent",animationDuration:".3s","aria-label":"Custom ProgressSpinner"})):c("",!0),i("div",$t,[i("div",{ref_key:"messagesContainer",ref:u,style:{padding:"1rem",display:"flex","flex-direction":"column",gap:"0rem","overflow-y":"auto",height:"100%","padding-bottom":"4rem"}},[(s(!0),a(H,null,Ae(k.value,o=>{var v,y,x,xe,Ce,Me,Le,Te;return s(),a("div",{key:o.message_data.id},[i("div",{class:"message",style:w([o.message_data.employer_id?"justify-content: end;":"justify-content: start;",{width:"100%",display:"flex",gap:"1rem","padding-bottom":"1rem"}])},[o.message_data.employer_id?c("",!0):(s(),a("div",{key:0,style:w([`background-color:${(v=re.value)==null?void 0:v.color}`,{height:"100%",width:"3rem","aspect-ratio":"1/1","border-radius":"50%",display:"flex","align-items":"center","justify-content":"center","text-transform":"uppercase"}])},[i("h5",At,C(ve((y=re.value)==null?void 0:y.name)),1)],4)),i("div",{style:w([o.message_data.employer_id?"background-color:#0a3744;border-radius:.5rem 0 .5rem .5rem;":"background-color:#2f2f41;border-radius:0 .5rem .5rem .5rem;",{padding:"1rem 1rem 2.5rem 1rem","overflow-wrap":"break-word","word-break":"break-word","max-width":"60%","min-width":"15rem",position:"relative",display:"flex","flex-direction":"column",gap:".5rem"}])},[o.message_data.employer_id?(s(),I(r,{key:0,class:"options",style:{color:"white"},onClick:O=>we(o)},{default:R(()=>[St]),_:2},1032,["onClick"])):c("",!0),o.message_data.employer_id?c("",!0):(s(),I(r,{key:1,class:"options2",style:{color:"white"},onClick:O=>we(o)},{default:R(()=>[jt]),_:2},1032,["onClick"])),o.message_data.file_type?(s(),a(H,{key:2},[o.message_data.file_type==="image"?(s(),a("img",{key:0,class:"img-fluid",src:S(o),onClick:O=>oe(S(o)),style:{"max-width":"38rem","border-radius":".3rem",width:"18rem","object-fit":"cover","aspect-ratio":"1 / 1",cursor:"pointer"}},null,8,Dt)):o.message_data.file_type==="audio"?(s(),a("audio",{key:1,src:T(o.message_data),controls:"",style:{width:"100%","min-width":"20rem","max-width":"100%","background-color":"white","border-radius":".5rem"}},null,8,Rt)):(s(),a("a",{key:2,href:T(o.message_data),target:"_blank",style:{color:"#2196f3","text-decoration":"none","align-self":"flex-start",display:"flex","align-items":"center",gap:".5rem"}},[It,X(" Descargar archivo ")],8,Ht))],64)):c("",!0),o.contest?(s(),a("div",{key:3,class:"message",style:w([o.message_data.employer_id?"justify-content: end;":"justify-content: start;",{width:"100%",display:"flex",gap:"1rem"}])},[i("div",{style:w([o.message_data.employer_id?"background-color:#0a3744;border-radius:.5rem 0 .5rem .5rem;":"background-color:#2f2f41;border-radius:0 .5rem .5rem .5rem;",{"overflow-wrap":"break-word","word-break":"break-word","max-width":"100%","min-width":"10rem",position:"relative",display:"flex",opacity:".5","flex-direction":"column",gap:".5rem"}])},[o.contest.message_data.file_type?(s(),a(H,{key:0},[o.contest.message_data.file_type==="image"?(s(),a("img",{key:0,class:"img-fluid",src:S(o.contest),onClick:O=>oe(S(o.contest)),style:{"max-width":"38rem","border-radius":".3rem",width:"18rem","object-fit":"cover",cursor:"pointer"}},null,8,zt)):o.contest.message_data.file_type==="audio"?(s(),a("audio",{key:1,src:T(o.contest.message_data),controls:"",style:{width:"100%","min-width":"20rem","max-width":"100%","background-color":"white","border-radius":".5rem"}},null,8,Ut)):(s(),a("a",{key:2,href:T(o.contest.message_data),target:"_blank",style:{color:"#2196f3","text-decoration":"none","align-self":"flex-start",display:"flex","align-items":"center",gap:".5rem"}},[Vt,X(" Descargar archivo ")],8,Bt))],64)):c("",!0),i("h6",Ft,[F(o.message_data.id)?(s(),a("span",{key:1,innerHTML:A(o.contest.message_data.content)},null,8,Pt)):(s(),a("span",{key:0,innerHTML:A(((x=o.contest.message_data.content)==null?void 0:x.substring(0,200))+(((xe=o.contest.message_data.content)==null?void 0:xe.length)>30?"â€¦":""))},null,8,Ot)),((Ce=o.contest.message_data.content)==null?void 0:Ce.length)>30?(s(),a("button",{key:2,onClick:O=>de(o.contest.message_data.id),style:{background:"none",border:"none",color:"#2196f3",cursor:"pointer",padding:"0 .5rem"}},null,8,Nt)):c("",!0)])],4)],4)):c("",!0),i("h6",Wt,[F(o.message_data.id)?(s(),a("span",{key:1,innerHTML:A(o.message_data.content)},null,8,qt)):(s(),a("span",{key:0,innerHTML:A(((Me=o.message_data.content)==null?void 0:Me.substring(0,200))+(((Le=o.message_data.content)==null?void 0:Le.length)>200?"â€¦":""))},null,8,Qt)),((Te=o.message_data.content)==null?void 0:Te.length)>200?(s(),a("button",{key:2,onClick:O=>de(o.message_data.id),style:{background:"none",border:"none",color:"#2196f3",cursor:"pointer",padding:"0 .5rem"}}," Ver "+C(F(o.message_data.id)?"menos":"mÃ¡s"),9,Gt)):c("",!0)]),i("h6",Jt,[i("span",Yt,C(o.date)+" - "+C(o.time),1),o.message_data.current_status_id==3&&o.message_data.employer_id?(s(),a("i",Zt)):o.message_data.current_status_id==2&&o.message_data.employer_id?(s(),a("i",Kt)):o.message_data.current_status_id==1&&o.message_data.employer_id?(s(),a("i",Xt)):c("",!0)]),o.message_data.employer_id?(s(),a("svg",ao,lo)):(s(),a("svg",eo,so))],4),o.message_data.employer_id?(s(),a("div",no,[i("h5",co,C(ve(o.message_data.employer_name)),1)])):c("",!0)],4)])}),128)),$e(Re).sending?(s(),a("div",uo,[i("div",mo,[i("h6",po,[_o,X(),g(qe,{style:{width:"1.5rem",height:"1.5rem",color:"white"},strokeWidth:"8",fill:"transparent",animationDuration:".3s","aria-label":"Custom ProgressSpinner"})])]),ho])):c("",!0)],512),E.value||b.value>0?(s(),I(r,{key:0,icon:"pi pi-angle-down",onClick:J,style:w(Oe.value)},null,8,["style"])):c("",!0),b.value>0?(s(),I(r,{key:1,label:b.value,onClick:J,style:w(Pe.value)},null,8,["label","style"])):c("",!0)]),g(m,{visible:L.value,"onUpdate:visible":t[6]||(t[6]=o=>L.value=o),header:"Archivos a enviar",modal:!0,style:w([{width:"90vw",maxWidth:"40rem"},{"background-color":"rgb(0, 1, 22)",display:"flex"}]),onDragover:t[7]||(t[7]=Se(()=>{},["prevent"])),onDrop:fe,close:Ie,closable:!0,dismissableMask:!1},{footer:R(()=>[i("div",Mo,[g(r,{label:"Enviar",icon:"pi pi-check",severity:"success",onClick:Ve,disabled:_.value.length===0},null,8,["disabled"])])]),default:R(()=>[_.value.length===0?(s(),a("div",go," Arrastra archivos aquÃ­ ")):(s(),a("div",fo,[(s(!0),a(H,null,Ae(_.value,(o,v)=>(s(),a("div",{key:v,style:{display:"flex","align-items":"center","flex-direction":"column",position:"relative",gap:"1rem","margin-bottom":"1rem",padding:"1rem"}},[o.type.startsWith("image/")?(s(),a("div",vo,[i("img",{src:o.preview,style:{width:"30rem","box-shadow":"0 0 1rem #00000090","object-fit":"cover","border-radius":".3rem"}},null,8,yo),g(r,{icon:"pi pi-times",severity:"danger",onClick:y=>se(v),style:{position:"absolute",width:"1.5rem",height:"1.5rem",right:"0","border-radius":".3rem"}},null,8,["onClick"])])):o.type.startsWith("audio/")?(s(),a("div",wo,[i("audio",{src:o.preview,controls:"",style:{width:"100%"}},null,8,ko),g(r,{icon:"pi pi-times",severity:"danger",onClick:y=>se(v),style:{position:"absolute",width:"1.5rem",height:"1.5rem",right:"0","border-radius":".3rem"}},null,8,["onClick"])])):(s(),a("div",bo,[xo,g(r,{icon:"pi pi-times",severity:"danger",onClick:y=>se(v),style:{position:"absolute",width:"1.5rem",height:"1.5rem",right:"0","border-radius":".3rem"}},null,8,["onClick"])])),i("span",Co,C(o.name),1),g(Ge,{modelValue:o.caption,"onUpdate:modelValue":y=>o.caption=y,placeholder:"Texto opcionalâ€¦",style:{flex:"1 1 auto",width:"100%","background-color":"#ffffff20"}},null,8,["modelValue","onUpdate:modelValue"])]))),128))]))]),_:1},8,["visible"])],34),te.value?(s(),a("div",Lo,[i("div",To,[i("img",{style:{height:"90vh","max-width":"100%"},src:he.value},null,8,Eo),g(r,{onClick:t[10]||(t[10]=()=>te.value=!1),style:{position:"absolute",right:"-1rem",top:"-1rem",border:"3px solid black"},icon:"pi pi-times",severity:"danger",rounded:""})])])):c("",!0)],64)}}}),Ro=tt($o,[["__scopeId","data-v-32580997"]]);export{Ro as default};
