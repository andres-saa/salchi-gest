import{H as et,z as tt,i as te,I as U,h as c,D as Q,C as ot,G as He,M as at,g as B,o as a,c as r,f as w,e as x,a as s,F as V,q as oe,k as m,n as _,u as d,t as E,d as C,r as ze,L as Ie,b as st,J as q,j as ve,p as rt,m as it,N as Ue,_ as lt}from"./index-ef218aca.js";import{u as nt}from"./chat-77c5c91f.js";import{c as ct,P as dt}from"./Messages.vue_vue_type_style_index_0_scoped_09e7a26a_lang-b3074316.js";const p=F=>(rt("data-v-09e7a26a"),F=F(),it(),F),ut={key:0},mt=["src"],_t=["src"],pt=["href"],ht=p(()=>s("i",{class:"pi pi-file"},null,-1)),vt={style:{color:"white",margin:"0","font-weight":"300"}},ft=["innerHTML"],yt=["innerHTML"],gt={style:{color:"white",margin:"0","font-weight":"300",position:"absolute",bottom:".5rem",right:"1rem","min-width":"max-content",display:"flex",gap:".5rem"}},wt={key:0,class:"fa-solid fa-check-double",style:{color:"greenyellow"}},kt={key:1,class:"fa-solid fa-check",style:{color:"greenyellow"}},bt={key:2,class:"fa-solid fa-check",style:{color:"gray"}},xt=p(()=>s("path",{opacity:"0.13",fill:"#0000000",d:"M1.533,3.568L8,12.193V1H2.812C1.042,1,0.474,2.156,1.533,3.568z"},null,-1)),Ct=p(()=>s("path",{fill:"currentColor",d:"M1.533,2.568L8,11.193V0L2.812,0C1.042,0,0.474,1.156,1.533,2.568z"},null,-1)),$t=[xt,Ct],Mt=p(()=>s("path",{opacity:"0.13",d:"M5.188,1H0v11.193l6.467-8.625C7.526,2.156,6.958,1,5.188,1z"},null,-1)),Tt=p(()=>s("path",{fill:"currentColor",d:"M5.188,0H0v11.193l6.467-8.625C7.526,1.156,6.958,0,5.188,0z"},null,-1)),Lt=[Mt,Tt],Et={style:{display:"flex",gap:"1rem","flex-direction":"column",padding:"1rem  0rem"}},At={style:{display:"flex"}},St=p(()=>s("i",{class:"fa fa-laugh-wink emoji-picker"},null,-1)),jt={key:0,style:{position:"absolute",inset:"0",background:"#00000080","z-index":"500000",display:"flex","align-items":"center","justify-content":"center",color:"#fff","font-size":"1.6rem","pointer-events":"none"}},Dt={style:{position:"relative",height:"100%",width:"100%"}},Rt={style:{margin:"0",color:"white","font-weight":"400"}},Ht=p(()=>s("i",{class:"fa-solid fa-message text-xl p-1"},null,-1)),zt=p(()=>s("i",{class:"fa-solid fa-copy text-xl p-1"},null,-1)),It=p(()=>s("i",{class:"fa-solid fa-send text-xl p-1"},null,-1)),Ut=p(()=>s("i",{class:"fa-solid fa-message text-xl p-1"},null,-1)),Bt=p(()=>s("i",{class:"fa-solid fa-copy text-xl p-1"},null,-1)),Vt=p(()=>s("i",{class:"fa-solid fa-send text-xl p-1"},null,-1)),Ft=["src","onClick"],Ot=["src"],Nt=["href"],Pt=p(()=>s("i",{class:"pi pi-file"},null,-1)),Wt=["src","onClick"],Qt=["src"],qt=["href"],Gt=p(()=>s("i",{class:"pi pi-file"},null,-1)),Jt=["innerHTML"],Yt=["innerHTML"],Zt=["onClick"],Kt=["innerHTML"],Xt=["innerHTML"],eo=["onClick"],to={style:{color:"white",margin:"0","font-weight":"300",position:"absolute",bottom:".5rem",right:"1rem","min-width":"max-content",display:"flex",gap:".5rem"}},oo={key:0,class:"fa-solid fa-check-double",style:{color:"greenyellow"}},ao={key:1,class:"fa-solid fa-check",style:{color:"greenyellow"}},so={key:2,class:"fa-solid fa-check",style:{color:"gray"}},ro=p(()=>s("path",{opacity:"0.13",fill:"#0000000",d:"M1.533,3.568L8,12.193V1H2.812C1.042,1,0.474,2.156,1.533,3.568z"},null,-1)),io=p(()=>s("path",{fill:"currentColor",d:"M1.533,2.568L8,11.193V0L2.812,0C1.042,0,0.474,1.156,1.533,2.568z"},null,-1)),lo=[ro,io],no=p(()=>s("path",{opacity:"0.13",d:"M5.188,1H0v11.193l6.467-8.625C7.526,2.156,6.958,1,5.188,1z"},null,-1)),co=p(()=>s("path",{fill:"currentColor",d:"M5.188,0H0v11.193l6.467-8.625C7.526,1.156,6.958,0,5.188,0z"},null,-1)),uo=[no,co],mo={key:0,style:{margin:"0",color:"black"}},_o={key:1,style:{margin:"0",color:"white","font-weight":"400","font-size":"2rem"}},po={key:0,style:{display:"flex",gap:"1rem","justify-content":"end",width:"100%"}},ho={style:{color:"white",margin:"0","font-weight":"300",display:"flex","align-items":"center",gap:".5rem",height:"100%",padding:"1rem 1rem 1rem 1rem"}},vo=p(()=>s("i",{class:"pi pi-send",style:{color:"black"}},null,-1)),fo=p(()=>s("img",{style:{height:"2rem",width:"2rem","aspect-ratio":"1/1","object-fit":"contain"},src:"https://backend.salchimonster.com/read-photo-product/xai0dVnL",alt:""},null,-1)),yo=[fo],go={key:0,style:{"text-align":"center",opacity:"0.6"}},wo={key:1,style:{"max-height":"60vh","overflow-y":"auto"}},ko={key:0,style:{position:"relative","border-radius":".3rem"}},bo=["src"],xo={key:1,style:{position:"relative"}},Co=["src"],$o={key:2,style:{position:"relative"}},Mo=p(()=>s("img",{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/8/87/PDF_file_icon.svg/1200px-PDF_file_icon.svg.png",style:{width:"10rem"}},null,-1)),To={style:{flex:"1 1 auto"}},Lo={style:{width:"100%","justify-content":"end",display:"flex"}},Eo={key:0,style:{"background-color":"#00000080",position:"fixed",width:"100vw",height:"100vh",left:"0",top:"0","z-index":"1000000",display:"flex","align-items":"center","justify-content":"center",opacity:"1"}},Ao={style:{"max-height":"90vh",position:"relative","max-width":"90vw"}},So=["src"],jo=et({__name:"Messages",props:{send_function:{type:Function,default:()=>{}},change_expiration:{type:Function,default:()=>{}},send_text:{type:Function,default:()=>{}}},emits:["down"],setup(F,{expose:Be,emit:Do}){const u=ct(),fe=tt(),ye=e=>{e.target.closest(".emoji-picker")||(A.value=!1)};te(()=>{document.addEventListener("click",ye)}),U(()=>{document.removeEventListener("click",ye)});const G=e=>{const o=e.message_data.content??"";navigator.clipboard.writeText(o).then(()=>{fe.add({severity:"success",summary:"Copiado",detail:"El texto ha sido copiado al portapapeles",life:2e3})}).catch(i=>{fe.add({severity:"error",summary:"Error",detail:"No se pudo copiar el texto",life:2e3}),console.error("Error copiando al portapapeles:",i)})},A=c(!1),O=c(null),N=c(!1),ge=nt();function J(e){var i;Array.from(((i=e.clipboardData)==null?void 0:i.items)||[]).forEach(l=>{if(l.kind==="file"){const v=l.getAsFile();if(!v)return;f.value.push({file:v,name:v.name||`pasted-${Date.now()}.${v.type.split("/")[1]||"bin"}`,type:v.type,caption:"",preview:URL.createObjectURL(v)}),S.value=!0}})}const ae=F;te(()=>window.addEventListener("paste",J)),U(()=>window.removeEventListener("paste",J)),te(()=>{window.addEventListener("paste",J)}),U(()=>{window.removeEventListener("paste",J)});const Ve=e=>{R.value+=e.i,A.value=!1},Y=c(!1),f=c([]),S=c(!1),se=c(!1),we=c(""),re=e=>{se.value=!0,we.value=`${e}?size=visual`};function ie(e){const o=f.value.splice(e,1);o.length&&o[0].preview&&URL.revokeObjectURL(o[0].preview)}function Fe(){alert("removeAllfiles"),f.value.forEach(e=>e.preview&&URL.revokeObjectURL(e.preview)),f.value=[]}function Oe(e){e.currentTarget===e.target&&(Y.value=!1)}function j(e){return`${q}/files/${e.file_type}s/${e.file_id}?size=thumbnail`}function ke(){f.value.forEach(e=>e.preview&&URL.revokeObjectURL(e.preview)),f.value=[]}Q(S,e=>{e||ke()}),U(()=>{ke()});const Ne=async e=>{if(!e.message_data.readed)try{await ve.post(`${q}/read-message/${e.message_data.user_id}/${g.params.restaurant_id}`,!1),e.message_data.current_status_id=3,M.value=0,ge.resetUnreadForSidebar(e.message_data.user_id,g.params.restaurant_id)}catch(o){console.error("No se pudo marcar como leÃ­do",o)}},be=()=>{R.value="",A.value=!1},Pe=e=>{ae.send_text(e,n.value),R.value="",N.value=!1},xe=e=>{e.preventDefault(),Y.value=!1,Array.from(e.dataTransfer.files||[]).forEach(i=>{const l={file:i,name:i.name,type:i.type,caption:"",preview:""};i.type.startsWith("image/")&&(l.preview=URL.createObjectURL(i)),f.value.push(l)}),f.value.length&&(S.value=!0)},We=()=>{const e=[...f.value];S.value=!1,f.value.forEach(o=>o.preview&&URL.revokeObjectURL(o.preview)),f.value=[],ae.send_function(e)},Qe=()=>{if(!h.value)return;const e=h.value.getBoundingClientRect();$.value.forEach((o,i)=>{if(o.message_data.employer_id||o.message_data.current_status_id>=3)return;const l=h.value.children[i];if(!l)return;const v=l.getBoundingClientRect();v.top>=e.top&&v.bottom<=e.bottom&&Ne(o)})};Q(N,e=>{e||be()}),c(!1);const g=ot(),Ce=e=>{if(!e)return"";const o=e.split(" "),i=Array.from(o[0])[0],l=o[1]?Array.from(o[1])[0]:"";return i+l};let y=null,Z=null,le=!0;const ne=c(!0),$=c([]),ce=c({}),h=c(null),D=c(!1),M=c(0),R=c(""),K=c(0),$e=c(20),H=c(!1),de=c(!1),P=c(!1),ue=c({}),n=c({message_data:{id:3559,user_id:10,restaurant_id:1,content:`final del mensaje
`,created_at:"2025-05-03T02:16:30.361038+00:00",current_status_id:1,employer_id:1082,employer_name:"ANDRES FELIPE ARrECHEA",wa_id:"wamid.HBgMNTczMjI2ODkyOTg4FQIAERgSQzg4QzYyQzg0MDg0RkY2OEVDAA==",wa_timestamp:"1746238590",context_message_id:"wamid.HBgMNTczMjI2ODkyOTg4FQIAERgSNDIyNUIxQkZEMkE1MTA4RDA3AA==",local_dt:"2025-05-02T21:16:30",file_type:null,file_id:null},time:"09:16 PM",date:"02/05/2025",day_label:"hoy",contest:{message_data:{id:3490,user_id:10,restaurant_id:1,content:"fsfs",created_at:"2025-05-03T01:28:04.499413+00:00",current_status_id:1,employer_id:1082,employer_name:"ANDRES FELIPE ARrECHEA",wa_id:"wamid.HBgMNTczMjI2ODkyOTg4FQIAERgSNDIyNUIxQkZEMkE1MTA4RDA3AA==",wa_timestamp:"1746235684",context_message_id:"null",file_type:null,file_id:null,local_dt:"2025-05-02T20:28:04",time:"08:28 PM",date:"02/05/2025",day_label:"hoy"},time:"08:28 PM",date:"02/05/2025",day_label:"hoy"}});c({});const Me=e=>{N.value=!0,n.value=e},me=e=>{ue.value[e]=!ue.value[e]},W=e=>!!ue.value[e];function z(e){if(!e)return"";let o=e.replace(/\n/g,"<br/>");return o=o.replace(/\*([^*]+)\*/g,"<strong>$1</strong>"),o=o.replace(/((https?:\/\/|www\.)[^\s<]+)/g,i=>`<a href="${i.startsWith("http")?i:`https://${i}`}" target="_blank" style="color:#42a5f5;text-decoration:underline;">${i}</a>`),o}const qe=He(()=>({position:"absolute",zIndex:"300000",height:"3rem",width:"3rem",borderRadius:"50%",bottom:"5rem",right:"1.5rem",backgroundColor:P.value?"rgb(33, 150, 243)":u.current_chat_theme.button_down,color:"white",border:"none",padding:"0.5rem 1rem",cursor:"pointer"})),Ge=He(()=>({position:"absolute",zIndex:"300000",height:"2rem",display:"flex",alignItems:"center",justifyContent:"center",width:"2rem",borderRadius:"50%",bottom:"5rem",right:"1rem",backgroundColor:"rgb(156, 39, 176)",color:"white",border:"none",padding:"0.5rem 1rem",cursor:"pointer"})),I=(e,o="thumbnail")=>`${q}/files/images/${e.message_data.file_id}?size=${o}`,_e=async(e=!0)=>{var i,l,v;if(he.value=!1,H.value=!0,(i=O.value)==null||i.abort(),O.value=new AbortController,K.value=0,de.value=!1,!g.params.user_id||!g.params.restaurant_id)return;const o=await ve.get(`${q}/conversation/${g.params.restaurant_id}/${g.params.user_id}/${K.value}/20`,!1,{signal:O.value.signal});$.value=((l=o==null?void 0:o[0])==null?void 0:l.messages)||[],ce.value=((v=o==null?void 0:o[0])==null?void 0:v.user)||{},setTimeout(()=>{he.value=!0},0),ne.value&&(ne.value=!1),H.value=!1};Q(P,e=>{e||(M.value=0)});const Je=async e=>{const o=$.value.findIndex(i=>i.message_data.wa_id===e.message_data.wa_id);o!==-1?$.value[o]=e:g.params.user_id===e.message_data.wa_user_id&&($.value.push(e),e.message_data.employer_id||(D.value=!0,M.value++)),await Ue()},Ye=async()=>{var v;if(H.value||de.value)return;H.value=!0;const e=h.value?h.value.scrollHeight:0,o=K.value+$e.value,i=await ve.get(`${q}/conversation/${g.params.restaurant_id}/${g.params.user_id}/${o}/${$e.value}`,!1),l=((v=i==null?void 0:i[0])==null?void 0:v.messages)||[];if(l.length===0)de.value=!0;else{$.value=[...l,...$.value],K.value=o,await Ue();const ee=h.value.scrollHeight;h.value.scrollTop=ee-e}H.value=!1},Te=()=>{if(Qe(),!h.value)return;const{scrollTop:e,scrollHeight:o,clientHeight:i}=h.value;e<50&&Ye(),e+i>=o-50?(D.value=!1,P.value=!1):D.value=!0},Ze=()=>{h.value&&(h.value.scrollTo({bottom:0}),D.value=!1,P.value=!1),M.value=0},X=()=>{h.value&&(setTimeout(()=>{h.value.scrollTo({top:h.value.scrollHeight})},100),D.value=!1,P.value=!1),M.value=0};function Le(){Z&&(clearTimeout(Z),Z=null),y&&(le=!1,y.close(1e3,"routeâ€‘change"),y.onopen=y.onmessage=y.onerror=y.onclose=null,y=null)}function pe(){if(!g.params.user_id)return;const e=`wss://sockets-service.salchimonster.com/ws/${g.params.user_id}`;y=new WebSocket(e),le=!0,y.onopen=()=>{console.log("ðŸŸ¢ Conectado a",e)},y.onmessage=o=>{const i=JSON.parse(o.data);i&&(Je(i),ae.change_expiration(!1))},y.onerror=o=>console.error("WebSocket error",o),y.onclose=o=>{console.log("ðŸ”´ Socket cerrado",o.reason||o.code),le&&(Z=window.setTimeout(pe,5e3))}}te(()=>{_e(),pe(),h.value&&h.value.addEventListener("scroll",Te)}),U(()=>{y&&y.close(),h.value&&h.value.removeEventListener("scroll",Te)}),Q(()=>g.params,()=>{ne.value=!0,$.value=[],Le(),_e(),X(),pe(),M.value=0}),U(()=>{var e;(e=O.value)==null||e.abort(),Le()}),at((e,o,i)=>{var l;(l=O.value)==null||l.abort(),i()});const he=c(!0);return Q(()=>g.params,()=>{_e()}),Be({scrollToBottom:Ze,scrollToBottomNoSmooth:X,getAllFiles:()=>f.value.map(e=>e.file)}),(e,o)=>{const i=B("Textarea"),l=B("Button"),v=B("Dialog"),ee=B("ProgressSpinner"),Ke=B("progressSpinner"),Xe=B("InputText");return a(),r(V,null,[w(v,{visible:N.value,"onUpdate:visible":o[5]||(o[5]=t=>N.value=t),close:()=>be,header:"Acciones del mensaje",modal:!0,style:_([{width:"90vw",maxWidth:" 50rem"},{"background-color":"rgb(0, 1, 22)",display:"flex"}]),closable:!0,dismissableMask:!1},{default:x(()=>{var t,k,b;return[s("div",{style:_([n.value.message_data.employer_id?`${d(u).current_chat_theme.m_employer};border-radius:.5rem 0 .5rem .5rem;`:`${d(u).current_chat_theme.m_user} ; border-radius:0 .5rem .5rem .5rem;`,{padding:"1rem 1rem 1rem 1rem","overflow-wrap":"break-word","word-break":"break-word","max-width":"100%","min-width":"10rem",position:"relative",display:"flex","flex-direction":"column",gap:".5rem","box-shadow":"0 0 1rem #ccc"}])},[n.value.message_data.file_type?(a(),r(V,{key:0},[n.value.message_data.file_type==="image"?(a(),r("div",ut,[s("img",{class:"img-fluid",src:I(n.value),onClick:o[0]||(o[0]=L=>re(I(n.value))),style:{"border-radius":".3rem",width:"18rem","object-fit":"contain","aspect-ratio":"1 / 1",cursor:"pointer"}},null,8,mt)])):n.value.message_data.file_type==="audio"?(a(),r("audio",{key:1,src:j(n.value.message_data),controls:"",style:{width:"100%","min-width":"20rem","max-width":"100%","background-color":"white","border-radius":".5rem"}},null,8,_t)):(a(),r("a",{key:2,href:j(n.value.message_data),target:"_blank",style:{color:"#2196f3","text-decoration":"none","align-self":"flex-start",display:"flex","align-items":"center",gap:".5rem"}},[ht,oe(" Descargar archivo ")],8,pt))],64)):m("",!0),s("h6",vt,[W(n.value.message_data.id)?(a(),r("span",{key:1,style:_(d(u).current_chat_theme.text),innerHTML:z(n.value.message_data.content)},null,12,yt)):(a(),r("span",{key:0,style:_(d(u).current_chat_theme.text),innerHTML:z(((t=n.value.message_data.content)==null?void 0:t.substring(0,200))+(((k=n.value.message_data.content)==null?void 0:k.length)>200?"â€¦":""))},null,12,ft)),((b=n.value.message_data.content)==null?void 0:b.length)>200?(a(),r("button",{key:2,onClick:o[1]||(o[1]=L=>me(e.message.message_data.id)),style:{background:"none",border:"none",color:"#2196f3",cursor:"pointer",padding:"0 .5rem"}}," Ver "+E(W(n.value.message_data.id)?"menos":"mÃ¡s"),1)):m("",!0)]),s("h6",gt,[s("span",{style:_([d(u).current_chat_theme.text,{opacity:".5"}])},E(n.value.time),5),n.value.message_data.current_status_id==3&&n.value.message_data.employer_id?(a(),r("i",wt)):n.value.message_data.current_status_id==2&&n.value.message_data.employer_id?(a(),r("i",kt)):n.value.message_data.current_status_id==1&&n.value.message_data.employer_id?(a(),r("i",bt)):m("",!0)]),n.value.message_data.employer_id?(a(),r("svg",{key:2,style:_([{position:"absolute",right:"-8px",top:"0"},n.value.message_data.employer_id?`${d(u).current_chat_theme.pico_employer}`:`${d(u).current_chat_theme.pico_user}`]),viewBox:"0 0 8 13",height:"13",width:"8"},Lt,4)):(a(),r("svg",{key:1,style:_([{position:"absolute",left:"-8px",top:"0"},n.value.message_data.employer_id?`${d(u).current_chat_theme.pico_employer}`:`${d(u).current_chat_theme.pico_user}`]),viewBox:"0 0 8 13",height:"13",width:"8"},$t,4))],4),s("div",Et,[s("div",null,[A.value?(a(),C(d(dt),{key:0,class:"emoji-picker",native:!0,style:{position:"absolute",bottom:"4rem","z-index":"1000"},onSelect:Ve})):m("",!0)]),w(i,{modelValue:R.value,"onUpdate:modelValue":o[2]||(o[2]=L=>R.value=L),autoResize:"",rows:"4",placeholder:"Escribe un mensajeâ€¦",style:{width:"100%","background-color":""}},null,8,["modelValue"]),s("div",At,[w(l,{class:"emoji-picker",text:"",style:{"font-size":"2rem"},onClick:o[3]||(o[3]=L=>A.value=!A.value)},{default:x(()=>[St]),_:1}),w(l,{label:"Responder",icon:"pi pi-send",severity:"help",style:{width:"100%"},onClick:o[4]||(o[4]=L=>Pe(R.value))})])])]}),_:1},8,["visible","close"]),s("div",{style:{height:"100%",position:"relative",display:"flex","justify-content":"center"},onDragover:o[8]||(o[8]=Ie(()=>{},["prevent"])),onDragenter:o[9]||(o[9]=t=>Y.value=!0),onDragleave:Oe,onDrop:xe,class:st(he.value?"container-messages":".container-oculto")},[Y.value?(a(),r("div",jt," Suelte aquÃ­ ")):m("",!0),H.value?(a(),C(ee,{key:1,style:{width:"50px",height:"50px",position:"absolute","z-index":"100",color:"white"},strokeWidth:"8",fill:"transparent",animationDuration:".3s","aria-label":"Custom ProgressSpinner"})):m("",!0),s("div",Dt,[s("div",{ref_key:"messagesContainer",ref:h,style:{padding:"1rem",display:"flex","flex-direction":"column",gap:"0rem","overflow-y":"auto",height:"100%","padding-bottom":"4rem"}},[(a(!0),r(V,null,ze($.value,t=>{var k,b,L,Ee,Ae,Se,je,De,Re;return a(),r("div",{key:t.message_data.id},[s("div",{class:"message",style:_([t.message_data.employer_id?"justify-content: end;":"justify-content: start;",{width:"100%",display:"flex",gap:"1rem","padding-bottom":"1rem"}])},[t.message_data.employer_id?m("",!0):(a(),r("div",{key:0,style:_([`background-color:${(k=ce.value)==null?void 0:k.color}`,{height:"100%",width:"3rem","aspect-ratio":"1/1","border-radius":"50%",display:"flex","align-items":"center","justify-content":"center","text-transform":"uppercase"}])},[s("h5",Rt,E(Ce((b=ce.value)==null?void 0:b.name)),1)],4)),s("div",{style:_([t.message_data.employer_id?`${d(u).current_chat_theme.m_employer};border-radius:.5rem 0 .5rem .5rem;`:`${d(u).current_chat_theme.m_user} ; border-radius:0 .5rem .5rem .5rem;`,{padding:"0rem 1rem 2.5rem 1rem","overflow-wrap":"break-word","word-break":"break-word","max-width":"60%","min-width":"15rem",position:"relative",display:"flex","flex-direction":"column",gap:".5rem"}])},[s("div",null,[(L=t==null?void 0:t.message_data)!=null&&L.employer_id?(a(),C(l,{key:0,class:"options",style:{color:"white"},onClick:T=>Me(t)},{default:x(()=>[Ht]),_:2},1032,["onClick"])):m("",!0),t.message_data.employer_id?(a(),C(l,{key:1,class:"options-variant",onClick:T=>G(t),style:{color:"white",left:"-6rem","background-color":"#2196f3"}},{default:x(()=>[zt]),_:2},1032,["onClick"])):m("",!0),t.message_data.employer_id?(a(),C(l,{key:2,class:"options-variant-template",onClick:T=>G(t),style:{color:"white",left:"-9rem","background-color":"orangered"}},{default:x(()=>[It]),_:2},1032,["onClick"])):m("",!0)]),s("div",null,[t.message_data.employer_id?m("",!0):(a(),C(l,{key:0,class:"options2",style:{color:"white"},onClick:T=>Me(t)},{default:x(()=>[Ut]),_:2},1032,["onClick"])),t.message_data.employer_id?m("",!0):(a(),C(l,{key:1,class:"options2-variant",onClick:T=>G(t),style:{color:"white",right:"-6rem","background-color":"#2196f3"}},{default:x(()=>[Bt]),_:2},1032,["onClick"])),t.message_data.employer_id?m("",!0):(a(),C(l,{key:2,class:"options-variant-template2",onClick:T=>G(t),style:{color:"white",right:"-9rem","background-color":"orangered"}},{default:x(()=>[Vt]),_:2},1032,["onClick"]))]),t.message_data.file_type?(a(),r(V,{key:0},[t.message_data.file_type==="image"?(a(),r("img",{key:0,class:"img-fluid",src:I(t),onClick:T=>re(I(t)),style:{"max-width":"38rem","border-radius":".3rem",width:"18rem","object-fit":"cover","aspect-ratio":"1 / 1",cursor:"pointer"}},null,8,Ft)):t.message_data.file_type==="audio"?(a(),r("audio",{key:1,src:j(t.message_data),controls:"",style:{width:"100%","min-width":"20rem","max-width":"100%","background-color":"white","border-radius":".5rem"}},null,8,Ot)):(a(),r("a",{key:2,href:j(t.message_data),target:"_blank",style:{color:"#2196f3","text-decoration":"none","align-self":"flex-start",display:"flex","align-items":"center",gap:".5rem"}},[Pt,oe(" Descargar archivo ")],8,Nt))],64)):m("",!0),t.contest?(a(),r("div",{key:1,class:"message",style:_([t.message_data.employer_id?"justify-content: end;":"justify-content: start;",{width:"100%",display:"flex",gap:"1rem"}])},[s("div",{style:_([t.message_data.employer_id?`${d(u).current_chat_theme.m_employer};border-radius:.5rem 0 .5rem .5rem;`:`${d(u).current_chat_theme.m_user} ; border-radius:0 .5rem .5rem .5rem;`,{"overflow-wrap":"break-word","word-break":"break-word","max-width":"100%","min-width":"10rem",position:"relative",display:"flex",opacity:".5","flex-direction":"column",gap:".5rem"}])},[t.contest.message_data.file_type?(a(),r(V,{key:0},[t.contest.message_data.file_type==="image"?(a(),r("img",{key:0,class:"img-fluid",src:I(t.contest),onClick:T=>re(I(t.contest)),style:{"max-width":"38rem","border-radius":".3rem",width:"18rem","object-fit":"cover",cursor:"pointer"}},null,8,Wt)):t.contest.message_data.file_type==="audio"?(a(),r("audio",{key:1,src:j(t.contest.message_data),controls:"",style:{width:"100%","min-width":"20rem","max-width":"100%","background-color":"white","border-radius":".5rem"}},null,8,Qt)):(a(),r("a",{key:2,href:j(t.contest.message_data),target:"_blank",style:{color:"#2196f3","text-decoration":"none","align-self":"flex-start",display:"flex","align-items":"center",gap:".5rem"}},[Gt,oe(" Descargar archivo ")],8,qt))],64)):m("",!0),s("h6",{style:_([{color:"white",margin:"0","font-weight":"300"},d(u).current_chat_theme.text])},[W(t.message_data.id)?(a(),r("span",{key:1,innerHTML:z(t.contest.message_data.content)},null,8,Yt)):(a(),r("span",{key:0,innerHTML:z(((Ee=t.contest.message_data.content)==null?void 0:Ee.substring(0,200))+(((Ae=t.contest.message_data.content)==null?void 0:Ae.length)>30?"â€¦":""))},null,8,Jt)),((Se=t.contest.message_data.content)==null?void 0:Se.length)>30?(a(),r("button",{key:2,onClick:T=>me(t.contest.message_data.id),style:{background:"none",border:"none",color:"#2196f3",cursor:"pointer",padding:"0 .5rem"}},null,8,Zt)):m("",!0)],4)],4)],4)):m("",!0),s("h6",{style:_([{color:"white",margin:"0","font-weight":"300"},d(u).current_chat_theme.text])},[W(t.message_data.id)?(a(),r("span",{key:1,innerHTML:z(t.message_data.content)},null,8,Xt)):(a(),r("span",{key:0,innerHTML:z(((je=t.message_data.content)==null?void 0:je.substring(0,200))+(((De=t.message_data.content)==null?void 0:De.length)>200?"â€¦":""))},null,8,Kt)),((Re=t.message_data.content)==null?void 0:Re.length)>200?(a(),r("button",{key:2,onClick:T=>me(t.message_data.id),style:{background:"none",border:"none",color:"#2196f3",cursor:"pointer",padding:"0 .5rem"}}," Ver "+E(W(t.message_data.id)?"menos":"mÃ¡s"),9,eo)):m("",!0)],4),s("h6",to,[s("span",{style:_([{opacity:".5"},d(u).current_chat_theme.text])},E(t.date)+" - "+E(t.time),5),t.message_data.current_status_id==3&&t.message_data.employer_id?(a(),r("i",oo)):t.message_data.current_status_id==2&&t.message_data.employer_id?(a(),r("i",ao)):t.message_data.current_status_id==1&&t.message_data.employer_id?(a(),r("i",so)):m("",!0)]),t.message_data.employer_id?(a(),r("svg",{key:3,style:_([{position:"absolute",right:"-8px",top:"0"},t.message_data.employer_id?`${d(u).current_chat_theme.pico_employer}`:`${d(u).current_chat_theme.pico_user}`]),viewBox:"0 0 8 13",height:"13",width:"8"},uo,4)):(a(),r("svg",{key:2,style:_([{position:"absolute",left:"-8px",top:"0"},t.message_data.employer_id?`${d(u).current_chat_theme.pico_employer}`:`${d(u).current_chat_theme.pico_user}`]),viewBox:"0 0 8 13",height:"13",width:"8"},lo,4))],4),t.message_data.employer_id?(a(),r("div",{key:1,style:_([{height:"100%",width:"3rem","min-width":"3rem","aspect-ratio":"1/1","border-radius":"50%",display:"flex","align-items":"center","justify-content":"center","text-transform":"uppercase"},!t.message_data.employer_id!=1363?d(u).current_chat_theme.m_employer:"background-color: white"])},[t.message_data.employer_id!=1363?(a(),r("h5",mo,E(Ce(t.message_data.employer_name)),1)):(a(),r("h5",_o," ðŸ¤– "))],4)):m("",!0)],4)])}),128)),d(ge).sending?(a(),r("div",po,[s("div",{style:_([{"max-width":"20rem",width:"100%","border-radius":".5rem",height:"4rem"},d(u).current_chat_theme.m_employer])},[s("h6",ho,[vo,oe(),w(Ke,{style:{width:"1.5rem",height:"1.5rem",color:"white"},strokeWidth:"8",fill:"transparent",animationDuration:".3s","aria-label":"Custom ProgressSpinner"})])],4),s("div",{style:_([{height:"100%",width:"3rem","min-width":"3rem","aspect-ratio":"1/1","border-radius":"50%",display:"flex","align-items":"center","justify-content":"center","text-transform":"uppercase",padding:".5rem"},d(u).current_chat_theme.m_employer])},yo,4)])):m("",!0)],512),D.value||M.value>0?(a(),C(l,{key:0,icon:"pi pi-angle-down",onClick:X,style:_(qe.value)},null,8,["style"])):m("",!0),M.value>0?(a(),C(l,{key:1,label:M.value,onClick:X,style:_(Ge.value)},null,8,["label","style"])):m("",!0)]),w(v,{visible:S.value,"onUpdate:visible":o[6]||(o[6]=t=>S.value=t),header:"Archivos a enviar",modal:!0,style:_([{width:"90vw",maxWidth:"40rem"},{"background-color":"rgb(0, 1, 22)",display:"flex"}]),onDragover:o[7]||(o[7]=Ie(()=>{},["prevent"])),onDrop:xe,close:Fe,closable:!0,dismissableMask:!1},{footer:x(()=>[s("div",Lo,[w(l,{label:"Enviar",icon:"pi pi-check",severity:"success",onClick:We,disabled:f.value.length===0},null,8,["disabled"])])]),default:x(()=>[f.value.length===0?(a(),r("div",go," Arrastra archivos aquÃ­ ")):(a(),r("div",wo,[(a(!0),r(V,null,ze(f.value,(t,k)=>(a(),r("div",{key:k,style:{display:"flex","align-items":"center","flex-direction":"column",position:"relative",gap:"1rem","margin-bottom":"1rem",padding:"1rem"}},[t.type.startsWith("image/")?(a(),r("div",ko,[s("img",{src:t.preview,style:{width:"30rem","box-shadow":"0 0 1rem #00000090","object-fit":"cover","border-radius":".3rem"}},null,8,bo),w(l,{icon:"pi pi-times",severity:"danger",onClick:b=>ie(k),style:{position:"absolute",width:"1.5rem",height:"1.5rem",right:"0","border-radius":".3rem"}},null,8,["onClick"])])):t.type.startsWith("audio/")?(a(),r("div",xo,[s("audio",{src:t.preview,controls:"",style:{width:"100%"}},null,8,Co),w(l,{icon:"pi pi-times",severity:"danger",onClick:b=>ie(k),style:{position:"absolute",width:"1.5rem",height:"1.5rem",right:"0","border-radius":".3rem"}},null,8,["onClick"])])):(a(),r("div",$o,[Mo,w(l,{icon:"pi pi-times",severity:"danger",onClick:b=>ie(k),style:{position:"absolute",width:"1.5rem",height:"1.5rem",right:"0","border-radius":".3rem"}},null,8,["onClick"])])),s("span",To,E(t.name),1),w(Xe,{modelValue:t.caption,"onUpdate:modelValue":b=>t.caption=b,placeholder:"Texto opcionalâ€¦",style:{flex:"1 1 auto",width:"100%","background-color":"#ffffff20"}},null,8,["modelValue","onUpdate:modelValue"])]))),128))]))]),_:1},8,["visible"])],34),se.value?(a(),r("div",Eo,[s("div",Ao,[s("img",{style:{height:"90vh","max-width":"100%"},src:we.value},null,8,So),w(l,{onClick:o[10]||(o[10]=()=>se.value=!1),style:{position:"absolute",right:"-1rem",top:"-1rem",border:"3px solid black"},icon:"pi pi-times",severity:"danger",rounded:""})])])):m("",!0)],64)}}}),Uo=lt(jo,[["__scopeId","data-v-09e7a26a"]]);export{Uo as default};
