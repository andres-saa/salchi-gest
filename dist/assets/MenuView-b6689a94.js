import"./formatoPesos-e824e30b.js";import{u as ae,a as O}from"./site-b1257926.js";import{r as t,C as j,ab as ve,U as V,_ as z,I as T,q as A,a as B,o as i,g as W,h as E,d as e,k as S,i as h,t as $,b as l,u as n,f as ne,p as Y,m as F,c as Q,Y as ce,F as D,e as q,N as ge,H as re,K as he,D as be,n as fe,s as ye}from"./index-e0d1eab6.js";import{f as se}from"./formatoPesos-2bac1853.js";/* empty css                                                                 */import"./ventas-2fdaa065.js";/* empty css                                                               */t({});t({});const J=t([{name:"Menu",to:"",menus:[{category:{id:1,name:"Salchipapas"},products:[]}]},{name:"Sedes",to:"sedes"},{name:"Carta",to:"menu"},{name:"Rastrear pedido",to:"rastrear-pedido"},{name:"Colaboraciones",to:"colaboraciones"}]),we=t(!1);t(1.042);t({products:[],total:0});t([]);t(0);t();t(!1);const me=t(!1);t({});t({});t({});t({});t(!1);t([]);t([]);t([]);t([]);t([]);t(!1);const ie=t(j.currentRoute);t();t(localStorage.getItem("currentNeigborhood"));const $e=()=>{const d=t(localStorage.getItem("currentNeigborhood"));(ie.value.fullPath=="/menu"||ie.value.fullPath=="/sedes")&&(me.value=!1),!d.value&&ie.value.fullPath!="/menu"&&(me.value=!0)},ke={async getSiteById(d){try{const o=await ve.get(`${V}/site/${d}`);return o.status===200?o.data:(console.error("An error occurred while fetching the ingredients:",o.status),null)}catch(o){return console.error("An error occurred while fetching the ingredients:",o),null}}};const X=d=>(Y("data-v-613808ed"),d=d(),F(),d),Ce={class:"dialog-content"},xe=X(()=>e("b",{class:"dialog-title"},null,-1)),Se={class:"form-container"},Pe={class:"form-group"},Ie={class:"label-spinner"},Be=X(()=>e("label",{for:"city-dropdown",class:"label"},"¿En qué ciudad te encuentras?",-1)),Ve={class:"form-group"},Ee={class:"label-spinner"},Ne={for:"neighborhood-dropdown",class:"label"},De={key:0,class:"loading-neighborhood"},Le=X(()=>e("p",{class:"loading-text"},"Buscando barrios...",-1)),qe={class:"image-container"},Te=["src"],Ae={key:1,src:"https://backend.salchimonster.com/read-photo-product/xai0dVnL",style:{"object-fit":"contain"},alt:"Vista previa de la sede"},Ue={key:2,class:"image-overlay"},Me={class:"site-info"},Re=X(()=>e("span",{class:"brand-name"},"SALCHIMONSTER ",-1)),We={class:"site-name"},je={class:"button-container"},Oe={__name:"siteDialog",setup(d){const o=ae();O();const _=t({ciudad:!1,barrio:!1}),P=t([]),C=t({}),u=t(null),a=t({site:{name:"default"}}),c=t([]),m=()=>{a.value={site:{site_name:"default"}}},y=async()=>{if(u.value&&u.value.city_id){const p=await b(u.value.city_id);c.value=p}else c.value=[]};T(u,()=>{y()}),T(a,async()=>{a.value.site_id?C.value=await ke.getSiteById(a.value.site_id):C.value={}},{immediate:!0});const v=async()=>{const p={site:C.value,neigborhood:a.value,city:u.value};o.setLocation(p),o.location.neigborhood.delivery_price=a.value.delivery_price,o.setVisible("currentSite",!1)},N=async()=>{try{_.value.ciudad=!0;const p=await fetch(`${V}/cities`);if(p.ok){const x=await p.json();P.value=x}}catch(p){console.error("Error obteniendo ciudades:",p)}finally{_.value.ciudad=!1}},b=async p=>{try{_.value.barrio=!0;const x=await fetch(`${V}/neighborhoods/by-city/${p}`);return x.ok?await x.json():[]}catch(x){return console.error("Error obteniendo barrios:",x),[]}finally{_.value.barrio=!1}};return A(()=>{N()}),(p,x)=>{var M,R;const U=B("ProgressSpinner"),H=B("Dropdown"),Z=B("Button"),ee=B("Dialog");return i(),W(ee,{closable:((R=(M=n(o).location)==null?void 0:M.site)==null?void 0:R.pe_site_id)>0,style:{width:"30rem","max-width":"96%"},visible:n(o).visibles.currentSite,"onUpdate:visible":x[2]||(x[2]=L=>n(o).visibles.currentSite=L),header:"Selección de sede",modal:!0,class:"dialog"},{default:E(()=>{var L,K,s,r,w,I,G;return[e("div",Ce,[xe,e("div",Se,[e("div",Pe,[e("div",Ie,[Be,_.value.ciudad?(i(),W(U,{key:0,class:"spinner",strokeWidth:"8",fill:"var(--white)",animationDuration:".5s","aria-label":"Cargando ciudades"})):S("",!0)]),h(H,{id:"city-dropdown",modelValue:u.value,"onUpdate:modelValue":x[0]||(x[0]=f=>u.value=f),onClick:m,options:P.value,optionLabel:"city_name",placeholder:"SELECCIONA UNA CIUDAD",class:"dropdown",required:""},null,8,["modelValue","options"])]),e("div",Ve,[e("div",Ee,[e("label",Ne,$(((L=u.value)==null?void 0:L.city_id)!==15?"¿Cuál es tu barrio?":"Elige una sede"),1),_.value.barrio?(i(),l("div",De,[h(U,{class:"spinner",strokeWidth:"8",fill:"var(--white)",animationDuration:".5s","aria-label":"Buscando barrios"}),Le])):S("",!0)]),h(H,{id:"neighborhood-dropdown",modelValue:a.value,"onUpdate:modelValue":x[1]||(x[1]=f=>a.value=f),options:c.value,optionLabel:"name",placeholder:"Selecciona un barrio",filter:"",filterPlaceholder:"Escribe el nombre de tu barrio",class:"dropdown",required:""},null,8,["modelValue","options"])]),e("div",qe,[(K=a.value)!=null&&K.site_id?(i(),l("img",{key:0,src:`${n(V)}/read-product-image/600/site-${(s=a.value)==null?void 0:s.site_id}`,class:ne({"default-image":((r=a.value.site)==null?void 0:r.name)==="default"}),alt:"Vista previa de la sede"},null,10,Te)):(i(),l("img",Ae)),(w=a.value)!=null&&w.site_id?(i(),l("div",Ue,[e("p",Me,[Re,e("span",We,$((I=C.value)==null?void 0:I.site_name),1)])])):S("",!0)]),e("div",je,[h(Z,{label:"Guardar",onClick:v,disabled:!((G=a.value)!=null&&G.name),class:"save-button"},null,8,["disabled"])])])])]}),_:1},8,["closable","visible"])}}},ze=z(Oe,[["__scopeId","data-v-613808ed"]]);const Ye=d=>(Y("data-v-37c06b51"),d=d(),F(),d),Fe={ref:"categoryBar",style:{position:"sticky","box-shadow":"0 1rem .5rem #00000020",top:"3rem",padding:".2rem","z-index":"99",display:"flex","align-items":"center","background-color":"white","overflow-x":"auto"}},He=Ye(()=>e("span",{class:"text-lg",style:{"min-width":"max-content"}},"Nuevo pedido",-1)),Ke={class:"container",style:{"justify-content":"start","align-items":"center"}},Ge={class:"container",style:{"justify-content":"start","align-items":"center"}},Je=["id"],Qe=["onClick"],Xe=["src"],Ze={__name:"BarraCategorias",setup(d){const o=ae(),_=O(),P=[10,26,8,9,13,27,11,4,5,110,112,113,111,109,115,118,119,116,117];Q(()=>{var u,a,c;return(c=(a=(u=_==null?void 0:_.menu)==null?void 0:u.listaCategorias)==null?void 0:a.filter(m=>o.categories.includes(parseInt(m.categoria_id))))==null?void 0:c.sort((m,y)=>P.indexOf(parseInt(m.categoria_id))-P.indexOf(parseInt(y.categoria_id)))});const C=u=>{j.push(`/call-center-vender/${u}`);const a=document.getElementById(u);if(a){const y=a.getBoundingClientRect().top+window.pageYOffset-160;window.scrollTo({top:y,behavior:"smooth"})}_.currentSection=u,setTimeout(()=>{const c=document.getElementById(`categoryButton-${u}`);c&&c.scrollIntoView({behavior:"smooth",inline:"center",block:"nearest"})},1e3)};return ce(()=>{}),(u,a)=>{var m,y;const c=B("Button");return i(),l("div",Fe,[h(c,{onClick:a[0]||(a[0]=v=>n(o).visibles.currentSite=!0),severity:"help",class:"ml-4 text-lg titulo",style:{"font-weight":"400","min-height":"100%","border-radius":"10rem","text-transform":"uppercase","min-width":"max-content"}},{default:E(()=>[He]),_:1}),e("div",Ke,[e("div",Ge,[(i(!0),l(D,null,q((y=(m=n(_))==null?void 0:m.menu)==null?void 0:y.filter(v=>v.products&&v.visible),(v,N)=>(i(),l("div",{key:v.categoria_id,id:"categoryButton-"+v.categoria_id,class:"container-button"},[e("a",{onClick:ge(b=>C(v.categoria_id),["prevent"])},[h(c,{class:ne(["bar-button",{selected:n(_).currentSection===v.categoria_id}]),label:v.categoria_descripcion},{default:E(()=>{var b,p;return[e("img",{src:`${n(V)}/get-image?image_url=${(p=(b=v.products)==null?void 0:b[0])==null?void 0:p.productogeneral_urlimagen}`,alt:""},null,8,Xe),e("span",null,[e("b",null,$(v.categoria_descripcion),1)])]}),_:2},1032,["class","label"])],8,Qe)],8,Je))),128))])])],512)}}},et=z(Ze,[["__scopeId","data-v-37c06b51"]]);const tt=d=>(Y("data-v-6956ec67"),d=d(),F(),d),ot={class:"fixed-cart-bar background"},st={class:"cart-button"},it=tt(()=>e("i",{class:"cart-icon icono pi pi-shopping-cart"},null,-1)),at=["src"],nt={key:0,class:"extra-products"},ct={class:"extra-products-text"},rt={__name:"barra",setup(d){t(localStorage.getItem("currenSiteWsp"));const o=O();t(j.currentRoute);let _;re();const P=()=>{C.value=!1,clearTimeout(_),_=setTimeout(()=>{C.value=!0},500)};A(()=>{window.addEventListener("scroll",P)}),he(()=>{window.removeEventListener("scroll",P),clearTimeout(_)});const C=t(!0),u=()=>{j.push("/call-center-vender/cart")};return(a,c)=>{const m=B("Button");return i(),l("div",ot,[n(o).cart.length>0?(i(),l("div",{key:0,onClick:u,class:ne(["cart-bar",{hidden:!C.value}])},[e("button",st,[it,(i(!0),l(D,null,q(n(o).cart.slice(0,4),y=>(i(),l("div",{key:y.id,class:"product-item"},[h(m,{class:"quantity-button",label:`${y.pedido_cantidad}`,severity:"danger",rounded:""},null,8,["label"]),e("img",{class:"img-cart",onMouseover:c[0]||(c[0]=()=>a.vueMenu=!0),src:`${n(V)}/get-image?image_url=${y.productogeneral_urlimagen}`,alt:"Product Image"},null,40,at)]))),128)),n(o).cart.length>4?(i(),l("div",nt,[e("p",ct," +"+$(n(o).cart.length-4),1)])):S("",!0)])],2)):S("",!0)])}}},lt=z(rt,[["__scopeId","data-v-6956ec67"]]);const le=d=>(Y("data-v-9c991f11"),d=d(),F(),d),dt={key:0,class:"change-dialog-content"},ut=["onClick"],_t=["src"],pt={class:"header-container"},mt={style:{display:"flex","align-items":"center","justify-content":"center",gap:"2rem"}},vt={class:"cart-addition-quantity-control"},gt={readonly:"",class:"cart-addition-quantity-label"},ht={class:"footer-container"},bt={class:"dialog-main-content"},ft=["src"],yt={class:"details"},wt=le(()=>e("h3",{class:"text description"},"DESCRIPCION",-1)),$t={style:{margin:"1rem 0"}},kt={style:{margin:"1rem 0"}},Ct={class:"modificador-row-content"},xt={class:"adicion modificador-nombre"},St={class:"modificador-price-quantity"},Pt={key:0,class:"modificador-price"},It={key:0,style:{"margin-right":".5rem"}},Bt={key:1},Vt={class:"modificador-quantity-btns"},Et={key:1,readonly:"",class:"quantity-input"},Nt={key:0,class:"includes-title"},Dt=le(()=>e("strong",null,"INCLUYE",-1)),Lt=[Dt],qt={class:"product-base-grid"},Tt={class:"product-base-desc"},At={class:"product-base-item-header"},Ut={class:"product-base-qty"},Mt=["src"],Rt=le(()=>e("div",{style:{"border-top":".3rem solid","margin-top":".5rem",opacity:".2"}},null,-1)),Wt={__name:"VistaProducto",setup(d){const o=O(),_=re();be();const P=t(!1),C=t(!1),u=t(!1),a=t(1);T(()=>o.visibles.currentProduct,s=>{s||(P.value=C.value=u.value=!1),b.value={},p.value={},a.value=1},{deep:!0});const c=t(null),m=t(!1),y=s=>{const r={producto_cambio_id:c.value.producto_id,producto_descripcion:c.value.producto_descripcion,producto_precio:c.value.producto_precio,producto_urlimagen:c.value.producto_urlimagen},w=c.value.lista_productoCambio.findIndex(I=>I.producto_cambio_id===s.producto_cambio_id);w!==-1&&c.value.lista_productoCambio.splice(w,1,r),c.value.producto_id=s.producto_id,c.value.producto_descripcion=s.producto_descripcion,c.value.producto_precio=s.producto_precio,c.value.producto_urlimagen=s.producto_urlimagen,m.value=!1,v()},v=()=>{let s=0;o.currentProduct.lista_productobase.forEach(r=>{s+=parseFloat(r.producto_precio)*parseInt(r.productocombo_cantidad)}),o.currentProduct.productogeneral_precio&&(s+=parseFloat(o.currentProduct.productogeneral_precio)),o.currentProduct.totalPrice=s},N=s=>{c.value=s,m.value=!0},b=t({}),p=t({}),x=(s,r)=>{var w;if((w=p.value)!=null&&w[s==null?void 0:s.modificadorseleccion_nombre]){const I={...s,modificadorseleccion_cantidad:1,modificador_id:r};b.value[I.modificadorseleccion_id]=I}else delete b.value[s.modificadorseleccion_id]},U=s=>{var r;(r=p.value)!=null&&r[s==null?void 0:s.modificadorseleccion_nombre]&&b.value[s.modificadorseleccion_id].modificadorseleccion_cantidad++},H=s=>{b.value[s.modificadorseleccion_id].modificadorseleccion_cantidad>1&&b.value[s.modificadorseleccion_id]&&b.value[s.modificadorseleccion_id].modificadorseleccion_cantidad--},Z=s=>{const r=Object.values(b.value);o.addProductToCart(s,a.value,r),b.value={},o.setVisible("currentProduct",!1)};T(()=>o.visibles.currentProduct,s=>{});const ee=t([]);T(()=>o.visibles.addAdditionToCart,async s=>{s||(b.value={},ee.value=[])},{deep:!0});const M=t(window.innerWidth),R=()=>{M.value=window.innerWidth};window.addEventListener("resize",R),ce(()=>{window.removeEventListener("resize",R)});const L=Q(()=>K.value?{width:"90%","max-width":"40rem"}:{width:"90%","max-width":"1200px"}),K=Q(()=>M.value<1200);return A(()=>{setTimeout(()=>{_.params.product_id&&(o.currentProduct=o.menu.data.find(s=>s.productogeneral_id==_.params.product_id),o.visibles.currentProduct=!0)},1e3)}),(s,r)=>{const w=B("Button"),I=B("Dialog"),G=B("Checkbox");return i(),l(D,null,[h(I,{visible:m.value,"onUpdate:visible":r[1]||(r[1]=f=>m.value=f),style:{"max-width":"20rem"},closable:!1,modal:!0,class:"change-dialog"},{header:E(()=>[e("h3",null,"Elige una alternativa para "+$(c.value.producto_descripcion),1)]),default:E(()=>[c.value?(i(),l("div",dt,[(i(!0),l(D,null,q(c.value.lista_productoCambio,f=>(i(),l("div",{class:"change-option shadow-4",key:f.producto_cambio_id,onClick:te=>y(f)},[e("img",{class:"change-option-img",src:`${n(V)}/get-image?image_url=${f.producto_urlimagen}`,alt:""},null,8,_t),e("p",null,[e("strong",null,$(f.producto_descripcion),1)])],8,ut))),128)),h(w,{onClick:r[0]||(r[0]=f=>{m.value=!1}),severity:"danger",icon:"pi pi-times",class:"close-change-dialog-btn"})])):S("",!0)]),_:1},8,["visible"]),h(I,{closable:!1,visible:n(o).visibles.currentProduct,"onUpdate:visible":r[6]||(r[6]=f=>n(o).visibles.currentProduct=f),style:fe(L.value),header:`${n(o).currentProduct.productogeneral_descripcion}`,modal:!0,class:"container product-dialog"},{header:E(()=>[e("div",pt,[e("h3",null,$(n(o).currentProduct.productogeneral_descripcion),1),e("h3",null,$(n(se)(n(o).currentProduct.productogeneral_precio||n(o).currentProduct.lista_presentacion[0].producto_precio)),1)])]),footer:E(()=>[e("div",mt,[e("div",vt,[h(w,{onClick:r[3]||(r[3]=f=>a.value>1?a.value-=1:0),severity:"danger",style:{"border-radius":".5rem 0 0 .5rem",width:"3rem"},class:"cart-addition-quantity-btn-minus",icon:"pi pi-minus"}),e("span",gt,$(a.value),1),h(w,{onClick:r[4]||(r[4]=f=>a.value+=1),severity:"danger",style:{"border-radius":"0 .5rem .5rem 0",width:"3rem"},class:"cart-addition-quantity-btn-plus",icon:"pi pi-plus"})]),e("div",ht,[h(w,{class:"add-cart-footer-btn",onClick:r[5]||(r[5]=f=>Z(n(o).currentProduct)),label:"Agregar al carrito",icon:"pi pi-shopping-cart"})])])]),default:E(()=>{var f,te,de;return[h(w,{class:"add-cart-button",onClick:r[2]||(r[2]=k=>n(o).setVisible("currentProduct",!1)),severity:"danger",icon:"pi pi-times"}),e("div",bt,[e("div",null,[e("img",{style:{position:"sticky",top:"0"},class:"product-image",src:`${n(V)}/get-image?image_url=${n(o).currentProduct.productogeneral_urlimagen}`,alt:""},null,8,ft)]),e("div",yt,[wt,e("p",$t,$((f=n(o).currentProduct.productogeneral_descripcionweb)==null?void 0:f.toLowerCase()),1),(i(!0),l(D,null,q(n(o).currentProduct.lista_agrupadores,k=>(i(),l("div",{key:k.modificador_id},[e("h3",kt,[e("strong",null,$(k.modificador_nombre),1)]),e("div",null,[(i(!0),l(D,null,q(k.listaModificadores,g=>{var ue,_e,pe;return i(),l("div",{class:"modificador-row",key:g.modificadorseleccion_id},[h(G,{class:"modificador-checkbox",onChange:()=>x(g,k.modificador_id),binary:"",modelValue:p.value[g.modificadorseleccion_nombre],"onUpdate:modelValue":oe=>p.value[g.modificadorseleccion_nombre]=oe},null,8,["onChange","modelValue","onUpdate:modelValue"]),e("div",Ct,[e("span",xt,$(g.modificadorseleccion_nombre),1),e("div",St,[g.modificadorseleccion_precio>0?(i(),l("span",Pt,[((ue=b.value[g.modificadorseleccion_id])==null?void 0:ue.modificadorseleccion_cantidad)>0?(i(),l("b",It,$(n(se)(g.modificadorseleccion_precio*parseInt((_e=b.value[g.modificadorseleccion_id])==null?void 0:_e.modificadorseleccion_cantidad))),1)):(i(),l("b",Bt,$(n(se)(g.modificadorseleccion_precio)),1))])):S("",!0),e("div",Vt,[p.value[g.modificadorseleccion_nombre]&&g.modificadorseleccion_precio>0&&k.modificador_esmultiple>0?(i(),W(w,{key:0,onClick:oe=>H(g),class:"quantity-btn",severity:"danger",icon:"pi pi-minus"},null,8,["onClick"])):S("",!0),p.value[g.modificadorseleccion_nombre]&&g.modificadorseleccion_precio>0&&k.modificador_esmultiple>0?(i(),l("span",Et,$(((pe=b.value[g.modificadorseleccion_id])==null?void 0:pe.modificadorseleccion_cantidad)||1),1)):S("",!0),p.value[g.modificadorseleccion_nombre]&&g.modificadorseleccion_precio>0&&k.modificador_esmultiple>0?(i(),W(w,{key:2,onClick:oe=>U(g),class:"quantity-btn",severity:"danger",icon:"pi pi-plus"},null,8,["onClick"])):S("",!0)])])])])}),128))])]))),128)),((de=(te=n(o).currentProduct)==null?void 0:te.lista_productobase)==null?void 0:de.length)>0?(i(),l("h3",Nt,Lt)):S("",!0),e("div",qt,[(i(!0),l(D,null,q(n(o).currentProduct.lista_productobase,k=>(i(),l("div",{class:"product-base-item",key:k.producto_id},[e("h3",Tt,$(k.producto_descripcion),1),e("div",At,[e("h3",Ut,$(Math.round(k.productocombo_cantidad))+" x ",1),e("img",{class:"product-base-img",src:`${n(V)}/get-image?image_url=${k.producto_urlimagen}`,alt:""},null,8,Mt),k.lista_productoCambio&&k.lista_productoCambio.length>0?(i(),W(w,{key:0,class:"product-base-change-btn",label:"Cambiar",onClick:g=>N(k)},null,8,["onClick"])):S("",!0)]),Rt]))),128))])])])]}),_:1},8,["visible","style","header"])],64)}}},jt=z(Wt,[["__scopeId","data-v-9c991f11"]]);const Ot=d=>(Y("data-v-855a83a7"),d=d(),F(),d),zt={class:"px-0 mx-0 mt-5",style:{"min-height":"100vh"}},Yt={key:0,style:{height:"80vh",display:"flex","align-items":"center","justify-content":"center"}},Ft=Ot(()=>e("p",{class:"text-center text-4xl md:text-6xl"},[e("b",null,"Por favor seleccione una categoria")],-1)),Ht=[Ft],Kt={__name:"MenuView",setup(d){const o=re();t(j.currentRoute),t(localStorage.getItem("currentNeigborhood"));const _=ae(),P=O(),C=t(window.innerWidth);Q(()=>C.value<800);const u=()=>{C.value=window.innerWidth};A(async()=>{var v,N;(v=_.location.site)==null||v.site_id;const m=(N=_.location.site)==null?void 0:N.pe_site_id,y=await ye.get(`${V}/tiendas/${m||1}/products`);P.menu=y.categorias}),A(async()=>{window.addEventListener("resize",u),$e()}),ce(()=>{window.removeEventListener("resize",u)});const a=t(J.value[0].menus[0]);return t({}),T(J,()=>{a.value={category:J.value[0].menus[1].category,products:J.value[0].menus[1].products},console.log("cambio")}),t([{name:"S",id:1,imagen:"/images/logo.png",codigos:[10,26,8,9,13,27,11,4,5,110,112,113,111,109,115,118,119,116,117]},{name:"B",id:2,imagen:"https://backend.salchimonster.com/read-photo-product/mm9Ohnu7",codigos:[5,22,18,4]},{name:"P",id:4,imagen:"https://backend.salchimonster.com/read-photo-product/a1roeK3y",codigos:[19,24,4,5]}]),A(async()=>{we.value=!0}),(m,y)=>{const v=B("RouterView");return i(),l("div",zt,[h(ze),h(et),h(v),h(lt),n(o).path=="/call-center-vender"?(i(),l("div",Yt,Ht)):S("",!0),h(jt)])}}},oo=z(Kt,[["__scopeId","data-v-855a83a7"]]);export{oo as default};
