import{_ as J,j as B,y as Q,ai as W,I as x,k as A,K as X,H as $,r as V,o as t,c as a,a as e,F as h,b as v,i as U,g as y,e as n,M,h as E,t as T,f as m,aj as D,ad as K,d as j,u as b,q as Y,x as Z}from"./index-58581f28.js";import{D as ee}from"./DialogoPedido-a3e704dd.js";import{O as N}from"./OrderItem-530985a1.js";import{s as se}from"./siteService-5cb43e6b.js";import"./formatoPesos-2293ab52.js";/* empty css                                                                  */const d=w=>(Y("data-v-7a094e3f"),w=w(),Z(),w),te={class:"kitchen-layout xl:mx-0 mx-0 py-0 mt-6 px-0",style:{"background-color":"white",width:"100%"}},oe={key:0,class:"aside-static",style:{position:"sticky",top:"3rem"}},ae={class:"aside-card shadow-2"},ie=d(()=>e("div",{class:"aside-header"},[e("i",{class:"pi pi-map-marker"}),e("b",null,"SEDES")],-1)),le={class:"sites-scroll"},de={class:"main-area"},ne={class:"topbar shadow-1"},re={class:"left-wrap"},ce={class:"search-wrap"},_e={key:0,class:"col-12 p-3"},ue=d(()=>e("div",{class:"empty-state"},[e("i",{class:"pi pi-inbox empty-icon","aria-hidden":"true"}),e("p",{class:"empty-text"},"hoy no tenemos pedidos para esta sede aun.")],-1)),pe=[ue],he={key:1,class:"sections-row"},ve={class:"section-col"},ye={class:"panel-wrap"},me={class:"shadow-4 contenedor panel",style:{overflow:"hidden","background-color":"#ffad53"}},be={style:{height:"100%",width:"100%"}},fe={class:"col-12 text-center shadow-4 panel-header"},ge={class:"text-center text-2xl",style:{color:"black","font-weight":"bold"}},xe=d(()=>e("i",{class:"pi pi-envelope text-2xl","aria-hidden":"true"},null,-1)),we={class:"badge-count"},ke={class:"lg:pb-8 panel-body",style:{height:"100%","overflow-y":"auto"}},Oe={key:0,class:"sub-empty-state"},Se=d(()=>e("i",{class:"pi pi-inbox","aria-hidden":"true"},null,-1)),Ie=d(()=>e("span",null,'sin pedidos "recibidos"',-1)),Ce=[Se,Ie],Be={class:"section-col"},Ve={class:"panel-wrap"},Ee={class:"shadow-4 contenedor panel",style:{overflow:"hidden","background-color":"#8e3693"}},Te={style:{height:"100%",width:"100%"}},De={class:"col-12 text-center shadow-4 panel-header"},Ne={class:"text-center text-2xl",style:{color:"black","font-weight":"bold"}},Pe=d(()=>e("i",{class:"pi pi-clock text-2xl","aria-hidden":"true"},null,-1)),$e={class:"badge-count"},Ue={class:"lg:pb-8 panel-body",style:{height:"100%","overflow-y":"auto"}},Ae={key:0,class:"sub-empty-state"},Me=d(()=>e("i",{class:"pi pi-inbox","aria-hidden":"true"},null,-1)),Ke=d(()=>e("span",null,'sin pedidos "en preparación"',-1)),je=[Me,Ke],Re={class:"section-col"},Fe={class:"panel-wrap"},Le={class:"shadow-4 contenedor panel",style:{overflow:"hidden","background-color":"#00bf7a"}},qe={class:"lg:pb-8 panel-body",style:{height:"100%",width:"100%"}},ze={class:"col-12 text-center shadow-4 panel-header"},Ge={class:"text-center text-2xl",style:{color:"black","font-weight":"bold"}},He=d(()=>e("i",{class:"pi pi-send text-2xl","aria-hidden":"true"},null,-1)),Je={class:"badge-count"},Qe={style:{height:"100%","overflow-y":"auto"}},We={key:0,class:"sub-empty-state"},Xe=d(()=>e("i",{class:"pi pi-inbox","aria-hidden":"true"},null,-1)),Ye=d(()=>e("span",null,'sin pedidos "enviados"',-1)),Ze=[Xe,Ye],es={key:0,class:"section-col"},ss={class:"panel-wrap"},ts={class:"shadow-4 contenedor panel",style:{overflow:"hidden","background-color":"red"}},os={class:"lg:pb-8 panel-body",style:{height:"100%",width:"100%"}},as={class:"col-12 text-center shadow-4 panel-header"},is={class:"text-center text-2xl",style:{color:"black","font-weight":"bold"}},ls=d(()=>e("i",{class:"pi pi-times text-2xl","aria-hidden":"true"},null,-1)),ds={class:"badge-count"},ns={style:{height:"100%","overflow-y":"auto"}},rs=d(()=>e("div",{class:"aside-header"},[e("i",{class:"pi pi-map-marker"}),e("b",null,"SEDES")],-1)),cs={class:"sites-scroll"},_s={__name:"pedidos",setup(w){const u=B([]),l=Q(),r=W(),c=B(""),_=B(""),k=B(!1),O=x(()=>l.TodayOrders.filter(i=>i.current_status==="generada")),S=x(()=>l.TodayOrders.filter(i=>i.current_status==="en preparacion")),I=x(()=>l.TodayOrders.filter(i=>i.current_status==="enviada")),C=x(()=>l.TodayOrders.filter(i=>i.current_status==="cancelada")),R=x(()=>O.value.length+S.value.length+I.value.length+C.value.length);A(()=>{l.startOrderUpdates()}),X(()=>{l.stopOrderUpdates()}),A(async()=>{u.value=await se.getSites(),l.getTodayOrders()}),$(()=>r.site,()=>{l.getTodayOrders()}),$(c,()=>{_.value=""}),$(_,()=>{c.value=""});const P=()=>{var i;c.value!==""?F(c.value):_.value!==""&&L((i=_.value)==null?void 0:i.split(" ").join(""))},F=async i=>{const o=await K.getOrderById(i);o!=null&&o.order_id?(l.setVisible("currentOrder",!0),l.setOrder(o),l.currentSearchingOrder=o):alert("Orden no encontrada")},L=async i=>{const o=await K.getOrderByPhone(i);o!=null&&o.order_id?(l.setVisible("currentOrder",!0),l.setOrder(o),r.site=u.value.filter(p=>p.site_id==o.site_id)[0],l.currentSearchingOrder=o):alert("Orden no encontrada")};return(i,o)=>{const p=V("Button"),q=V("InputText"),z=V("InputMask"),G=V("Sidebar");return t(),a("div",te,[u.value.length?(t(),a("aside",oe,[e("div",ae,[ie,e("div",le,[(t(!0),a(h,null,v(u.value.filter(s=>s.show_on_web),s=>{var f,g;return t(),y(p,{key:s.site_id,class:j(["site-item",{active:((f=b(r).site)==null?void 0:f.site_id)===s.site_id}]),text:"",label:s.site_name,"aria-pressed":((g=b(r).site)==null?void 0:g.site_id)===s.site_id,onClick:H=>b(r).site=s},null,8,["class","label","aria-pressed","onClick"])}),128))])])])):U("",!0),e("main",de,[e("div",ne,[e("div",re,[u.value.length?(t(),y(p,{key:0,class:"toggle-aside",icon:"pi pi-bars",label:"Sedes",severity:"help",onClick:o[0]||(o[0]=s=>k.value=!0)})):U("",!0)]),e("div",ce,[n(q,{modelValue:c.value,"onUpdate:modelValue":o[1]||(o[1]=s=>c.value=s),modelModifiers:{trim:!0},placeholder:"Buscar por id (sin #)",inputmode:"numeric",autocomplete:"off","aria-label":"Buscar por ID de orden",onKeyup:M(P,["enter"])},null,8,["modelValue"]),n(z,{modelValue:_.value,"onUpdate:modelValue":o[2]||(o[2]=s=>_.value=s),prefix:"+57",id:"basic",mask:"999 999 9999",placeholder:"Buscar por teléfono",autocomplete:"tel","aria-label":"Buscar por número de teléfono",onKeyup:M(P,["enter"])},null,8,["modelValue"]),n(p,{onClick:P,severity:"help",icon:"pi pi-search",label:"Buscar",disabled:!c.value&&!_.value},null,8,["disabled"])])]),n(ee),R.value===0?(t(),a("div",_e,pe)):(t(),a("div",he,[e("section",ve,[e("div",ye,[e("div",me,[e("div",be,[e("p",fe,[e("span",ge,[xe,E(" RECIBIDOS "),e("small",we,T(O.value.length),1)])]),e("div",ke,[O.value.length?(t(),y(D,{key:1,name:"fade",tag:"div"},{default:m(()=>[(t(!0),a(h,null,v(O.value,s=>(t(),a("div",{class:"px-3 py-2",key:`recibida-${s.order_id}`},[n(N,{order:s},null,8,["order"])]))),128))]),_:1})):(t(),a("div",Oe,Ce))])])])])]),e("section",Be,[e("div",Ve,[e("div",Ee,[e("div",Te,[e("p",De,[e("span",Ne,[Pe,E(" EN PREPARACIÓN "),e("small",$e,T(S.value.length),1)])]),e("div",Ue,[S.value.length?(t(),y(D,{key:1,name:"fade",tag:"div"},{default:m(()=>[(t(!0),a(h,null,v(S.value,s=>(t(),a("div",{class:"px-3 py-2",key:`prep-${s.order_id}`},[n(N,{order:s},null,8,["order"])]))),128))]),_:1})):(t(),a("div",Ae,je))])])])])]),e("section",Re,[e("div",Fe,[e("div",Le,[e("div",qe,[e("p",ze,[e("span",Ge,[He,E(" ENVIADOS "),e("small",Je,T(I.value.length),1)])]),e("div",Qe,[I.value.length?(t(),y(D,{key:1,name:"fade",tag:"div"},{default:m(()=>[(t(!0),a(h,null,v(I.value,s=>(t(),a("div",{class:"px-3 py-2",key:`env-${s.order_id}`},[n(N,{id:s.order_id,order:s},null,8,["id","order"])]))),128))]),_:1})):(t(),a("div",We,Ze))])])])])]),C.value.length?(t(),a("section",es,[e("div",ss,[e("div",ts,[e("div",os,[e("p",as,[e("span",is,[ls,E(" CANCELADOS "),e("small",ds,T(C.value.length),1)])]),e("div",ns,[n(D,{name:"fade",tag:"div"},{default:m(()=>[(t(!0),a(h,null,v(C.value,s=>(t(),a("div",{class:"px-3 py-2",key:`canc-${s.order_id}`},[n(N,{order:s},null,8,["order"])]))),128))]),_:1})])])])])])):U("",!0)]))]),n(G,{visible:k.value,"onUpdate:visible":o[3]||(o[3]=s=>k.value=s),position:"left",modal:"",class:"aside-mobile",dismissable:!0},{header:m(()=>[rs]),default:m(()=>[e("div",cs,[(t(!0),a(h,null,v(u.value.filter(s=>s.show_on_web),s=>{var f,g;return t(),y(p,{key:s.site_id,class:j(["site-item",{active:((f=b(r).site)==null?void 0:f.site_id)===s.site_id}]),text:"",label:s.site_name,"aria-pressed":((g=b(r).site)==null?void 0:g.site_id)===s.site_id,onClick:H=>{b(r).site=s,k.value=!1}},null,8,["class","label","aria-pressed","onClick"])}),128))])]),_:1},8,["visible"])])}}},bs=J(_s,[["__scopeId","data-v-7a094e3f"]]);export{bs as default};
