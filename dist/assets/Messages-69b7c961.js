import{I as Ke,z as Xe,i as X,G as z,h as r,D as P,C as et,J as Se,M as tt,g as I,o as a,c as l,f,e as w,a as i,F as U,q as ee,k as d,t as L,n as k,d as b,u as je,r as De,L as Re,b as ot,H as W,j as _e,p as at,m as st,N as He,_ as it}from"./index-bc11b039.js";import{u as lt,P as rt}from"./Messages.vue_vue_type_style_index_0_scoped_9c2f3987_lang-487dd03b.js";const u=B=>(at("data-v-9c2f3987"),B=B(),st(),B),nt={key:0},dt=["src"],ct=["src"],ut=["href"],mt=u(()=>i("i",{class:"pi pi-file"},null,-1)),pt={style:{color:"white",margin:"0","font-weight":"300"}},_t=["innerHTML"],ht=["innerHTML"],ft={style:{color:"white",margin:"0","font-weight":"300",position:"absolute",bottom:".5rem",right:"1rem","min-width":"max-content",display:"flex",gap:".5rem"}},gt={style:{opacity:".5"}},vt={key:0,class:"fa-solid fa-check-double",style:{color:"greenyellow"}},yt={key:1,class:"fa-solid fa-check",style:{color:"greenyellow"}},wt={key:2,class:"fa-solid fa-check",style:{color:"gray"}},kt={key:1,style:{position:"absolute",left:"-8px",top:"0",color:"#2f2f41"},viewBox:"0 0 8 13",height:"13",width:"8"},bt=u(()=>i("path",{opacity:"0.13",fill:"#0000000",d:"M1.533,3.568L8,12.193V1H2.812C1.042,1,0.474,2.156,1.533,3.568z"},null,-1)),xt=u(()=>i("path",{fill:"currentColor",d:"M1.533,2.568L8,11.193V0L2.812,0C1.042,0,0.474,1.156,1.533,2.568z"},null,-1)),Ct=[bt,xt],Mt={key:2,style:{position:"absolute",right:"-8px",top:"0",color:"#0a3744"},viewBox:"0 0 8 13",height:"13",width:"8"},Tt=u(()=>i("path",{opacity:"0.13",d:"M5.188,1H0v11.193l6.467-8.625C7.526,2.156,6.958,1,5.188,1z"},null,-1)),Lt=u(()=>i("path",{fill:"currentColor",d:"M5.188,0H0v11.193l6.467-8.625C7.526,1.156,6.958,0,5.188,0z"},null,-1)),$t=[Tt,Lt],Et={style:{display:"flex",gap:"1rem","flex-direction":"column",padding:"1rem  0rem"}},At={style:{display:"flex"}},St=u(()=>i("i",{class:"fa fa-laugh-wink emoji-picker"},null,-1)),jt={key:0,style:{position:"absolute",inset:"0",background:"#00000080","z-index":"500000",display:"flex","align-items":"center","justify-content":"center",color:"#fff","font-size":"1.6rem","pointer-events":"none"}},Dt={style:{position:"relative",height:"100%",width:"100%"}},Rt={style:{margin:"0",color:"white","font-weight":"400"}},Ht=u(()=>i("i",{class:"fa-solid fa-message text-xl p-1"},null,-1)),zt=u(()=>i("i",{class:"fa-solid fa-copy text-xl p-1"},null,-1)),It=u(()=>i("i",{class:"fa-solid fa-send text-xl p-1"},null,-1)),Ut=u(()=>i("i",{class:"fa-solid fa-message text-xl p-1"},null,-1)),Bt=u(()=>i("i",{class:"fa-solid fa-copy text-xl p-1"},null,-1)),Vt=u(()=>i("i",{class:"fa-solid fa-send text-xl p-1"},null,-1)),Ft=["src","onClick"],Ot=["src"],Nt=["href"],Pt=u(()=>i("i",{class:"pi pi-file"},null,-1)),Wt=["src","onClick"],Qt=["src"],qt=["href"],Gt=u(()=>i("i",{class:"pi pi-file"},null,-1)),Jt={style:{color:"white",margin:"0","font-weight":"300"}},Yt=["innerHTML"],Zt=["innerHTML"],Kt=["onClick"],Xt={style:{color:"white",margin:"0","font-weight":"300"}},eo=["innerHTML"],to=["innerHTML"],oo=["onClick"],ao={style:{color:"white",margin:"0","font-weight":"300",position:"absolute",bottom:".5rem",right:"1rem","min-width":"max-content",display:"flex",gap:".5rem"}},so={style:{opacity:".5"}},io={key:0,class:"fa-solid fa-check-double",style:{color:"greenyellow"}},lo={key:1,class:"fa-solid fa-check",style:{color:"greenyellow"}},ro={key:2,class:"fa-solid fa-check",style:{color:"gray"}},no={key:2,style:{position:"absolute",left:"-8px",top:"0",color:"#2f2f41"},viewBox:"0 0 8 13",height:"13",width:"8"},co=u(()=>i("path",{opacity:"0.13",fill:"#0000000",d:"M1.533,3.568L8,12.193V1H2.812C1.042,1,0.474,2.156,1.533,3.568z"},null,-1)),uo=u(()=>i("path",{fill:"currentColor",d:"M1.533,2.568L8,11.193V0L2.812,0C1.042,0,0.474,1.156,1.533,2.568z"},null,-1)),mo=[co,uo],po={key:3,style:{position:"absolute",right:"-8px",top:"0",color:"#0a3744"},viewBox:"0 0 8 13",height:"13",width:"8"},_o=u(()=>i("path",{opacity:"0.13",d:"M5.188,1H0v11.193l6.467-8.625C7.526,2.156,6.958,1,5.188,1z"},null,-1)),ho=u(()=>i("path",{fill:"currentColor",d:"M5.188,0H0v11.193l6.467-8.625C7.526,1.156,6.958,0,5.188,0z"},null,-1)),fo=[_o,ho],go={key:1,style:{height:"100%",width:"3rem","min-width":"3rem","aspect-ratio":"1/1","background-color":"rgb(3 88 95 / 53%)","border-radius":"50%",display:"flex","align-items":"center","justify-content":"center","text-transform":"uppercase"}},vo={style:{margin:"0",color:"white","font-weight":"400"}},yo={key:0,style:{display:"flex",gap:"1rem","justify-content":"end",width:"100%"}},wo={style:{"background-color":"#0a3744","max-width":"20rem",width:"100%","border-radius":".5rem",height:"4rem"}},ko={style:{color:"white",margin:"0","font-weight":"300",display:"flex","align-items":"center",gap:".5rem",height:"100%",padding:"1rem 1rem 1rem 1rem"}},bo=u(()=>i("i",{class:"pi pi-send",style:{color:"white"}},null,-1)),xo=u(()=>i("div",{style:{height:"100%",width:"3rem","min-width":"3rem","aspect-ratio":"1/1","background-color":"rgb(3 88 95 / 53%)","border-radius":"50%",display:"flex","align-items":"center","justify-content":"center","text-transform":"uppercase",padding:".5rem"}},[i("img",{style:{height:"2rem",width:"2rem","aspect-ratio":"1/1","object-fit":"contain"},src:"https://backend.salchimonster.com/read-photo-product/xai0dVnL",alt:""})],-1)),Co={key:0,style:{"text-align":"center",opacity:"0.6"}},Mo={key:1,style:{"max-height":"60vh","overflow-y":"auto"}},To={key:0,style:{position:"relative","border-radius":".3rem"}},Lo=["src"],$o={key:1,style:{position:"relative"}},Eo=["src"],Ao={key:2,style:{position:"relative"}},So=u(()=>i("img",{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/8/87/PDF_file_icon.svg/1200px-PDF_file_icon.svg.png",style:{width:"10rem"}},null,-1)),jo={style:{flex:"1 1 auto"}},Do={style:{width:"100%","justify-content":"end",display:"flex"}},Ro={key:0,style:{"background-color":"#00000080",position:"fixed",width:"100vw",height:"100vh",left:"0",top:"0","z-index":"1000000",display:"flex","align-items":"center","justify-content":"center",opacity:"1"}},Ho={style:{"max-height":"90vh",position:"relative","max-width":"90vw"}},zo=["src"],Io=Ke({__name:"Messages",props:{send_function:{type:Function,default:()=>{}},change_expiration:{type:Function,default:()=>{}},send_text:{type:Function,default:()=>{}}},emits:["down"],setup(B,{expose:ze,emit:Uo}){const he=Xe(),fe=e=>{e.target.closest(".emoji-picker")||($.value=!1)};X(()=>{document.addEventListener("click",fe)}),z(()=>{document.removeEventListener("click",fe)});const Q=e=>{const t=e.message_data.content??"";navigator.clipboard.writeText(t).then(()=>{he.add({severity:"success",summary:"Copiado",detail:"El texto ha sido copiado al portapapeles",life:2e3})}).catch(s=>{he.add({severity:"error",summary:"Error",detail:"No se pudo copiar el texto",life:2e3}),console.error("Error copiando al portapapeles:",s)})},$=r(!1),V=r(null),F=r(!1),Ie=lt();function q(e){var s;Array.from(((s=e.clipboardData)==null?void 0:s.items)||[]).forEach(c=>{if(c.kind==="file"){const p=c.getAsFile();if(!p)return;_.value.push({file:p,name:p.name||`pasted-${Date.now()}.${p.type.split("/")[1]||"bin"}`,type:p.type,caption:"",preview:URL.createObjectURL(p)}),E.value=!0}})}const te=B;X(()=>window.addEventListener("paste",q)),z(()=>window.removeEventListener("paste",q)),X(()=>{window.addEventListener("paste",q)}),z(()=>{window.removeEventListener("paste",q)});const Ue=e=>{j.value+=e.i,$.value=!1},G=r(!1),_=r([]),E=r(!1),oe=r(!1),ge=r(""),ae=e=>{oe.value=!0,ge.value=`${e}?size=visual`};function se(e){const t=_.value.splice(e,1);t.length&&t[0].preview&&URL.revokeObjectURL(t[0].preview)}function Be(){alert("removeAllfiles"),_.value.forEach(e=>e.preview&&URL.revokeObjectURL(e.preview)),_.value=[]}function Ve(e){e.currentTarget===e.target&&(G.value=!1)}function A(e){return`${W}/files/${e.file_type}s/${e.file_id}?size=thumbnail`}function ve(){_.value.forEach(e=>e.preview&&URL.revokeObjectURL(e.preview)),_.value=[]}P(E,e=>{e||ve()}),z(()=>{ve()});const Fe=async e=>{if(!(e.message_data.current_status_id>=3||e._marking)){e._marking=!0;try{await _e.post(`${W}/read-message/${e.message_data.id}/${g.params.restaurant_id}`,!1),e.message_data.current_status_id=3}catch(t){console.error("No se pudo marcar como leÃ­do",t)}}},ye=()=>{j.value="",$.value=!1},Oe=e=>{te.send_text(e,n.value),j.value="",F.value=!1},we=e=>{e.preventDefault(),G.value=!1,Array.from(e.dataTransfer.files||[]).forEach(s=>{const c={file:s,name:s.name,type:s.type,caption:"",preview:""};s.type.startsWith("image/")&&(c.preview=URL.createObjectURL(s)),_.value.push(c)}),_.value.length&&(E.value=!0)},Ne=()=>{const e=[..._.value];E.value=!1,_.value.forEach(t=>t.preview&&URL.revokeObjectURL(t.preview)),_.value=[],te.send_function(e)},Pe=()=>{if(!m.value)return;const e=m.value.getBoundingClientRect();x.value.forEach((t,s)=>{if(t.message_data.employer_id||t.message_data.current_status_id>=3)return;const c=m.value.children[s];if(!c)return;const p=c.getBoundingClientRect();p.top>=e.top&&p.bottom<=e.bottom&&Fe(t)})};P(F,e=>{e||ye()}),r(!1);const g=et(),ke=e=>{if(!e)return"";const t=e.split(" "),s=Array.from(t[0])[0],c=t[1]?Array.from(t[1])[0]:"";return s+c};let h=null,J=null,ie=!0;const le=r(!0),x=r([]),re=r({}),m=r(null),S=r(!1),M=r(0),j=r(""),Y=r(0),be=r(20),D=r(!1),ne=r(!1),O=r(!1),de=r({}),n=r({message_data:{id:3559,user_id:10,restaurant_id:1,content:`final del mensaje
`,created_at:"2025-05-03T02:16:30.361038+00:00",current_status_id:1,employer_id:1082,employer_name:"ANDRES FELIPE ARrECHEA",wa_id:"wamid.HBgMNTczMjI2ODkyOTg4FQIAERgSQzg4QzYyQzg0MDg0RkY2OEVDAA==",wa_timestamp:"1746238590",context_message_id:"wamid.HBgMNTczMjI2ODkyOTg4FQIAERgSNDIyNUIxQkZEMkE1MTA4RDA3AA==",local_dt:"2025-05-02T21:16:30",file_type:null,file_id:null},time:"09:16 PM",date:"02/05/2025",day_label:"hoy",contest:{message_data:{id:3490,user_id:10,restaurant_id:1,content:"fsfs",created_at:"2025-05-03T01:28:04.499413+00:00",current_status_id:1,employer_id:1082,employer_name:"ANDRES FELIPE ARrECHEA",wa_id:"wamid.HBgMNTczMjI2ODkyOTg4FQIAERgSNDIyNUIxQkZEMkE1MTA4RDA3AA==",wa_timestamp:"1746235684",context_message_id:"null",file_type:null,file_id:null,local_dt:"2025-05-02T20:28:04",time:"08:28 PM",date:"02/05/2025",day_label:"hoy"},time:"08:28 PM",date:"02/05/2025",day_label:"hoy"}});r({});const xe=e=>{F.value=!0,n.value=e},ce=e=>{de.value[e]=!de.value[e]},N=e=>!!de.value[e];function R(e){if(!e)return"";let t=e.replace(/\n/g,"<br/>");return t=t.replace(/\*([^*]+)\*/g,"<strong>$1</strong>"),t=t.replace(/((https?:\/\/|www\.)[^\s<]+)/g,s=>`<a href="${s.startsWith("http")?s:`https://${s}`}" target="_blank" style="color:#42a5f5;text-decoration:underline;">${s}</a>`),t}const We=Se(()=>({position:"absolute",zIndex:"300000",height:"3rem",width:"3rem",borderRadius:"50%",bottom:"5rem",right:"2rem",backgroundColor:O.value?"rgb(33, 150, 243)":"rgba(255, 255, 255,.1)",color:"white",border:"none",padding:"0.5rem 1rem",cursor:"pointer"})),Qe=Se(()=>({position:"absolute",zIndex:"300000",height:"2rem",display:"flex",alignItems:"center",justifyContent:"center",width:"2rem",borderRadius:"50%",bottom:"5rem",right:"1rem",backgroundColor:"rgb(156, 39, 176)",color:"white",border:"none",padding:"0.5rem 1rem",cursor:"pointer"})),H=(e,t="thumbnail")=>`${W}/files/images/${e.message_data.file_id}?size=${t}`,ue=async(e=!0)=>{var s,c,p;if(pe.value=!1,D.value=!0,(s=V.value)==null||s.abort(),V.value=new AbortController,Y.value=0,ne.value=!1,!g.params.user_id||!g.params.restaurant_id)return;const t=await _e.get(`${W}/conversation/${g.params.restaurant_id}/${g.params.user_id}/${Y.value}/20`,!1,{signal:V.value.signal});x.value=((c=t==null?void 0:t[0])==null?void 0:c.messages)||[],re.value=((p=t==null?void 0:t[0])==null?void 0:p.user)||{},setTimeout(()=>{pe.value=!0},0),le.value&&(le.value=!1),D.value=!1};P(O,e=>{e||(M.value=0)});const qe=async e=>{const t=x.value.findIndex(s=>s.message_data.wa_id===e.message_data.wa_id);t!==-1?x.value[t]=e:g.params.user_id===e.message_data.wa_user_id&&(x.value.push(e),e.message_data.employer_id||(S.value=!0,M.value++)),await He()},Ge=async()=>{var p;if(D.value||ne.value)return;D.value=!0;const e=m.value?m.value.scrollHeight:0,t=Y.value+be.value,s=await _e.get(`${W}/conversation/${g.params.restaurant_id}/${g.params.user_id}/${t}/${be.value}`,!1),c=((p=s==null?void 0:s[0])==null?void 0:p.messages)||[];if(c.length===0)ne.value=!0;else{x.value=[...c,...x.value],Y.value=t,await He();const K=m.value.scrollHeight;m.value.scrollTop=K-e}D.value=!1},Ce=()=>{if(Pe(),!m.value)return;const{scrollTop:e,scrollHeight:t,clientHeight:s}=m.value;e<50&&Ge(),e+s>=t-50?(S.value=!1,O.value=!1):S.value=!0},Je=()=>{m.value&&(m.value.scrollTo({bottom:0}),S.value=!1,O.value=!1),M.value=0},Z=()=>{m.value&&(setTimeout(()=>{m.value.scrollTo({top:m.value.scrollHeight})},100),S.value=!1,O.value=!1),M.value=0};function Me(){J&&(clearTimeout(J),J=null),h&&(ie=!1,h.close(1e3,"routeâchange"),h.onopen=h.onmessage=h.onerror=h.onclose=null,h=null)}function me(){if(!g.params.user_id)return;const e=`wss://sockets-service.salchimonster.com/ws/${g.params.user_id}`;h=new WebSocket(e),ie=!0,h.onopen=()=>{console.log("ð¢ Conectado a",e)},h.onmessage=t=>{const s=JSON.parse(t.data);s&&(qe(s),te.change_expiration(!1))},h.onerror=t=>console.error("WebSocket error",t),h.onclose=t=>{console.log("ð´ Socket cerrado",t.reason||t.code),ie&&(J=window.setTimeout(me,5e3))}}X(()=>{ue(),me(),m.value&&m.value.addEventListener("scroll",Ce)}),z(()=>{h&&h.close(),m.value&&m.value.removeEventListener("scroll",Ce)}),P(()=>g.params,()=>{le.value=!0,x.value=[],Me(),ue(),Z(),me(),M.value=0}),z(()=>{var e;(e=V.value)==null||e.abort(),Me()}),tt((e,t,s)=>{var c;(c=V.value)==null||c.abort(),s()});const pe=r(!0);return P(()=>g.params,()=>{ue()}),ze({scrollToBottom:Je,scrollToBottomNoSmooth:Z,getAllFiles:()=>_.value.map(e=>e.file)}),(e,t)=>{const s=I("Button"),c=I("Textarea"),p=I("Dialog"),K=I("ProgressSpinner"),Ye=I("progressSpinner"),Ze=I("InputText");return a(),l(U,null,[f(p,{visible:F.value,"onUpdate:visible":t[5]||(t[5]=o=>F.value=o),close:()=>ye,header:"Acciones del mensaje",modal:!0,style:k([{width:"90vw",maxWidth:" 50rem"},{"background-color":"rgb(0, 1, 22)",display:"flex"}]),closable:!0,dismissableMask:!1},{default:w(()=>{var o,v,y;return[i("div",{style:k([n.value.message_data.employer_id?"background-color:#0a3744;border-radius:.5rem 0 .5rem .5rem;":"background-color:#2f2f41;border-radius:0 .5rem .5rem .5rem;",{padding:"1rem 1rem 2.5rem 1rem","overflow-wrap":"break-word","word-break":"break-word","max-width":"100%","min-width":"10rem",position:"relative",display:"flex","flex-direction":"column",gap:".5rem"}])},[n.value.message_data.file_type?(a(),l(U,{key:0},[n.value.message_data.file_type==="image"?(a(),l("div",nt,[i("img",{class:"img-fluid",src:H(n.value),onClick:t[0]||(t[0]=T=>ae(H(n.value))),style:{"border-radius":".3rem",width:"18rem","object-fit":"contain","aspect-ratio":"1 / 1",cursor:"pointer"}},null,8,dt)])):n.value.message_data.file_type==="audio"?(a(),l("audio",{key:1,src:A(n.value.message_data),controls:"",style:{width:"100%","min-width":"20rem","max-width":"100%","background-color":"white","border-radius":".5rem"}},null,8,ct)):(a(),l("a",{key:2,href:A(n.value.message_data),target:"_blank",style:{color:"#2196f3","text-decoration":"none","align-self":"flex-start",display:"flex","align-items":"center",gap:".5rem"}},[mt,ee(" Descargar archivo ")],8,ut))],64)):d("",!0),i("h6",pt,[N(n.value.message_data.id)?(a(),l("span",{key:1,innerHTML:R(n.value.message_data.content)},null,8,ht)):(a(),l("span",{key:0,innerHTML:R(((o=n.value.message_data.content)==null?void 0:o.substring(0,200))+(((v=n.value.message_data.content)==null?void 0:v.length)>200?"â¦":""))},null,8,_t)),((y=n.value.message_data.content)==null?void 0:y.length)>200?(a(),l("button",{key:2,onClick:t[1]||(t[1]=T=>ce(e.message.message_data.id)),style:{background:"none",border:"none",color:"#2196f3",cursor:"pointer",padding:"0 .5rem"}}," Ver "+L(N(n.value.message_data.id)?"menos":"mÃ¡s"),1)):d("",!0)]),i("h6",ft,[i("span",gt,L(n.value.time),1),n.value.message_data.current_status_id==3&&n.value.message_data.employer_id?(a(),l("i",vt)):n.value.message_data.current_status_id==2&&n.value.message_data.employer_id?(a(),l("i",yt)):n.value.message_data.current_status_id==1&&n.value.message_data.employer_id?(a(),l("i",wt)):d("",!0)]),n.value.message_data.employer_id?(a(),l("svg",Mt,$t)):(a(),l("svg",kt,Ct))],4),i("div",Et,[i("div",null,[$.value?(a(),b(je(rt),{key:0,class:"emoji-picker",native:!0,style:{position:"absolute",bottom:"4rem","z-index":"1000"},onSelect:Ue})):d("",!0),f(s,{style:{position:"absolute",right:"-1rem"}})]),f(c,{modelValue:j.value,"onUpdate:modelValue":t[2]||(t[2]=T=>j.value=T),autoResize:"",rows:"4",placeholder:"Escribe un mensajeâ¦",style:{width:"100%","background-color":""}},null,8,["modelValue"]),i("div",At,[f(s,{class:"emoji-picker",text:"",style:{"font-size":"2rem"},onClick:t[3]||(t[3]=T=>$.value=!$.value)},{default:w(()=>[St]),_:1}),f(s,{label:"Responder",icon:"pi pi-send",severity:"help",style:{width:"100%"},onClick:t[4]||(t[4]=T=>Oe(j.value))})])])]}),_:1},8,["visible","close"]),i("div",{style:{height:"100%",position:"relative",display:"flex","justify-content":"center"},onDragover:t[8]||(t[8]=Re(()=>{},["prevent"])),onDragenter:t[9]||(t[9]=o=>G.value=!0),onDragleave:Ve,onDrop:we,class:ot(pe.value?"container-messages":".container-oculto")},[G.value?(a(),l("div",jt," Suelte aquÃ­ ")):d("",!0),D.value?(a(),b(K,{key:1,style:{width:"50px",height:"50px",position:"absolute","z-index":"100",color:"white"},strokeWidth:"8",fill:"transparent",animationDuration:".3s","aria-label":"Custom ProgressSpinner"})):d("",!0),i("div",Dt,[i("div",{ref_key:"messagesContainer",ref:m,style:{padding:"1rem",display:"flex","flex-direction":"column",gap:"0rem","overflow-y":"auto",height:"100%","padding-bottom":"4rem"}},[(a(!0),l(U,null,De(x.value,o=>{var v,y,T,Te,Le,$e,Ee,Ae;return a(),l("div",{key:o.message_data.id},[i("div",{class:"message",style:k([o.message_data.employer_id?"justify-content: end;":"justify-content: start;",{width:"100%",display:"flex",gap:"1rem","padding-bottom":"1rem"}])},[o.message_data.employer_id?d("",!0):(a(),l("div",{key:0,style:k([`background-color:${(v=re.value)==null?void 0:v.color}`,{height:"100%",width:"3rem","aspect-ratio":"1/1","border-radius":"50%",display:"flex","align-items":"center","justify-content":"center","text-transform":"uppercase"}])},[i("h5",Rt,L(ke((y=re.value)==null?void 0:y.name)),1)],4)),i("div",{style:k([o.message_data.employer_id?"background-color:#0a3744;border-radius:.5rem 0 .5rem .5rem;":"background-color:#2f2f41;border-radius:0 .5rem .5rem .5rem;",{padding:"1rem 1rem 2.5rem 1rem","overflow-wrap":"break-word","word-break":"break-word","max-width":"60%","min-width":"15rem",position:"relative",display:"flex","flex-direction":"column",gap:"1rem"}])},[i("div",null,[o.message_data.employer_id?(a(),b(s,{key:0,class:"options",style:{color:"white"},onClick:C=>xe(o)},{default:w(()=>[Ht]),_:2},1032,["onClick"])):d("",!0),o.message_data.employer_id?(a(),b(s,{key:1,class:"options-variant",onClick:C=>Q(o),style:{color:"white",left:"-6rem","background-color":"#2196f3"}},{default:w(()=>[zt]),_:2},1032,["onClick"])):d("",!0),o.message_data.employer_id?(a(),b(s,{key:2,class:"options-variant-template",onClick:C=>Q(o),style:{color:"white",left:"-9rem","background-color":"orangered"}},{default:w(()=>[It]),_:2},1032,["onClick"])):d("",!0)]),i("div",null,[o.message_data.employer_id?d("",!0):(a(),b(s,{key:0,class:"options2",style:{color:"white"},onClick:C=>xe(o)},{default:w(()=>[Ut]),_:2},1032,["onClick"])),o.message_data.employer_id?d("",!0):(a(),b(s,{key:1,class:"options2-variant",onClick:C=>Q(o),style:{color:"white",right:"-6rem","background-color":"#2196f3"}},{default:w(()=>[Bt]),_:2},1032,["onClick"])),o.message_data.employer_id?d("",!0):(a(),b(s,{key:2,class:"options-variant-template2",onClick:C=>Q(o),style:{color:"white",right:"-9rem","background-color":"orangered"}},{default:w(()=>[Vt]),_:2},1032,["onClick"]))]),o.message_data.file_type?(a(),l(U,{key:0},[o.message_data.file_type==="image"?(a(),l("img",{key:0,class:"img-fluid",src:H(o),onClick:C=>ae(H(o)),style:{"max-width":"38rem","border-radius":".3rem",width:"18rem","object-fit":"cover","aspect-ratio":"1 / 1",cursor:"pointer"}},null,8,Ft)):o.message_data.file_type==="audio"?(a(),l("audio",{key:1,src:A(o.message_data),controls:"",style:{width:"100%","min-width":"20rem","max-width":"100%","background-color":"white","border-radius":".5rem"}},null,8,Ot)):(a(),l("a",{key:2,href:A(o.message_data),target:"_blank",style:{color:"#2196f3","text-decoration":"none","align-self":"flex-start",display:"flex","align-items":"center",gap:".5rem"}},[Pt,ee(" Descargar archivo ")],8,Nt))],64)):d("",!0),o.contest?(a(),l("div",{key:1,class:"message",style:k([o.message_data.employer_id?"justify-content: end;":"justify-content: start;",{width:"100%",display:"flex",gap:"1rem"}])},[i("div",{style:k([o.message_data.employer_id?"background-color:#0a3744;border-radius:.5rem 0 .5rem .5rem;":"background-color:#2f2f41;border-radius:0 .5rem .5rem .5rem;",{"overflow-wrap":"break-word","word-break":"break-word","max-width":"100%","min-width":"10rem",position:"relative",display:"flex",opacity:".5","flex-direction":"column",gap:".5rem"}])},[o.contest.message_data.file_type?(a(),l(U,{key:0},[o.contest.message_data.file_type==="image"?(a(),l("img",{key:0,class:"img-fluid",src:H(o.contest),onClick:C=>ae(H(o.contest)),style:{"max-width":"38rem","border-radius":".3rem",width:"18rem","object-fit":"cover",cursor:"pointer"}},null,8,Wt)):o.contest.message_data.file_type==="audio"?(a(),l("audio",{key:1,src:A(o.contest.message_data),controls:"",style:{width:"100%","min-width":"20rem","max-width":"100%","background-color":"white","border-radius":".5rem"}},null,8,Qt)):(a(),l("a",{key:2,href:A(o.contest.message_data),target:"_blank",style:{color:"#2196f3","text-decoration":"none","align-self":"flex-start",display:"flex","align-items":"center",gap:".5rem"}},[Gt,ee(" Descargar archivo ")],8,qt))],64)):d("",!0),i("h6",Jt,[N(o.message_data.id)?(a(),l("span",{key:1,innerHTML:R(o.contest.message_data.content)},null,8,Zt)):(a(),l("span",{key:0,innerHTML:R(((T=o.contest.message_data.content)==null?void 0:T.substring(0,200))+(((Te=o.contest.message_data.content)==null?void 0:Te.length)>30?"â¦":""))},null,8,Yt)),((Le=o.contest.message_data.content)==null?void 0:Le.length)>30?(a(),l("button",{key:2,onClick:C=>ce(o.contest.message_data.id),style:{background:"none",border:"none",color:"#2196f3",cursor:"pointer",padding:"0 .5rem"}},null,8,Kt)):d("",!0)])],4)],4)):d("",!0),i("h6",Xt,[N(o.message_data.id)?(a(),l("span",{key:1,innerHTML:R(o.message_data.content)},null,8,to)):(a(),l("span",{key:0,innerHTML:R((($e=o.message_data.content)==null?void 0:$e.substring(0,200))+(((Ee=o.message_data.content)==null?void 0:Ee.length)>200?"â¦":""))},null,8,eo)),((Ae=o.message_data.content)==null?void 0:Ae.length)>200?(a(),l("button",{key:2,onClick:C=>ce(o.message_data.id),style:{background:"none",border:"none",color:"#2196f3",cursor:"pointer",padding:"0 .5rem"}}," Ver "+L(N(o.message_data.id)?"menos":"mÃ¡s"),9,oo)):d("",!0)]),i("h6",ao,[i("span",so,L(o.date)+" - "+L(o.time),1),o.message_data.current_status_id==3&&o.message_data.employer_id?(a(),l("i",io)):o.message_data.current_status_id==2&&o.message_data.employer_id?(a(),l("i",lo)):o.message_data.current_status_id==1&&o.message_data.employer_id?(a(),l("i",ro)):d("",!0)]),o.message_data.employer_id?(a(),l("svg",po,fo)):(a(),l("svg",no,mo))],4),o.message_data.employer_id?(a(),l("div",go,[i("h5",vo,L(ke(o.message_data.employer_name)),1)])):d("",!0)],4)])}),128)),je(Ie).sending?(a(),l("div",yo,[i("div",wo,[i("h6",ko,[bo,ee(),f(Ye,{style:{width:"1.5rem",height:"1.5rem",color:"white"},strokeWidth:"8",fill:"transparent",animationDuration:".3s","aria-label":"Custom ProgressSpinner"})])]),xo])):d("",!0)],512),S.value||M.value>0?(a(),b(s,{key:0,icon:"pi pi-angle-down",onClick:Z,style:k(We.value)},null,8,["style"])):d("",!0),M.value>0?(a(),b(s,{key:1,label:M.value,onClick:Z,style:k(Qe.value)},null,8,["label","style"])):d("",!0)]),f(p,{visible:E.value,"onUpdate:visible":t[6]||(t[6]=o=>E.value=o),header:"Archivos a enviar",modal:!0,style:k([{width:"90vw",maxWidth:"40rem"},{"background-color":"rgb(0, 1, 22)",display:"flex"}]),onDragover:t[7]||(t[7]=Re(()=>{},["prevent"])),onDrop:we,close:Be,closable:!0,dismissableMask:!1},{footer:w(()=>[i("div",Do,[f(s,{label:"Enviar",icon:"pi pi-check",severity:"success",onClick:Ne,disabled:_.value.length===0},null,8,["disabled"])])]),default:w(()=>[_.value.length===0?(a(),l("div",Co," Arrastra archivos aquÃ­ ")):(a(),l("div",Mo,[(a(!0),l(U,null,De(_.value,(o,v)=>(a(),l("div",{key:v,style:{display:"flex","align-items":"center","flex-direction":"column",position:"relative",gap:"1rem","margin-bottom":"1rem",padding:"1rem"}},[o.type.startsWith("image/")?(a(),l("div",To,[i("img",{src:o.preview,style:{width:"30rem","box-shadow":"0 0 1rem #00000090","object-fit":"cover","border-radius":".3rem"}},null,8,Lo),f(s,{icon:"pi pi-times",severity:"danger",onClick:y=>se(v),style:{position:"absolute",width:"1.5rem",height:"1.5rem",right:"0","border-radius":".3rem"}},null,8,["onClick"])])):o.type.startsWith("audio/")?(a(),l("div",$o,[i("audio",{src:o.preview,controls:"",style:{width:"100%"}},null,8,Eo),f(s,{icon:"pi pi-times",severity:"danger",onClick:y=>se(v),style:{position:"absolute",width:"1.5rem",height:"1.5rem",right:"0","border-radius":".3rem"}},null,8,["onClick"])])):(a(),l("div",Ao,[So,f(s,{icon:"pi pi-times",severity:"danger",onClick:y=>se(v),style:{position:"absolute",width:"1.5rem",height:"1.5rem",right:"0","border-radius":".3rem"}},null,8,["onClick"])])),i("span",jo,L(o.name),1),f(Ze,{modelValue:o.caption,"onUpdate:modelValue":y=>o.caption=y,placeholder:"Texto opcionalâ¦",style:{flex:"1 1 auto",width:"100%","background-color":"#ffffff20"}},null,8,["modelValue","onUpdate:modelValue"])]))),128))]))]),_:1},8,["visible"])],34),oe.value?(a(),l("div",Ro,[i("div",Ho,[i("img",{style:{height:"90vh","max-width":"100%"},src:ge.value},null,8,zo),f(s,{onClick:t[10]||(t[10]=()=>oe.value=!1),style:{position:"absolute",right:"-1rem",top:"-1rem",border:"3px solid black"},icon:"pi pi-times",severity:"danger",rounded:""})])])):d("",!0)],64)}}}),Oo=it(Io,[["__scopeId","data-v-9c2f3987"]]);export{Oo as default};
