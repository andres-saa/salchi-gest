import _e from"./pqrUser-4c44d000.js";import{_ as ye,L as ve,r as i,B as he,l as be,q as fe,i as ge,A as W,a as _,o as l,c as o,g as r,w as c,b as t,F as $,d as X,s as xe,j as B,U as j,t as a,k as g,m,f as u,u as V,M as Y,n as Ve,e as Z,p as ke,h as we}from"./index-e163c2a5.js";import"./editor.esm-3c43b826.js";/* empty css                                                             */const d=k=>(ke("data-v-31132f39"),k=k(),we(),k),Te={style:{display:"flex","flex-direction":"column"}},Ce={style:{"min-width":"max-content",margin:"0",padding:"0"},class:"p-text-secondary m-0 p-0"},qe={style:{"min-width":"max-content",margin:"0",padding:"0"},class:"p-text-secondary m-0 p-0"},Ne={class:"m-0"},Pe=d(()=>t("div",null,null,-1)),Se={key:0,class:"m-0",style:{"text-transform":"capitalize"}},Re=d(()=>t("b",null,"Responsable:",-1)),Ue={key:1,class:"p-0 m-0"},ze={key:2,class:"p-0 m-0"},De={key:3},Ie=d(()=>t("b",null,"Notas",-1)),Le=d(()=>t("br",null,null,-1)),$e=d(()=>t("div",{style:{display:"flex",gap:"1rem"}},null,-1)),Be=d(()=>t("div",null,[t("h4",{class:"mt-0 py-0"})],-1)),je={style:{display:"flex","flex-direction":"column"}},Ee={key:0},Fe=d(()=>t("b",null,"Datos del cliente",-1)),Me=[Fe],Ge={key:1},He={key:2},Oe=d(()=>t("h6",null,[t("b",null,"Historial")],-1)),Ae={style:{display:"flex","flex-direction":"column"}},Qe={style:{"min-width":"max-content",margin:"0",padding:"0"},class:"p-text-secondary m-0 p-0"},Je={style:{"min-width":"max-content",margin:"0",padding:"0"},class:"p-text-secondary m-0 p-0"},Ke={class:"m-0"},We=d(()=>t("div",null,null,-1)),Xe={key:0,class:"m-0",style:{"text-transform":"capitalize"}},Ye=d(()=>t("b",null,"Responsable:",-1)),Ze={key:1,class:"p-0 m-0"},et={key:2,class:"p-0 m-0"},tt={key:3},st=d(()=>t("b",null,"Notas",-1)),lt=d(()=>t("br",null,null,-1)),ot=d(()=>t("div",{style:{display:"flex",gap:"1rem"}},null,-1)),at=d(()=>t("h6",null,[t("b",null,"Como desea proceder?")],-1)),nt={key:3},it={key:0,style:{display:"flex","justify-content":"space-between",margin:"1rem 0"}},ut=d(()=>t("h6",{class:"m-0"},"Le costo algo a la empresa?",-1)),rt={key:1},dt=d(()=>t("h6",null,"Cuanto?",-1)),ct={key:2,style:{display:"flex","justify-content":"space-between",margin:"1rem 0"}},mt=d(()=>t("h6",{class:"m-0"},"Le envio una orden como cortesia ?",-1)),pt={key:3},_t=d(()=>t("h6",null,"Id de la orden",-1)),yt=d(()=>t("h6",{class:"m-0 my-3"},"Detalles",-1)),vt={style:{"background-color":"#ff00002e"},class:"p-3"},ht=d(()=>t("b",null,"No preste sus credenciales de Salchigest, cada miembro de la empresa tiene los suyos, muchas gracias",-1)),bt={style:{display:"flex","justify-content":"end","margin-top":"2rem"}},ft={class:"nav_bar shadow-2 p-0 my-0 mx-2",style:{position:"sticky",top:"3rem","max-width":"900px","border-radius":"10rem","background-color":"white","z-index":"99"}},gt={class:"nav_bar--buttons p-0 m-1",style:{}},xt={key:"",class:""},Vt={class:"grid p-3",style:{"align-items":"center","justify-content":"space-between",display:"flex",gap:"1rem"}},kt={class:"px-2"},wt=d(()=>t("i",{class:"fa-regular fa-bars-progress"},null,-1)),Tt={style:{"text-transform":"uppercase"}},Ct={style:{display:"flex",gap:"1rem"}},qt={key:0,style:{"min-width":"max-content"},class:"m-0 p-0"},Nt={key:2,class:"m-0 p-0"},Pt={key:3,class:"m-0 p-0"},St={key:5,class:"p-2",style:{display:"flex",gap:".1rem","flex-direction":"column","align-items":"start"}},Rt={key:6,class:"p-2",style:{display:"flex",gap:".1rem","flex-direction":"column","align-items":"start"}},Ut={style:{display:"flex",gap:".5rem","justify-content":"center"},class:"px-2"},zt={__name:"pqrsSection",setup(k){const ee=ve(),w=i(""),T=i(),E=he(),F=i([]),te=y=>y,D=i({id:2,name:"Generada",description:"Estado inicial de la pqr",exist:!0,color:"#3498DB"}),M=be(),G=i([]),p=i(),se=async y=>{L.value=!0,I.value=y},le=async y=>{C.value=!0,h.value=y},I=i([]),h=i([]),L=i(!1),C=i(!1),q=i(null),oe=()=>{q.value={global:{value:null,matchMode:xe.CONTAINS}}};fe(()=>{oe()});const ae=i([{columnName:"Id",columnValue:"pqr_request_id",columnType:"other",size:"1rem",vif:!0},{columnName:"Id orden",columnValue:"order_id",columnType:"other",size:"1rem",vif:!0},{columnName:"Canal",columnValue:"channel",columnType:"tag",size:"4rem",vif:!0},{columnName:"Sede",columnValue:"site_name",columnType:"other",size:"4rem",vif:!0},{columnName:"Red",columnValue:"red",columnType:"other",size:"4rem",vif:!0},{columnName:"Calificacion",columnValue:"rating",columnType:"rating",size:"10rem",vif:!0},{columnName:"Tipo",columnValue:"request_type",columnType:"other",size:"15rem",vif:!0},{columnName:"Comentarios",columnValue:"request_content",columnType:"other",size:"20rem",vif:!0},{columnName:"Estado",columnValue:"current_status",columnType:"status",size:"15rem",vif:!0}]);i({2:"#3498DB",4:"#2ECC71",5:"#16A085",6:"#E74C3C",7:"#F39C12"}),i({question:"",answer:""}),i({}),i({}),i(null);const H=i([{}]);i({}),i(!1),i({});const N=i(!1),P=i(),S=i(!1),R=async()=>{H.value=await B.get(`${j}/get-all-pqrs`);const y=await B.get(`${j}/get-all-pqrs-status`);G.value=y,F.value=y};ge(async()=>{R()}),W(p,()=>{O()});const O=()=>{P.value=null,w.value="",T.value=null,N.value=!1,S.value=!1},ne=async()=>{const y={pqr_request_id:h.value.pqr_request_id,status_id:p.value,responsible_id:M.rawUserData.id,value:P.value||null,notes:w.value||"",order_id:T.value||null};try{await B.post(`${j}/change-pqr-status`,y),R(),C.value=!1,O()}catch(n){console.error("Error al enviar la actualizaciÃ³n de la PQR:",n)}};return W(()=>E.params.section_id,()=>{R()},{deep:!0}),(y,n)=>{const U=_("Tag"),A=_("Timeline"),Q=_("Dialog"),ie=_("Dropdown"),J=_("Checkbox"),ue=_("InputNumber"),K=_("InputText"),re=_("Textarea"),x=_("Button"),de=_("Rating"),ce=_("column"),me=_("Column"),pe=_("DataTable");return l(),o($,null,[r(Q,{class:"mx-2",visible:L.value,"onUpdate:visible":n[0]||(n[0]=e=>L.value=e),modal:"",header:`Historial de la pqr  ID   ${I.value.pqr_request_id}`,style:{width:"40rem"}},{default:c(()=>[r(A,{value:I.value.status_history},{opposite:c(e=>{var s,v,b,f;return[t("div",Te,[t("p",Ce,a((s=e.item.timestamp)==null?void 0:s.split(" ")[0]),1),t("p",qe,a((f=(b=(v=e.item.timestamp)==null?void 0:v.split(" "))==null?void 0:b.slice(1,4))==null?void 0:f.join(" ")),1)])]}),content:c(e=>{var s;return[r(U,{style:g(`background-color:${e.item.color}`)},{default:c(()=>[t("p",Ne,[t("b",null,a(e.item.status),1)])]),_:2},1032,["style"]),Pe,e.item.responsible_name?(l(),o("p",Se,[Re,m(" "+a((s=e.item.responsible_name)==null?void 0:s.toLowerCase()),1)])):u("",!0),e.item.value?(l(),o("p",Ue,[m("Le costo a la empresa "),t("b",null,a(V(Y)(e.item.value)),1)])):u("",!0),e.item.order_id?(l(),o("p",ze,[m("Orden entregada "),t("b",null,a(e.item.order_id),1)])):u("",!0),e.item.notes?(l(),o("p",De,[Ie,m(" "+a(e.item.notes),1)])):u("",!0),Le,$e]}),_:1},8,["value"])]),_:1},8,["visible","header"]),Be,r(Q,{class:"mx-2",visible:C.value,"onUpdate:visible":n[7]||(n[7]=e=>C.value=e),modal:"",header:`Gestion de la pqr  ID    ${h.value.pqr_request_id}`,style:{width:"50rem"}},{footer:c(()=>[t("div",bt,[r(x,{onClick:ne,label:"Enviar",severity:"help"})])]),default:c(()=>[t("div",je,[h.value.user_name||h.value.user_phone?(l(),o("h6",Ee,Me)):u("",!0),h.value.user_name?(l(),o("span",Ge,[t("b",null,"Nombre: "+a(h.value.user_name),1)])):u("",!0),h.value.user_phone?(l(),o("span",He,[t("b",null,"Telefono: "+a(h.value.user_phone),1)])):u("",!0),Oe,r(A,{value:h.value.status_history},{opposite:c(e=>{var s,v,b,f;return[t("div",Ae,[t("p",Qe,a((s=e.item.timestamp)==null?void 0:s.split(" ")[0]),1),t("p",Je,a((f=(b=(v=e.item.timestamp)==null?void 0:v.split(" "))==null?void 0:b.slice(1,4))==null?void 0:f.join(" ")),1)])]}),content:c(e=>{var s;return[r(U,{style:g(`background-color:${e.item.color}`)},{default:c(()=>[t("p",Ke,[t("b",null,a(e.item.status),1)])]),_:2},1032,["style"]),We,e.item.responsible_name?(l(),o("p",Xe,[Ye,m(" "+a((s=e.item.responsible_name)==null?void 0:s.toLowerCase()),1)])):u("",!0),e.item.value?(l(),o("p",Ze,[m("Le costo a la empresa "),t("b",null,a(V(Y)()),1)])):u("",!0),e.item.order_id?(l(),o("p",et,[m("Orden entregada "),t("b",null,a(e.item.order_id),1)])):u("",!0),e.item.notes?(l(),o("p",tt,[st,m(" "+a(e.item.notes),1)])):u("",!0),lt,ot]}),_:1},8,["value"]),at,r(ie,{modelValue:p.value,"onUpdate:modelValue":n[1]||(n[1]=e=>p.value=e),options:G.value.filter(e=>e.id!=2),optionLabel:"name",optionValue:"id"},null,8,["modelValue","options"]),p.value?(l(),o("div",nt,[p.value==4||p.value==7?(l(),o("div",it,[ut,r(J,{binary:"",modelValue:N.value,"onUpdate:modelValue":n[2]||(n[2]=e=>N.value=e)},null,8,["modelValue"])])):u("",!0),(p.value==4||p.value==7)&&N.value?(l(),o("div",rt,[dt,r(ue,{modelValue:P.value,"onUpdate:modelValue":n[3]||(n[3]=e=>P.value=e),style:{width:"100%"}},null,8,["modelValue"])])):u("",!0),p.value==4||p.value==7?(l(),o("div",ct,[mt,r(J,{modelValue:S.value,"onUpdate:modelValue":n[4]||(n[4]=e=>S.value=e),binary:""},null,8,["modelValue"])])):u("",!0),(p.value==4||p.value==7)&&S.value?(l(),o("div",pt,[_t,r(K,{modelValue:T.value,"onUpdate:modelValue":n[5]||(n[5]=e=>T.value=e),style:{width:"100%"}},null,8,["modelValue"])])):u("",!0),t("div",null,[yt,r(re,{modelValue:w.value,"onUpdate:modelValue":n[6]||(n[6]=e=>w.value=e),rows:"5",style:{resize:"none",width:"100%"}},null,8,["modelValue"])]),t("h6",vt,[m("Recuerde que esta firmando como "),t("b",null,a(V(M).rawUserData.name),1),m(" y por ende se hace responsable, "),ht])])):u("",!0)])]),_:1},8,["visible","header"]),t("nav",ft,[t("ul",gt,[(l(!0),o($,null,X(F.value,e=>(l(),o("li",xt,[r(x,{onClick:()=>D.value=e,class:Ve(["nav_bar--buttons-button p-2",e.id==D.value.id?"nav_bar--buttons-button-selected":""]),label:e.name},null,8,["onClick","class","label"])]))),128))])]),r(pe,{paginator:!0,rows:15,style:{width:"100%"},paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",currentPageReportTemplate:"Mostrando {first} a {last} de {totalRecords} solicitudes",rowsPerPageOptions:[5,10,25,100],scrollable:"",showGridlines:"",scrollHeight:"65vh",stripedRows:"",class:"col-12 m-auto",value:H.value.filter(e=>{var s,v;return((s=e.current_status)==null?void 0:s.status)==((v=D.value)==null?void 0:v.name)}),tableStyle:"min-width: 50rem;",filters:q.value},{header:c(()=>[t("div",Vt,[t("h4",kt,[wt,m(),t("b",Tt,[m("PQRS "),t("b",null,a(V(E).params.section),1)])]),t("div",Ct,[r(K,{class:"",modelValue:q.value.global.value,"onUpdate:modelValue":n[8]||(n[8]=e=>q.value.global.value=e),placeholder:"Buscar Solicitud..."},null,8,["modelValue"]),r(x,{onClick:n[9]||(n[9]=e=>V(ee).visible_add_pqr=!0),label:"Nueva PQR",severity:"help"})])])]),default:c(()=>[(l(!0),o($,null,X(te(ae.value),e=>(l(),Z(ce,{header:e.columnName,style:g(`min-width:${e.size}`),field:e.columnValue,class:"my-0 py-0"},{body:c(s=>{var v,b,f;return[e.columnType=="date"?(l(),o("h6",qt,a((v=s.data[e.columnValue])==null?void 0:v.split("-").reverse().join("-")),1)):u("",!0),e.columnType=="max-content"?(l(),o("h6",{key:1,style:g(e.columnType=="max-content"?"min-width: max-content":""),class:"m-0 p-0"},a(s.data[e.columnValue]),5)):u("",!0),e.columnType=="other"?(l(),o("h6",Nt,a(s.data[e.columnValue]),1)):u("",!0),e.columnType=="rating"?(l(),o("h6",Pt,[s.data[e.columnValue]>0?(l(),Z(de,{key:0,cancel:!1,readonly:"",modelValue:s.data[e.columnValue],"onUpdate:modelValue":z=>s.data[e.columnValue]=z},null,8,["modelValue","onUpdate:modelValue"])):u("",!0)])):u("",!0),e.columnType=="money"?(l(),o("h6",{key:4,style:g(e.columnType=="max-content"?"min-width: max-content":""),class:"m-0 p-0"},a(y.formatoPesosColombianos(s.data[e.columnValue])),5)):u("",!0),e.columnValue=="current_status"?(l(),o("div",St,[r(U,{style:g([{color:"white"},`background-color:${(b=s.data[e.columnValue])==null?void 0:b.color}`])},{default:c(()=>{var z;return[m(a((z=s.data[e.columnValue])==null?void 0:z.status),1)]}),_:2},1032,["style"]),t("b",null,a((f=s.data[e.columnValue])==null?void 0:f.timestamp),1)])):u("",!0),e.columnValue=="channel"?(l(),o("div",Rt,[r(U,{style:g([{color:"white"},`background-color:${s.data.channel_color}`])},{default:c(()=>[m(a(s.data[e.columnValue]),1)]),_:2},1032,["style"])])):u("",!0)]}),_:2},1032,["header","style","field"]))),256)),r(me,{class:"my-0 py-0 px-0 mx-0",style:{},header:"Interactuar"},{body:c(e=>[t("div",Ut,[r(x,{onClick:s=>se(e.data),severity:"info",icon:"pi pi-history p-0",class:"my-0 p-2"},null,8,["onClick"]),r(x,{onClick:s=>le(e.data),label:"Gestionar",severity:"help",icon:"pi pi-check p-0",class:"my-0 py-2"},null,8,["onClick"])])]),_:1})]),_:1},8,["value","filters"]),r(_e,{onReload:n[10]||(n[10]=e=>R())})],64)}}},Bt=ye(zt,[["__scopeId","data-v-31132f39"]]);export{Bt as default};
