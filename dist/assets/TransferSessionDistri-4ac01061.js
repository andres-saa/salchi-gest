import{_ as re,j as r,y as E,k,m as L,U as C,l as ne,K as ie,z as de,H,G as ce,A as ue,r as n,o as w,c as X,a as s,u,e as a,f as l,h as p,n as G,N as K,t as h,p as U,g as M,i as J,F as pe,b as me,q as _e,x as ve,av as x}from"./index-30f9c1fa.js";/* empty css                                                                  */import{D as fe}from"./DialogoPedido-7d89a855.js";import"./index-558f534d.js";import{e as ye}from"./formatDate-262296cf.js";import"./formatoPesos-2293ab52.js";import"./_commonjsHelpers-23102255.js";const v=T=>(_e("data-v-af148573"),T=T(),ve(),T),he={class:"container",style:{"margin-top":"7rem",display:"flex","flex-direction":"column"}},ge=["src"],be=v(()=>s("p",{class:"text-4xl text-center px-4",style:{"font-weight":"bold"}}," Transferencias Distrimonster ",-1)),we=v(()=>s("h3",null,[s("b",null,"Rechazar orden")],-1)),xe=v(()=>s("h3",null,[s("b",null,"Aprobar esta orden")],-1)),Te={style:{"max-width":"1280px"},class:"mx-auto"},Pe={style:{display:"flex","align-items":"center",gap:"1rem"}},Ve=v(()=>s("h3",{style:{width:"min-content",padding:"0"}},[s("b",null,"Modos")],-1)),De={class:"slider mx-auto",style:{display:"flex",overflow:"hidden"}},Se={class:"grid",style:{"align-items":"center","justify-content":"space-between"}},ke=v(()=>s("div",{class:"col-12 md:col-6 p-3"},[s("span",{class:"text-xl",style:{width:"100%"}},[p(" Transferencias pendientes "),s("span",{style:{"text-transform":"capitalize"}})])],-1)),Ce={class:"md:mt-0 p-input-icon-right m-3"},Re=v(()=>s("i",{class:"pi pi-search"},null,-1)),ze={style:{display:"flex",gap:"0.5rem"}},Le={class:"grid p-3 mt-4",style:{"align-items":"center","justify-content":"start",display:"flex",gap:"1rem"}},Ue={class:"px-2 m-0"},Me=v(()=>s("i",{class:"fa-regular fa-bars-progress"},null,-1)),qe={style:{"text-transform":"uppercase"}},Ae={class:"m-0"},Be={__name:"TransferSessionDistri",setup(T){const q=r([]);r([{columnName:"SEDE",columnValue:"sede",columnType:"other",size:"1rem",vif:!0},{columnName:"ASESOR",columnValue:"current_status",columnType:"status",size:"15rem",vif:!0}]);const i=r({start_date:new Date,end_date:new Date,sites:[]}),A=r([]),R=E(),Q=o=>{R.setVisible("currentOrder",!0),R.setOrder(o)},W=async o=>{const t=f.rawUserData.id;await x.authorizeOrder(o,t),g.value=!1,S()},B=async()=>{const o=await L.post(`${C}/transaction_report/`,{start_date:i.value.start_date,end_date:i.value.end_date,sites:i.value.sites.map(t=>t.site_id)});N.value=o,o!=null&&o[0]&&(A.value=Object.keys(o[0]))},N=r([]);k(async()=>{q.value=await L.get(`${C}/sites/`),await B()});const z=r(!1),P=r([]),g=r(!1),f=ne(),m=r({});k(()=>{f.bar_color="#FF0042",f.colorized=!1}),ie(()=>{f.bar_color="rgba(0, 1, 22, 1)",f.colorized=!0});const Y=r([{index:1,slide:0,name:"Basico"},{index:2,slide:-100,name:"reportes"}]),V=r({index:1,slide:0,name:"Basico"});new Audio("/sound/pip1.wav"),new Audio("/sound/pip2.wav"),new Audio("/sound/pip3.wav"),new Audio("/sound/pip4.wav"),E(),r(null);const O={revisar:x.getPendientsCancellationRequest,aprobadas:x.getaceptedCancellationAcepted,rechazadas:x.getPendientsCancellationRejected};de(()=>{$()}),H(()=>R.numberTransferRequests,()=>{S()});const Z=o=>{g.value=!0,m.value.order_id=o},ee=async(o,t,F)=>{const _={authorized:o,responsible_id:f.rawUserData.id,responsible_observation:m.value.reason||"sin observaciones"};await x.resolveCancellationRequest(t,_),g.value=!1,z.value=!1,P.value=await O.revisar()},D=ce(),y=r(),$=()=>{y.value={global:{value:null,matchMode:ue.CONTAINS}}};$(),k(()=>{S()}),k(async()=>{S()});const S=async()=>{P.value=await L.get(`${C}/order-to-transfer-distri`)};return H(()=>D.params.request_status,async()=>{P.value=await O.revisar()},{deep:!0}),(o,t)=>{const F=n("Textarea"),_=n("Button"),I=n("Dialog"),te=n("Dropdown"),se=n("InputText"),d=n("Column"),j=n("DataTable"),ae=n("Calendar"),oe=n("calendar"),le=n("MultiSelect");return w(),X("div",he,[s("img",{src:`${u(C)}/read-photo-product/iX6UiE6e`,alt:"",style:{height:"5rem",width:"min-content",margin:"auto"}},null,8,ge),be,a(I,{visible:z.value,"onUpdate:visible":t[2]||(t[2]=e=>z.value=e),closeOnEscape:"",closable:!0,modal:"",style:{width:"30rem"}},{header:l(()=>[we]),default:l(()=>[s("form",{onSubmit:t[1]||(t[1]=K(e=>ee(!1,m.value.id,m.value.reason),["prevent"])),style:{display:"flex",gap:"1rem","flex-direction":"column","align-items":"start"}},[a(F,{style:{resize:"none","text-transform":"lowercase",width:"100%"},id:"reason",modelValue:m.value.reason,"onUpdate:modelValue":t[0]||(t[0]=e=>m.value.reason=e),rows:"5",placeholder:"Porque desea rechazar esta solicitud?"},null,8,["modelValue"]),a(_,{style:{width:"100%","border-radius":"0.5rem"},label:"Rechazar",type:"submit",class:"p-button-danger"})],32)]),_:1},8,["visible"]),a(I,{visible:g.value,"onUpdate:visible":t[4]||(t[4]=e=>g.value=e),closeOnEscape:"",closable:!0,modal:"",style:{width:"30rem"}},{header:l(()=>[xe]),default:l(()=>[s("form",{onSubmit:t[3]||(t[3]=K(e=>W(m.value.order_id),["prevent"])),style:{display:"flex",gap:"1rem","flex-direction":"column","align-items":"start"}},[a(_,{style:{width:"100%","border-radius":"0.5rem"},label:"Aprobar (Transferencia confirmada)",type:"submit",class:"p-button-success"})],32)]),_:1},8,["visible"]),s("div",Te,[s("div",Pe,[Ve,p(),a(te,{modelValue:V.value,"onUpdate:modelValue":t[5]||(t[5]=e=>V.value=e),options:Y.value,optionLabel:"name"},null,8,["modelValue","options"])]),s("div",De,[s("div",{style:G(`transform:translateX(${V.value.slide}%)`),class:"slider-item"},[a(j,{paginator:!0,rows:15,filters:y.value,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",currentPageReportTemplate:"Mostrando {first} a {last} de {totalRecords} Transferencias",rowsPerPageOptions:[5,10,25,100],scrollable:"",scrollHeight:"65vh",stripedRows:"",style:{},"onUpdate:filters":t[7]||(t[7]=e=>y.value=e),class:"col-12 m-auto",value:P.value,tableStyle:"min-width: 50rem;"},{header:l(()=>[s("div",Se,[ke,s("span",Ce,[Re,a(se,{class:"",modelValue:y.value.global.value,"onUpdate:modelValue":t[6]||(t[6]=e=>y.value.global.value=e),placeholder:"Buscar Solicitud..."},null,8,["modelValue"])])])]),default:l(()=>[a(d,{style:{},class:"py-1 pl-0",field:"order_id",header:"ID orden",frozen:""}),a(d,{style:{},class:"py-1 pl-0",field:"total_order_price",header:"Monto de la orden"},{body:l(e=>[p(h(u(U)(e.data.total_order_price)),1)]),_:1}),a(d,{style:{},class:"py-1 pl-0",field:"total_order_price",header:"Hora"},{body:l(e=>[p(h(u(ye)(e.data.latest_status_timestamp)),1)]),_:1}),a(d,{style:{},class:"py-1",field:"delivery_price",header:"Domicilio"},{body:l(e=>{var c,b;return[p(h(u(U)((b=(c=e.data.pe_json)==null?void 0:c.delivery)==null?void 0:b.delivery_costoenvio)),1)]}),_:1}),a(d,{style:{},class:"py-1",field:"Total",header:"Total"},{body:l(e=>{var c,b;return[p(h(u(U)(((b=(c=e.data.pe_json)==null?void 0:c.delivery)==null?void 0:b.delivery_costoenvio)+e.data.total_order_price)),1)]}),_:1}),a(d,{style:{},class:"py-1 pl-0",field:"user_name",header:"Cliente"}),a(d,{style:{},class:"py-1 pl-0",field:"user_phone",header:"Telefono cliente"}),a(d,{style:{},class:"py-1 px-0",field:"date",header:"Action",frozen:"",alignFrozen:"right"},{body:l(e=>[s("div",ze,[u(D).params.request_status!="aprobadas"?(w(),M(_,{key:0,size:"",onClick:c=>Q(e.data),style:{height:"1.8rem",width:"2rem"},severity:"info",class:"p-1",icon:"pi pi-eye"},null,8,["onClick"])):J("",!0),u(D).params.request_status!="aprobadas"?(w(),M(_,{key:1,size:"",onClick:c=>Z(e.data.order_id),style:{height:"1.8rem",width:"2rem"},severity:"success",class:"p-1",icon:"pi pi-check"},null,8,["onClick"])):J("",!0)])]),_:1})]),_:1},8,["filters","value"])],4),s("div",{style:G(`transform:translateX(${V.value.slide}%)`),class:"slider-item"},[a(j,{paginator:!0,rows:15,style:{width:"100%"},paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",currentPageReportTemplate:"Mostrando {first} a {last} de {totalRecords} Transferencias",rowsPerPageOptions:[5,10,25,100],scrollable:"",showGridlines:"",stripedRows:"",class:"col-12 p-2",value:N.value,tableStyle:"min-width: 50rem;",filters:y.value},{header:l(()=>[s("div",Le,[s("h4",Ue,[Me,p(),s("b",qe,[p("Transferencias Distrimonster "),s("b",null,h(u(D).params.section),1)])]),a(ae,{modelValue:i.value.start_date,"onUpdate:modelValue":t[8]||(t[8]=e=>i.value.start_date=e)},null,8,["modelValue"]),a(oe,{modelValue:i.value.end_date,"onUpdate:modelValue":t[9]||(t[9]=e=>i.value.end_date=e)},null,8,["modelValue"]),a(le,{style:{"max-width":"30rem"},modelValue:i.value.sites,"onUpdate:modelValue":t[10]||(t[10]=e=>i.value.sites=e),optionLabel:"site_name",options:q.value.filter(e=>e.show_on_web)},null,8,["modelValue","options"]),a(_,{severity:"help",onClick:B,label:"Buscar",icon:"pi pi-search"})])]),default:l(()=>[(w(!0),X(pe,null,me(A.value,e=>(w(),M(d,{class:"py-1",style:{"text-transform":"uppercase"},header:e},{body:l(c=>[s("h6",Ae,h(c.data[e]),1)]),_:2},1032,["header"]))),256))]),_:1},8,["value","filters"])],4)])]),a(fe)])}}},He=re(Be,[["__scopeId","data-v-af148573"]]);export{He as default};
