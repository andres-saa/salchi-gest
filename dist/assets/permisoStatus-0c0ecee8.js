import{_ as K}from"./empty-a53c250b.js";import{_ as Q,u as W,f as u,g as D,h as X,r as P,o as h,c as y,a as t,n as g,F as U,d as Y,b as p,w as r,v as tt,U as k,q as O,t as l,k as c,C as H,p as et,e as st,$ as V}from"./index-931b09d6.js";const a=z=>(et("data-v-9fd0f6a0"),z=z(),st(),z),ot={class:"col-12 m-auto p-0"},at={key:0,class:"col-12 p-0",style:{position:"relative",display:"flex","align-items":"center","justify-content":"center"}},lt=a(()=>t("img",{src:K,alt:"",srcset:"",style:{width:"100%",height:"50vh","object-fit":"cover","border-radius":"1rem"}},null,-1)),nt=a(()=>t("span",{class:"text-6xl",style:{"font-weight":"bold",position:"absolute"}}," Nada por aquí",-1)),it=[lt,nt],ct={class:"grid p-3 m-0"},rt={class:"col-12 md:col-6 xl:col-4 px-0 md:px-3 m-0"},dt={class:"col-12 p-0 m-auto pb-4",style:{"background-color":"white","box-shadow":"0 0 10px rgba(0, 0, 0, 0.137)",height:"100%","border-radius":"1rem","max-width":"400px",overflow:"hidden"}},ut={class:"text-2xl",style:{"font-weight":"bold","text-transform":"capitalize",color:"white"}},pt={class:"col-12 grid m-0 p-1"},ht=a(()=>t("p",{class:"col-6 my-0 py-0",style:{"font-weight":"bold"}},[t("span",null,"ID del permiso")],-1)),_t={class:"col-6 my-0 py-0 text-right"},mt={class:"col-12 grid m-0 p-1"},yt=a(()=>t("p",{class:"col-6 my-0 py-0",style:{"font-weight":"bold"}},[t("span",null,"ID del empleado")],-1)),vt={class:"col-6 my-0 py-0 text-right"},ft={class:"col-12 grid m-0 p-1"},bt=a(()=>t("p",{class:"col-6 my-0 py-0",style:{"font-weight":"bold"}},[t("span",null,"Desde")],-1)),gt={class:"col-6 my-0 py-0 text-right"},xt={class:"col-12 grid m-0 p-1"},wt=a(()=>t("p",{class:"col-6 my-0 py-0",style:{"font-weight":"bold"}},[t("span",null,"Hasta")],-1)),kt={class:"col-6 my-0 py-0 text-right"},zt=a(()=>t("p",{class:"col-6 my-0 py-0",style:{"font-weight":"bold"}},[t("span",null,[c("Estado "),t("br"),c(" Fecha ")])],-1)),St={class:"col-6 my-0 py-0 text-right"},Rt=a(()=>t("br",null,null,-1)),Ct={class:"col-12 my-0 py-0",style:{"font-weight":"bold"}},jt={key:0},Et={class:"col-12 my-0 py-0"},$t={key:0},At={class:"col-12 grid m-0 p-1 mt-4"},It=a(()=>t("p",{class:"col-12 my-0 py-0",style:{"font-weight":"bold"}},[t("span",null,"Observaciones")],-1)),Nt={class:"col-12 my-0 py-0"},Dt={class:"px-3 mt-4",style:{display:"flex",gap:"1rem","justify-content":"space-around",position:"relative",bottom:"0"}},Pt=a(()=>t("span",{class:"text-sm text-center"},"REVISAR",-1)),Ot=a(()=>t("span",{class:"text-sm"},"APROBAR",-1)),Tt=a(()=>t("span",{class:"text-sm"}," RECHAZAR",-1)),Ut=a(()=>t("div",null,null,-1)),Ht={class:"a4-size p-0 lg:p-6 mi-clase mt-4"},Vt=a(()=>t("img",{class:"m-auto",src:"https://salchimonster.com/images/logo.png",style:{width:"10%"},alt:""},null,-1)),Bt={style:{"font-size":"11pt","font-weight":"normal",color:"black","font-family":"Arial, Helvetica, sans-serif"}},Ft=a(()=>t("h6",{class:"text-center",style:{"font-size":"11pt","font-weight":"bold",color:"black","font-family":"Arial, Helvetica, sans-serif"}}," INVERSIONES SALCHIMONSTER SAS ",-1)),Lt=a(()=>t("h6",{style:{"font-size":"11pt","font-weight":"normal",color:"black","font-family":"Arial, Helvetica, sans-serif"},class:"text-center"},"NIT: 901.420.874-0",-1)),Mt={class:"text-center py-4",style:{"font-weight":"bold","text-transform":"uppercase"}},qt=a(()=>t("span",{style:{"text-transform":"capitalize"}},null,-1)),Jt={class:"text-l",style:{"font-size":"11pt","font-weight":"normal",color:"black","font-family":"Arial, Helvetica, sans-serif"}},Zt={class:"p-0 m-0"},Gt=a(()=>t("span",{style:{"font-weight":"bold"}},"Fecha de la solicitud: ",-1)),Kt={style:{"border-bottom":"1px solid","padding-bottom":"0","padding-right":"2rem"}},Qt={class:"p-0 m-0",style:{width:"100%"}},Wt=a(()=>t("span",{style:{"font-weight":"bold"}},"Nombre: ",-1)),Xt={style:{width:"100%","border-bottom":"1px solid","padding-bottom":"0","padding-right":"3rem"}},Yt={class:"p-0 m-0"},te=a(()=>t("span",{style:{"font-weight":"bold"}},"Cargo: ",-1)),ee={style:{"border-bottom":"1px solid","padding-bottom":"0","padding-right":"2rem"}},se={class:"p-0 m-0"},oe=a(()=>t("span",{style:{"font-weight":"bold"}},"Identificación No: ",-1)),ae={style:{"border-bottom":"1px solid","padding-bottom":"0","padding-right":"2rem"}},le={style:{display:"flex","justify-content":"start",gap:"2rem",border:"1px solid","margin-top":"2rem"},class:"p-2"},ne={style:{display:"flex","flex-direction":"column"},class:""},ie=a(()=>t("div",{style:{"font-weight":"bold"}}," Desde ",-1)),ce={style:{display:"flex","flex-direction":"column"}},re=a(()=>t("div",{style:{"font-weight":"bold"}}," Hasta ",-1)),de={style:{display:"flex","justify-content":"start",gap:"2rem",border:"1px solid","margin-top":"2rem"},class:"p-2"},ue={style:{display:"flex","flex-direction":"column"},class:""},pe={style:{display:"flex","flex-direction":"column"}},he=a(()=>t("div",{style:{"font-weight":"bold"}}," Observaciones ",-1)),_e={style:{display:"flex","justify-content":"start",gap:"2rem",border:"1px solid","margin-top":"2rem"},class:"p-2"},me={style:{display:"flex","flex-direction":"column"},class:""},ye={style:{display:"flex","flex-direction":"column"}},ve=a(()=>t("div",{class:"mb-2",style:{"font-weight":"bold"}}," Estado actual ",-1)),fe={class:"mb-1"},be=a(()=>t("span",{style:{"font-weight":"bold"}},"Resumen:",-1)),ge={class:"mb-1"},xe=a(()=>t("span",{style:{"font-weight":"bold"}},"Fecha:",-1)),we={class:"mb-1"},ke=a(()=>t("span",{style:{"font-weight":"bold"}}," Responsable Id:",-1)),ze={key:0},Se=a(()=>t("span",{style:{"font-weight":"bold"}},"Motivos del rechazo:",-1)),Re={class:"col-12 md:col-6 m-auto p-0",style:{display:"flex",gap:"1rem",overflow:"hidden","justify-content":"space-around",position:"absolute",top:"0rem",right:"0","background-color":"rgba(255, 255, 255, 0)te"}},Ce=a(()=>t("span",{class:"p-input-icon-left",style:{width:"100%"}},[t("i",{class:"pi pi-pencil"})],-1)),je=a(()=>t("span",{class:"text-center col-12 p-0"},"Si, continuar",-1)),Ee=a(()=>t("span",{class:"text-center col-12 p-0"},"No, talvez luego",-1)),$e=a(()=>t("h6",null,"Razones para rechazar este permiso ",-1)),Ae=a(()=>t("span",{class:"p-input-icon-left",style:{width:"100%"}},[t("i",{class:"pi pi-pencil"})],-1)),Ie=a(()=>t("span",{class:"text-center col-12 p-0"},"Si, continuar",-1)),Ne=a(()=>t("span",{class:"text-center col-12 p-0"},"No, talvez luego",-1)),De={__name:"permisoStatus",setup(z){const v=W(),B=u(v.params.status),f=u(v.params.tipo),x=u(v.params.status),$=u(""),A=u(!1),I=u("2029-12-21 16:19"),i=u(),_=u({}),b=u({}),S=u(!1),R=u(!1);D(()=>v.params.status,e=>{B.value=e}),D(()=>v.params.tipo,e=>{f.value=e,console.log(f),w(e,x.value).then(s=>_.value=s)}),D(()=>v.params.status,e=>{x.value=e,w(f.value,e).then(s=>_.value=s)});const F=async e=>{A.value=!0,i.value=e,N(e.employer_id)},L=e=>{S.value=!0,i.value=e,N(e.employer_id)},M=e=>{R.value=!0,i.value=e,N(e.employer_id)};function q(e){e.status={status:"aprobado",timestamp:I.value,responsable:V()},e.history.push({...e.status}),fetch(`${k}/permission/${e.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(s=>{s.json(),S.value=!1,w(f.value,x.value).then(n=>_.value=n)}).then(s=>console.log("Permiso aprobado:",s)).catch(s=>console.error("Error:",s))}function J(e){e.status={status:"rechazado",timestamp:I.value,razones:$.value,responsable:V()},e.history.push({...e.status}),fetch(`${k}/permission/${e.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(s=>{s.json(),R.value=!1,w(f.value,x.value).then(n=>_.value=n)}).then(s=>console.log("Permiso rechazado:",s)).catch(s=>console.error("Error:",s))}function C(e){var s=new Date(e),n={day:"numeric",month:"long",year:"numeric"};return s.toLocaleDateString("es-ES",n)}const Z=async()=>{fetch(`${k}/server_time`).then(e=>{if(!e.ok)throw new Error("Network response was not ok");return e.json()}).then(e=>{console.log("Employer data:",e),I.value=e}).catch(e=>{console.error("There has been a problem with your fetch operation:",e),mensaje.value="error"})};function G(e){e||(e="2029-12-21 16:19");const s=["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"];let[n,d]=e.split(" "),[j,o,m]=n.split("-").map(Number),E=s[o-1];return`${m} de ${E} de ${j}`}const N=async e=>{fetch(`${k}/employer/${e}`).then(s=>{if(!s.ok)throw new Error("Network response was not ok");return s.json()}).then(s=>{console.log("Employer data:",s),b.value=s}).catch(s=>{console.error("There has been a problem with your fetch operation:",s)})};async function w(e,s){const n=`${k}/permissions/status/${s}/type/${e}`;try{const d=await fetch(n);if(!d.ok)throw new Error(`Error al obtener los permisos: ${d.status}`);return await d.json()}catch(d){throw console.error("Error en getPermissions:",d),d}}return X(()=>{w(f.value,x.value).then(e=>_.value=e),Z()}),(e,s)=>{const n=P("Button"),d=P("Dialog"),j=P("Textarea");return h(),y(U,null,[t("div",ot,[_.value.length<=0?(h(),y("div",at,it)):g("",!0),t("div",ct,[(h(!0),y(U,null,Y(_.value,o=>{var m,E;return h(),y("div",rt,[t("div",dt,[t("div",{class:O(["col-12 m-0 mb-3",o.tipo]),style:{}},[t("p",ut,l(o.tipo)+" ID #"+l(o.id),1)],2),t("div",pt,[ht,t("p",_t,l(o.id),1)]),t("div",mt,[yt,t("p",vt,l(o.employer_id),1)]),t("div",ft,[bt,t("p",gt,l(o.start_date),1)]),t("div",xt,[wt,t("p",kt,l(o.end_date),1)]),t("div",{class:O(["col-12 grid m-0 p-1",o.status.status])},[zt,t("p",St,[c(l(o.status.status)+" ",1),Rt,c(" "+l(o.status.timestamp.split(" ")[0]),1)])],2),t("div",{class:O(["col-12 grid m-0 p-1",o.status.status])},[t("p",Ct,[(m=o.status)!=null&&m.razones?(h(),y("span",jt," Razones")):g("",!0)]),t("p",Et,[(E=o.status)!=null&&E.razones?(h(),y("span",$t,l(o.status.razones),1)):g("",!0)])],2),t("div",At,[It,t("p",Nt,l(o.observations),1)]),t("div",Dt,[p(n,{outlined:"",severity:"info",label:"Small",onClick:T=>F(o),style:{width:"100%",display:"flex","justify-content":"center"}},{default:r(()=>[Pt]),_:2},1032,["onClick"]),o.status.status!="aprobado"?(h(),H(n,{key:0,outlined:"",severity:"success",label:"Small",class:"",onClick:T=>L(o),style:{width:"100%",display:"flex","justify-content":"center"}},{default:r(()=>[Ot]),_:2},1032,["onClick"])):g("",!0),o.status.status!="rechazado"&&o.status.status!="aprobado"?(h(),H(n,{key:1,outlined:"",severity:"danger",label:"Small",onClick:T=>M(o),style:{width:"100%",display:"flex","justify-content":"center"}},{default:r(()=>[Tt]),_:2},1032,["onClick"])):g("",!0)])])])}),256))]),Ut]),p(d,{style:tt([{border:"none","box-shadow":"none"},{width:"700px"}]),visible:A.value,"onUpdate:visible":s[0]||(s[0]=o=>A.value=o),header:"Revizar permiso",modal:!0,class:"p-fluid m-2 pt-8"},{default:r(()=>{var o,m;return[t("div",Ht,[Vt,t("h6",Bt,l(G(i.value.status.timestamp)),1),Ft,Lt,t("h6",Mt,[c("FORMATO SOLICITUD DE PERMISO "+l(i.value.tipo)+" ",1),qt]),t("h5",Jt,[t("p",Zt,[Gt,c(),t("span",Kt,l(C(i.value.start_date)),1)]),t("p",Qt,[Wt,c(),t("span",Xt,l(b.value.name),1)]),t("p",Yt,[te,c(),t("span",ee,l(b.value.position),1)]),t("p",se,[oe,c(),t("span",ae,l(b.value.dni),1)]),t("div",le,[t("div",ne,[ie,t("div",null,l(C(i.value.start_date)),1)]),t("div",ce,[re,t("div",null,l(C(i.value.end_date)),1)])]),t("div",de,[t("div",ue,[t("div",pe,[he,t("div",null,l(i.value.observations),1)])])]),t("div",_e,[t("div",me,[t("div",ye,[ve,t("div",fe,[be,c(" "+l(i.value.status.status),1)]),t("div",ge,[xe,c(" "+l(C(i.value.status.timestamp)),1)]),t("div",we,[ke,c(" "+l((o=i.value.status)==null?void 0:o.responsable),1)]),i.value.status.status=="rechazado"?(h(),y("div",ze,[Se,c(" "+l((m=i.value.status)==null?void 0:m.razones),1)])):g("",!0)])])])])]),t("div",Re,[p(n,{style:{"background-color":"rgb(105, 255, 157)",color:"rgba(0, 0, 0, 0.864)",border:"none"}},{default:r(()=>[c(" APROBAR")]),_:1}),p(n,{style:{"background-color":"rgb(255, 125, 125)",color:"rgba(0, 0, 0, 0.864)",border:"none"}},{default:r(()=>[c(" RECHAZAR")]),_:1})])]}),_:1},8,["visible"]),p(d,{header:"Confirmacion",visible:S.value,"onUpdate:visible":s[2]||(s[2]=o=>S.value=o),style:{width:"350px"},modal:!0},{default:r(()=>[t("h5",null,"Seguro que desea aceptar el permiso de "+l(b.value.name),1),Ce,p(n,{onClick:s[1]||(s[1]=o=>q(i.value)),style:{margin:"auto","background-color":"rgb(105, 255, 157)",color:"black",border:"none"},class:"m-auto my-4 text-center"},{default:r(()=>[je]),_:1}),p(n,{style:{"background-color":"rgb(255, 156, 156)",color:"rgba(0, 0, 0, 0.864)",border:"none"},class:"m-auto my-4 ml-4 text-center"},{default:r(()=>[Ee]),_:1})]),_:1},8,["visible"]),p(d,{header:"Confirmacion",visible:R.value,"onUpdate:visible":s[5]||(s[5]=o=>R.value=o),style:{width:"350px"},modal:!0},{default:r(()=>[t("h5",null,"Seguro que desea Rechazar el permiso de "+l(b.value.name)+"?",1),$e,p(j,{modelValue:$.value,"onUpdate:modelValue":s[3]||(s[3]=o=>$.value=o),style:{"max-width":"100%","min-width":"100%","min-height":"100px"},class:"col-12"},null,8,["modelValue"]),Ae,p(n,{onClick:s[4]||(s[4]=o=>J(i.value)),style:{margin:"auto","background-color":"rgb(105, 255, 157)",color:"black",border:"none"},class:"m-auto my-4 text-center"},{default:r(()=>[Ie]),_:1}),p(n,{style:{"background-color":"rgb(255, 156, 156)",color:"rgba(0, 0, 0, 0.864)",border:"none"},class:"m-auto my-4 ml-4 text-center"},{default:r(()=>[Ne]),_:1})]),_:1},8,["visible"])],64)}}},Te=Q(De,[["__scopeId","data-v-9fd0f6a0"]]);export{Te as default};
