import{_ as Q,f as d,u as Z,O as ee,g as $,h as te,r as _,o as L,c as M,a as e,d as l,w as i,v as A,F as se,bX as oe,U as S,bY as U,k as c,t as n,q as F,l as ae,P as le,n as ne,p as ie,e as re}from"./index-a083937d.js";const a=k=>(ie("data-v-45c8ffe9"),k=k(),re(),k),de={class:"col-12 m-auto p-0"},ce={style:{display:"flex"}},ue={class:"flex flex-column md:flex-row md:justify-content-between md:align-items-center"},pe=a(()=>e("p",{class:"m-0 text-2xl my-4"},"Mis permisos ",-1)),me={class:"block mt-2 md:mt-0 p-input-icon-left"},he=a(()=>e("i",{class:"pi pi-search"},null,-1)),_e=a(()=>e("span",{class:"p-column-title"},"Code",-1)),ve=a(()=>e("span",{class:"p-column-title"},"Code",-1)),fe=a(()=>e("span",{class:"p-column-title"},"Code",-1)),be=a(()=>e("span",{class:"p-column-title"},"Code",-1)),ye=a(()=>e("span",{class:"p-column-title"},"Code",-1)),ge=a(()=>e("span",{class:"p-column-title"},"Code",-1)),we=a(()=>e("span",{class:"p-column-title"},"Code",-1)),xe={style:{display:"flex",gap:"1rem","justify-content":"center"}},Se=a(()=>e("div",null,null,-1)),ke={class:"a4-size p-0 lg:p-6 mi-clase mt-4"},Pe=a(()=>e("img",{class:"m-auto",src:"https://salchimonster.com/images/logo.png",style:{width:"10%"},alt:""},null,-1)),ze={style:{"font-size":"11pt","font-weight":"normal",color:"black","font-family":"Arial, Helvetica, sans-serif"}},Ce=a(()=>e("h6",{class:"text-center",style:{"font-size":"11pt","font-weight":"bold",color:"black","font-family":"Arial, Helvetica, sans-serif"}}," INVERSIONES SALCHIMONSTER SAS ",-1)),Ee=a(()=>e("h6",{style:{"font-size":"11pt","font-weight":"normal",color:"black","font-family":"Arial, Helvetica, sans-serif"},class:"text-center"},"NIT: 901.420.874-0",-1)),Ie={class:"text-center py-4",style:{"font-weight":"bold","text-transform":"uppercase"}},Ne=a(()=>e("span",{style:{"text-transform":"capitalize"}},null,-1)),Te={class:"text-l",style:{"font-size":"11pt","font-weight":"normal",color:"black","font-family":"Arial, Helvetica, sans-serif"}},De={class:"p-0 m-0"},Re=a(()=>e("span",{style:{"font-weight":"bold"}},"Fecha de la solicitud: ",-1)),je={style:{"border-bottom":"1px solid","padding-bottom":"0","padding-right":"2rem"}},$e={class:"p-0 m-0",style:{width:"100%"}},Ue=a(()=>e("span",{style:{"font-weight":"bold"}},"Nombre: ",-1)),Oe={style:{width:"100%","border-bottom":"1px solid","padding-bottom":"0","padding-right":"3rem"}},Le={class:"p-0 m-0"},Me=a(()=>e("span",{style:{"font-weight":"bold"}},"Cargo: ",-1)),Ae={style:{"border-bottom":"1px solid","padding-bottom":"0","padding-right":"2rem"}},Fe={class:"p-0 m-0"},Ve=a(()=>e("span",{style:{"font-weight":"bold"}},"IdentificaciÃ³n No: ",-1)),Be={style:{"border-bottom":"1px solid","padding-bottom":"0","padding-right":"2rem"}},He={style:{display:"flex","justify-content":"start",gap:"2rem",border:"1px solid","margin-top":"2rem"},class:"p-2"},qe={style:{display:"flex","flex-direction":"column"},class:""},Je=a(()=>e("div",{style:{"font-weight":"bold"}}," Desde ",-1)),Ye={style:{display:"flex","flex-direction":"column"}},Ke=a(()=>e("div",{style:{"font-weight":"bold"}}," Hasta ",-1)),We={style:{display:"flex","justify-content":"start",gap:"2rem",border:"1px solid","margin-top":"2rem"},class:"p-2"},Xe={style:{display:"flex","flex-direction":"column"},class:""},Ge={style:{display:"flex","flex-direction":"column"}},Qe=a(()=>e("div",{style:{"font-weight":"bold"}}," Observaciones ",-1)),Ze={style:{display:"flex","justify-content":"start",gap:"2rem",border:"1px solid","margin-top":"2rem"},class:"p-2"},et={style:{display:"flex","flex-direction":"column"},class:""},tt={style:{display:"flex","flex-direction":"column"}},st=a(()=>e("div",{class:"mb-2",style:{"font-weight":"bold"}}," Estado actual ",-1)),ot={class:"mb-1"},at=a(()=>e("span",{style:{"font-weight":"bold"}},"Resumen:",-1)),lt={class:"mb-1"},nt=a(()=>e("span",{style:{"font-weight":"bold"}},"Fecha:",-1)),it={class:"mb-1"},rt=a(()=>e("span",{style:{"font-weight":"bold"}}," Responsable Id:",-1)),dt={key:0},ct=a(()=>e("span",{style:{"font-weight":"bold"}},"Motivos del rechazo:",-1)),ut=a(()=>e("span",{class:"p-input-icon-left",style:{width:"100%"}},[e("i",{class:"pi pi-pencil"})],-1)),pt=a(()=>e("span",{class:"text-center col-12 p-0"},"Si, continuar",-1)),mt=a(()=>e("span",{class:"text-center col-12 p-0"},"No, talvez luego",-1)),ht=a(()=>e("h6",null,"Razones para rechazar este permiso ",-1)),_t=a(()=>e("span",{class:"p-input-icon-left",style:{width:"100%"}},[e("i",{class:"pi pi-pencil"})],-1)),vt=a(()=>e("span",{class:"text-center col-12 p-0"},"Si, continuar",-1)),ft=a(()=>e("span",{class:"text-center col-12 p-0"},"No, talvez luego",-1)),bt={__name:"misPermisos",setup(k){const V=d(null),v=Z(),B=d(v.params.status),f=d(v.params.tipo),g=d(v.params.status),C=d(""),H=()=>{P.value={global:{value:null,matchMode:oe.CONTAINS}}},w=d(!1),E=d("2029-12-21 16:19"),u=d(),P=d(null),m=d([]),b=d({}),I=d(!1),N=d(!1),O=d([]),T=d(!0);ee(()=>{H()}),$(()=>v.params.status,s=>{B.value=s}),$(()=>v.params.tipo,s=>{f.value=s,console.log(f),x(s,g.value).then(t=>m.value=t)}),$(()=>v.params.status,s=>{g.value=s,x(f.value).then(t=>m.value=t)});const q=async s=>{w.value=!0,u.value=s,X(s.employer_id)};function J(s){s.status={status:"aprobado",timestamp:E.value,responsable:U()},s.history.push({...s.status}),fetch(`${S}/permission/${s.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}).then(t=>{t.json(),w.value=!1,I.value=!1,x(f.value,g.value).then(r=>m.value=r)}).then(t=>console.log("Permiso aprobado:",t)).catch(t=>console.error("Error:",t))}function Y(s){s.status={status:"rechazado",timestamp:E.value,razones:C.value,responsable:U()},s.history.push({...s.status}),fetch(`${S}/permission/${s.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}).then(t=>{t.json(),N.value=!1,w.value=!1,x(f.value,g.value).then(r=>m.value=r)}).then(t=>console.log("Permiso rechazado:",t)).catch(t=>console.error("Error:",t))}function z(s){var t=new Date(s),r={day:"numeric",month:"long",year:"numeric"};return t.toLocaleDateString("es-ES",r)}const K=async()=>{fetch(`${S}/server_time`).then(s=>{if(!s.ok)throw new Error("Network response was not ok");return s.json()}).then(s=>{console.log("Employer data:",s),E.value=s}).catch(s=>{console.error("There has been a problem with your fetch operation:",s),mensaje.value="error"})};function W(s){s||(s="2029-12-21 16:19");const t=["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"];let[r,y]=s.split(" "),[D,p,h]=r.split("-").map(Number),R=t[p-1];return`${h} de ${R} de ${D}`}const X=async s=>{fetch(`${S}/employer/${s}`).then(t=>{if(!t.ok)throw new Error("Network response was not ok");return t.json()}).then(t=>{console.log("Employer data:",t),b.value=t}).catch(t=>{console.error("There has been a problem with your fetch operation:",t)})};async function x(){const s=await U(),t=`${S}/permissions/user/${s}  `;try{const r=await fetch(t);if(!r.ok)throw new Error(`Error al obtener los permisos: ${r.status}`);return T.value=!1,await r.json()}catch(r){throw console.error("Error en getPermissions:",r),[r]}}return te(()=>{x(f.value,g.value).then(s=>m.value=s).catch(()=>m.value=[]),K()}),(s,t)=>{const r=_("ProgressSpinner"),y=_("Dialog"),D=_("InputText"),p=_("Column"),h=_("Button"),R=_("DataTable"),G=_("Textarea");return L(),M(se,null,[e("div",de,[l(y,{visible:T.value,"onUpdate:visible":t[0]||(t[0]=o=>T.value=o),modal:"",style:A([{width:"50rem"},{}]),breakpoints:{"1199px":"75vw","575px":"90vw"}},{default:i(()=>[e("div",ce,[l(r,{style:{width:"50px",height:"50px"},strokeWidth:"8",fill:"var(--surface-ground)",animationDuration:".5s","aria-label":"Custom ProgressSpinner"})])]),_:1},8,["visible"]),l(R,{ref_key:"dt",ref:V,value:m.value,selection:O.value,"onUpdate:selection":t[2]||(t[2]=o=>O.value=o),dataKey:"id",paginator:!0,rows:10,filters:P.value,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25,100],currentPageReportTemplate:"Mostrando {first} a {last} de {totalRecords} permisoes",responsiveLayout:"scroll",scrollable:"","scroll-height":"62vh"},{header:i(()=>[e("div",ue,[pe,e("span",me,[he,l(D,{class:"",modelValue:P.value.global.value,"onUpdate:modelValue":t[1]||(t[1]=o=>P.value.global.value=o),placeholder:"Buscar..."},null,8,["modelValue"])])])]),default:i(()=>[l(p,{class:"p-2",selectionMode:"multiple",headerStyle:"width: 3rem; ",frozen:""}),l(p,{class:"p-2",field:"id",header:"Id",sortable:!0,headerStyle:"width:3rem; min-width:min-content; "},{body:i(o=>[_e,c(n(o.data.id),1)]),_:1}),l(p,{class:"p-2",field:"tipo",header:"Tipo",sortable:!0,headerStyle:"width:10rem; min-width:min-content; "},{body:i(o=>[ve,c(n(o.data.tipo),1)]),_:1}),l(p,{class:"p-2",field:"employer_id",header:" empleado",sortable:!0,headerStyle:"width:10rem; min-width:max-content; "},{body:i(o=>[fe,c(n(o.data.employer_id),1)]),_:1}),l(p,{class:"p-2",field:"start_date",header:"fecha de inicio",sortable:!0,headerStyle:"width:15rem; min-width:10rem; "},{body:i(o=>[be,c(n(o.data.start_date),1)]),_:1}),l(p,{class:"p-2",field:"end_date",header:"fecha finalizacion",sortable:!0,headerStyle:"width:15rem; min-width:max-content; "},{body:i(o=>[ye,c(n(o.data.end_date),1)]),_:1}),l(p,{class:"p-2",field:"observations",header:"Observaciones del empleado",sortable:!0,headerStyle:"width:30rem; min-width:max-content; "},{body:i(o=>[ge,c(n(o.data.observations),1)]),_:1}),l(p,{class:"p-2",field:"status.status",header:"Estado",sortable:!0,headerStyle:"width:10rem; min-width:max-content; "},{body:i(o=>[we,e("div",{class:F(["p-2",o.data.status.status]),style:{"border-radius":"10rem"}},n(o.data.status.status),3)]),_:1}),l(p,{class:"p-2",field:"location",header:"Acciones",sortable:!0,frozen:"",alignFrozen:"right",headerStyle:"width:1rem; min-width:min-content; "},{body:i(o=>[e("div",xe,[l(h,{class:"p-0",outlined:"",severity:"info",label:"Small",onClick:j=>q(o.data),text:""},{default:i(()=>[e("i",{class:F(["text-xl",ae(le).EYE]),style:{"font-weight":"bold"}},null,2)]),_:2},1032,["onClick"])])]),_:1})]),_:1},8,["value","selection","filters"]),Se]),l(y,{style:A([{border:"none","box-shadow":"none"},{width:"700px"}]),visible:w.value,"onUpdate:visible":t[3]||(t[3]=o=>w.value=o),header:"Revizar permiso",modal:!0,class:"p-fluid m-2 pt-8"},{default:i(()=>{var o,j;return[e("div",ke,[Pe,e("h6",ze,n(W(u.value.status.timestamp)),1),Ce,Ee,e("h6",Ie,[c("FORMATO SOLICITUD DE PERMISO "+n(u.value.tipo)+" ",1),Ne]),e("h5",Te,[e("p",De,[Re,c(),e("span",je,n(z(u.value.start_date)),1)]),e("p",$e,[Ue,c(),e("span",Oe,n(b.value.name),1)]),e("p",Le,[Me,c(),e("span",Ae,n(b.value.position),1)]),e("p",Fe,[Ve,c(),e("span",Be,n(b.value.dni),1)]),e("div",He,[e("div",qe,[Je,e("div",null,n(z(u.value.start_date)),1)]),e("div",Ye,[Ke,e("div",null,n(z(u.value.end_date)),1)])]),e("div",We,[e("div",Xe,[e("div",Ge,[Qe,e("div",null,n(u.value.observations),1)])])]),e("div",Ze,[e("div",et,[e("div",tt,[st,e("div",ot,[at,c(" "+n(u.value.status.status),1)]),e("div",lt,[nt,c(" "+n(z(u.value.status.timestamp)),1)]),e("div",it,[rt,c(" "+n((o=u.value.status)==null?void 0:o.responsable),1)]),u.value.status.status=="rechazado"?(L(),M("div",dt,[ct,c(" "+n((j=u.value.status)==null?void 0:j.razones),1)])):ne("",!0)])])])])])]}),_:1},8,["visible"]),l(y,{header:"Confirmacion",visible:I.value,"onUpdate:visible":t[5]||(t[5]=o=>I.value=o),style:{width:"350px"},modal:!0},{default:i(()=>[e("h5",null,"Seguro que desea aceptar el permiso de "+n(b.value.name),1),ut,l(h,{onClick:t[4]||(t[4]=o=>J(u.value)),style:{margin:"auto","background-color":"rgb(105, 255, 157)",color:"black",border:"none"},class:"m-auto my-4 text-center"},{default:i(()=>[pt]),_:1}),l(h,{style:{"background-color":"rgb(255, 156, 156)",color:"rgba(0, 0, 0, 0.864)",border:"none"},class:"m-auto my-4 ml-4 text-center"},{default:i(()=>[mt]),_:1})]),_:1},8,["visible"]),l(y,{header:"Confirmacion",visible:N.value,"onUpdate:visible":t[8]||(t[8]=o=>N.value=o),style:{width:"350px"},modal:!0},{default:i(()=>[e("h5",null,"Seguro que desea Rechazar el permiso de "+n(b.value.name)+"?",1),ht,l(G,{modelValue:C.value,"onUpdate:modelValue":t[6]||(t[6]=o=>C.value=o),style:{"max-width":"100%","min-width":"100%","min-height":"100px"},class:"col-12"},null,8,["modelValue"]),_t,l(h,{onClick:t[7]||(t[7]=o=>Y(u.value)),style:{margin:"auto","background-color":"rgb(105, 255, 157)",color:"black",border:"none"},class:"m-auto my-4 text-center"},{default:i(()=>[vt]),_:1}),l(h,{style:{"background-color":"rgb(255, 156, 156)",color:"rgba(0, 0, 0, 0.864)",border:"none"},class:"m-auto my-4 ml-4 text-center"},{default:i(()=>[ft]),_:1})]),_:1},8,["visible"])],64)}}},gt=Q(bt,[["__scopeId","data-v-45c8ffe9"]]);export{gt as default};
