import{_ as Y,z as q,f as G,r as N,o as s,J,w as g,a as e,t as n,l,X as w,q as Q,P as X,k as M,c as a,F as u,b as y,n as r,v as Z,p as K,e as W,Y as ee,Q as te,R as se,d as m}from"./index-2c2178c6.js";import{u as E,w as ae}from"./xlsx-4f9172c7.js";const _=b=>(K("data-v-5f8be31f"),b=b(),W(),b),le={style:{"border-radius":"1rem",overflow:"hidden"}},ne=_(()=>e("div",{class:"P-0 mt-0",style:{"background-color":"var(--orange-500)"}},[e("div",{class:"header p-4",style:{display:"flex","justify-content":"space-between","align-items":"center"}},[e("div",{style:{display:"flex"}},[e("img",{class:"p-0",src:ee,style:{filter:"brightness(0) invert()",width:"",height:"3rem","object-fit":"contain"},alt:""}),e("span",{style:{width:"min-content","font-weight":"bold",color:"white"}},"INVERSIONES SALCHIMONSTER")]),e("div",{style:{display:"flex","flex-direction":"column","max-width":"40%"}},[e("span",{class:"text-left text-sm",style:{"text-align":"end",width:"min-content","font-weight":"bold",color:"white"}},"TERMINOS Y CONDICIONES "),e("small",{class:"mt-2 text-left",style:{color:"white","max-width":""}},"Lorem ipsum dolor sit amet consectetur, adipisi")])])],-1)),oe={class:"P-0",style:{"background-color":"var(--gray-200)"}},ie={class:"header p-4",style:{display:"flex","justify-content":"space-between"}},de={style:{"font-weight":"bold",display:"flex","flex-direction":"column","max-width":"50%"}},re=_(()=>e("span",{class:"text-xl mb-2",style:{width:"min-content","font-weight":"bold",color:"rgb(0, 0, 0)"}},"Factura",-1)),ce={style:{display:"flex",gap:"1rem","justify-content":"space-between"}},he=_(()=>e("div",{style:{display:"flex","flex-direction":"column"}},[e("span",null," Orden No."),e("span",null," Sede"),e("span",null," Fecha"),e("span",null," Metodo de pago")],-1)),_e=_(()=>e("div",{style:{display:"flex","font-weight":"200","flex-direction":"column"}},[e("span",null," |"),e("span",null," | "),e("span",null," |"),e("span",null," |")],-1)),me={style:{display:"flex","font-weight":"400","flex-direction":"column"}},ue={style:{"font-weight":"bold",display:"flex","flex-direction":"column","max-width":"40%"}},pe=_(()=>e("span",{class:"text-xl mb-2",style:{width:"min-content","font-weight":"bold",color:"rgb(0, 0, 0)"}},"Balance",-1)),ge={style:{display:"flex",gap:"1rem","justify-content":"space-between"}},ye=_(()=>e("div",{style:{display:"flex","flex-direction":"column"}},[e("span",null," Subtotal"),e("span",null," Domicilio"),e("span",{class:"text-2xl"}," Total")],-1)),fe=_(()=>e("div",{style:{display:"flex","font-weight":"200","flex-direction":"column"}},[e("span",null," | "),e("span",null," |"),e("span",null," |")],-1)),xe={style:{display:"flex","font-weight":"400","flex-direction":"column"}},we={class:"text-xl",style:{"font-weight":"bold","border-top":"2px solid red"}},be=_(()=>e("p",{class:"text-xl text-center",style:{"font-weight":"bold",color:"rgb(255, 255, 255)","background-color":"black"}},"Datos de usuario",-1)),ve={class:"p-4",style:{display:"flex",gap:"1rem","justify-content":"start"}},Me={style:{display:"flex","font-weight":"400",height:"4rem","aspect-ratio":"1 / 1","background-color":"rgb(255, 255, 255)","border-radius":"50%","flex-direction":"column","align-items":"center","justify-content":"center"}},ke=_(()=>e("div",{style:{display:"flex","font-weight":"200","flex-direction":"column"}},[e("span",null," |"),e("span",null," | "),e("span",null," |")],-1)),Se={style:{display:"flex","flex-direction":"column"}},Ce={style:{"text-transform":"capitalize"}},Oe=_(()=>e("span",{style:{"font-weight":"bold"}}," Nombre :",-1)),Ne={style:{"text-transform":"capitalize"}},Te=_(()=>e("span",{style:{"font-weight":"bold"}},"DIRECCION :",-1)),De=_(()=>e("span",{style:{"font-weight":"bold"}}," TELEFONO : ",-1)),Pe={class:"P-0",style:{"background-color":"var(--white-200)"}},Fe={class:"header py-4",style:{display:"flex","justify-content":"space-between"}},Ie={style:{"font-weight":"bold",display:"flex","flex-direction":"column",width:"100%"}},Ee=_(()=>e("span",{class:"text-xl pl-4 mb-2",style:{width:"min-content","font-weight":"bold",color:"rgb(0, 0, 0)"}},"Productos",-1)),Re={class:"m-0 p-0"},je={class:"text-l p-1 text-center my-2",style:{"font-weight":"bold",width:"100","background-color":"var(--gray-200)",color:"black"}},Le={class:"px-4 py-0",style:{display:"flex",gap:"1rem",width:"100%","justify-content":"space-between"}},Ve={style:{display:"flex","flex-direction":"column","font-weight":"500"}},ze={key:0,class:"",style:{"font-weight":"bold"}},$e={class:"ml-4"},Be={key:2,class:"",style:{"font-weight":"bold"}},Ae={class:"ml-4"},He={key:4,class:"",style:{"font-weight":"bold"}},Ue={class:"ml-4"},Ye={key:6,class:"",style:{"font-weight":"bold"}},qe={class:"ml-4"},Ge={key:8,class:"",style:{"font-weight":"bold"}},Je={class:"ml-4"},Qe=_(()=>e("div",{style:{display:"flex","font-weight":"200","flex-direction":"column"}},null,-1)),Xe={style:{display:"flex","font-weight":"400","flex-direction":"column"}},Ke={key:0,class:"text-right",style:{}},We={class:"ml-4 text-right",style:{}},Ze={key:2,class:"text-right",style:{}},et={class:"ml-4 text-right"},tt={key:4,class:"text-right",style:{}},st={class:"ml-4 text-right"},at={key:5,class:"text-right",style:{}},lt={class:"ml-4 text-right"},nt={key:6,class:"text-right",style:{}},ot={class:"ml-4"},it={__name:"orderDialog",setup(b){const o=q();return G(!0),(h,P)=>{const I=N("Dialog");return s(),J(I,{style:Z([{"background-color":""},{width:"40rem"}]),visible:l(o).visibleOrder.visible,"onUpdate:visible":P[0]||(P[0]=O=>l(o).visibleOrder.visible=O),modal:"",header:"Orden"},{default:g(()=>{var O,F,f,v,x,c;return[e("div",le,[ne,e("div",oe,[e("div",ie,[e("div",de,[re,e("div",ce,[he,_e,e("div",me,[e("span",null,n(l(o).visibleOrder.order.order_id),1),e("span",null,n(l(o).visibleOrder.order.site_name),1),e("span",null,n((F=(O=l(o).visibleOrder.order)==null?void 0:O.status)==null?void 0:F.timestamp.split(" ")[0]),1),e("span",null,n((f=l(o).visibleOrder.order)==null?void 0:f.payment_method),1)])])]),e("div",ue,[pe,e("div",ge,[ye,fe,e("div",xe,[e("span",null,n(l(w)(l(o).visibleOrder.order.total_price)),1),e("span",null,n(l(w)(l(o).visibleOrder.order.delivery_price)),1),e("span",we,n(l(w)(l(o).visibleOrder.order.total_price+l(o).visibleOrder.order.delivery_price)),1)])])])]),be,e("div",ve,[e("div",Me,[e("i",{class:Q(["text-2xl",l(X).USER])},null,2)]),ke,e("div",Se,[e("span",Ce,[Oe,M(" "+n((v=l(o).visibleOrder.order.user_data)==null?void 0:v.user_name),1)]),e("span",Ne,[Te,M(" "+n((x=l(o).visibleOrder.order.user_data)==null?void 0:x.user_address),1)]),e("span",null,[De,M(" "+n((c=l(o).visibleOrder.order.user_data)==null?void 0:c.user_phone),1)])])])]),e("div",Pe,[e("div",Fe,[e("div",Ie,[Ee,(s(!0),a(u,null,y(l(o).visibleOrder.order.products,t=>{var k,C,S,i,p,T,D,R,j,L,V,z,$,B,A,H,U;return s(),a("div",Re,[e("p",je,[M(n(t.name)+" ",1),e("span",null,n(l(w)(t.price)),1)]),e("div",Le,[e("div",Ve,[((k=t.salsas)==null?void 0:k.length)>0?(s(),a("span",ze," Salsas")):r("",!0),((C=t.salsas)==null?void 0:C.length)>0?(s(!0),a(u,{key:1},y(t.salsas,d=>(s(),a("span",$e,n(d),1))),256)):r("",!0),((S=t.adiciones)==null?void 0:S.length)>0?(s(),a("span",Be," Adiciones")):r("",!0),((i=t.adiciones)==null?void 0:i.length)>0?(s(!0),a(u,{key:3},y(t.adiciones,d=>(s(),a("span",Ae,n(d.name),1))),256)):r("",!0),((p=t.cambios)==null?void 0:p.length)>0?(s(),a("span",He," Cambios")):r("",!0),((T=t.cambios)==null?void 0:T.length)>0?(s(!0),a(u,{key:5},y(t.cambios,d=>(s(),a("span",Ue,n(d.name),1))),256)):r("",!0),((D=t.toppings)==null?void 0:D.length)>0?(s(),a("span",Ye," Toppings")):r("",!0),((R=t.toppings)==null?void 0:R.length)>0?(s(!0),a(u,{key:7},y(t.toppings,d=>(s(),a("span",qe,n(d==null?void 0:d.name),1))),256)):r("",!0),((j=t.acompanantes)==null?void 0:j.length)>0?(s(),a("span",Ge," Acompanantes")):r("",!0),((L=t.acompanantes)==null?void 0:L.length)>0?(s(!0),a(u,{key:9},y(t.acompanantes,d=>(s(),a("span",Je,n(d.name),1))),256)):r("",!0)]),Qe,e("div",Xe,[((V=t.salsas)==null?void 0:V.length)>0?(s(),a("span",Ke," --------------")):r("",!0),((z=t.salsas)==null?void 0:z.length)>0?(s(!0),a(u,{key:1},y(t.salsas,d=>(s(),a("span",We," ..."))),256)):r("",!0),(($=t.adiciones)==null?void 0:$.length)>0?(s(),a("span",Ze," --------------")):r("",!0),((B=t.adiciones)==null?void 0:B.length)>0?(s(!0),a(u,{key:3},y(t.adiciones,d=>(s(),a("span",et,n(l(w)(d.price)),1))),256)):r("",!0),((A=t.cambios)==null?void 0:A.length)>0?(s(),a("span",tt," --------------")):r("",!0),(s(!0),a(u,null,y(t.cambios,d=>(s(),a("span",st,n(l(w)(d.price)),1))),256)),((H=t.topping)==null?void 0:H.length)>0?(s(),a("span",at," --------------")):r("",!0),(s(!0),a(u,null,y(t.toppings,d=>(s(),a("span",lt,n(l(w)(d==null?void 0:d.price)),1))),256)),((U=t.acompanantes)==null?void 0:U.length)>0?(s(),a("span",nt," --------------")):r("",!0),(s(!0),a(u,null,y(t.acompanantes,d=>(s(),a("span",ot,n(l(w)(d.price)),1))),256))])])])}),256))])])])])]}),_:1},8,["visible"])}}},dt=Y(it,[["__scopeId","data-v-5f8be31f"]]);const rt=b=>(K("data-v-2fed2dd5"),b=b(),W(),b),ct={class:"card p-4",style:{}},ht={class:"flex flex-wrap align-items-center justify-content-between gap-2"},_t={class:"text-xl text-900 font-bold"},mt={class:"flex flex-column md:flex-row md:justify-content-between md:align-items-center",style:{"background-color":""}},ut={class:"block mt-2 md:mt-0 p-input-icon-left"},pt=rt(()=>e("i",{class:"pi pi-search"},null,-1)),gt={class:"motivo"},yt={__name:"ordenes",setup(b){const o=G(null),h=q();te(()=>{P()});const P=()=>{o.value={global:{value:null,matchMode:se.CONTAINS}}},I=f=>{switch(f){case"enviada":return"success";case"cancelada":return"danger";default:return null}},O=async()=>{var x;let f=[...h.salesReport.total_sales.orders_info];if(h.order_status=h.order_status=="enviada"?"cancelada":"enviada",await h.fetchSalesReport(),f=f.concat([...h.salesReport.total_sales.orders_info]),!((x=o==null?void 0:o.value)!=null&&x.global.value))return f;const v=o.value.global.value.trim().toLowerCase();return f.filter(c=>Object.values(c).some(t=>t&&t.toString().trim().toLowerCase().includes(v)))},F=async()=>{const v=(await O()).map(t=>{var k,C,S,i,p;return{"Orden No":t.order_id,Monto:t.total_price,Sede:t.site_name,Fecha:(k=t.status.timestamp)==null?void 0:k.split(" ")[0],Hora:(C=t.status.timestamp)==null?void 0:C.split(" ")[1],Estado:t.status.status,Domicilio:t.delivery_price,"Metodo de pago":t.payment_method,"Nombre del usuario":(S=t.user_data)==null?void 0:S.user_name,"telefono del usuario":(i=t.user_data)==null?void 0:i.user_phone,"razon de la cancelacion":((p=t.status)==null?void 0:p.reazon)||"es una orden enviada"}}),x=E.json_to_sheet(v);x["!cols"]=[{wch:Math.max(8,2)},{wch:Math.max(10,5)},{wch:Math.max(12,4)},{wch:Math.max(10,5)},{wch:Math.max(5,4)},{wch:Math.max(10,6)},{wch:Math.max(5,9)},{wch:Math.max(25,14)},{wch:Math.max(20,19)},{wch:Math.max(12,8)},{wch:Math.max(25,18)},{wch:Math.max(15,16)},{wch:Math.max(15,15)},{wch:Math.max(18,16)},{wch:Math.max(25,21)},{wch:Math.max(20,18)},{wch:Math.max(25,26)},{wch:Math.max(20,20)},{wch:Math.max(15,14)},{wch:Math.max(15,12)},{wch:Math.max(20,18)},{wch:Math.max(18,16)},{wch:Math.max(20,3)},{wch:Math.max(18,16)},{wch:Math.max(18,18)},{wch:Math.max(12,11)},{wch:Math.max(18,16)},{wch:Math.max(16,14)},{wch:Math.max(18,16)},{wch:Math.max(18,16)},{wch:Math.max(22,22)},{wch:Math.max(15,15)},{wch:Math.max(18,17)},{wch:Math.max(35,34)},{wch:Math.max(40,44)},{wch:Math.max(10,7)},{wch:Math.max(20,17)}];const c=E.book_new();E.book_append_sheet(c,x,"Usuarios"),ae(c,"Base de datos empleados Salchimonster.xlsx")};return(f,v)=>{var S;const x=N("InputText"),c=N("Column"),t=N("Tag"),k=N("Button"),C=N("DataTable");return s(),a(u,null,[(s(!0),a(u,null,y((S=l(h).salesReport.total_sales)==null?void 0:S.orders_info,i=>(s(),a("div"))),256)),e("div",ct,[m(C,{paginator:"",value:l(h).salesReport.total_sales.orders_info,tableStyle:"min-width: 50rem",rows:5,filters:o.value,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25,100],currentPageReportTemplate:"Mostrando {first} a {last} de {totalRecords} ordenes",responsiveLayout:"scroll",scrollable:"","scroll-height":"62vh"},{header:g(()=>[e("div",ht,[e("span",_t,"Ordenes "+n(l(h).order_status)+"s entre "+n(l(h).formatDate(l(h).dateRange.startDate))+" y "+n(l(h).formatDate(l(h).dateRange.endDate)),1),e("div",mt,[e("span",ut,[pt,m(x,{class:"",modelValue:o.value.global.value,"onUpdate:modelValue":v[0]||(v[0]=i=>o.value.global.value=i),placeholder:"Search..."},null,8,["modelValue"])])])])]),default:g(()=>[m(c,{field:"order_id",header:"Id"},{body:g(i=>[M(n(i.data.order_id)+" ",1)]),_:1}),m(c,{field:"total_price",header:"Monto"},{body:g(i=>[M(n(l(w)(i.data.total_price)),1)]),_:1}),m(c,{field:"site_name",header:"Sede"},{body:g(i=>[M(n(l(w)(i.data.site_name)),1)]),_:1}),m(c,{field:"status.timestamp",header:"Fecha y hora",headerStyle:"width:10rem; min-width:8rem "},{body:g(i=>[M(n(i.data.status.timestamp),1)]),_:1}),l(h).order_status=="cancelada"?(s(),J(c,{key:0,headerStyle:"width:5rem; min-width:20rem; ",field:"status.reazon",header:"Motivo"},{body:g(i=>{var p;return[e("span",gt,n((p=i.data.status.reazon)==null?void 0:p.toLowerCase())+".",1)]}),_:1})):r("",!0),m(c,{field:"category",header:""}),m(c,{header:"Status"},{body:g(i=>{var p,T,D;return[m(t,{value:(p=i.data.status)==null?void 0:p.status,severity:I((D=(T=i.data)==null?void 0:T.status)==null?void 0:D.status)},null,8,["value","severity"])]}),_:1}),m(c,{header:"Aacciones",frozen:"",alignFrozen:"right"},{body:g(i=>[m(k,{onClick:p=>l(h).setVisibleOrder(!0,i.data),text:""},{default:g(()=>[e("i",{class:Q(["text-2xl col-12 p-0",l(X).EYE])},null,2)]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["value","filters"])]),m(k,{onClick:F},{default:g(()=>[M(" hols")]),_:1}),m(dt)],64)}}},wt=Y(yt,[["__scopeId","data-v-2fed2dd5"]]);export{wt as default};
