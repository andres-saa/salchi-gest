import{Q as n,ab as u,U as _}from"./index-73931183.js";const g=n("salchi_super_cart_web4432",{persist:{key:"salchi_super_cart_web4432",storage:sessionStorage,paths:["cart","last_order","menu"]},state:()=>({currentProduct:{},currentSection:{},currentVideoIndex:0,currentVideoTime:0,visibles:{currentProduct:!1,addAdditionToCart:!1,loading:!0,last_order:""},cart:[],last_order:"",sending_order:!1,was_reserva:!1,menu:[{}]}),getters:{cartTotal(e){return!Array.isArray(e.cart)||e.cart.length===0?0:e.cart.reduce((t,i)=>t+this.calculateTotalProduct(i),0)},isProductInCart:e=>t=>e.cart.some(i=>i.pedido_productoid===t),isProductInCart2:e=>t=>{var i;return(i=e.cart.products)==null?void 0:i.some(o=>o.product.productogeneral_id===t)},getProductTotal:()=>e=>{let i=globalThis.getProductPrice(e);return e.modificadorseleccionList&&e.modificadorseleccionList.length>0&&e.modificadorseleccionList.forEach(o=>{const c=parseInt(o.pedido_precio)||0,d=parseInt(o.modificadorseleccion_cantidad)||1;i+=c*d}),i*e.pedido_cantidad}},actions:{setCurrentVideoIndex(e){this.currentVideoIndex=e},setCurrentVideoTime(e){this.currentVideoTime=e},calculateTotalProduct(e){if(!e||typeof e!="object")return 0;const{pedido_base_price:t=0,pedido_cantidad:i=1,modificadorseleccionList:o=[]}=e,c=Number(t)||0,d=Number(i)||1,r=Array.isArray(o)?o.reduce((s,{pedido_precio:a=0,modificadorseleccion_cantidad:l=1})=>s+(Number(a)||0)*(Number(l)||1),0):0;return(c+r)*d},setCurrentProduct(e){this.currentProduct=e},setVisible(e,t){this.visibles[e]=t},getProductId(e){if(e.lista_presentacion&&e.lista_presentacion.length>0)return e.lista_presentacion[0].producto_id;if(e.productogeneral_id)return e.productogeneral_id},getProductPrice(e){return e.productogeneral_precio?e.productogeneral_precio:e.lista_presentacion&&e.lista_presentacion.length>0?e.lista_presentacion[0].producto_precio:0},buildSignature(e,t=[]){const i=t.map(o=>({id:o.modificadorseleccion_id,quantity:o.modificadorseleccion_cantidad}));return`${e}-${JSON.stringify(i)}`},calculateTotalPrice(e,t,i=[]){},addProductToCart(e,t=1,i=[]){const o={pedido_precio:this.getProductPrice(e),pedido_escombo:e.productogeneral_escombo,pedido_cantidad:t,pedido_base_price:this.getProductPrice(e),pedido_productoid:this.getProductId(e),lista_productocombo:e.lista_productobase?e.lista_productobase.map(r=>({pedido_productoid:r.producto_id,pedido_cantidad:r.productocombo_cantidad,pedido_precio:r.productocombo_precio,pedido_nombre:r.producto_descripcion})):[],pedido_nombre_producto:e.productogeneral_descripcion,modificadorseleccionList:i.map(r=>({modificador_id:r.modificador_id,modificadorseleccion_id:r.modificadorseleccion_id,pedido_precio:r.modificadorseleccion_precio,modificadorseleccion_cantidad:r.modificadorseleccion_cantidad||1,modificadorseleccion_nombre:r.modificadorseleccion_nombre})),productogeneral_urlimagen:e.productogeneral_urlimagen},c=this.buildSignature(o.pedido_productoid,o.modificadorseleccionList);o.signature=c,console.log(o);const d=this.cart.findIndex(r=>r.signature==c);if(d!=-1){const r=this.cart[d];r.pedido_cantidad+=t,console.log(this.cart[d])}else this.cart.push(o)},removeProductFromCart(e){const t=this.cart.findIndex(i=>i.signature===e);this.cart.splice(t,1)},decrementProduct(e){const t=this.cart.findIndex(i=>i.signature===e);if(t!==-1){const i=this.cart[t];i.pedido_cantidad-=1,i.pedido_cantidad<=0&&this.cart.splice(t,1)}},incrementProduct(e){const t=this.cart.findIndex(i=>i.signature==e);if(t!=-1){const i=this.cart[t];i.pedido_cantidad+=1,console.log(this.cart[t])}},incrementAdditional(e,t){const i=this.cart.findIndex(o=>o.signature==e);if(i!=-1){const c=this.cart[i].modificadorseleccionList.find(d=>d===t);c.modificadorseleccion_cantidad++}},decrementAdditional(e,t){const i=this.cart.findIndex(o=>o.signature===e);if(i!==-1){const o=this.cart[i],c=o.modificadorseleccionList.findIndex(d=>d===t);c!==-1&&(o.modificadorseleccionList[c].modificadorseleccion_cantidad--,o.modificadorseleccionList[c].modificadorseleccion_cantidad<1&&o.modificadorseleccionList.splice(c,1))}}}}),p=n("call-center-site",{persist:{key:"call-center-site",storage:localStorage,paths:["location","restaurant","categories"]},state:()=>({location:{site:{},neigborhood:{}},visibles:{currentSite:!1},current_delivery:0,status:"closed",restaurant:1,categories:[10,26,8,9,13,27,11,4,5,112,113,111,109]}),getters:{fucion:e=>0},actions:{async func(){return func},setLocation(e){this.location=e},setVisible(e,t){this.visibles[e]=t},async setNeighborhoodPrice(){var e,t;try{const i=await u.get(`${_}/neighborhood/${(t=(e=this.location)==null?void 0:e.neigborhood)==null?void 0:t.neighborhood_id}/`);return i.status===200?(this.location.neigborhood=i.data,i.data):(console.error("An error occurred while fetching the ingredients:",i.status),null)}catch(i){return console.error("An error occurred while fetching the ingredients:",i),null}},async setNeighborhoodPriceCero(){this.location.neigborhood.delivery_price=0}}});export{g as a,p as u};
