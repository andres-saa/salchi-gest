import{_ as V,A as B,r,D as N,i as M,a as $,o as g,c as x,b as t,f as D,F as C,d as q,g as d,w as p,k as J,U as w,a8 as G,n as P,t as l,m as c,p as K,h as Q}from"./index-961bb091.js";const W="/images/empty.avif";const o=k=>(K("data-v-e16b8409"),k=k(),Q(),k),X={class:"col-12 m-auto p-0"},Y={key:0,class:"col-12 p-0 m-auto",style:{"max-width":"900px",position:"relative",display:"flex","align-items":"center","justify-content":"center"}},Z=o(()=>t("img",{src:W,alt:"",srcset:"",style:{opacity:"0.5",width:"100%",height:"50vh","object-fit":"cover","border-radius":"1rem"}},null,-1)),tt=o(()=>t("span",{class:"text-6xl",style:{"font-weight":"bold",position:"absolute"}}," Nada por aquí",-1)),et=[Z,tt],st={class:"grid p-3 m-0"},ot={class:"col-12 md:col-6 xl:col-4 px-0 md:px-3 m-0"},at={class:"col-12 p-0 m-auto pb-4",style:{"background-color":"white","box-shadow":"0 0 10px rgba(0, 0, 0, 0.137)",height:"100%","border-radius":"1rem","max-width":"400px",overflow:"hidden"}},lt={class:"text-2xl",style:{"font-weight":"bold","text-transform":"capitalize",color:"white"}},nt={class:"col-12 grid m-0 p-1"},it=o(()=>t("p",{class:"col-6 my-0 py-0",style:{"font-weight":"bold"}},[t("span",null,"ID del permiso")],-1)),ct={class:"col-6 my-0 py-0 text-right"},rt={class:"col-12 grid m-0 p-1"},dt=o(()=>t("p",{class:"col-6 my-0 py-0",style:{"font-weight":"bold"}},[t("span",null,"ID del empleado")],-1)),pt={class:"col-6 my-0 py-0 text-right"},ut={class:"col-12 grid m-0 p-1"},ht=o(()=>t("p",{class:"col-6 my-0 py-0",style:{"font-weight":"bold"}},[t("span",null,"Desde")],-1)),_t={class:"col-6 my-0 py-0 text-right"},mt={class:"col-12 grid m-0 p-1"},yt=o(()=>t("p",{class:"col-6 my-0 py-0",style:{"font-weight":"bold"}},[t("span",null,"Hasta")],-1)),vt={class:"col-6 my-0 py-0 text-right"},ft=o(()=>t("p",{class:"col-6 my-0 py-0",style:{"font-weight":"bold"}},[t("span",null,[c("Estado "),t("br"),c(" Fecha")])],-1)),bt={class:"col-6 my-0 py-0 text-right"},gt=o(()=>t("br",null,null,-1)),xt={class:"col-12 grid m-0 p-1 mt-4"},wt=o(()=>t("p",{class:"col-12 my-0 py-0",style:{"font-weight":"bold"}},[t("span",null,"Observaciones")],-1)),kt={class:"col-12 my-0 py-0"},St={class:"px-3 mt-4",style:{display:"flex",gap:"1rem","justify-content":"space-around",position:"relative",bottom:"0"}},zt=o(()=>t("span",{class:"text-sm text-center"},"REVISAR",-1)),Et=o(()=>t("div",null,null,-1)),It={class:"a4-size p-0 lg:p-6 mi-clase mt-4"},jt=o(()=>t("img",{class:"m-auto",src:"https://salchimonster.com/images/logo.png",style:{width:"10%"},alt:""},null,-1)),Nt={style:{"font-size":"11pt","font-weight":"normal",color:"black","font-family":"Arial, Helvetica, sans-serif"}},$t=o(()=>t("h6",{class:"text-center",style:{"font-size":"11pt","font-weight":"bold",color:"black","font-family":"Arial, Helvetica, sans-serif"}}," INVERSIONES SALCHIMONSTER SAS ",-1)),Dt=o(()=>t("h6",{style:{"font-size":"11pt","font-weight":"normal",color:"black","font-family":"Arial, Helvetica, sans-serif"},class:"text-center"},"NIT: 901.420.874-0",-1)),Ct={class:"text-center py-4",style:{"font-weight":"bold","text-transform":"uppercase"}},Pt=o(()=>t("span",{style:{"text-transform":"capitalize"}},null,-1)),Rt={class:"text-l",style:{"font-size":"11pt","font-weight":"normal",color:"black","font-family":"Arial, Helvetica, sans-serif"}},At={class:"p-0 m-0"},Tt=o(()=>t("span",{style:{"font-weight":"bold"}},"Fecha de la solicitud: ",-1)),Ut={style:{"border-bottom":"1px solid","padding-bottom":"0","padding-right":"2rem"}},Ot={class:"p-0 m-0",style:{width:"100%"}},Ft=o(()=>t("span",{style:{"font-weight":"bold"}},"Nombre: ",-1)),Ht={style:{width:"100%","border-bottom":"1px solid","padding-bottom":"0","padding-right":"3rem"}},Lt={class:"p-0 m-0"},Vt=o(()=>t("span",{style:{"font-weight":"bold"}},"Cargo: ",-1)),Bt={style:{"border-bottom":"1px solid","padding-bottom":"0","padding-right":"2rem"}},Mt={class:"p-0 m-0"},qt=o(()=>t("span",{style:{"font-weight":"bold"}},"Identificación No: ",-1)),Jt={style:{"border-bottom":"1px solid","padding-bottom":"0","padding-right":"2rem"}},Gt={style:{display:"flex","justify-content":"start",gap:"2rem",border:"1px solid","margin-top":"2rem"},class:"p-2"},Kt={style:{display:"flex","flex-direction":"column"},class:""},Qt=o(()=>t("div",{style:{"font-weight":"bold"}}," Desde ",-1)),Wt={style:{display:"flex","flex-direction":"column"}},Xt=o(()=>t("div",{style:{"font-weight":"bold"}}," Hasta ",-1)),Yt={style:{display:"flex","justify-content":"start",gap:"2rem",border:"1px solid","margin-top":"2rem"},class:"p-2"},Zt={style:{display:"flex","flex-direction":"column"},class:""},te={style:{display:"flex","flex-direction":"column"}},ee=o(()=>t("div",{style:{"font-weight":"bold"}}," Observaciones ",-1)),se={style:{display:"flex","justify-content":"start",gap:"2rem",border:"1px solid","margin-top":"2rem"},class:"p-2"},oe={style:{display:"flex","flex-direction":"column"},class:""},ae={style:{display:"flex","flex-direction":"column"}},le=o(()=>t("div",{class:"mb-2",style:{"font-weight":"bold"}}," Estado actual ",-1)),ne={class:"mb-1"},ie=o(()=>t("span",{style:{"font-weight":"bold"}},"Resumen:",-1)),ce={class:"mb-1"},re=o(()=>t("span",{style:{"font-weight":"bold"}},"Fecha:",-1)),de={class:"mb-1"},pe=o(()=>t("span",{style:{"font-weight":"bold"}}," Responsable Id:",-1)),ue={key:0},he=o(()=>t("span",{style:{"font-weight":"bold"}},"Motivos del rechazo:",-1)),_e=o(()=>t("span",{class:"p-input-icon-left",style:{width:"100%"}},[t("i",{class:"pi pi-pencil"})],-1)),me=o(()=>t("span",{class:"text-center col-12 p-0"},"Si, continuar",-1)),ye=o(()=>t("span",{class:"text-center col-12 p-0"},"No, talvez luego",-1)),ve=o(()=>t("span",{class:"p-input-icon-left",style:{width:"100%"}},[t("i",{class:"pi pi-pencil"})],-1)),fe=o(()=>t("span",{class:"text-center col-12 p-0"},"Si, continuar",-1)),be=o(()=>t("span",{class:"text-center col-12 p-0"},"No, talvez luego",-1)),ge={__name:"miPermisoStatus",setup(k){const f=B();r(f.params.status);const u=r(f.params.tipo),_=r(f.params.status),z=r(!1),E=r("2029-12-21 16:19"),i=r(),h=r({}),m=r({}),I=r(!1),j=r(!1);N(()=>f.params.tipo,s=>{u.value=s,console.log(u),b(_.value,u.value).then(e=>h.value=e)}),N(()=>f.params.status,s=>{_.value=s,b(_.value,u.value).then(e=>h.value=e)});const R=async s=>{z.value=!0,i.value=s,F(s.employer_id)};function A(s){s.status={status:"aprobado",timestamp:E.value},s.history.push({...s.status}),fetch(`${w}/permission/${s.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}).then(e=>{e.json(),I.value=!1,b(u.value,_.value).then(n=>h.value=n)}).then(e=>console.log("Permiso aprobado:",e)).catch(e=>console.error("Error:",e))}function T(s){s.status={status:"rechazado",timestamp:E.value},s.history.push({...s.status}),fetch(`${w}/permission/${s.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}).then(e=>{e.json(),j.value=!1,b(u.value,_.value).then(n=>h.value=n)}).then(e=>console.log("Permiso rechazado:",e)).catch(e=>console.error("Error:",e))}function S(s){var e=new Date(s),n={day:"numeric",month:"long",year:"numeric"};return e.toLocaleDateString("es-ES",n)}const U=async()=>{fetch(`${w}/server_time`).then(s=>{if(!s.ok)throw new Error("Network response was not ok");return s.json()}).then(s=>{console.log("Employer data:",s),E.value=s}).catch(s=>{console.error("There has been a problem with your fetch operation:",s),mensaje.value="error"})};function O(s){s||(s="2029-12-21 16:19");const e=["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"];let[n,y]=s.split(" "),[a,v,H]=n.split("-").map(Number),L=e[v-1];return`${H} de ${L} de ${a}`}const F=async s=>{fetch(`${w}/employer/${s}`).then(e=>{if(!e.ok)throw new Error("Network response was not ok");return e.json()}).then(e=>{console.log("Employer data:",e),m.value=e}).catch(e=>{console.error("There has been a problem with your fetch operation:",e)})};async function b(s,e){const n=await G(),y=`${w}/permissions/user/${n}/status/${s}/type/${e}`;try{const a=await fetch(y);if(!a.ok)throw new Error(`Error al obtener los permisos: ${a.status}`);return await a.json()}catch(a){throw console.error("Error en getPermissions:",a),a}}return M(()=>{b(_.value,u.value).then(s=>h.value=s),U()}),(s,e)=>{const n=$("Button"),y=$("Dialog");return g(),x(C,null,[t("div",X,[h.value.length<=0?(g(),x("div",Y,et)):D("",!0),t("div",st,[(g(!0),x(C,null,q(h.value,a=>(g(),x("div",ot,[t("div",at,[t("div",{class:P(["col-12 m-0 mb-3",a.tipo]),style:{}},[t("p",lt,l(a.tipo)+" ID #"+l(a.id),1)],2),t("div",nt,[it,t("p",ct,l(a.id),1)]),t("div",rt,[dt,t("p",pt,l(a.employer_id),1)]),t("div",ut,[ht,t("p",_t,l(a.start_date),1)]),t("div",mt,[yt,t("p",vt,l(a.end_date),1)]),t("div",{class:P(["col-12 grid m-0 p-1",a.status.status])},[ft,t("p",bt,[c(l(a.status.status)+" ",1),gt,c(" "+l(a.status.timestamp.split(" ")[0]),1)])],2),t("div",xt,[wt,t("p",kt,l(a.observations),1)]),t("div",St,[d(n,{outlined:"",severity:"info",label:"Small",onClick:v=>R(a),style:{width:"100%",display:"flex","justify-content":"center"}},{default:p(()=>[zt]),_:2},1032,["onClick"])])])]))),256))]),Et]),d(y,{style:J([{border:"none","box-shadow":"none"},{width:"700px"}]),visible:z.value,"onUpdate:visible":e[0]||(e[0]=a=>z.value=a),header:"Revizar permiso",modal:!0,class:"p-fluid m-2 pt-8"},{default:p(()=>{var a,v;return[t("div",It,[jt,t("h6",Nt,l(O(i.value.status.timestamp)),1),$t,Dt,t("h6",Ct,[c("FORMATO SOLICITUD DE PERMISO "+l(i.value.tipo)+" ",1),Pt]),t("h5",Rt,[t("p",At,[Tt,c(),t("span",Ut,l(S(i.value.status.timestamp)),1)]),t("p",Ot,[Ft,c(),t("span",Ht,l(m.value.name),1)]),t("p",Lt,[Vt,c(),t("span",Bt,l(m.value.position),1)]),t("p",Mt,[qt,c(),t("span",Jt,l(m.value.dni),1)]),t("div",Gt,[t("div",Kt,[Qt,t("div",null,l(S(i.value.start_date)),1)]),t("div",Wt,[Xt,t("div",null,l(S(i.value.end_date)),1)])]),t("div",Yt,[t("div",Zt,[t("div",te,[ee,t("div",null,l(i.value.observations),1)])])]),t("div",se,[t("div",oe,[t("div",ae,[le,t("div",ne,[ie,c(" "+l(i.value.status.status),1)]),t("div",ce,[re,c(" "+l(S(i.value.status.timestamp)),1)]),t("div",de,[pe,c(" "+l((a=i.value.status)==null?void 0:a.responsable),1)]),i.value.status.status=="rechazado"?(g(),x("div",ue,[he,c(" "+l((v=i.value.status)==null?void 0:v.razones),1)])):D("",!0)])])])])])]}),_:1},8,["visible"]),d(y,{header:"Confirmacion",visible:I.value,"onUpdate:visible":e[2]||(e[2]=a=>I.value=a),style:{width:"350px"},modal:!0},{default:p(()=>[t("h5",null,"Seguro que desea aceptar el permiso de "+l(m.value.name),1),_e,d(n,{onClick:e[1]||(e[1]=a=>A(i.value)),style:{margin:"auto","background-color":"rgb(105, 255, 157)",color:"black",border:"none"},class:"m-auto my-4 text-center"},{default:p(()=>[me]),_:1}),d(n,{style:{"background-color":"rgb(255, 156, 156)",color:"rgba(0, 0, 0, 0.864)",border:"none"},class:"m-auto my-4 ml-4 text-center"},{default:p(()=>[ye]),_:1})]),_:1},8,["visible"]),d(y,{header:"Confirmacion",visible:j.value,"onUpdate:visible":e[4]||(e[4]=a=>j.value=a),style:{width:"350px"},modal:!0},{default:p(()=>[t("h5",null,"Seguro que desea Rechazar el permiso de "+l(m.value.name),1),ve,d(n,{onClick:e[3]||(e[3]=a=>T(i.value)),style:{margin:"auto","background-color":"rgb(105, 255, 157)",color:"black",border:"none"},class:"m-auto my-4 text-center"},{default:p(()=>[fe]),_:1}),d(n,{style:{"background-color":"rgb(255, 156, 156)",color:"rgba(0, 0, 0, 0.864)",border:"none"},class:"m-auto my-4 ml-4 text-center"},{default:p(()=>[be]),_:1})]),_:1},8,["visible"])],64)}}},we=V(ge,[["__scopeId","data-v-e16b8409"]]);export{we as default};
