import{_ as G,y as J,r as K,a as N,o as s,g as q,w as y,d as e,t as o,s as l,J as k,n as V,P as $,j as C,c as a,F as m,e as f,D as _,H as Z,p as Q,i as X,K as ee,A as te,C as se,f as u}from"./index-e74f79b8.js";import{u as M,w as le}from"./xlsx-4f9172c7.js";const h=O=>(Q("data-v-5f8be31f"),O=O(),X(),O),ae={style:{"border-radius":"1rem",overflow:"hidden"}},ne=h(()=>e("div",{class:"P-0 mt-0",style:{"background-color":"var(--orange-500)"}},[e("div",{class:"header p-4",style:{display:"flex","justify-content":"space-between","align-items":"center"}},[e("div",{style:{display:"flex"}},[e("img",{class:"p-0",src:ee,style:{filter:"brightness(0) invert()",width:"",height:"3rem","object-fit":"contain"},alt:""}),e("span",{style:{width:"min-content","font-weight":"bold",color:"white"}},"INVERSIONES SALCHIMONSTER")]),e("div",{style:{display:"flex","flex-direction":"column","max-width":"40%"}},[e("span",{class:"text-left text-sm",style:{"text-align":"end",width:"min-content","font-weight":"bold",color:"white"}},"TERMINOS Y CONDICIONES "),e("small",{class:"mt-2 text-left",style:{color:"white","max-width":""}},"Lorem ipsum dolor sit amet consectetur, adipisi")])])],-1)),oe={class:"P-0",style:{"background-color":"var(--gray-200)"}},ie={class:"header p-4",style:{display:"flex","justify-content":"space-between"}},re={style:{"font-weight":"bold",display:"flex","flex-direction":"column","max-width":"50%"}},de=h(()=>e("span",{class:"text-xl mb-2",style:{width:"min-content","font-weight":"bold",color:"rgb(0, 0, 0)"}},"Factura",-1)),ce={style:{display:"flex",gap:"1rem","justify-content":"space-between"}},_e=h(()=>e("div",{style:{display:"flex","flex-direction":"column"}},[e("span",null," Orden No."),e("span",null," Sede"),e("span",null," Fecha"),e("span",null," Metodo de pago")],-1)),pe=h(()=>e("div",{style:{display:"flex","font-weight":"200","flex-direction":"column"}},[e("span",null," |"),e("span",null," | "),e("span",null," |"),e("span",null," |")],-1)),he={style:{display:"flex","font-weight":"400","flex-direction":"column"}},ue={style:{"font-weight":"bold",display:"flex","flex-direction":"column","max-width":"40%"}},me=h(()=>e("span",{class:"text-xl mb-2",style:{width:"min-content","font-weight":"bold",color:"rgb(0, 0, 0)"}},"Balance",-1)),ye={style:{display:"flex",gap:"1rem","justify-content":"space-between"}},fe=h(()=>e("div",{style:{display:"flex","flex-direction":"column"}},[e("span",null," Subtotal"),e("span",null," Domicilio"),e("span",{class:"text-2xl"}," Total")],-1)),ge=h(()=>e("div",{style:{display:"flex","font-weight":"200","flex-direction":"column"}},[e("span",null," | "),e("span",null," |"),e("span",null," |")],-1)),be={style:{display:"flex","font-weight":"400","flex-direction":"column"}},xe={class:"text-xl",style:{"font-weight":"bold","border-top":"2px solid red"}},ve=h(()=>e("p",{class:"text-xl text-center",style:{"font-weight":"bold",color:"rgb(255, 255, 255)","background-color":"black"}},"Datos de usuario",-1)),we={class:"p-4",style:{display:"flex",gap:"1rem","justify-content":"start"}},ke={style:{display:"flex","font-weight":"400",height:"4rem","aspect-ratio":"1 / 1","background-color":"rgb(255, 255, 255)","border-radius":"50%","flex-direction":"column","align-items":"center","justify-content":"center"}},Oe=h(()=>e("div",{style:{display:"flex","font-weight":"200","flex-direction":"column"}},[e("span",null," |"),e("span",null," | "),e("span",null," |")],-1)),Se={style:{display:"flex","flex-direction":"column"}},Ce={style:{"text-transform":"capitalize"}},De=h(()=>e("span",{style:{"font-weight":"bold"}}," Nombre :",-1)),Ne={style:{"text-transform":"capitalize"}},Te=h(()=>e("span",{style:{"font-weight":"bold"}},"DIRECCION :",-1)),Ie=h(()=>e("span",{style:{"font-weight":"bold"}}," TELEFONO : ",-1)),Pe={class:"P-0",style:{"background-color":"var(--white-200)"}},Re={class:"header py-4",style:{display:"flex","justify-content":"space-between"}},je={style:{"font-weight":"bold",display:"flex","flex-direction":"column",width:"100%"}},Le=h(()=>e("span",{class:"text-xl pl-4 mb-2",style:{width:"min-content","font-weight":"bold",color:"rgb(0, 0, 0)"}},"Productos",-1)),Fe={class:"m-0 p-0"},Ee={class:"text-l p-1 text-center my-2",style:{"font-weight":"bold",width:"100","background-color":"var(--gray-200)",color:"black"}},Me={class:"px-4 py-0",style:{display:"flex",gap:"1rem",width:"100%","justify-content":"space-between"}},Ve={style:{display:"flex","flex-direction":"column","font-weight":"500"}},$e={key:0,class:"",style:{"font-weight":"bold"}},ze={class:"ml-4"},Be={key:2,class:"",style:{"font-weight":"bold"}},Ae={class:"ml-4"},He={key:4,class:"",style:{"font-weight":"bold"}},Ue={class:"ml-4"},We={key:6,class:"",style:{"font-weight":"bold"}},Ye={class:"ml-4"},Ge={key:8,class:"",style:{"font-weight":"bold"}},Je={class:"ml-4"},Ke=h(()=>e("div",{style:{display:"flex","font-weight":"200","flex-direction":"column"}},null,-1)),qe={style:{display:"flex","font-weight":"400","flex-direction":"column"}},Qe={key:0,class:"text-right",style:{}},Xe={class:"ml-4 text-right",style:{}},Ze={key:2,class:"text-right",style:{}},et={class:"ml-4 text-right"},tt={key:4,class:"text-right",style:{}},st={class:"ml-4 text-right"},lt={key:5,class:"text-right",style:{}},at={class:"ml-4 text-right"},nt={key:6,class:"text-right",style:{}},ot={class:"ml-4"},it={__name:"orderDialog",setup(O){const r=J();return K(!0),(p,L)=>{const E=N("Dialog");return s(),q(E,{style:Z([{"background-color":""},{width:"40rem"}]),visible:l(r).visibleOrder.visible,"onUpdate:visible":L[0]||(L[0]=T=>l(r).visibleOrder.visible=T),modal:"",header:"Orden"},{default:y(()=>{var T,F,g,v,b,D;return[e("div",ae,[ne,e("div",oe,[e("div",ie,[e("div",re,[de,e("div",ce,[_e,pe,e("div",he,[e("span",null,o(l(r).visibleOrder.order.order_id),1),e("span",null,o(l(r).visibleOrder.order.site_name),1),e("span",null,o((F=(T=l(r).visibleOrder.order)==null?void 0:T.status)==null?void 0:F.timestamp.split(" ")[0]),1),e("span",null,o((g=l(r).visibleOrder.order)==null?void 0:g.payment_method),1)])])]),e("div",ue,[me,e("div",ye,[fe,ge,e("div",be,[e("span",null,o(l(k)(l(r).visibleOrder.order.total_price)),1),e("span",null,o(l(k)(l(r).visibleOrder.order.delivery_price)),1),e("span",xe,o(l(k)(l(r).visibleOrder.order.total_price+l(r).visibleOrder.order.delivery_price)),1)])])])]),ve,e("div",we,[e("div",ke,[e("i",{class:V(["text-2xl",l($).USER])},null,2)]),Oe,e("div",Se,[e("span",Ce,[De,C(" "+o((v=l(r).visibleOrder.order.user_data)==null?void 0:v.user_name),1)]),e("span",Ne,[Te,C(" "+o((b=l(r).visibleOrder.order.user_data)==null?void 0:b.user_address),1)]),e("span",null,[Ie,C(" "+o((D=l(r).visibleOrder.order.user_data)==null?void 0:D.user_phone),1)])])])]),e("div",Pe,[e("div",Re,[e("div",je,[Le,(s(!0),a(m,null,f(l(r).visibleOrder.order.products,t=>{var n,w,S,x,i,c,I,P,R,j,z,B,A,H,U,W,Y;return s(),a("div",Fe,[e("p",Ee,[C(o(t.name)+" ",1),e("span",null,o(l(k)(t.price)),1)]),e("div",Me,[e("div",Ve,[((n=t.salsas)==null?void 0:n.length)>0?(s(),a("span",$e," Salsas")):_("",!0),((w=t.salsas)==null?void 0:w.length)>0?(s(!0),a(m,{key:1},f(t.salsas,d=>(s(),a("span",ze,o(d),1))),256)):_("",!0),((S=t.adiciones)==null?void 0:S.length)>0?(s(),a("span",Be," Adiciones")):_("",!0),((x=t.adiciones)==null?void 0:x.length)>0?(s(!0),a(m,{key:3},f(t.adiciones,d=>(s(),a("span",Ae,o(d.name),1))),256)):_("",!0),((i=t.cambios)==null?void 0:i.length)>0?(s(),a("span",He," Cambios")):_("",!0),((c=t.cambios)==null?void 0:c.length)>0?(s(!0),a(m,{key:5},f(t.cambios,d=>(s(),a("span",Ue,o(d.name),1))),256)):_("",!0),((I=t.toppings)==null?void 0:I.length)>0?(s(),a("span",We," Toppings")):_("",!0),((P=t.toppings)==null?void 0:P.length)>0?(s(!0),a(m,{key:7},f(t.toppings,d=>(s(),a("span",Ye,o(d==null?void 0:d.name),1))),256)):_("",!0),((R=t.acompanantes)==null?void 0:R.length)>0?(s(),a("span",Ge," Acompanantes")):_("",!0),((j=t.acompanantes)==null?void 0:j.length)>0?(s(!0),a(m,{key:9},f(t.acompanantes,d=>(s(),a("span",Je,o(d.name),1))),256)):_("",!0)]),Ke,e("div",qe,[((z=t.salsas)==null?void 0:z.length)>0?(s(),a("span",Qe," --------------")):_("",!0),((B=t.salsas)==null?void 0:B.length)>0?(s(!0),a(m,{key:1},f(t.salsas,d=>(s(),a("span",Xe," ..."))),256)):_("",!0),((A=t.adiciones)==null?void 0:A.length)>0?(s(),a("span",Ze," --------------")):_("",!0),((H=t.adiciones)==null?void 0:H.length)>0?(s(!0),a(m,{key:3},f(t.adiciones,d=>(s(),a("span",et,o(l(k)(d.price)),1))),256)):_("",!0),((U=t.cambios)==null?void 0:U.length)>0?(s(),a("span",tt," --------------")):_("",!0),(s(!0),a(m,null,f(t.cambios,d=>(s(),a("span",st,o(l(k)(d.price)),1))),256)),((W=t.topping)==null?void 0:W.length)>0?(s(),a("span",lt," --------------")):_("",!0),(s(!0),a(m,null,f(t.toppings,d=>(s(),a("span",at,o(l(k)(d==null?void 0:d.price)),1))),256)),((Y=t.acompanantes)==null?void 0:Y.length)>0?(s(),a("span",nt," --------------")):_("",!0),(s(!0),a(m,null,f(t.acompanantes,d=>(s(),a("span",ot,o(l(k)(d.price)),1))),256))])])])}),256))])])])])]}),_:1},8,["visible"])}}},rt=G(it,[["__scopeId","data-v-5f8be31f"]]);const dt=O=>(Q("data-v-46748c08"),O=O(),X(),O),ct={class:"flex flex-wrap align-items-center justify-content-between gap-2 my-5 pl-0 ml-0"},_t={class:"text-l p-0 text-900 font-bold"},pt={class:"flex p-0 flex-column md:flex-row md:justify-content-between md:align-items-center",style:{"background-color":""}},ht={class:"block mt-2 md:mt-0 py-0"},ut=dt(()=>e("template",null,null,-1)),mt={class:"motivo"},yt={__name:"ordenes",setup(O){const r=K(null),p=J();te(()=>{L()});const L=()=>{r.value={global:{value:null,matchMode:se.CONTAINS}}},E=g=>{switch(g){case"enviada":return"success";case"cancelada":return"danger";default:return null}},T=async()=>{var b;let g=[...p.salesReport.total_sales.orders_info];if(p.order_status=p.order_status=="enviada"?"cancelada":"enviada",await p.fetchSalesReport(),g=g.concat([...p.salesReport.total_sales.orders_info]),!((b=r==null?void 0:r.value)!=null&&b.global.value))return g;const v=r.value.global.value.trim().toLowerCase();return g.filter(D=>Object.values(D).some(t=>t&&t.toString().trim().toLowerCase().includes(v)))},F=async()=>{const v=(await T()).map(n=>{var w,S,x,i,c;return{"Orden No":n.order_id,Monto:n.total_order_price,Sede:n.site_name,Fecha:(w=n.latest_status_timestamp)==null?void 0:w.split("T")[0],Hora:(c=(i=(x=(S=n.latest_status_timestamp)==null?void 0:S.split("T")[1])==null?void 0:x.split(":"))==null?void 0:i.slice(0,2))==null?void 0:c.join(":"),Estado:n.current_status,Responsable:n.responsible?`cancelada por ${n.responsible}`:"no aplica","razon de la cancelacion":n.reason||"no aplica",Domicilio:n.delivery_price,"Metodo de pago":n.payment_method,"Nombre del usuario":n.user_name,"telefono del usuario":n.user_phone,"direccion del usuario":n.user_address}}),b=M.json_to_sheet(v),D=v.reduce((n,w)=>(Object.keys(w).forEach((S,x)=>{var c;const i=((c=w[S])==null?void 0:c.toString().length)||0;n[x]=Math.max(n[x]||10,i)}),n),[]);b["!cols"]=D.map(n=>({wch:n}));const t=M.book_new();M.book_append_sheet(t,b,"ventas"),le(t,"reporte de ventas salchimonster.xlsx")};return(g,v)=>{var x;const b=N("Button"),D=N("InputText"),t=N("P"),n=N("Column"),w=N("Tag"),S=N("DataTable");return s(),a(m,null,[(s(!0),a(m,null,f((x=l(p).salesReport.total_sales)==null?void 0:x.orders_info,i=>(s(),a("div"))),256)),u(b,{size:"small",class:"py-2",severity:"success",onClick:F},{default:y(()=>[e("i",{class:V(["pr-3",l($).DOWNLOAD])},null,2),C(" Descargar reporte")]),_:1}),e("div",ct,[e("span",_t,"Ordenes "+o(l(p).order_status)+"s entre "+o(l(p).formatDate(l(p).dateRange.startDate))+" y "+o(l(p).formatDate(l(p).dateRange.endDate)),1),e("div",pt,[e("span",ht,[u(D,{class:"p-2",modelValue:r.value.global.value,"onUpdate:modelValue":v[0]||(v[0]=i=>r.value.global.value=i),placeholder:"Buscar..."},null,8,["modelValue"])])])]),u(S,{paginator:"",value:l(p).salesReport.total_sales.orders_info,tableStyle:"min-width: 50rem",rows:10,filters:r.value,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25,100],currentPageReportTemplate:"Mostrando {first} a {last} de {totalRecords} ordenes",responsiveLayout:"scroll",scrollable:"","scroll-height":"62vh"},{default:y(()=>[ut,u(n,{field:"order_id",header:"Id",class:"p-0",headerStyle:"max-width:8rem; width:10rem"},{body:y(i=>[u(t,{style:{"min-width":"max-content"}},{default:y(()=>[C(o(i.data.order_id),1)]),_:2},1024)]),_:1}),u(n,{field:"total_price",header:"Monto",class:"p-0",headerStyle:"max-width:10rem; width:5rem"},{body:y(i=>[C(o(l(k)(i.data.total_order_price)),1)]),_:1}),u(n,{field:"site_name",header:"Sede",class:"p-0",headerStyle:"max-width:6rem; width:6rem"},{body:y(i=>[C(o(l(k)(i.data.site_name)),1)]),_:1}),u(n,{field:"status.timestamp",class:"p-0",header:"Fecha y hora",headerStyle:"width:10rem; min-width:8rem "},{body:y(i=>{var c,I,P,R,j;return[C(o((c=i.data.latest_status_timestamp)==null?void 0:c.split("T")[0])+" "+o((j=(R=(P=(I=i.data.latest_status_timestamp)==null?void 0:I.split("T")[1])==null?void 0:P.split(":"))==null?void 0:R.slice(0,2))==null?void 0:j.join(":")),1)]}),_:1}),l(p).order_status=="cancelada"?(s(),q(n,{key:0,class:"p-0",headerStyle:"width:30rem; max-width:40rem; ",field:"status.reazon",header:"Motivo"},{body:y(i=>{var c;return[e("span",mt,o((c=i.data.reason)==null?void 0:c.toLowerCase())+".",1)]}),_:1})):_("",!0),u(n,{header:"Status",class:"p-0"},{body:y(i=>{var c;return[u(w,{value:i.data.current_status,severity:E((c=i.data)==null?void 0:c.current_status)},null,8,["value","severity"])]}),_:1}),u(n,{class:"p-0",header:"",frozen:"",alignFrozen:"right",headerStyle:"width:0.5rem; max-width:0.5rem "},{body:y(i=>[u(b,{style:{width:"min-content"},onClick:c=>l(p).setVisibleOrder(!0,i.data),text:""},{default:y(()=>[e("i",{class:V(["text-2xl p-0",l($).EYE])},null,2)]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["value","filters"]),u(rt)],64)}}},bt=G(yt,[["__scopeId","data-v-46748c08"]]);export{bt as default};
