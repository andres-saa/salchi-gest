import _e from"./pqrUser-942442c4.js";import{_ as ve,M as ye,r,A as he,l as be,q as fe,i as ge,D as Z,a as _,o as l,c as o,g as u,w as m,b as t,F as I,d as ee,s as Ve,j as L,U as j,t as a,k as b,m as c,f as n,u as U,N as B,n as xe,e as te,p as ke,h as we}from"./index-32c82ec4.js";import"./editor.esm-abdbe228.js";/* empty css                                                             */const d=q=>(ke("data-v-04683a8b"),q=q(),we(),q),Te={style:{display:"flex","flex-direction":"column"}},qe={style:{"min-width":"max-content",margin:"0",padding:"0"},class:"p-text-secondary m-0 p-0"},Ce={style:{"min-width":"max-content",margin:"0",padding:"0"},class:"p-text-secondary m-0 p-0"},Ne={class:"m-0"},Pe=d(()=>t("div",null,null,-1)),ze={key:0,class:"m-0",style:{"text-transform":"capitalize"}},Re=d(()=>t("b",null,"Responsable:",-1)),Se={key:1,class:"p-0 m-0"},Ue={key:2,class:"p-0 m-0"},$e={key:3},De=d(()=>t("b",null,"Notas",-1)),Ie=d(()=>t("br",null,null,-1)),Le=d(()=>t("div",{style:{display:"flex",gap:"1rem"}},null,-1)),je=d(()=>t("div",null,[t("h4",{class:"mt-0 py-0"})],-1)),Be={style:{display:"flex","flex-direction":"column"}},Fe={key:0},Ee=d(()=>t("b",null,"Datos del cliente",-1)),Me=[Ee],Oe={key:1},Ge=d(()=>t("b",null,"Nombre: ",-1)),He={key:2},Ae=d(()=>t("b",null,"Telefono: ",-1)),Qe={key:3},Je=d(()=>t("b",null,"Orden: ",-1)),Ke=d(()=>t("h6",null,[t("b",null,"Historial")],-1)),We={style:{display:"flex","flex-direction":"column"}},Xe={style:{"min-width":"max-content",margin:"0",padding:"0"},class:"p-text-secondary m-0 p-0"},Ye={style:{"min-width":"max-content",margin:"0",padding:"0"},class:"p-text-secondary m-0 p-0"},Ze={class:"m-0"},et=d(()=>t("div",null,null,-1)),tt={key:0,class:"m-0",style:{"text-transform":"capitalize"}},lt=d(()=>t("b",null,"Responsable:",-1)),st={key:1,class:"p-0 m-0"},ot={key:2,class:"p-0 m-0"},at={key:3},nt=d(()=>t("b",null,"Notas",-1)),it=d(()=>t("br",null,null,-1)),ut=d(()=>t("div",{style:{display:"flex",gap:"1rem"}},null,-1)),rt=d(()=>t("h6",null,[t("b",null,"Como desea proceder?")],-1)),dt={key:4},ct={key:0,style:{display:"flex","justify-content":"space-between",margin:"1rem 0"}},mt=d(()=>t("h6",{class:"m-0"},"Le dio una cortesia del 100% ?",-1)),pt={key:1,style:{display:"flex","justify-content":"space-between",margin:"1rem 0"}},_t=d(()=>t("h6",{class:"m-0"},"Le dio un bono de descuento?",-1)),vt={key:2},yt=d(()=>t("h6",{class:"m-0 my-3"},"porcentaje del descuento ",-1)),ht={key:3},bt=d(()=>t("h6",{class:"m-0 my-3"},"Valor de la orden",-1)),ft={key:4},gt=d(()=>t("h6",{class:"m-0 my-3"},"Id de la orden",-1)),Vt=d(()=>t("h6",{class:"m-0 my-3"},"Detalles",-1)),xt={style:{"background-color":"#ff00002e"},class:"p-3"},kt=d(()=>t("b",null,"No preste sus credenciales de Salchigest, cada miembro de la empresa tiene los suyos, muchas gracias",-1)),wt={style:{display:"flex","justify-content":"end","margin-top":"2rem"}},Tt={class:"nav_bar shadow-2 p-0 my-0 mx-2",style:{position:"sticky",top:"3rem","max-width":"900px","border-radius":"10rem","background-color":"white","z-index":"99"}},qt={class:"nav_bar--buttons p-0 m-1",style:{}},Ct={key:"",class:"",style:{display:"flex","align-items":"center"}},Nt={class:"grid p-3",style:{"align-items":"center","justify-content":"space-between",display:"flex",gap:"1rem"}},Pt={class:"px-2"},zt=d(()=>t("i",{class:"fa-regular fa-bars-progress"},null,-1)),Rt={style:{"text-transform":"uppercase"}},St={style:{display:"flex",gap:"1rem"}},Ut={key:0,style:{"min-width":"max-content"},class:"m-0 p-0"},$t={key:2,class:"m-0 p-0"},Dt={key:3,class:"m-0 p-0"},It={key:5,class:"p-2",style:{display:"flex",gap:".1rem","flex-direction":"column","align-items":"start"}},Lt={key:6,class:"p-2",style:{display:"flex",gap:".1rem","flex-direction":"column","align-items":"start"}},jt={key:7,class:"p-2",style:{display:"flex",gap:".1rem","flex-direction":"column","align-items":"start"}},Bt={key:8,class:"p-2",style:{display:"flex",gap:".1rem","flex-direction":"column","align-items":"start"}},Ft={style:{display:"flex",gap:".5rem","justify-content":"center"},class:"px-2"},Et={__name:"pqrsSection",setup(q){const le=ye(),$=r(""),C=r(),F=he(),E=r([]),se=y=>y,D=r({id:2,name:"Generada",description:"Estado inicial de la pqr",exist:!0,color:"#3498DB"}),M=be(),O=r([]),p=r(),oe=async y=>{N.value=!0,v.value=y},G=r([]),v=r([]),H=r(!1),N=r(!1),P=r(null),ae=()=>{P.value={global:{value:null,matchMode:Ve.CONTAINS}}};fe(()=>{ae()});const ne=r([{columnName:"Id",columnValue:"pqr_request_id",columnType:"other",size:"1rem",vif:!0},{columnName:"Restaurante",columnValue:"restaurant",columnType:"restaurant",size:"1rem",vif:!0},{columnName:"Clasificacion",columnValue:"tag_name",columnType:"tag",size:"1rem",vif:!0},{columnName:"Id orden",columnValue:"order_id",columnType:"other",size:"1rem",vif:!0},{columnName:"Canal",columnValue:"channel",columnType:"tag",size:"4rem",vif:!0},{columnName:"Sede",columnValue:"site_name",columnType:"other",size:"4rem",vif:!0},{columnName:"Red",columnValue:"red",columnType:"other",size:"4rem",vif:!0},{columnName:"Calificacion",columnValue:"rating",columnType:"rating",size:"10rem",vif:!0},{columnName:"Tipo",columnValue:"request_type",columnType:"other",size:"15rem",vif:!0},{columnName:"Comentarios",columnValue:"request_content",columnType:"other",size:"20rem",vif:!0},{columnName:"Responsable",columnValue:"responsible_name",columnType:"other",size:"20rem",vif:!0},{columnName:"Estado",columnValue:"current_status",columnType:"status",size:"15rem",vif:!0}]);r({2:"#3498DB",4:"#2ECC71",5:"#16A085",6:"#E74C3C",7:"#F39C12"}),r({question:"",answer:""}),r({}),r({}),r(null);const A=r([{}]);r({}),r(!1),r({});const T=r(!1),f=r(),k=r(!1),z=async()=>{A.value=await L.get(`${j}/get-all-pqrs`);const y=await L.get(`${j}/get-all-pqrs-status`);O.value=y,E.value=y};ge(async()=>{z()}),Z(p,()=>{Q()});const Q=()=>{f.value=null,$.value="",C.value=null,T.value=!1,k.value=!1},w=r(),ie=async()=>{const y=w.value&&f.value?(f.value-f.value*(w.value/100)).toFixed(2):f.value,i={pqr_request_id:v.value.pqr_request_id,status_id:p.value,responsible_id:M.rawUserData.id,value:y||null,notes:w.value&&f.value?`Se le dio un descuento de ${w.value}% en una orden de ${B(f.value)}, quedando en un valor de ${B(y)}`:"",order_id:C.value||null};try{await L.post(`${j}/change-pqr-status`,i),z(),N.value=!1,Q()}catch(g){console.error("Error al enviar la actualizaciÃ³n de la PQR:",g)}};return Z(()=>F.params.section_id,()=>{z()},{deep:!0}),(y,i)=>{const g=_("Tag"),J=_("Timeline"),K=_("Dialog"),ue=_("Dropdown"),W=_("Checkbox"),X=_("InputNumber"),Y=_("InputText"),re=_("Textarea"),R=_("Button"),de=_("Rating"),ce=_("column"),me=_("Column"),pe=_("DataTable");return l(),o(I,null,[u(K,{class:"mx-2",visible:H.value,"onUpdate:visible":i[0]||(i[0]=e=>H.value=e),modal:"",header:`Historial de la pqr  ID   ${G.value.pqr_request_id}`,style:{width:"40rem"}},{default:m(()=>[u(J,{value:G.value.status_history},{opposite:m(e=>{var s,h,V,x;return[t("div",Te,[t("p",qe,a((s=e.item.timestamp)==null?void 0:s.split(" ")[0]),1),t("p",Ce,a((x=(V=(h=e.item.timestamp)==null?void 0:h.split(" "))==null?void 0:V.slice(1,4))==null?void 0:x.join(" ")),1)])]}),content:m(e=>{var s;return[u(g,{style:b(`background-color:${e.item.color}`)},{default:m(()=>[t("p",Ne,[t("b",null,a(e.item.status),1)])]),_:2},1032,["style"]),Pe,e.item.responsible_name?(l(),o("p",ze,[Re,c(" "+a((s=e.item.responsible_name)==null?void 0:s.toLowerCase()),1)])):n("",!0),e.item.value?(l(),o("p",Se,[c("Le costo a la empresa "),t("b",null,a(e.item),1)])):n("",!0),e.item.order_id?(l(),o("p",Ue,[c("Orden entregada "),t("b",null,a(e.item.order_id),1)])):n("",!0),e.item.notes?(l(),o("p",$e,[De,c(" "+a(e.item.notes),1)])):n("",!0),Ie,Le]}),_:1},8,["value"])]),_:1},8,["visible","header"]),je,u(K,{class:"mx-2",visible:N.value,"onUpdate:visible":i[8]||(i[8]=e=>N.value=e),modal:"",header:`Gestion de la pqr  ID    ${v.value.pqr_request_id}`,style:{width:"50rem"}},{footer:m(()=>[t("div",wt,[u(R,{onClick:ie,label:"Enviar",severity:"help"})])]),default:m(()=>[t("div",Be,[v.value.user_name||v.value.user_phone?(l(),o("h6",Fe,Me)):n("",!0),v.value.user_name?(l(),o("span",Oe,[Ge,c(" "+a(v.value.user_name),1)])):n("",!0),v.value.user_phone?(l(),o("span",He,[Ae,c(" "+a(v.value.user_phone),1)])):n("",!0),v.value.order_id?(l(),o("span",Qe,[Je,c(" "+a(v.value.order_id),1)])):n("",!0),Ke,u(J,{value:v.value.status_history},{opposite:m(e=>{var s,h,V,x;return[t("div",We,[t("p",Xe,a((s=e.item.timestamp)==null?void 0:s.split(" ")[0]),1),t("p",Ye,a((x=(V=(h=e.item.timestamp)==null?void 0:h.split(" "))==null?void 0:V.slice(1,4))==null?void 0:x.join(" ")),1)])]}),content:m(e=>{var s;return[u(g,{style:b(`background-color:${e.item.color}`)},{default:m(()=>[t("p",Ze,[t("b",null,a(e.item.status),1)])]),_:2},1032,["style"]),et,e.item.responsible_name?(l(),o("p",tt,[lt,c(" "+a((s=e.item.responsible_name)==null?void 0:s.toLowerCase()),1)])):n("",!0),e.item.value?(l(),o("p",st,[c("Le costo a la empresa "),t("b",null,a(U(B)(e.item.value)),1)])):n("",!0),e.item.order_id?(l(),o("p",ot,[c("Orden entregada "),t("b",null,a(e.item.order_id),1)])):n("",!0),e.item.notes?(l(),o("p",at,[nt,c(" "+a(e.item.notes),1)])):n("",!0),it,ut]}),_:1},8,["value"]),rt,u(ue,{modelValue:p.value,"onUpdate:modelValue":i[1]||(i[1]=e=>p.value=e),options:O.value.filter(e=>e.id!=2),optionLabel:"name",optionValue:"id"},null,8,["modelValue","options"]),p.value?(l(),o("div",dt,[p.value==4||p.value==7?(l(),o("div",ct,[mt,u(W,{binary:"",modelValue:T.value,"onUpdate:modelValue":i[2]||(i[2]=e=>T.value=e)},null,8,["modelValue"])])):n("",!0),p.value==4||p.value==7?(l(),o("div",pt,[_t,u(W,{modelValue:k.value,"onUpdate:modelValue":i[3]||(i[3]=e=>k.value=e),binary:""},null,8,["modelValue"])])):n("",!0),(p.value==4||p.value==7)&&k.value?(l(),o("div",vt,[yt,u(X,{modelValue:w.value,"onUpdate:modelValue":i[4]||(i[4]=e=>w.value=e),style:{width:"100%"}},null,8,["modelValue"])])):n("",!0),(p.value==4||p.value==7)&&T.value||k.value?(l(),o("div",ht,[bt,u(X,{modelValue:f.value,"onUpdate:modelValue":i[5]||(i[5]=e=>f.value=e),style:{width:"100%"}},null,8,["modelValue"])])):n("",!0),(p.value==4||p.value==7)&&k.value||T.value?(l(),o("div",ft,[gt,u(Y,{modelValue:C.value,"onUpdate:modelValue":i[6]||(i[6]=e=>C.value=e),style:{width:"100%"}},null,8,["modelValue"])])):n("",!0),t("div",null,[Vt,u(re,{modelValue:$.value,"onUpdate:modelValue":i[7]||(i[7]=e=>$.value=e),rows:"5",style:{resize:"none",width:"100%"}},null,8,["modelValue"])]),t("h6",xt,[c("Recuerde que esta firmando como "),t("b",null,a(U(M).rawUserData.name),1),c(" y por ende se hace responsable, "),kt])])):n("",!0)])]),_:1},8,["visible","header"]),t("nav",Tt,[t("ul",qt,[(l(!0),o(I,null,ee(E.value,e=>(l(),o("li",Ct,[u(g,{style:b([`background-color:${e.color}`,{height:"1.3rem","aspect-ratio":"1 / 1","border-radius":"50%"}])},null,8,["style"]),c(),u(R,{onClick:()=>D.value=e,class:xe(["nav_bar--buttons-button p-2",e.id==D.value.id?"nav_bar--buttons-button-selected":""]),label:e.name},null,8,["onClick","class","label"])]))),128))])]),u(pe,{paginator:!0,rows:15,style:{width:"100%"},paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",currentPageReportTemplate:"Mostrando {first} a {last} de {totalRecords} solicitudes",rowsPerPageOptions:[5,10,25,100],scrollable:"",showGridlines:"",scrollHeight:"65vh",stripedRows:"",class:"col-12 m-auto",value:A.value.filter(e=>{var s,h;return((s=e.current_status)==null?void 0:s.status)==((h=D.value)==null?void 0:h.name)}),tableStyle:"min-width: 50rem;",filters:P.value},{header:m(()=>[t("div",Nt,[t("h4",Pt,[zt,c(),t("b",Rt,[c("PQRS "),t("b",null,a(U(F).params.section),1)])]),t("div",St,[u(Y,{class:"",modelValue:P.value.global.value,"onUpdate:modelValue":i[9]||(i[9]=e=>P.value.global.value=e),placeholder:"Buscar Solicitud..."},null,8,["modelValue"]),u(R,{onClick:i[10]||(i[10]=e=>U(le).visible_add_pqr=!0),label:"Nueva PQR",severity:"help"})])])]),default:m(()=>[(l(!0),o(I,null,ee(se(ne.value),e=>(l(),te(ce,{header:e.columnName,style:b(`min-width:${e.size}`),field:e.columnValue,class:"my-0 py-2"},{body:m(s=>{var h,V,x;return[e.columnType=="date"?(l(),o("h6",Ut,a(((h=s.data[e.columnValue])==null?void 0:h.split("-").reverse().join("-"))||"---------"),1)):n("",!0),e.columnType=="max-content"?(l(),o("h6",{key:1,style:b(e.columnType=="max-content"?"min-width: max-content":""),class:"m-0 p-0"},a(s.data[e.columnValue]||"---------"),5)):n("",!0),e.columnType=="other"?(l(),o("h6",$t,a(s.data[e.columnValue]||"---------"),1)):n("",!0),e.columnType=="rating"?(l(),o("h6",Dt,[s.data[e.columnValue]>0?(l(),te(de,{key:0,cancel:!1,readonly:"",modelValue:s.data[e.columnValue],"onUpdate:modelValue":S=>s.data[e.columnValue]=S},null,8,["modelValue","onUpdate:modelValue"])):n("",!0)])):n("",!0),e.columnType=="money"?(l(),o("h6",{key:4,style:b(e.columnType=="max-content"?"min-width: max-content":""),class:"m-0 p-0"},a(y.formatoPesosColombianos(s.data[e.columnValue])||"---------"),5)):n("",!0),e.columnValue=="current_status"?(l(),o("div",It,[u(g,{style:b([{color:"white"},`background-color:${(V=s.data[e.columnValue])==null?void 0:V.color}`])},{default:m(()=>{var S;return[c(a(((S=s.data[e.columnValue])==null?void 0:S.status)||"---------"),1)]}),_:2},1032,["style"]),t("b",null,a(((x=s.data[e.columnValue])==null?void 0:x.timestamp)||"---------"),1)])):n("",!0),e.columnValue=="channel"?(l(),o("div",Lt,[u(g,{style:b([{color:"white"},`background-color:${s.data.channel_color}`])},{default:m(()=>[c(a(s.data[e.columnValue]||"---------"),1)]),_:2},1032,["style"])])):n("",!0),e.columnValue=="tag_name"?(l(),o("div",jt,[u(g,{style:b([{color:"white"},`background-color:${s.data.tag_color}`])},{default:m(()=>[c(a(s.data[e.columnValue]),1)]),_:2},1032,["style"])])):n("",!0),e.columnValue=="restaurant"?(l(),o("div",Bt,[u(g,{style:b([{color:"white"},`background-color:${s.data.restaurant_color}`])},{default:m(()=>[c(a(s.data[e.columnValue]),1)]),_:2},1032,["style"])])):n("",!0)]}),_:2},1032,["header","style","field"]))),256)),u(me,{class:"my-0 py-0 px-0 mx-0",style:{},header:"Interactuar"},{body:m(e=>[t("div",Ft,[u(R,{onClick:s=>oe(e.data),label:"Gestionar",severity:"help",icon:"pi pi-check p-0",class:"my-0 py-2"},null,8,["onClick"])])]),_:1})]),_:1},8,["value","filters"]),u(_e,{onReload:i[11]||(i[11]=e=>z())})],64)}}},At=ve(Et,[["__scopeId","data-v-04683a8b"]]);export{At as default};
