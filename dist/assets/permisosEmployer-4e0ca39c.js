import{_ as oe,f as c,u as ae,O as le,g as U,h as ne,r as h,o as B,c as H,a as e,d as l,w as n,v as q,F as ie,bX as re,U as S,k as d,t as i,q as I,l as O,P as L,n as de,p as ce,e as ue,bY as J}from"./index-a083937d.js";const a=C=>(ce("data-v-0ddf39bb"),C=C(),ue(),C),pe={class:"col-12 m-auto p-0"},me={style:{display:"flex"}},he={class:"flex flex-column md:flex-row md:justify-content-between md:align-items-center"},_e=a(()=>e("p",{class:"m-0 text-2xl my-4"},"permisos ",-1)),ve={class:"block mt-2 md:mt-0 p-input-icon-left"},fe=a(()=>e("i",{class:"pi pi-search"},null,-1)),be=a(()=>e("span",{class:"p-column-title"},"Code",-1)),ye=a(()=>e("span",{class:"p-column-title"},"Code",-1)),ge=a(()=>e("span",{class:"p-column-title"},"Code",-1)),xe=a(()=>e("span",{class:"p-column-title"},"Code",-1)),we=a(()=>e("span",{class:"p-column-title"},"Code",-1)),ke=a(()=>e("span",{class:"p-column-title"},"Code",-1)),Se=a(()=>e("span",{class:"p-column-title"},"Code",-1)),Ce={style:{display:"flex",gap:"1rem"}},Pe=a(()=>e("div",null,null,-1)),ze={class:"a4-size p-0 lg:p-6 mi-clase mt-4"},Ee=a(()=>e("img",{class:"m-auto",src:"https://salchimonster.com/images/logo.png",style:{width:"10%"},alt:""},null,-1)),Re={style:{"font-size":"11pt","font-weight":"normal",color:"black","font-family":"Arial, Helvetica, sans-serif"}},Ie=a(()=>e("h6",{class:"text-center",style:{"font-size":"11pt","font-weight":"bold",color:"black","font-family":"Arial, Helvetica, sans-serif"}}," INVERSIONES SALCHIMONSTER SAS ",-1)),Te=a(()=>e("h6",{style:{"font-size":"11pt","font-weight":"normal",color:"black","font-family":"Arial, Helvetica, sans-serif"},class:"text-center"},"NIT: 901.420.874-0",-1)),je={class:"text-center py-4",style:{"font-weight":"bold","text-transform":"uppercase"}},Ne=a(()=>e("span",{style:{"text-transform":"capitalize"}},null,-1)),$e={class:"text-l",style:{"font-size":"11pt","font-weight":"normal",color:"black","font-family":"Arial, Helvetica, sans-serif"}},De={class:"p-0 m-0"},Ae=a(()=>e("span",{style:{"font-weight":"bold"}},"Fecha de la solicitud: ",-1)),Ue={style:{"border-bottom":"1px solid","padding-bottom":"0","padding-right":"2rem"}},Oe={class:"p-0 m-0",style:{width:"100%"}},Le=a(()=>e("span",{style:{"font-weight":"bold"}},"Nombre: ",-1)),Me={style:{width:"100%","border-bottom":"1px solid","padding-bottom":"0","padding-right":"3rem"}},Fe={class:"p-0 m-0"},Ve=a(()=>e("span",{style:{"font-weight":"bold"}},"Cargo: ",-1)),Be={style:{"border-bottom":"1px solid","padding-bottom":"0","padding-right":"2rem"}},He={class:"p-0 m-0"},qe=a(()=>e("span",{style:{"font-weight":"bold"}},"IdentificaciÃ³n No: ",-1)),Je={style:{"border-bottom":"1px solid","padding-bottom":"0","padding-right":"2rem"}},Ke={style:{display:"flex","justify-content":"start",gap:"2rem",border:"1px solid","margin-top":"2rem"},class:"p-2"},Ye={style:{display:"flex","flex-direction":"column"},class:""},We=a(()=>e("div",{style:{"font-weight":"bold"}}," Desde ",-1)),Xe={style:{display:"flex","flex-direction":"column"}},Ze=a(()=>e("div",{style:{"font-weight":"bold"}}," Hasta ",-1)),Ge={style:{display:"flex","justify-content":"start",gap:"2rem",border:"1px solid","margin-top":"2rem"},class:"p-2"},Qe={style:{display:"flex","flex-direction":"column"},class:""},et={style:{display:"flex","flex-direction":"column"}},tt=a(()=>e("div",{style:{"font-weight":"bold"}}," Observaciones ",-1)),st={style:{display:"flex","justify-content":"start",gap:"2rem",border:"1px solid","margin-top":"2rem"},class:"p-2"},ot={style:{display:"flex","flex-direction":"column"},class:""},at={style:{display:"flex","flex-direction":"column"}},lt=a(()=>e("div",{class:"mb-2",style:{"font-weight":"bold"}}," Estado actual ",-1)),nt={class:"mb-1"},it=a(()=>e("span",{style:{"font-weight":"bold"}},"Resumen:",-1)),rt={class:"mb-1"},dt=a(()=>e("span",{style:{"font-weight":"bold"}},"Fecha:",-1)),ct={class:"mb-1"},ut=a(()=>e("span",{style:{"font-weight":"bold"}}," Responsable Id:",-1)),pt={key:0},mt=a(()=>e("span",{style:{"font-weight":"bold"}},"Motivos del rechazo:",-1)),ht={class:"col-12 md:col-6 m-auto p-0",style:{display:"flex",gap:"1rem",overflow:"hidden","justify-content":"space-around",position:"absolute",top:"0rem",right:"0","background-color":"rgba(255, 255, 255, 0)te"}},_t=a(()=>e("span",{class:"p-input-icon-left",style:{width:"100%"}},[e("i",{class:"pi pi-pencil"})],-1)),vt=a(()=>e("span",{class:"text-center col-12 p-0"},"Si, continuar",-1)),ft=a(()=>e("span",{class:"text-center col-12 p-0"},"No, talvez luego",-1)),bt=a(()=>e("h6",null,"Razones para rechazar este permiso ",-1)),yt=a(()=>e("span",{class:"p-input-icon-left",style:{width:"100%"}},[e("i",{class:"pi pi-pencil"})],-1)),gt=a(()=>e("span",{class:"text-center col-12 p-0"},"Si, continuar",-1)),xt=a(()=>e("span",{class:"text-center col-12 p-0"},"No, talvez luego",-1)),wt={__name:"permisosEmployer",setup(C){const K=c(null),_=ae(),Y=c(_.params.status),v=c(_.params.tipo),y=c(_.params.status),T=c(""),W=()=>{P.value={global:{value:null,matchMode:re.CONTAINS}}},g=c(!1),j=c("2029-12-21 16:19"),r=c(),P=c(null),f=c([]),b=c({}),z=c(!1),E=c(!1),M=c([]),N=c(!0);le(()=>{W()}),U(()=>_.params.status,s=>{Y.value=s}),U(()=>_.params.tipo,s=>{v.value=s,console.log(v),x(s,y.value).then(t=>f.value=t)}),U(()=>_.params.status,s=>{y.value=s,x(v.value).then(t=>f.value=t)});const X=async s=>{g.value=!0,r.value=s,$(s.employer_id)},F=s=>{z.value=!0,r.value=s,$(s.employer_id)},V=s=>{E.value=!0,r.value=s,$(s.employer_id)};function Z(s){s.status={status:"aprobado",timestamp:j.value,responsable:J()},s.history.push({...s.status}),fetch(`${S}/permission/${s.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}).then(t=>{t.json(),g.value=!1,z.value=!1,x(v.value,y.value).then(m=>f.value=m)}).then(t=>console.log("Permiso aprobado:",t)).catch(t=>console.error("Error:",t))}function G(s){s.status={status:"rechazado",timestamp:j.value,razones:T.value,responsable:J()},s.history.push({...s.status}),fetch(`${S}/permission/${s.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}).then(t=>{t.json(),E.value=!1,g.value=!1,x(v.value,y.value).then(m=>f.value=m)}).then(t=>console.log("Permiso rechazado:",t)).catch(t=>console.error("Error:",t))}function R(s){var t=new Date(s),m={day:"numeric",month:"long",year:"numeric"};return t.toLocaleDateString("es-ES",m)}const Q=async()=>{fetch(`${S}/server_time`).then(s=>{if(!s.ok)throw new Error("Network response was not ok");return s.json()}).then(s=>{console.log("Employer data:",s),j.value=s}).catch(s=>{console.error("There has been a problem with your fetch operation:",s),mensaje.value="error"})};function ee(s){s||(s="2029-12-21 16:19");const t=["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"];let[m,w]=s.split(" "),[D,u,p]=m.split("-").map(Number),A=t[u-1];return`${p} de ${A} de ${D}`}const $=async s=>{fetch(`${S}/employer/${s}`).then(t=>{if(!t.ok)throw new Error("Network response was not ok");return t.json()}).then(t=>{console.log("Employer data:",t),b.value=t}).catch(t=>{console.error("There has been a problem with your fetch operation:",t)})};async function x(){const s=`${S}/permissions/  `;try{const t=await fetch(s);if(!t.ok)throw new Error(`Error al obtener los permisos: ${t.status}`);return N.value=!1,await t.json()}catch(t){throw console.error("Error en getPermissions:",t),t}}return ne(()=>{x(v.value,y.value).then(s=>f.value=s),Q()}),(s,t)=>{const m=h("ProgressSpinner"),w=h("Dialog"),D=h("InputText"),u=h("Column"),p=h("Button"),A=h("DataTable"),te=h("Textarea");return B(),H(ie,null,[e("div",pe,[l(w,{visible:N.value,"onUpdate:visible":t[0]||(t[0]=o=>N.value=o),modal:"",style:q([{width:"50rem"},{}]),breakpoints:{"1199px":"75vw","575px":"90vw"}},{default:n(()=>[e("div",me,[l(m,{style:{width:"50px",height:"50px"},strokeWidth:"8",fill:"var(--surface-ground)",animationDuration:".5s","aria-label":"Custom ProgressSpinner"})])]),_:1},8,["visible"]),l(A,{ref_key:"dt",ref:K,value:f.value,selection:M.value,"onUpdate:selection":t[2]||(t[2]=o=>M.value=o),dataKey:"id",paginator:!0,rows:10,filters:P.value,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25,100],currentPageReportTemplate:"Mostrando {first} a {last} de {totalRecords} permisoes",responsiveLayout:"scroll",scrollable:"","scroll-height":"62vh"},{header:n(()=>[e("div",he,[_e,e("span",ve,[fe,l(D,{class:"",modelValue:P.value.global.value,"onUpdate:modelValue":t[1]||(t[1]=o=>P.value.global.value=o),placeholder:"Buscar..."},null,8,["modelValue"])])])]),default:n(()=>[l(u,{class:"p-2",selectionMode:"multiple",headerStyle:"width: 3rem; ",frozen:""}),l(u,{class:"p-2",field:"id",header:"Id",sortable:!0,headerStyle:"width:3rem; min-width:min-content; "},{body:n(o=>[be,d(i(o.data.id),1)]),_:1}),l(u,{class:"p-2",field:"tipo",header:"Tipo",sortable:!0,headerStyle:"width:10rem; min-width:min-content; "},{body:n(o=>[ye,d(i(o.data.tipo),1)]),_:1}),l(u,{class:"p-2",field:"employer_id",header:" empleado",sortable:!0,headerStyle:"width:10rem; min-width:max-content; "},{body:n(o=>[ge,d(i(o.data.employer_id),1)]),_:1}),l(u,{class:"p-2",field:"start_date",header:"fecha de inicio",sortable:!0,headerStyle:"width:15rem; min-width:10rem; "},{body:n(o=>[xe,d(i(o.data.start_date),1)]),_:1}),l(u,{class:"p-2",field:"end_date",header:"fecha finalizacion",sortable:!0,headerStyle:"width:15rem; min-width:max-content; "},{body:n(o=>[we,d(i(o.data.end_date),1)]),_:1}),l(u,{class:"p-2",field:"observations",header:"Observaciones del empleado",sortable:!0,headerStyle:"width:30rem; min-width:max-content; "},{body:n(o=>[ke,d(i(o.data.observations),1)]),_:1}),l(u,{class:"p-2",field:"status.status",header:"Estado",sortable:!0,headerStyle:"width:10rem; min-width:max-content; "},{body:n(o=>[Se,e("div",{class:I(["p-2",o.data.status.status]),style:{"border-radius":"10rem"}},i(o.data.status.status),3)]),_:1}),l(u,{class:"p-2",field:"location",header:"Acciones",sortable:!0,frozen:"",alignFrozen:"right",headerStyle:"width:min-content; min-width:min-content; "},{body:n(o=>[e("div",Ce,[l(p,{class:"p-0",outlined:"",severity:"info",label:"Small",onClick:k=>X(o.data),text:""},{default:n(()=>[e("i",{class:I(["text-xl",O(L).EYE]),style:{"font-weight":"bold"}},null,2)]),_:2},1032,["onClick"]),l(p,{class:"p-0",disabled:o.data.status.status=="aprobado",outlined:"",severity:"success",label:"Small",text:"",onClick:k=>F(o.data),style:{display:"flex","justify-content":"center"}},{default:n(()=>[e("i",{class:I(["text-xl",O(L).CHECK]),style:{"font-weight":"bold"}},null,2)]),_:2},1032,["disabled","onClick"]),l(p,{class:"p-0",disabled:o.data.status.status=="rechazado"&&o.data.status.status!="aprobado",outlined:"",severity:"danger",label:"Small",onClick:k=>V(o.data),style:{display:"flex","justify-content":"center"},text:""},{default:n(()=>[e("i",{class:I(["text-xl",O(L).TIMES]),style:{"font-weight":"bold"}},null,2)]),_:2},1032,["disabled","onClick"])])]),_:1})]),_:1},8,["value","selection","filters"]),Pe]),l(w,{style:q([{border:"none","box-shadow":"none"},{width:"700px"}]),visible:g.value,"onUpdate:visible":t[5]||(t[5]=o=>g.value=o),header:"Revizar permiso",modal:!0,class:"p-fluid m-2 pt-8"},{default:n(()=>{var o,k;return[e("div",ze,[Ee,e("h6",Re,i(ee(r.value.status.timestamp)),1),Ie,Te,e("h6",je,[d("FORMATO SOLICITUD DE PERMISO "+i(r.value.tipo)+" ",1),Ne]),e("h5",$e,[e("p",De,[Ae,d(),e("span",Ue,i(R(r.value.start_date)),1)]),e("p",Oe,[Le,d(),e("span",Me,i(b.value.name),1)]),e("p",Fe,[Ve,d(),e("span",Be,i(b.value.position),1)]),e("p",He,[qe,d(),e("span",Je,i(b.value.dni),1)]),e("div",Ke,[e("div",Ye,[We,e("div",null,i(R(r.value.start_date)),1)]),e("div",Xe,[Ze,e("div",null,i(R(r.value.end_date)),1)])]),e("div",Ge,[e("div",Qe,[e("div",et,[tt,e("div",null,i(r.value.observations),1)])])]),e("div",st,[e("div",ot,[e("div",at,[lt,e("div",nt,[it,d(" "+i(r.value.status.status),1)]),e("div",rt,[dt,d(" "+i(R(r.value.status.timestamp)),1)]),e("div",ct,[ut,d(" "+i((o=r.value.status)==null?void 0:o.responsable),1)]),r.value.status.status=="rechazado"?(B(),H("div",pt,[mt,d(" "+i((k=r.value.status)==null?void 0:k.razones),1)])):de("",!0)])])])])]),e("div",ht,[l(p,{class:"text-center",onClick:t[3]||(t[3]=se=>F(r.value)),style:{"background-color":"rgb(105, 255, 157)",color:"rgba(0, 0, 0, 0.864)",border:"none",display:"flex","justify-content":"center"}},{default:n(()=>[d(" APROBAR ")]),_:1}),l(p,{onClick:t[4]||(t[4]=se=>V(r.value)),style:{"background-color":"rgb(255, 125, 125)",color:"rgba(0, 0, 0, 0.864)",border:"none",display:"flex","justify-content":"center"}},{default:n(()=>[d(" RECHAZAR")]),_:1})])]}),_:1},8,["visible"]),l(w,{header:"Confirmacion",visible:z.value,"onUpdate:visible":t[7]||(t[7]=o=>z.value=o),style:{width:"350px"},modal:!0},{default:n(()=>[e("h5",null,"Seguro que desea aceptar el permiso de "+i(b.value.name),1),_t,l(p,{onClick:t[6]||(t[6]=o=>Z(r.value)),style:{margin:"auto","background-color":"rgb(105, 255, 157)",color:"black",border:"none"},class:"m-auto my-4 text-center"},{default:n(()=>[vt]),_:1}),l(p,{style:{"background-color":"rgb(255, 156, 156)",color:"rgba(0, 0, 0, 0.864)",border:"none"},class:"m-auto my-4 ml-4 text-center"},{default:n(()=>[ft]),_:1})]),_:1},8,["visible"]),l(w,{header:"Confirmacion",visible:E.value,"onUpdate:visible":t[10]||(t[10]=o=>E.value=o),style:{width:"350px"},modal:!0},{default:n(()=>[e("h5",null,"Seguro que desea Rechazar el permiso de "+i(b.value.name)+"?",1),bt,l(te,{modelValue:T.value,"onUpdate:modelValue":t[8]||(t[8]=o=>T.value=o),style:{"max-width":"100%","min-width":"100%","min-height":"100px"},class:"col-12"},null,8,["modelValue"]),yt,l(p,{onClick:t[9]||(t[9]=o=>G(r.value)),style:{margin:"auto","background-color":"rgb(105, 255, 157)",color:"black",border:"none"},class:"m-auto my-4 text-center"},{default:n(()=>[gt]),_:1}),l(p,{style:{"background-color":"rgb(255, 156, 156)",color:"rgba(0, 0, 0, 0.864)",border:"none"},class:"m-auto my-4 ml-4 text-center"},{default:n(()=>[xt]),_:1})]),_:1},8,["visible"])],64)}}},St=oe(wt,[["__scopeId","data-v-0ddf39bb"]]);export{St as default};
