import{_ as W,f as d,u as X,g as q,h as I,r as $,o as u,c as m,a as s,t as l,k as r,m as g,d as i,w as _,F as V,b as T,q as B,U as h,v as Y,n as Z,P as ee,p as oe,e as ae}from"./index-bb5ca796.js";import{f as P}from"./formatoPesos-2a38d2e7.js";const F=j=>(oe("data-v-7f5fbcdc"),j=j(),ae(),j),se={class:"col-12 p-1",style:{"background-color":"transparent",border:"none"}},te={class:"card p-0 lg:p-6",style:{"background-color":"transparent",border:"none"}},ne={class:"text-2xl titulo my-6",style:{"text-transform":"capitalize"}},le={class:"col-12 grid m-0 p-0"},ie={class:"col-12 md:col-12 p-0 m-0 mb-4",style:{}},re={style:{"text-transform":"capitalize"},class:"text-xl mb-4 col-12"},ce=["onClick"],de={style:{"text-transform":"capitalize","border-right":"2px solid rgba(0, 0, 0, 0.144)"},class:"grid col-12 lg:col-6 mx-0 px-0",st:""},pe={class:"col-6 text-left py-0"},ue={class:"col-6 text-right py-0"},me={class:"card col-12 p-4",style:{"box-shadow":"0 0 20px rgba(0, 0, 0, 0.172)",border:"none"}},ge={style:{"text-transform":"capitalize"},class:"text-xl mb-6 mt-3"},_e={class:"grid"},ve={style:{"text-transform":"lowercase"},class:"grid lg:col-6 col-12 px-0 py-3 mx-0"},fe={style:{},class:"col-6 text-left py-0"},he={class:"col-6 text-right py-0"},be={class:"col-12",style:{display:"flex","justify-content":"center"}},xe=F(()=>s("h5",null,"Nombre del grupo",-1)),ye={style:{display:"flex"}},we={class:"grid col-12 p-0 pl-2"},Ce={class:"col-6"},ke={class:"col-6 text-right"},Ae={class:"flex align-items-center justify-content-center"},$e=F(()=>s("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1)),Ve={__name:"sesionAdicionales",setup(j){const z=d(),G=d(),O=d([]),n=X(),b=d(!1),x=d(!1),N=d(),y=d(!1),v=d({price:0}),S=d({lista:{}}),p=d({grupo:[]});q(()=>S.value.lista,t=>{for(const e in t){const o=parseInt(e);if(t[e])p.value.grupo.includes(o)||p.value.grupo.push(o);else{const c=p.value.grupo.indexOf(o);c!==-1&&p.value.grupo.splice(c,1)}}},{deep:!0});const J=t=>{N.value=t,y.value=!0},M=()=>{y.value=!1},R=async()=>{const t=`${h}/${n.params.adicionales}`;fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(v.value)}).then(e=>e.json()).then(e=>{b.value=!1,w()}).catch(e=>console.error("Error:",e))},L=async()=>{const t=`${h}/grupo-${n.params.adicionales}`,e={};e.name=p.value.name,e[K[n.params.adicionales]]=p.value.grupo,fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(o=>o.json()).then(o=>{console.log(o),x.value=!1,w(),C().then(c=>c.map(k=>E(k[f[n.params.adicionales]])))}).catch(o=>console.error("Error:",o))},H=async t=>{const e=`${h}/grupo-${n.params.adicionales}/${t}`;fetch(e,{method:"DELETE",headers:{"Content-Type":"application/json"}}).then(o=>{if(o.ok)return y.value=!1,o.json();throw new Error("Something went wrong")}).then(o=>{w(),C().then(c=>c.map(k=>E(k[f[n.params.adicionales]])))}).catch(o=>console.error("Error:",o))},f={salsas:"grupo_salsa_id",toppings:"grupo_topping_id",cambios:"grupo_cambio_id",acompanantes:"grupo_acompanante_id",adicionales:"grupo_id"},D={salsas:"salsa_id",toppings:"topping_id",cambios:"cambio_id",acompanantes:"acompanante_id",adicionales:"adicional_id"},K={salsas:"salsas",toppings:"toppings",cambios:"cambios",acompanantes:"acompanantes",adicionales:"adicionales"},w=async()=>{try{const e=await(await fetch(`${h}/${n.params.adicionales}`)).json();z.value=e}catch(t){console.error("Error fetching data: ",t)}},C=async()=>{try{const e=await(await fetch(`${h}/grupo-${n.params.adicionales}`)).json();return G.value=e,e}catch(t){console.error("Error fetching data: ",t)}},E=async t=>{try{const o=await(await fetch(`${h}/grupo-${n.params.adicionales}/${t}/${n.params.adicionales}`)).json();return O.value[t]=o,o}catch(e){console.error("Error fetching data: ",e)}};return q(()=>n.params.adicionales,(t,e)=>{t!==e&&(w(),C().then(o=>o.map(c=>E(c[f[n.params.adicionales]]))))}),I(w),I(C),I(async()=>{C().then(t=>t.map(e=>E(e[f[n.params.adicionales]])))}),(t,e)=>{const o=$("Button"),c=$("inputText"),k=$("inputNumber"),U=$("Dialog"),Q=$("Checkbox");return u(),m(V,null,[s("div",se,[s("div",te,[s("h5",ne,"grupos de "+l(r(n).params.adicionales),1),g(),i(o,{class:"mb-6",style:{"text-transform":"capitalize"},onClick:e[0]||(e[0]=a=>x.value=!x.value)},{default:_(()=>[g("Nuevo grupo")]),_:1}),s("div",le,[(u(!0),m(V,null,T(G.value,a=>(u(),m("div",ie,[s("div",{class:"card m-0 grid col-12",style:B([`background-color:${r(Y)[r(n).params.adicionales]}`,{position:"relative","box-shadow":"0 0 20px rgba(0, 0, 0, 0.144)",border:"none"}])},[s("p",re,[s("b",null,l(a.name),1)]),s("button",{onClick:A=>J(a),class:"add-cart-btn text-xl",style:{cursor:"pointer",position:"absolute",top:"-1rem",right:"-1rem","background-color":"var(--red-400)",width:"2.5rem",height:"2.5rem","border-radius":"50%",display:"flex","align-items":"center","justify-content":"center",border:"none"}},[s("i",{style:{color:"white"},class:Z(["icono text-2xl p-0 m-0",r(ee).TIMES])},null,2)],8,ce),(u(!0),m(V,null,T(O.value[a[f[r(n).params.adicionales]]],(A,je)=>(u(),m("div",de,[s("span",pe,l(A.name),1),s("span",ue,l(r(P)(A.price)),1)]))),256))],4)]))),256))]),s("div",me,[s("p",ge,[s("b",null,"Todas las "+l(r(n).params.adicionales),1)]),s("div",_e,[(u(!0),m(V,null,T(z.value,a=>(u(),m("div",ve,[s("span",fe,l(a.name),1),s("span",he,l(r(P)(a.price)),1)]))),256))]),s("div",be,[i(o,{class:"",style:{"text-transform":"capitalize"},onClick:e[1]||(e[1]=a=>b.value=!b.value)},{default:_(()=>[g("Agregar")]),_:1})])])])]),i(U,{visible:b.value,"onUpdate:visible":e[4]||(e[4]=a=>b.value=a),modal:"true",style:B([{width:"500px",height:"max-content"},{"background-color":"white","border-radius":"1rem"}]),header:"Agregar",class:"p-fluid p-2 m-3"},{default:_(()=>[i(c,{class:"mb-4",modelValue:v.value.name,"onUpdate:modelValue":e[2]||(e[2]=a=>v.value.name=a)},null,8,["modelValue"]),i(k,{class:"mb-4",modelValue:v.value.price,"onUpdate:modelValue":e[3]||(e[3]=a=>v.value.price=a)},null,8,["modelValue"]),g(" "+l(v.value)+" ",1),i(o,{style:{"text-transform":"capitalize"},onClick:R},{default:_(()=>[g("Agregar")]),_:1})]),_:1},8,["visible"]),i(U,{visible:x.value,"onUpdate:visible":e[6]||(e[6]=a=>x.value=a),modal:"true",style:B([{width:"500px",height:"max-content"},{"background-color":"white","border-radius":"1rem"}]),header:"Agregar",class:"p-fluid p-2 m-3"},{default:_(()=>[xe,i(c,{class:"mb-4",modelValue:p.value.name,"onUpdate:modelValue":e[5]||(e[5]=a=>p.value.name=a)},null,8,["modelValue"]),(u(!0),m(V,null,T(z.value,a=>(u(),m("div",ye,[i(Q,{modelValue:S.value.lista[a[D[r(n).params.adicionales]]],"onUpdate:modelValue":A=>S.value.lista[a[D[r(n).params.adicionales]]]=A,binary:"",value:!1},null,8,["modelValue","onUpdate:modelValue"]),s("div",we,[s("div",Ce,l(a.name),1),s("div",ke,l(r(P)(a.price)),1)])]))),256)),i(o,{style:{"text-transform":"capitalize"},onClick:L},{default:_(()=>[g("Crear Grupo")]),_:1}),g(" "+l(S.value)+" "+l(p.value),1)]),_:1},8,["visible"]),i(U,{header:"Confirmation",visible:y.value,"onUpdate:visible":e[8]||(e[8]=a=>y.value=a),style:{width:"350px"},modal:!0},{footer:_(()=>[i(o,{label:"No",icon:"pi pi-times",onClick:M,class:"p-button-text"}),i(o,{label:"Si",icon:"pi pi-check",onClick:e[7]||(e[7]=a=>H(N.value[[f[r(n).params.adicionales]]])),class:"p-button-text",autofocus:""})]),default:_(()=>[s("div",Ae,[$e,s("span",null,[g("Seguro que desea eliminar "),s("b",null,l(N.value.name),1)])])]),_:1},8,["visible"])],64)}}},Te=W(Ve,[["__scopeId","data-v-7f5fbcdc"]]);export{Te as default};
