import{_ as N,j as u,T as $,I,k as O,m as p,U as m,r as V,o as n,c as l,a as f,F as g,b,e as h,n as J,u as M,aw as B,t as C,i as D,q as E,x as U}from"./index-3fffce46.js";const j=i=>(E("data-v-11309d66"),i=i(),U(),i),R=j(()=>f("h3",null,"MÃ©todos de pago por sede",-1)),F={class:"sites-wrapper"},L={key:0,class:"methods-list",style:{"min-width":"16rem","margin-top":".5rem",padding:".5rem",border:"1px solid var(--surface-border)","border-radius":"4px"}},P=["for"],q={__name:"paymentMethods",setup(i){const _=u([]),v=u([]),o=$({}),y=u({}),d=u(null),S=t=>{d.value=d.value===t?null:t},w=I(()=>JSON.stringify(o)!==JSON.stringify(y.value)),x=()=>Object.fromEntries(Object.entries(o).map(([t,c])=>[t,_.value.filter(a=>c.includes(a.id)).map(({id:a,name:e,exist:s,english_name:r})=>({id:a,name:e,exist:s,english_name:r}))])),k=async()=>{try{await p.put(`${m}/site-payments`,{data:x()}),y.value=JSON.parse(JSON.stringify(o))}catch(t){console.error("Error guardando site-payments",t)}};return O(async()=>{const[t,c,a]=await Promise.all([p.get(`${m}/payment_methods`),p.get(`${m}/sites`),p.get(`${m}/site-payments`)]);_.value=t,v.value=c,v.value.filter(e=>e.show_on_web).forEach(({site_id:e})=>{const s=(a[e]||[]).map(r=>r.id);o[e]=s.length?s:[]}),y.value=JSON.parse(JSON.stringify(o))}),(t,c)=>{const a=V("Button");return n(),l(g,null,[R,f("div",F,[(n(!0),l(g,null,b(v.value.filter(e=>e.show_on_web),e=>(n(),l("div",{style:J([{"border-radius":"1rem"},d.value===e.site_id?"border: 2px solid red":""]),key:e.site_id,class:"site-item"},[h(a,{label:e.site_name,onClick:s=>S(e.site_id)},null,8,["label","onClick"]),d.value===e.site_id?(n(),l("div",L,[(n(!0),l(g,null,b(_.value,s=>(n(),l("div",{key:s.id,class:"method-item",style:{display:"flex","align-items":"center",gap:".5rem","margin-bottom":".25rem"}},[h(M(B),{inputId:`m-${e.site_id}-${s.id}`,modelValue:o[e.site_id],"onUpdate:modelValue":r=>o[e.site_id]=r,value:s.id},null,8,["inputId","modelValue","onUpdate:modelValue","value"]),f("label",{for:`m-${e.site_id}-${s.id}`},C(s.name),9,P)]))),128))])):D("",!0)],4))),128))]),h(a,{label:"Guardar cambios",severity:"success",style:{"margin-top":"2rem"},disabled:!w.value,onClick:k},null,8,["disabled"])],64)}}},G=N(q,[["__scopeId","data-v-11309d66"]]);export{G as default};
