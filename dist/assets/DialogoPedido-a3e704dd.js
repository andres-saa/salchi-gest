import{_ as we,y as ke,j as O,I as le,H as Ce,k as xe,m as J,U as Q,r as P,o as i,c as p,e as d,f as _,a as e,N as W,t as o,u as r,ad as V,h as v,g as w,i as m,d as be,F as S,b as X,q as Ee,x as De}from"./index-58581f28.js";import{f as h}from"./formatoPesos-2293ab52.js";const l=ee=>(Ee("data-v-14b31143"),ee=ee(),De(),ee),Ve=l(()=>e("h3",null,[e("b",null,"TRASLADO DE SEDE")],-1)),Pe=l(()=>e("label",{for:"sede_destino"},"SELECCIONE LA SEDE DESTINO",-1)),Se=l(()=>e("h3",null,[e("b",null,"Cambiar Valor del Domicilio")],-1)),Ne=l(()=>e("span",null,"Valor actual del domicilio",-1)),Te=l(()=>e("label",{for:"new_delivery_price"},"Nuevo valor del domicilio",-1)),$e=l(()=>e("h3",null,[e("b",null,"Cancelar Orden")],-1)),Le=l(()=>e("label",{for:"responsible"},"Responsable",-1)),ze=l(()=>e("label",{for:"reason"},"Razón",-1)),Ie=l(()=>e("h3",null,[e("b",null,"Cancelar Orden")],-1)),Re=l(()=>e("span",{class:"advert advert--danger"},"Desde el 16 de mayo de 2024, la cancelación de órdenes requerirá autorización.",-1)),Ae=l(()=>e("label",{for:"responsible_admin"},"Responsable",-1)),je=l(()=>e("label",{for:"reason_admin"},"Razón",-1)),Ue={class:"confirm-text"},Me={class:"footer-actions"},Be={id:"factura",style:{width:"100%"}},Fe=l(()=>e("i",{class:"pi pi-whatsapp mr-2"},null,-1)),qe=l(()=>e("br",null,null,-1)),He={id:"id",class:"text-center strong"},Ge={id:"cliente",class:"text-center strong"},Ke={class:"fecha-hora"},Ye=l(()=>e("div",{class:"grid-head"},[e("div",{class:"px-2"},[e("b",null,"productos")]),e("div",{class:"px-2 text-right"},[e("b",null,"total")])],-1)),Ze={class:"grid-row"},Je={class:"m-0"},Qe={class:"m-0 text-right"},We={key:0},Xe={key:1},es={key:0,class:"m-0"},ss=l(()=>e("b",null,"COMBO INCLUYE",-1)),rs=[ss],ts={class:"m-0"},os={class:"m-0 text-right"},ls=l(()=>e("div",{class:"divider"},null,-1)),ns={class:"totals-grid"},is=l(()=>e("span",{class:"strong"},"Subtotal",-1)),as={class:"text-right strong"},ds=l(()=>e("span",{class:"strong"},"Domicilio",-1)),cs={class:"m-0 text-right strong"},us=l(()=>e("span",{class:"strong"},"Total",-1)),ps={class:"m-0 text-right strong"},_s=l(()=>e("p",{class:"section-title"},[e("b",null,"Notas")],-1)),ms={class:"notas"},bs=l(()=>e("p",{class:"section-title"},[e("b",null,"cliente")],-1)),vs={class:"details-grid"},hs=l(()=>e("span",null,[e("b",null,"Nombre")],-1)),ys=l(()=>e("span",null,[e("b",null,"Metodo de entrega")],-1)),gs={key:0},Os=l(()=>e("b",null,"Placa del vehiculo",-1)),fs=[Os],ws={key:1},ks=l(()=>e("span",null,[e("b",null,"telefono")],-1)),Cs={key:2},xs=l(()=>e("b",null,"direccion",-1)),Es=[xs],Ds={key:3},Vs=l(()=>e("span",null,[e("b",null,"metodo de pago")],-1)),Ps={class:"footer-actions"},Ss={class:"footer-row"},Ns={id:"factura",style:{width:"100%"}},Ts=l(()=>e("i",{class:"pi pi-whatsapp mr-2"},null,-1)),$s=l(()=>e("br",null,null,-1)),Ls={id:"id",class:"text-center strong"},zs={id:"cliente",class:"text-center strong"},Is={class:"fecha-hora"},Rs=l(()=>e("div",{class:"grid-head industrial"},[e("div",{class:"px-2"},[e("b",null," Cant.")]),e("div",{class:"px-0"},[e("b",null," producto")]),e("div",{class:"px-0"},[e("b",null," pres.")]),e("div",{class:"px-0"},[e("b",null," V. Kilo")]),e("div",{class:"px-2 text-right"},[e("b",null," total")])],-1)),As={class:"grid-row industrial"},js={class:"m-0"},Us={class:"m-0"},Ms={class:"m-0"},Bs={class:"m-0"},Fs={class:"m-0 text-right"},qs={key:0},Hs={key:1},Gs={class:"m-0"},Ks={class:"m-0 text-right"},Ys=l(()=>e("div",{class:"divider"},null,-1)),Zs={class:"totals-grid"},Js=l(()=>e("span",{class:"strong"},"Subtotal",-1)),Qs={class:"text-right strong"},Ws=l(()=>e("span",{class:"strong"},"Domicilio",-1)),Xs={class:"m-0 text-right strong"},er=l(()=>e("span",{class:"strong"},"Total",-1)),sr={class:"m-0 text-right strong"},rr=l(()=>e("p",{class:"section-title"},[e("b",null,"Notas")],-1)),tr={class:"notas"},or=l(()=>e("p",{class:"section-title"},[e("b",null,"cliente")],-1)),lr={class:"details-grid"},nr=l(()=>e("span",null,[e("b",null,"Nombre")],-1)),ir=l(()=>e("span",null,[e("b",null,"Cedula / Nit")],-1)),ar=l(()=>e("span",null,[e("b",null,"Metodo de entrega")],-1)),dr=l(()=>e("span",null,[e("b",null,"Fecha de entrega")],-1)),cr={key:0},ur=l(()=>e("b",null,"Placa del vehiculo",-1)),pr=[ur],_r={key:1},mr=l(()=>e("span",null,[e("b",null,"telefono")],-1)),br=l(()=>e("span",null,[e("b",null,"Correo")],-1)),vr={key:2},hr=l(()=>e("b",null,"direccion",-1)),yr=[hr],gr={key:3},Or=l(()=>e("span",null,[e("b",null,"metodo de pago")],-1)),fr={key:4},wr=l(()=>e("b",null,"Estado del pago",-1)),kr=[wr],Cr={key:5},xr={key:6},Er=l(()=>e("b",null,"Referencia de pago",-1)),Dr=[Er],Vr={key:7},Pr={class:"footer-actions"},Sr={class:"footer-row"},Nr=l(()=>e("h3",null,[e("b",null,"Cambiar Método de Pago")],-1)),Tr=l(()=>e("span",null,"Método de Pago actual",-1)),$r=l(()=>e("label",{for:"paymentMethod"},"Nuevo método de pago",-1)),Lr={__name:"DialogoPedido",setup(ee){const s=ke(),N=O(!1),T=O(!1),ne=O(!1),$=O(!1),se=O(!1),re=O(!1),D=O(s.currentOrder.delivery_price),L=O(null),ie=O([]),ae=O([]),te=O(0),de=le(()=>s.currentOrder.current_status==="generada"),ce=le(()=>s.currentOrder.current_status==="en preparacion"),ve=le(()=>{var t,g;return(((g=(t=s.currentOrder)==null?void 0:t.pe_json)==null?void 0:g.listaPedidos)||[]).reduce((c,b)=>{var n;let f=b.pedido_cantidad*b.pedido_precio;const oe=(((n=b.modificadorseleccionList)==null?void 0:n.filter(k=>k.pedido_productoid==b.pedido_productoid))||[]).reduce((k,x)=>k+x.modificadorseleccion_cantidad*x.pedido_precio,0);return c+f+oe},0)});le(()=>ve.value+(s.currentOrder.delivery_price||0)),Ce(()=>s.currentOrder.delivery_price,a=>{D.value=a}),xe(async()=>{try{const[a,t]=await Promise.all([J.get(`${Q}/payment_methods`),J.get(`${Q}/sites`)]);ie.value=a,ae.value=t}catch(a){console.error("Error inicializando datos:",a)}});const ue=a=>{var g,c,b,f;const t=((f=(b=(c=(g=a==null?void 0:a.latest_status_timestamp)==null?void 0:g.split("T")[1])==null?void 0:c.split(":"))==null?void 0:b.slice(0,2))==null?void 0:f.join(":"))||"";switch(a==null?void 0:a.current_status){case"enviada":return`El pedido fue enviado a su domicilio a las ${t}`;case"cancelada":return`El pedido fue cancelado a las ${t}
Responsable: ${a.responsible}
Razón: ${a.reason}`;case"en preparacion":return`El pedido está en preparación desde las ${t} y será enviado en breve.`;case"generada":return`Hemos recibido su pedido a las ${t} y empezaremos a prepararlo en breve. Gracias por su espera.`;default:return""}},he=async()=>{try{await J.put(`${Q}/changue-delivery/${s.currentOrder.order_id}`,{price:D.value}),N.value=!1,s.numberOders=s.numberOders===1?2:1,s.visibles.currentOrder=!1}catch(a){console.error("Error al cambiar el domicilio:",a)}},ye=async()=>{if(L.value)try{await J.put(`${Q}/change-method/${s.currentOrder.order_id}/${L.value}`,`Cambiando método de pago para la orden ${s.currentOrder.order_id}`),T.value=!1,s.visibles.currentOrder=!1}catch(a){console.error("Error al cambiar el método de pago:",a)}},pe=O([{name:"Restaurante",value:"restaurant"},{name:"Cliente",value:"client"}]),y=O({responsible:null,reason:"Sin razon"}),_e=()=>{y.value.responsible&&V.cancelOrder(s.currentOrder.order_id,y.value.reason,y.value.responsible.name).then(a=>{a&&(ne.value=!1,console.log("Order canceled successfully"))}).catch(a=>{console.error("Failed to cancel order:",a)})},ge=async()=>{var a;try{const t={order_id:s.currentOrder.order_id,responsible:(a=y.value.responsible)==null?void 0:a.name,reason:y.value.reason};await V.create_cancellling_request(t),$.value=!1,s.Notification.pause(),s.Notification.currentTime=0}catch(t){console.error("Error al solicitar cancelación:",t)}},Oe=()=>{var c;const a=((c=document.getElementById("factura"))==null?void 0:c.innerHTML)||"",t=window.open("","_blank");t.document.write("<html><head><title>Factura</title>");const g=document.getElementsByTagName("style");for(let b=0;b<g.length;b++)t.document.write(g[b].outerHTML);t.document.write("<style>@media print { html{height: min-content;} *{text-transform:uppercase;align-items:center; width:100%; font-family: sans-serif;padding:0;margin:0; font-size:o.9rem !IMPORTANT} body { -webkit-print-color-adjust: exact; color-adjust: exact; } } </style>"),t.document.write("</head><body>"),t.document.write(a),t.document.write("</body></html>"),t.document.close(),t.print(),setTimeout(()=>t.close(),0)},fe=async()=>{try{const a=s.currentOrder.order_id,t=te.value;await J.put(`${Q}/traslate-order`,{site_id:t,order_id:a},`trasladando orden ${a}`),s.visibles.currentOrder=!1,se.value=!1}catch(a){console.error("Error al trasladar la orden:",a)}};return(a,t)=>{const g=P("Dropdown"),c=P("Button"),b=P("Dialog"),f=P("Tag"),me=P("InputNumber"),oe=P("Textarea");return i(),p(S,null,[d(b,{visible:se.value,"onUpdate:visible":t[2]||(t[2]=n=>se.value=n),closeOnEscape:"",closable:!0,modal:"",style:{width:"30rem"}},{header:_(()=>[Ve]),default:_(()=>[e("form",{onSubmit:W(_e,["prevent"]),class:"form-col"},[Pe,d(g,{id:"sede_destino",modelValue:te.value,"onUpdate:modelValue":t[0]||(t[0]=n=>te.value=n),options:ae.value.filter(n=>n.show_on_web),optionLabel:"site_name",optionValue:"site_id",placeholder:"Seleccione la sede destino",style:{width:"100%"}},null,8,["modelValue","options"]),d(c,{disabled:!te.value,onClick:t[1]||(t[1]=n=>fe()),style:{width:"100%","border-radius":"0.5rem"},label:"Trasladar",type:"submit",class:"p-button-danger",icon:"pi pi-share-right"},null,8,["disabled"])],32)]),_:1},8,["visible"]),d(b,{visible:N.value,"onUpdate:visible":t[6]||(t[6]=n=>N.value=n),closeOnEscape:"",closable:!0,modal:"",style:{width:"30rem"}},{header:_(()=>[Se]),default:_(()=>[e("form",{onSubmit:t[5]||(t[5]=W((...n)=>a.submitChangeDeliveryPrice&&a.submitChangeDeliveryPrice(...n),["prevent"])),class:"form-col"},[Ne,d(f,{class:"px-4",severity:"warning"},{default:_(()=>[e("b",null,o(r(h)(r(s).currentOrder.delivery_price)),1)]),_:1}),Te,d(me,{id:"new_delivery_price",style:{width:"100%"},modelValue:D.value,"onUpdate:modelValue":t[3]||(t[3]=n=>D.value=n),mode:"currency",currency:"COP",locale:"es-CO",maxFractionalDigits:"0",min:0,step:100,placeholder:"Ingresa el nuevo valor",required:""},null,8,["modelValue"]),d(c,{style:{width:"100%","border-radius":"0.5rem"},label:"Cambiar",type:"submit",class:"p-button-help",icon:"pi pi-check",disabled:D.value===null||D.value===void 0||D.value===r(s).currentOrder.delivery_price,onClick:t[4]||(t[4]=n=>he())},null,8,["disabled"])],32)]),_:1},8,["visible"]),d(b,{visible:ne.value,"onUpdate:visible":t[9]||(t[9]=n=>ne.value=n),closeOnEscape:"",closable:!0,modal:"",style:{width:"30rem"}},{header:_(()=>[$e]),default:_(()=>[e("form",{onSubmit:W(_e,["prevent"]),class:"form-col"},[Le,d(g,{id:"responsible",modelValue:y.value.responsible,"onUpdate:modelValue":t[7]||(t[7]=n=>y.value.responsible=n),options:pe.value,optionLabel:"name",placeholder:"Selecciona un responsable",style:{width:"100%"}},null,8,["modelValue","options"]),ze,d(oe,{id:"reason",modelValue:y.value.reason,"onUpdate:modelValue":t[8]||(t[8]=n=>y.value.reason=n),rows:"5",style:{resize:"none",width:"100%"},placeholder:"Escribe la razón de la cancelación"},null,8,["modelValue"]),d(c,{style:{width:"100%","border-radius":"0.5rem"},label:"Cancelar",type:"submit",class:"p-button-danger",icon:"pi pi-times"})],32)]),_:1},8,["visible"]),d(b,{visible:$.value,"onUpdate:visible":t[12]||(t[12]=n=>$.value=n),closeOnEscape:"",closable:!0,modal:"",style:{width:"30rem"}},{header:_(()=>[Ie]),default:_(()=>[e("form",{onSubmit:W(ge,["prevent"]),class:"form-col"},[Re,Ae,d(g,{id:"responsible_admin",modelValue:y.value.responsible,"onUpdate:modelValue":t[10]||(t[10]=n=>y.value.responsible=n),options:pe.value,optionLabel:"name",placeholder:"Selecciona un responsable",style:{width:"100%"}},null,8,["modelValue","options"]),je,d(oe,{id:"reason_admin",modelValue:y.value.reason,"onUpdate:modelValue":t[11]||(t[11]=n=>y.value.reason=n),rows:"5",style:{resize:"none",width:"100%"},placeholder:"Escribe la razón de la cancelación"},null,8,["modelValue"]),d(c,{style:{width:"100%","border-radius":"0.5rem"},label:"Solicitar cancelación",type:"submit",class:"p-button-danger",icon:"pi pi-send"})],32)]),_:1},8,["visible"]),d(b,{closable:!1,style:{width:"30rem"},modal:"",visible:re.value,"onUpdate:visible":t[15]||(t[15]=n=>re.value=n)},{footer:_(()=>[e("div",Me,[d(c,{text:"",size:"small",onClick:t[13]||(t[13]=()=>{r(V).deliveryZero(r(s).currentOrder.order_id),re.value=!1}),style:{"border-radius":"0.3rem",width:"100%"},severity:"danger",label:"Sí",icon:"pi pi-check"}),d(c,{size:"small",onClick:t[14]||(t[14]=n=>re.value=!1),style:{"border-radius":"0.3rem",width:"100%"},severity:"danger",label:"No",icon:"pi pi-times"})])]),default:_(()=>[e("span",Ue,[v(" Esta seguro de llevar a $0.00 el valor del domicilio para la orden "),e("b",null,o(r(s).currentOrder.order_id),1),v(" del cliente "),e("b",null,o(r(s).currentOrder.user_name),1),v("? ")])]),_:1},8,["visible"]),r(s).currentOrder.site_id!=32?(i(),w(b,{key:0,class:"mx-3",closeOnEscape:"",closable:!1,visible:r(s).visibles.currentOrder,"onUpdate:visible":t[23]||(t[23]=n=>r(s).visibles.currentOrder=n),modal:"",style:{"max-height":"95vh",width:"35rem",position:"relative"}},{footer:_(()=>[e("div",Ps,[de.value?(i(),w(c,{key:0,size:"small",onClick:t[16]||(t[16]=n=>r(V).prepareOrder(r(s).currentOrder.order_id)),style:{"border-radius":"0.3rem",width:"100%"},severity:"success",label:"Preparar",icon:"pi pi-cog"})):m("",!0),ce.value?(i(),w(c,{key:1,size:"small",onClick:t[17]||(t[17]=n=>r(V).sendOrder(r(s).currentOrder.order_id)),style:{"border-radius":"0.3rem",width:"100%"},severity:"success",label:"Enviar",icon:"pi pi-send"})):m("",!0),d(c,{size:"small",style:{"border-radius":"0.3rem",width:"100%"},onClick:t[18]||(t[18]=()=>se.value=!0),severity:"warning",label:"TRASLADO",icon:"pi pi-arrow-right-arrow-left"}),d(c,{size:"small",style:{"border-radius":"0.3rem",width:"100%"},onClick:t[19]||(t[19]=()=>$.value=!0),severity:"danger",label:"CANCELAR",icon:"pi pi-times"})]),e("div",Ss,[d(c,{style:{width:"100%"},icon:"pi pi-wallet",onClick:t[20]||(t[20]=()=>T.value=!0),label:" metodo de pago",severity:"success"}),d(c,{style:{width:"100%"},icon:"pi pi-home",onClick:t[21]||(t[21]=()=>N.value=!0),label:" Domicilio",class:"p-button-warning"})])]),default:_(()=>{var n,k,x,z,I,R,A,j,U,M,B,F,q,H,G,K,Y,Z;return[e("div",null,[e("p",{class:be(["estado",(((n=r(s).currentOrder)==null?void 0:n.current_status)||"").split(" ")[0]])},o(ue(r(s).currentOrder)),3)]),e("div",Be,[r(s).currentOrder.responsible_id?(i(),w(f,{key:0,class:"tag mb-2",severity:"success"},{default:_(()=>[Fe,v(" TRANSFERENCIA APROBADA ")]),_:1})):m("",!0),qe,r(s).currentOrder.responsible_id?(i(),w(f,{key:1,class:"tag",severity:"success"},{default:_(()=>[v(o(r(s).currentOrder.name),1)]),_:1})):m("",!0),e("div",null,[e("p",He,"ID: "+o(r(s).currentOrder.order_id),1),e("p",Ge,o(r(s).currentOrder.user_name)+" "+o(r(s).currentOrder.second_name)+" "+o(r(s).currentOrder.first_last_name)+" "+o(r(s).currentOrder.second_last_name),1),e("p",Ke,[e("b",null,"fecha: "+o((z=(x=(k=r(s).currentOrder.latest_status_timestamp)==null?void 0:k.split("T")[0])==null?void 0:x.split("-"))==null?void 0:z.reverse().join("-")),1),e("b",null,"Hora: "+o((j=(A=(R=(I=r(s).currentOrder.latest_status_timestamp)==null?void 0:I.split("T")[1])==null?void 0:R.split(":"))==null?void 0:A.slice(0,2))==null?void 0:j.join(":")),1)]),Ye,(i(!0),p(S,null,X((B=(M=(U=r(s))==null?void 0:U.currentOrder)==null?void 0:M.pe_json)==null?void 0:B.listaPedidos,u=>{var E;return i(),p("div",{key:u.pedido_productoid},[e("div",Ze,[e("p",Je,[e("b",null,"("+o(u.pedido_cantidad)+")",1),v(" "+o(u.pedido_nombre_producto),1)]),e("p",Qe,[u.pedido_base_price?(i(),p("span",We,o(r(h)(u.pedido_base_price*u.pedido_cantidad)),1)):(i(),p("span",Xe,o(r(h)(u.pedido_precio)),1))])]),((E=u.lista_productocombo)==null?void 0:E.length)>0?(i(),p("p",es,rs)):m("",!0),(i(!0),p(S,null,X(u.lista_productocombo,C=>(i(),p("p",{key:C.pedido_nombre,class:"m-0 ml-3"},[v("-- "),e("b",null,o(C.pedido_cantidad),1),v(" "+o(C.pedido_nombre),1)]))),128)),(i(!0),p(S,null,X(u.modificadorseleccionList,C=>(i(),p("div",{key:C.modificadorseleccion_nombre,class:"grid-row between"},[e("p",ts,[v("- ("+o(u.pedido_cantidad)+") ",1),e("b",null,o(C.modificadorseleccion_cantidad),1),v(" "+o(C.modificadorseleccion_nombre),1)]),e("p",os,o(r(h)(C.pedido_precio*C.modificadorseleccion_cantidad*u.pedido_cantidad)),1)]))),128)),ls])}),128)),e("div",ns,[is,e("p",as,o(r(h)(r(s).currentOrder.pe_json.delivery.delivery_pagocon-((q=(F=r(s).currentOrder.pe_json)==null?void 0:F.delivery)==null?void 0:q.delivery_costoenvio))),1),ds,e("p",cs,o(r(h)((G=(H=r(s).currentOrder.pe_json)==null?void 0:H.delivery)==null?void 0:G.delivery_costoenvio)),1),us,e("p",ps,o(r(h)(r(s).currentOrder.pe_json.delivery.delivery_pagocon)),1)]),_s,e("p",ms,o((K=r(s).currentOrder.order_notes)==null?void 0:K.toLowerCase()),1),bs,e("div",vs,[hs,e("span",null,o(r(s).currentOrder.user_name)+" "+o(r(s).currentOrder.second_name)+" "+o(r(s).currentOrder.first_last_name)+" "+o(r(s).currentOrder.second_last_name),1),ys,e("span",null,o(r(s).currentOrder.order_type),1),r(s).currentOrder.placa?(i(),p("span",gs,fs)):m("",!0),r(s).currentOrder.placa?(i(),p("span",ws,o(r(s).currentOrder.placa),1)):m("",!0),ks,e("span",null,o(r(s).currentOrder.user_phone),1),r(s).currentOrder.order_type!="Pasar a recoger"?(i(),p("span",Cs,Es)):m("",!0),r(s).currentOrder.order_type!="Pasar a recoger"?(i(),p("span",Ds,o((Y=r(s).currentOrder.user_address)==null?void 0:Y.toLowerCase()),1)):m("",!0),Vs,e("span",null,o((Z=r(s).currentOrder.payment_method)==null?void 0:Z.toLowerCase()),1)])])]),d(c,{class:"shadow-4 close-btn",onClick:t[22]||(t[22]=u=>r(s).setVisible("currentOrder",!1)),icon:"pi pi-times",rounded:"",severity:"danger"})]}),_:1},8,["visible"])):(i(),w(b,{key:1,class:"mx-3",closeOnEscape:"",closable:!1,visible:r(s).visibles.currentOrder,"onUpdate:visible":t[30]||(t[30]=n=>r(s).visibles.currentOrder=n),modal:"",style:{"max-height":"95vh",width:"50rem",position:"relative"}},{footer:_(()=>[e("div",Pr,[de.value?(i(),w(c,{key:0,size:"small",onClick:t[24]||(t[24]=n=>r(V).prepareOrder(r(s).currentOrder.order_id)),style:{"border-radius":"0.3rem",width:"100%"},severity:"success",label:"Preparar",icon:"pi pi-cog"})):m("",!0),ce.value?(i(),w(c,{key:1,size:"small",onClick:t[25]||(t[25]=n=>r(V).sendOrder(r(s).currentOrder.order_id)),style:{"border-radius":"0.3rem",width:"100%"},severity:"success",label:"Enviar",icon:"pi pi-send"})):m("",!0),d(c,{size:"small",style:{"border-radius":"0.3rem",width:"100%"},onClick:Oe,severity:"warning",label:"Imprimir",icon:"pi pi-print"}),d(c,{size:"small",style:{"border-radius":"0.3rem",width:"100%"},onClick:t[26]||(t[26]=()=>$.value=!0),severity:"danger",label:"CANCELAR",icon:"pi pi-times"})]),e("div",Sr,[d(c,{style:{width:"100%"},icon:"pi pi-wallet",onClick:t[27]||(t[27]=()=>T.value=!0),label:" metodo de pago",severity:"success"}),d(c,{style:{width:"100%"},icon:"pi pi-home",onClick:t[28]||(t[28]=()=>N.value=!0),label:" Domicilio",class:"p-button-warning"})])]),default:_(()=>{var n,k,x,z,I,R,A,j,U,M,B,F,q,H,G,K,Y,Z;return[e("div",null,[e("p",{class:be(["estado",(((n=r(s).currentOrder)==null?void 0:n.current_status)||"").split(" ")[0]])},o(ue(r(s).currentOrder)),3)]),e("div",Ns,[r(s).currentOrder.responsible_id?(i(),w(f,{key:0,class:"tag mb-2",severity:"success"},{default:_(()=>[Ts,v(" TRANSFERENCIA APROBADA ")]),_:1})):m("",!0),$s,r(s).currentOrder.responsible_id?(i(),w(f,{key:1,class:"tag",severity:"success"},{default:_(()=>[v(o(r(s).currentOrder.name),1)]),_:1})):m("",!0),e("div",null,[e("p",Ls,"ID: "+o(r(s).currentOrder.order_id),1),e("p",zs,o(r(s).currentOrder.user_name)+" "+o(r(s).currentOrder.second_name)+" "+o(r(s).currentOrder.first_last_name)+" "+o(r(s).currentOrder.second_last_name),1),e("p",Is,[e("b",null,"fecha: "+o((k=r(s).currentOrder.latest_status_timestamp)==null?void 0:k.split("T")[0]),1),e("b",null,"Hora: "+o((R=(I=(z=(x=r(s).currentOrder.latest_status_timestamp)==null?void 0:x.split("T")[1])==null?void 0:z.split(":"))==null?void 0:I.slice(0,2))==null?void 0:R.join(":")),1)]),Rs,(i(!0),p(S,null,X((U=(j=(A=r(s))==null?void 0:A.currentOrder)==null?void 0:j.pe_json)==null?void 0:U.listaPedidos,u=>(i(),p("div",{key:u.pedido_productoid},[e("div",As,[e("p",js,[e("b",null,"("+o(u.pedido_cantidad)+" "+o(u.unit_measure)+")",1)]),e("p",Us,o(u.pedido_nombre_producto),1),e("p",Ms,o(u.presentacion)+" "+o(u.unit_measure),1),e("p",Bs,o(r(h)(u.pedido_precio)),1),e("p",Fs,[u.pedido_base_price?(i(),p("span",qs,o(r(h)(u.pedido_base_price*u.pedido_cantidad)),1)):(i(),p("span",Hs,o(r(h)(u.pedido_precio)),1))])]),(i(!0),p(S,null,X(u.modificadorseleccionList,E=>(i(),p("div",{key:E.modificadorseleccion_nombre,class:"grid-row between"},[e("p",Gs,[v("- ("+o(u.pedido_cantidad)+") ",1),e("b",null,o(E.modificadorseleccion_cantidad),1),v(" "+o(E.modificadorseleccion_nombre),1)]),e("p",Ks,o(r(h)(E.pedido_precio*E.modificadorseleccion_cantidad*u.pedido_cantidad)),1)]))),128)),Ys]))),128)),e("div",Zs,[Js,e("p",Qs,o(r(h)(r(s).currentOrder.pe_json.delivery.delivery_pagocon-((B=(M=r(s).currentOrder.pe_json)==null?void 0:M.delivery)==null?void 0:B.delivery_costoenvio))),1),Ws,e("p",Xs,o(r(h)((q=(F=r(s).currentOrder.pe_json)==null?void 0:F.delivery)==null?void 0:q.delivery_costoenvio)),1),er,e("p",sr,o(r(h)(r(s).currentOrder.pe_json.delivery.delivery_pagocon)),1)]),rr,e("p",tr,o((H=r(s).currentOrder.order_notes)==null?void 0:H.toLowerCase()),1),or,e("div",lr,[nr,e("span",null,o(r(s).currentOrder.user_name)+" "+o(r(s).currentOrder.second_name)+" "+o(r(s).currentOrder.first_last_name)+" "+o(r(s).currentOrder.second_last_name),1),ir,e("span",null,o(r(s).currentOrder.cedula_nit),1),ar,e("span",null,o(r(s).currentOrder.order_type),1),dr,e("span",null,o((K=(G=r(s).currentOrder.pe_json)==null?void 0:G.delivery)==null?void 0:K.delivery_horaentrega),1),r(s).currentOrder.placa?(i(),p("span",cr,pr)):m("",!0),r(s).currentOrder.placa?(i(),p("span",_r,o(r(s).currentOrder.placa),1)):m("",!0),mr,e("span",null,o(r(s).currentOrder.user_phone),1),br,e("span",null,o(r(s).currentOrder.email),1),r(s).currentOrder.order_type!="Pasar a recoger"?(i(),p("span",vr,yr)):m("",!0),r(s).currentOrder.order_type!="Pasar a recoger"?(i(),p("span",gr,o((Y=r(s).currentOrder.user_address)==null?void 0:Y.toLowerCase()),1)):m("",!0),Or,e("span",null,o((Z=r(s).currentOrder.payment_method)==null?void 0:Z.toLowerCase()),1),r(s).currentOrder.epayco_ref?(i(),p("span",fr,kr)):m("",!0),r(s).currentOrder.epayco_ref?(i(),p("span",Cr,"Aprobado")):m("",!0),r(s).currentOrder.epayco_ref?(i(),p("span",xr,Dr)):m("",!0),r(s).currentOrder.epayco_ref?(i(),p("span",Vr,o(r(s).currentOrder.epayco_ref),1)):m("",!0)])])]),d(c,{class:"shadow-4 close-btn",onClick:t[29]||(t[29]=u=>r(s).setVisible("currentOrder",!1)),icon:"pi pi-times",rounded:"",severity:"danger"})]}),_:1},8,["visible"])),d(b,{visible:T.value,"onUpdate:visible":t[32]||(t[32]=n=>T.value=n),closeOnEscape:"",closable:!0,modal:"",style:{width:"30rem"}},{header:_(()=>[Nr]),default:_(()=>[e("form",{onSubmit:W(ye,["prevent"]),class:"form-col"},[Tr,d(f,{class:"px-4",severity:"warning"},{default:_(()=>[e("b",null,o(r(s).currentOrder.payment_method),1)]),_:1}),$r,d(g,{id:"paymentMethod",modelValue:L.value,"onUpdate:modelValue":t[31]||(t[31]=n=>L.value=n),options:ie.value,optionLabel:"name",optionValue:"id",placeholder:"Selecciona un método de pago",style:{width:"100%"},required:""},null,8,["modelValue","options"]),d(c,{style:{width:"100%","border-radius":"0.5rem"},label:"Cambiar",type:"submit",class:"p-button-help",icon:"pi pi-check",disabled:!L.value},null,8,["disabled"])],32)]),_:1},8,["visible"])],64)}}},Rr=we(Lr,[["__scopeId","data-v-14b31143"]]);export{Rr as D};
