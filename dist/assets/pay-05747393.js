import{r as Q}from"./resumen-72109a3c.js";import{a as W,u as X}from"./site-5a18b96a.js";import{_ as Y,j as b,k as ee,m as k,U as N,H as x,I as oe,r as p,o as u,c,a as l,e as s,f as y,u as o,F as G,i as g,h as _,g as te,t as U,q as ae,x as le}from"./index-30f9c1fa.js";import{u as se}from"./user-ca1b1da1.js";import"./ventas-6f58cc77.js";import"./formatoPesos-e824e30b.js";const i=h=>(ae("data-v-60e2131c"),h=h(),le(),h),ne={class:"finalizar-compra-container"},de=i(()=>l("p",{class:"title"},"FINALIZAR COMPRA",-1)),re={style:{margin:"auto","max-width":"800px"}},ie={class:"title",style:{margin:"3rem .5rem"}},ue={class:"form-grid"},ce={class:"form-column"},me=i(()=>l("span",null,"NOMBRE",-1)),pe={class:"form-group"},_e=i(()=>l("span",null,"Ubicacio'n",-1)),ye={class:"form-group"},ge=i(()=>l("span",null,"Metodo Entrega",-1)),he={class:"form-group"},ve=i(()=>l("span",null,"Direccio'n",-1)),fe={class:"form-group"},Ve=i(()=>l("span",null,"Correo Electronico",-1)),be={class:"form-group"},xe=i(()=>l("span",null,"Telefono",-1)),Ue={class:"form-group"},Ie=i(()=>l("span",null,"Placa de tu vehiculo",-1)),Se={class:"form-group"},ke={style:{display:"flex","align-items":"center",gap:"1rem"}},Ne={key:2,class:"form-group"},Ce={key:0},Ee={key:1},De=i(()=>l("span",null,"Metodo de pago",-1)),Te={class:"form-group"},Me={key:3},Oe={class:"form-group"},we=i(()=>l("span",null,"Notas",-1)),Re={__name:"pay",setup(h){const C=b({}),v=b(!1),H=[{id:1,name:"Demora más de una hora",percentage:"15%"},{id:2,name:"Pedido frío",percentage:"20%"},{id:3,name:"Un pelo",percentage:"100%"},{id:4,name:"Producto dañado",percentage:"100%"},{id:5,name:"Faltante de bebida y adición",percentage:"0%"},{id:6,name:"Responderle con lo que falta",percentage:"0%"},{id:7,name:"Salsas que no son",percentage:"20%"},{id:8,name:"Si se enoja y quiere cambio",percentage:"100%"},{id:9,name:"Mala atención Call Center",percentage:"20%"},{id:10,name:"Mala atención en Punto de venta",percentage:"20%"},{id:11,name:"Influencer",percentage:"100%"},{id:12,name:"No llegó el pedido",percentage:"20%"}],f=W(),d=X(),a=se(),I=b([]),V=b([]);ee(async()=>{a.user.order_type={},V.value=await k.get(`${N}/payment_methods`),I.value=await k.get(`${N}/get_all_order_types`),C.value=await k.get(`${N}/site-payments`)}),x(()=>a.user.order_type,r=>{(r==null?void 0:r.id)==2&&(d.current_delivery=d.location.neigborhood.delivery_price,d.location.neigborhood.delivery_price=0)}),x(v,r=>{r&&alert("El esquema de comandas cambio y el modelo actual ya no es valido, la orden se envia como una orden comun")}),x(()=>{var r,t;return(t=(r=d.location)==null?void 0:r.site)==null?void 0:t.site_id},()=>{a.user.order_type=null}),x(()=>a.user.order_type,()=>{a.user.placa=null});const Z=oe(()=>{var t,m;return((m=(t=d.location)==null?void 0:t.site)==null?void 0:m.site_id)===33?I.value.filter(n=>(n==null?void 0:n.id)!==3):I.value.filter(n=>(n==null?void 0:n.id)!==1)});return(r,t)=>{var D,T,M,O,w,R,B,F,q,L,P,$,j,A,z;const m=p("Tag"),n=p("InputText"),S=p("Dropdown"),J=p("Checkbox"),K=p("InputNumber"),E=p("Textarea");return u(),c("div",ne,[de,l("div",re,[l("div",ie,[s(m,{severity:"success",class:"advertice"},{default:y(()=>[_(" El tiempo promedio de entrega es de 60 a 75 minutos, por favor téngalo en cuenta antes de ordenar ")]),_:1})])]),l("div",ue,[l("div",ce,[me,l("div",pe,[s(n,{id:"username",placeholder:"NOMBRE",modelValue:o(a).user.name,"onUpdate:modelValue":t[0]||(t[0]=e=>o(a).user.name=e)},null,8,["modelValue"])]),_e,l("div",ye,[s(n,{onClick:t[1]||(t[1]=e=>o(d).setVisible("currentSite",!0)),modelValue:o(d).location.neigborhood.name,id:"neighborhood",placeholder:"Ubicacion",readonly:""},null,8,["modelValue"])]),ge,l("div",he,[s(S,{style:{width:"100%"},modelValue:o(a).user.order_type,"onUpdate:modelValue":t[2]||(t[2]=e=>o(a).user.order_type=e),id:"metodo_de_entrega",placeholder:"Metodo de entrega",options:Z.value.filter(e=>[1,2,3].includes(e.id)),optionLabel:"name"},null,8,["modelValue","options"])]),!o(a).user.order_type||((D=o(a).user.order_type)==null?void 0:D.id)!==2?(u(),c(G,{key:0},[ve,l("div",fe,[s(n,{modelValue:o(a).user.address,"onUpdate:modelValue":t[3]||(t[3]=e=>o(a).user.address=e),id:"address",placeholder:"DIRECCION"},null,8,["modelValue"])])],64)):g("",!0),Ve,l("div",be,[s(n,{modelValue:o(a).user.email,"onUpdate:modelValue":t[4]||(t[4]=e=>o(a).user.email=e),id:"email",placeholder:"Correo Electronico"},null,8,["modelValue"])]),xe,l("div",Ue,[s(n,{modelValue:o(a).user.phone_number,"onUpdate:modelValue":t[5]||(t[5]=e=>o(a).user.phone_number=e),id:"phone_number",mask:"999 999 9999",placeholder:"TELEFONO"},null,8,["modelValue"])]),o(a).user.order_type&&((T=o(a).user.order_type)==null?void 0:T.id)===2&&((O=(M=o(d).location)==null?void 0:M.site)==null?void 0:O.site_id)===33?(u(),c(G,{key:1},[Ie,l("div",Se,[s(n,{modelValue:o(a).user.placa,"onUpdate:modelValue":t[6]||(t[6]=e=>o(a).user.placa=e),id:"placa",placeholder:"Placa de tu vehiculo"},null,8,["modelValue"])])],64)):g("",!0),l("span",ke,[s(J,{modelValue:v.value,"onUpdate:modelValue":t[7]||(t[7]=e=>v.value=e),binary:""},null,8,["modelValue"]),_(" Es una cortesía? ")]),v.value?(u(),c("div",Ne,[s(S,{style:{width:"100%"},modelValue:o(a).user.payment_method_option,"onUpdate:modelValue":t[8]||(t[8]=e=>o(a).user.payment_method_option=e),id:"payment_method",placeholder:"Porcentaje de cortesía",options:H},{option:y(e=>[_(U(e.option.name)+" ",1),s(m,null,{default:y(()=>[_(U(e.option.percentage),1)]),_:2},1024)]),value:y(e=>[e.value?(u(),c("span",Ce,[_(U(e.value.name)+" ",1),s(m,null,{default:y(()=>[_(U(e.value.percentage),1)]),_:2},1024)])):(u(),c("span",Ee," Selecciona un porcentaje "))]),_:1},8,["modelValue"])])):g("",!0),De,l("div",Te,[s(S,{style:{width:"100%"},modelValue:o(a).user.payment_method_option,"onUpdate:modelValue":t[9]||(t[9]=e=>o(a).user.payment_method_option=e),id:"payment_method",placeholder:"METODO DE PAGO",options:(B=C.value)==null?void 0:B[(R=(w=o(d).location)==null?void 0:w.site)==null?void 0:R.site_id],optionLabel:"name"},null,8,["modelValue","options"])]),((q=(F=o(a).user)==null?void 0:F.order_type)==null?void 0:q.id)!=2?(u(),c("span",Me,"Domicilio")):g("",!0),l("div",Oe,[((P=(L=o(a).user)==null?void 0:L.order_type)==null?void 0:P.id)!=2?(u(),te(K,{key:0,style:{width:"100%"},prefix:"$",min:"0",maxFractionDigits:2,modelValue:o(d).location.neigborhood.delivery_price,"onUpdate:modelValue":t[10]||(t[10]=e=>o(d).location.neigborhood.delivery_price=e),id:"payment_method",placeholder:"Domicilio",options:((j=($=o(d).location)==null?void 0:$.site)==null?void 0:j.site_id)===33?V.value.filter(e=>[6,8].includes(e==null?void 0:e.id)):((z=(A=o(d).location)==null?void 0:A.site)==null?void 0:z.site_id)!==33?V.value.filter(e=>![7].includes(e==null?void 0:e.id)):V.value,optionLabel:"name"},null,8,["modelValue","options"])):g("",!0)]),we,s(E,{modelValue:o(f).cart.order_notes,"onUpdate:modelValue":t[11]||(t[11]=e=>o(f).cart.order_notes=e),class:"order-notes",placeholder:"Notas adicionales"},null,8,["modelValue"]),l("template",null,[s(E,{modelValue:o(f).cart.order_notes,"onUpdate:modelValue":t[12]||(t[12]=e=>o(f).cart.order_notes=e),class:"order-notes",placeholder:"Notas"},null,8,["modelValue"])])]),s(Q,{class:"resumen-column"})])])}}},je=Y(Re,[["__scopeId","data-v-60e2131c"]]);export{je as default};
