import _e from"./pqrUser-016fff09.js";import{_ as ve,L as ye,r as n,B as he,l as be,q as fe,i as ge,A as W,a as _,o as s,c as a,g as r,w as m,b as t,F as j,d as X,u as x,s as xe,j as E,U as F,t as i,k,m as v,f as u,M as Y,n as ke,e as Z,p as Ve,h as we}from"./index-f4486754.js";import"./editor.esm-229e11f6.js";/* empty css                                                             */const d=w=>(Ve("data-v-75211be2"),w=w(),we(),w),Te={style:{display:"flex","flex-direction":"column"}},qe={style:{"min-width":"max-content",margin:"0",padding:"0"},class:"p-text-secondary m-0 p-0"},Ce={style:{"min-width":"max-content",margin:"0",padding:"0"},class:"p-text-secondary m-0 p-0"},Ne={class:"m-0"},Pe=d(()=>t("div",null,null,-1)),Se={key:0,class:"m-0",style:{"text-transform":"capitalize"}},De=d(()=>t("b",null,"Responsable:",-1)),Ue={key:1,class:"p-0 m-0"},Re={key:2,class:"p-0 m-0"},ze={key:3},Ie=d(()=>t("b",null,"Notas",-1)),Le=d(()=>t("br",null,null,-1)),Be=d(()=>t("div",{style:{display:"flex",gap:"1rem"}},null,-1)),$e=d(()=>t("div",null,[t("h4",{class:"mt-0 py-0"})],-1)),je={style:{display:"flex","flex-direction":"column"}},Ee={key:0},Fe=d(()=>t("b",null,"Datos del cliente",-1)),Me=[Fe],He={key:1},Oe={key:2},Ge=d(()=>t("h6",null,[t("b",null,"Historial")],-1)),Ae={style:{display:"flex","flex-direction":"column"}},Qe={style:{"min-width":"max-content",margin:"0",padding:"0"},class:"p-text-secondary m-0 p-0"},Je={style:{"min-width":"max-content",margin:"0",padding:"0"},class:"p-text-secondary m-0 p-0"},Ke={class:"m-0"},We=d(()=>t("div",null,null,-1)),Xe={key:0,class:"m-0",style:{"text-transform":"capitalize"}},Ye=d(()=>t("b",null,"Responsable:",-1)),Ze={key:1,class:"p-0 m-0"},et={key:2,class:"p-0 m-0"},tt={key:3},st=d(()=>t("b",null,"Notas",-1)),lt=d(()=>t("br",null,null,-1)),ot=d(()=>t("div",{style:{display:"flex",gap:"1rem"}},null,-1)),at=d(()=>t("h6",null,[t("b",null,"Como desea proceder?")],-1)),nt={key:3},it={key:0,style:{display:"flex","justify-content":"space-between",margin:"1rem 0"}},ut=d(()=>t("h6",{class:"m-0"},"Le costo algo a la empresa?",-1)),rt={key:1},dt=d(()=>t("h6",null,"Cuanto?",-1)),ct={key:2,style:{display:"flex","justify-content":"space-between",margin:"1rem 0"}},mt=d(()=>t("h6",{class:"m-0"},"Le envio una orden como cortesia ?",-1)),pt={key:3},_t=d(()=>t("h6",null,"Id de la orden",-1)),vt=d(()=>t("h6",{class:"m-0 my-3"},"Detalles",-1)),yt={style:{"background-color":"#ff00002e"},class:"p-3"},ht=d(()=>t("b",null,"No preste sus credenciales de Salchigest, cada miembro de la empresa tiene los suyos, muchas gracias",-1)),bt={style:{display:"flex","justify-content":"end","margin-top":"2rem"}},ft={class:"nav_bar shadow-2 p-0 my-0 mx-2",style:{position:"sticky",top:"3rem","max-width":"900px","border-radius":"10rem","background-color":"white","z-index":"99"}},gt={class:"nav_bar--buttons p-0 m-1",style:{}},xt={key:"",class:""},kt={class:"grid p-3",style:{"align-items":"center","justify-content":"space-between",display:"flex",gap:"1rem"}},Vt={class:"px-2"},wt=d(()=>t("i",{class:"fa-regular fa-bars-progress"},null,-1)),Tt={style:{"text-transform":"uppercase"}},qt={style:{display:"flex",gap:"1rem"}},Ct={key:0,style:{"min-width":"max-content"},class:"m-0 p-0"},Nt={key:2,class:"m-0 p-0"},Pt={key:3,class:"m-0 p-0"},St={key:5,class:"p-2",style:{display:"flex",gap:".1rem","flex-direction":"column","align-items":"start"}},Dt={style:{display:"flex",gap:".5rem","justify-content":"center"},class:"px-2"},Ut={__name:"pqrsSection",setup(w){const ee=ye(),T=n(""),q=n(),C=he(),I=n([{id:0,name:"Todos",description:"Estado inicial de la pqr",exist:!0,color:"#3498DB"}]),te=c=>C.params.section_id!=2?c.filter(l=>l.columnValue!=="red"):c,N=n({id:2,name:"Todos",description:"Estado inicial de la pqr",exist:!0,color:"#3498DB"}),M=be(),H=n([]),p=n(),se=async c=>{B.value=!0,L.value=c},le=async c=>{P.value=!0,b.value=c},L=n([]),b=n([]),B=n(!1),P=n(!1),S=n(null),oe=()=>{S.value={global:{value:null,matchMode:xe.CONTAINS}}};fe(()=>{oe()});const ae=n([{columnName:"Id",columnValue:"pqr_request_id",columnType:"other",size:"1rem",vif:!0},{columnName:"Sede",columnValue:"site_name",columnType:"other",size:"4rem",vif:!0},{columnName:"Red",columnValue:"red",columnType:"other",size:"4rem",vif:!0},{columnName:"Calificacion",columnValue:"rating",columnType:"rating",size:"10rem",vif:!0},{columnName:"Tipo",columnValue:"request_type",columnType:"other",size:"15rem",vif:!0},{columnName:"Comentarios",columnValue:"request_content",columnType:"other",size:"20rem",vif:!0},{columnName:"Estado",columnValue:"current_status",columnType:"status",size:"15rem",vif:!0}]);n({2:"#3498DB",4:"#2ECC71",5:"#16A085",6:"#E74C3C",7:"#F39C12"}),n({question:"",answer:""}),n({}),n({}),n(null);const O=n([{}]);n({}),n(!1),n({});const D=n(!1),U=n(),R=n(!1),$=async()=>{O.value=await E.get(`${F}/get-all-pqrs`);const c=await E.get(`${F}/get-all-pqrs-status`);if(c){const l=new Set(I.value.map(f=>f.id));c.forEach(f=>{l.has(f.id)||(I.value.push(f),l.add(f.id))})}H.value=c};ge(async()=>{$()}),W(p,()=>{G()});const G=()=>{U.value=null,T.value="",q.value=null,D.value=!1,R.value=!1},ne=async()=>{const c={pqr_request_id:b.value.pqr_request_id,status_id:p.value,responsible_id:M.rawUserData.id,value:U.value||null,notes:T.value||"",order_id:q.value||null};try{await E.post(`${F}/change-pqr-status`,c),$(),P.value=!1,G()}catch(l){console.error("Error al enviar la actualizaciÃ³n de la PQR:",l)}};return W(()=>C.params.section_id,()=>{$()},{deep:!0}),(c,l)=>{const f=_("Tag"),A=_("Timeline"),Q=_("Dialog"),ie=_("Dropdown"),J=_("Checkbox"),ue=_("InputNumber"),K=_("InputText"),re=_("Textarea"),V=_("Button"),de=_("Rating"),ce=_("column"),me=_("Column"),pe=_("DataTable");return s(),a(j,null,[r(Q,{class:"mx-2",visible:B.value,"onUpdate:visible":l[0]||(l[0]=e=>B.value=e),modal:"",header:`Historial de la pqr  ID   ${L.value.pqr_request_id}`,style:{width:"40rem"}},{default:m(()=>[r(A,{value:L.value.status_history},{opposite:m(e=>{var o,y,h,g;return[t("div",Te,[t("p",qe,i((o=e.item.timestamp)==null?void 0:o.split(" ")[0]),1),t("p",Ce,i((g=(h=(y=e.item.timestamp)==null?void 0:y.split(" "))==null?void 0:h.slice(1,4))==null?void 0:g.join(" ")),1)])]}),content:m(e=>{var o;return[r(f,{style:k(`background-color:${e.item.color}`)},{default:m(()=>[t("p",Ne,[t("b",null,i(e.item.status),1)])]),_:2},1032,["style"]),Pe,e.item.responsible_name?(s(),a("p",Se,[De,v(" "+i((o=e.item.responsible_name)==null?void 0:o.toLowerCase()),1)])):u("",!0),e.item.value?(s(),a("p",Ue,[v("Le costo a la empresa "),t("b",null,i(x(Y)(e.item.value)),1)])):u("",!0),e.item.order_id?(s(),a("p",Re,[v("Orden entregada "),t("b",null,i(e.item.order_id),1)])):u("",!0),e.item.notes?(s(),a("p",ze,[Ie,v(" "+i(e.item.notes),1)])):u("",!0),Le,Be]}),_:1},8,["value"])]),_:1},8,["visible","header"]),$e,r(Q,{class:"mx-2",visible:P.value,"onUpdate:visible":l[7]||(l[7]=e=>P.value=e),modal:"",header:`Gestion de la pqr  ID    ${b.value.pqr_request_id}`,style:{width:"50rem"}},{footer:m(()=>[t("div",bt,[r(V,{onClick:ne,label:"Enviar",severity:"help"})])]),default:m(()=>[t("div",je,[b.value.user_name||b.value.user_phone?(s(),a("h6",Ee,Me)):u("",!0),b.value.user_name?(s(),a("span",He,[t("b",null,"Nombre: "+i(b.value.user_name),1)])):u("",!0),b.value.user_phone?(s(),a("span",Oe,[t("b",null,"Telefono: "+i(b.value.user_phone),1)])):u("",!0),Ge,r(A,{value:b.value.status_history},{opposite:m(e=>{var o,y,h,g;return[t("div",Ae,[t("p",Qe,i((o=e.item.timestamp)==null?void 0:o.split(" ")[0]),1),t("p",Je,i((g=(h=(y=e.item.timestamp)==null?void 0:y.split(" "))==null?void 0:h.slice(1,4))==null?void 0:g.join(" ")),1)])]}),content:m(e=>{var o;return[r(f,{style:k(`background-color:${e.item.color}`)},{default:m(()=>[t("p",Ke,[t("b",null,i(e.item.status),1)])]),_:2},1032,["style"]),We,e.item.responsible_name?(s(),a("p",Xe,[Ye,v(" "+i((o=e.item.responsible_name)==null?void 0:o.toLowerCase()),1)])):u("",!0),e.item.value?(s(),a("p",Ze,[v("Le costo a la empresa "),t("b",null,i(x(Y)()),1)])):u("",!0),e.item.order_id?(s(),a("p",et,[v("Orden entregada "),t("b",null,i(e.item.order_id),1)])):u("",!0),e.item.notes?(s(),a("p",tt,[st,v(" "+i(e.item.notes),1)])):u("",!0),lt,ot]}),_:1},8,["value"]),at,r(ie,{modelValue:p.value,"onUpdate:modelValue":l[1]||(l[1]=e=>p.value=e),options:H.value.filter(e=>e.id!=2),optionLabel:"name",optionValue:"id"},null,8,["modelValue","options"]),p.value?(s(),a("div",nt,[p.value==4||p.value==7?(s(),a("div",it,[ut,r(J,{binary:"",modelValue:D.value,"onUpdate:modelValue":l[2]||(l[2]=e=>D.value=e)},null,8,["modelValue"])])):u("",!0),(p.value==4||p.value==7)&&D.value?(s(),a("div",rt,[dt,r(ue,{modelValue:U.value,"onUpdate:modelValue":l[3]||(l[3]=e=>U.value=e),style:{width:"100%"}},null,8,["modelValue"])])):u("",!0),p.value==4||p.value==7?(s(),a("div",ct,[mt,r(J,{modelValue:R.value,"onUpdate:modelValue":l[4]||(l[4]=e=>R.value=e),binary:""},null,8,["modelValue"])])):u("",!0),(p.value==4||p.value==7)&&R.value?(s(),a("div",pt,[_t,r(K,{modelValue:q.value,"onUpdate:modelValue":l[5]||(l[5]=e=>q.value=e),style:{width:"100%"}},null,8,["modelValue"])])):u("",!0),t("div",null,[vt,r(re,{modelValue:T.value,"onUpdate:modelValue":l[6]||(l[6]=e=>T.value=e),rows:"5",style:{resize:"none",width:"100%"}},null,8,["modelValue"])]),t("h6",yt,[v("Recuerde que esta firmando como "),t("b",null,i(x(M).rawUserData.name),1),v(" y por ende se hace responsable, "),ht])])):u("",!0)])]),_:1},8,["visible","header"]),t("nav",ft,[t("ul",gt,[(s(!0),a(j,null,X(I.value,e=>(s(),a("li",xt,[r(V,{onClick:()=>N.value=e,class:ke(["nav_bar--buttons-button p-2",e.id==N.value.id?"nav_bar--buttons-button-selected":""]),label:e.name},null,8,["onClick","class","label"])]))),128))])]),r(pe,{paginator:!0,rows:15,style:{width:"100%","max-width":"1280px"},paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",currentPageReportTemplate:"Mostrando {first} a {last} de {totalRecords} solicitudes",rowsPerPageOptions:[5,10,25,100],scrollable:"",showGridlines:"",scrollHeight:"65vh",stripedRows:"",class:"col-12 m-auto",value:O.value.filter(e=>{var o,y,h;return(((o=e.current_status)==null?void 0:o.status)==((y=N.value)==null?void 0:y.name)||((h=N.value)==null?void 0:h.name)=="Todos")&&x(C).params.section_id==(e==null?void 0:e.channel_id)}),tableStyle:"min-width: 50rem;",filters:S.value},{header:m(()=>[t("div",kt,[t("h4",Vt,[wt,v(),t("b",Tt,[v("PQRS "),t("b",null,i(x(C).params.section),1)])]),t("div",qt,[r(K,{class:"",modelValue:S.value.global.value,"onUpdate:modelValue":l[8]||(l[8]=e=>S.value.global.value=e),placeholder:"Buscar Solicitud..."},null,8,["modelValue"]),r(V,{onClick:l[9]||(l[9]=e=>x(ee).visible_add_pqr=!0),label:"Nueva PQR",severity:"help"})])])]),default:m(()=>[(s(!0),a(j,null,X(te(ae.value),e=>(s(),Z(ce,{header:e.columnName,style:k(`min-width:${e.size}`),field:e.columnValue,class:"my-0 py-0"},{body:m(o=>{var y,h,g;return[e.columnType=="date"?(s(),a("h6",Ct,i((y=o.data[e.columnValue])==null?void 0:y.split("-").reverse().join("-")),1)):u("",!0),e.columnType=="max-content"?(s(),a("h6",{key:1,style:k(e.columnType=="max-content"?"min-width: max-content":""),class:"m-0 p-0"},i(o.data[e.columnValue]),5)):u("",!0),e.columnType=="other"?(s(),a("h6",Nt,i(o.data[e.columnValue]),1)):u("",!0),e.columnType=="rating"?(s(),a("h6",Pt,[o.data[e.columnValue]>0?(s(),Z(de,{key:0,cancel:!1,readonly:"",modelValue:o.data[e.columnValue],"onUpdate:modelValue":z=>o.data[e.columnValue]=z},null,8,["modelValue","onUpdate:modelValue"])):u("",!0)])):u("",!0),e.columnType=="money"?(s(),a("h6",{key:4,style:k(e.columnType=="max-content"?"min-width: max-content":""),class:"m-0 p-0"},i(c.formatoPesosColombianos(o.data[e.columnValue])),5)):u("",!0),e.columnValue=="current_status"?(s(),a("div",St,[r(f,{style:k([{color:"white"},`background-color:${(h=o.data[e.columnValue])==null?void 0:h.color}`])},{default:m(()=>{var z;return[v(i((z=o.data[e.columnValue])==null?void 0:z.status),1)]}),_:2},1032,["style"]),t("b",null,i((g=o.data[e.columnValue])==null?void 0:g.timestamp),1)])):u("",!0)]}),_:2},1032,["header","style","field"]))),256)),r(me,{class:"my-0 py-0 px-0 mx-0",style:{},header:"Interactuar"},{body:m(e=>[t("div",Dt,[r(V,{onClick:o=>se(e.data),severity:"info",icon:"pi pi-history p-0",class:"my-0 p-2"},null,8,["onClick"]),r(V,{onClick:o=>le(e.data),label:"Gestionar",severity:"help",icon:"pi pi-check p-0",class:"my-0 py-2"},null,8,["onClick"])])]),_:1})]),_:1},8,["value","filters"]),r(_e)],64)}}},Bt=ve(Ut,[["__scopeId","data-v-75211be2"]]);export{Bt as default};
