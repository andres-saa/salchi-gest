import{_ as ee,f as d,u as ae,g as F,h as O,r as E,o as v,c as g,a as t,t as r,l as c,d as n,w as p,F as j,b as I,v as P,U as x,k as u,x as oe,q as se,P as te,p as le,e as ne}from"./index-34b78414.js";import{f as D}from"./formatoPesos-2a38d2e7.js";const M=S=>(le("data-v-c3feea2c"),S=S(),ne(),S),ie={class:"col-12 px-4 m-0",style:{"background-color":"transparent",border:"none"}},re={class:"card p-0 lg:p-6",style:{"background-color":"transparent",border:"none"}},ce={class:"text-2xl titulo my-6",style:{"text-transform":"capitalize","font-weight":"bold"}},de={class:"col-12 grid m-0 p-0"},pe={class:"col-12 md:col-12 p-0 m-0 mb-4",style:{}},ue={style:{"text-transform":"capitalize"},class:"text-xl mb-4 col-12"},me=["onClick"],ve={style:{"text-transform":"capitalize","border-right":"2px solid rgba(0, 0, 0, 0.144)"},class:"grid col-12 lg:col-6 mx-0 px-0",st:""},ge={class:"col-9 text-left py-0"},fe={class:"col-3 text-right py-0"},he={class:"card col-12 p-4",style:{"box-shadow":"0 0 20px rgba(0, 0, 0, 0.172)",border:"none"}},_e={style:{"text-transform":"capitalize"},class:"text-xl mb-6 mt-3"},be={class:"grid"},xe={style:{"text-transform":"lowercase"},class:"grid lg:col-6 col-12 px-0 py-3 mx-0"},ye={style:{},class:"col-6 text-left py-0"},we={class:"col-6 text-right py-0"},Ce={class:"col-12",style:{display:"flex","justify-content":"center"}},ke=M(()=>t("h5",null,"Nombre del grupo",-1)),$e={style:{display:"flex"}},Ae={class:"grid col-12 p-0 pl-2"},Ve={class:"col-6"},Ee={class:"col-6 text-right"},je={class:"flex align-items-center justify-content-center"},Se=M(()=>t("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1)),Te={__name:"sesionAdicionales",setup(S){const B=d(),J=d(),R=d([]),l=ae(),k=d(!1),$=d(!1),G=d(),T=d(),f=d({}),A=d(!1),y=d({price:0}),z=d({lista:{}}),m=d({grupo:[]}),q=s=>{T.value=!0,f.value=s},L=s=>{U[l.params.adicionales];const e=`${x}/${l.params.adicionales}/${s}`;fetch(e,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(f.value)}).then(a=>a.json()).then(a=>{T.value=!1,w(),C().then(i=>i.map(h=>V(h[_[l.params.adicionales]])))}).catch(a=>console.error("Error:",a))};F(()=>z.value.lista,s=>{for(const e in s){const a=parseInt(e);if(s[e])m.value.grupo.includes(a)||m.value.grupo.push(a);else{const i=m.value.grupo.indexOf(a);i!==-1&&m.value.grupo.splice(i,1)}}},{deep:!0});const H=s=>{G.value=s,A.value=!0},K=()=>{A.value=!1},Q=async()=>{const s=`${x}/${l.params.adicionales}`;fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(y.value)}).then(e=>e.json()).then(e=>{k.value=!1,w()}).catch(e=>console.error("Error:",e))},W=async()=>{const s=`${x}/grupo-${l.params.adicionales}`,e={};e.name=m.value.name,e[Y[l.params.adicionales]]=m.value.grupo,fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(a=>a.json()).then(a=>{console.log(a),$.value=!1,w(),C().then(i=>i.map(h=>V(h[_[l.params.adicionales]])))}).catch(a=>console.error("Error:",a))},X=async s=>{const e=`${x}/grupo-${l.params.adicionales}/${s}`;fetch(e,{method:"DELETE",headers:{"Content-Type":"application/json"}}).then(a=>{if(a.ok)return A.value=!1,a.json();throw new Error("Something went wrong")}).then(a=>{w(),C().then(i=>i.map(h=>V(h[_[l.params.adicionales]])))}).catch(a=>console.error("Error:",a))},_={salsas:"grupo_salsa_id",toppings:"grupo_topping_id",cambios:"grupo_cambio_id",acompanantes:"grupo_acompanante_id",adicionales:"grupo_id"},U={salsas:"salsa_id",toppings:"topping_id",cambios:"cambio_id",acompanantes:"acompanante_id",adicionales:"adicional_id"},Y={salsas:"salsas",toppings:"toppings",cambios:"cambios",acompanantes:"acompanantes",adicionales:"adicionales"},w=async()=>{try{const e=await(await fetch(`${x}/${l.params.adicionales}`)).json();B.value=e}catch(s){console.error("Error fetching data: ",s)}},C=async()=>{try{const e=await(await fetch(`${x}/grupo-${l.params.adicionales}`)).json();return J.value=e,e}catch(s){console.error("Error fetching data: ",s)}},V=async s=>{try{const a=await(await fetch(`${x}/grupo-${l.params.adicionales}/${s}/${l.params.adicionales}`)).json();return R.value[s]=a,a}catch(e){console.error("Error fetching data: ",e)}};return F(()=>l.params.adicionales,(s,e)=>{s!==e&&(w(),C().then(a=>a.map(i=>V(i[_[l.params.adicionales]]))))}),O(w),O(C),O(async()=>{C().then(s=>s.map(e=>V(e[_[l.params.adicionales]])))}),(s,e)=>{const a=E("Button"),i=E("inputText"),h=E("inputNumber"),N=E("Dialog"),Z=E("Checkbox");return v(),g(j,null,[t("div",ie,[t("div",re,[t("p",ce,"grupos de "+r(c(l).params.adicionales),1),n(a,{class:"mb-6",style:{"text-transform":"capitalize"},onClick:e[0]||(e[0]=o=>$.value=!$.value)},{default:p(()=>[u("Nuevo grupo")]),_:1}),t("div",de,[(v(!0),g(j,null,I(J.value,o=>(v(),g("div",pe,[t("div",{class:"card m-0 grid col-12",style:P([`background-color:${c(oe)[c(l).params.adicionales]}`,{position:"relative","box-shadow":"0 0 20px rgba(0, 0, 0, 0.144)",border:"none"}])},[t("p",ue,[t("b",null,r(o.name),1)]),t("button",{onClick:b=>H(o),class:"add-cart-btn text-xl",style:{cursor:"pointer",position:"absolute",top:"-1rem",right:"-1rem","background-color":"var(--red-400)",width:"2.5rem",height:"2.5rem","border-radius":"50%",display:"flex","align-items":"center","justify-content":"center",border:"none"}},[t("i",{style:{color:"white"},class:se(["icono text-2xl p-0 m-0",c(te).TIMES])},null,2)],8,me),(v(!0),g(j,null,I(R.value[o[_[c(l).params.adicionales]]],(b,ze)=>(v(),g("div",ve,[t("span",ge,[u(r(b.name)+" ",1),n(a,{onClick:Ue=>q(b),class:"p-0",size:"small",text:"",label:"Editar"},null,8,["onClick"])]),t("span",fe,r(c(D)(b.price)),1)]))),256))],4)]))),256))]),t("div",he,[t("p",_e,[t("b",null,"Todas las "+r(c(l).params.adicionales),1)]),t("div",be,[(v(!0),g(j,null,I(B.value,o=>(v(),g("div",xe,[t("span",ye,[u(r(o.name)+" ",1),n(a,{onClick:b=>q(o),class:"p-0",size:"small",text:"",label:"Editar"},null,8,["onClick"])]),t("span",we,r(c(D)(o.price)),1)]))),256))]),t("div",Ce,[n(a,{class:"",style:{"text-transform":"capitalize"},onClick:e[1]||(e[1]=o=>k.value=!k.value)},{default:p(()=>[u("Agregar")]),_:1})])])])]),n(N,{visible:k.value,"onUpdate:visible":e[4]||(e[4]=o=>k.value=o),modal:"true",style:P([{width:"500px",height:"max-content"},{"background-color":"white","border-radius":"1rem"}]),header:"Agregar",class:"p-fluid p-2 m-3"},{default:p(()=>[n(i,{class:"mb-4",modelValue:y.value.name,"onUpdate:modelValue":e[2]||(e[2]=o=>y.value.name=o)},null,8,["modelValue"]),n(h,{class:"mb-4",modelValue:y.value.price,"onUpdate:modelValue":e[3]||(e[3]=o=>y.value.price=o)},null,8,["modelValue"]),u(" "+r(y.value)+" ",1),n(a,{style:{"text-transform":"capitalize"},onClick:Q},{default:p(()=>[u("Agregar")]),_:1})]),_:1},8,["visible"]),n(N,{visible:T.value,"onUpdate:visible":e[8]||(e[8]=o=>T.value=o),modal:"true",style:P([{width:"500px",height:"max-content"},{"background-color":"white","border-radius":"1rem"}]),header:`EDITAR ${f.value.name}`,class:"p-fluid p-2 m-3"},{default:p(()=>[n(i,{class:"mb-4",modelValue:f.value.name,"onUpdate:modelValue":e[5]||(e[5]=o=>f.value.name=o)},null,8,["modelValue"]),n(h,{class:"mb-4",modelValue:f.value.price,"onUpdate:modelValue":e[6]||(e[6]=o=>f.value.price=o)},null,8,["modelValue"]),n(a,{style:{"text-transform":"capitalize"},onClick:e[7]||(e[7]=o=>L(f.value[U[c(l).params.adicionales]]))},{default:p(()=>[u("Guardar")]),_:1})]),_:1},8,["visible","header"]),n(N,{visible:$.value,"onUpdate:visible":e[10]||(e[10]=o=>$.value=o),modal:"true",style:P([{width:"500px",height:"max-content"},{"background-color":"white","border-radius":"1rem"}]),header:"Agregar",class:"p-fluid p-2 m-3"},{default:p(()=>[ke,n(i,{class:"mb-4",modelValue:m.value.name,"onUpdate:modelValue":e[9]||(e[9]=o=>m.value.name=o)},null,8,["modelValue"]),(v(!0),g(j,null,I(B.value,o=>(v(),g("div",$e,[n(Z,{modelValue:z.value.lista[o[U[c(l).params.adicionales]]],"onUpdate:modelValue":b=>z.value.lista[o[U[c(l).params.adicionales]]]=b,binary:"",value:!1},null,8,["modelValue","onUpdate:modelValue"]),t("div",Ae,[t("div",Ve,r(o.name),1),t("div",Ee,r(c(D)(o.price)),1)])]))),256)),n(a,{style:{"text-transform":"capitalize"},onClick:W},{default:p(()=>[u("Crear Grupo")]),_:1}),u(" "+r(z.value)+" "+r(m.value),1)]),_:1},8,["visible"]),n(N,{header:"Confirmation",visible:A.value,"onUpdate:visible":e[12]||(e[12]=o=>A.value=o),style:{width:"350px"},modal:!0},{footer:p(()=>[n(a,{label:"No",icon:"pi pi-times",onClick:K,class:"p-button-text"}),n(a,{label:"Si",icon:"pi pi-check",onClick:e[11]||(e[11]=o=>X(G.value[[_[c(l).params.adicionales]]])),class:"p-button-text",autofocus:""})]),default:p(()=>[t("div",je,[Se,t("span",null,[u("Seguro que desea eliminar "),t("b",null,r(G.value.name),1)])])]),_:1},8,["visible"])],64)}}},Pe=ee(Te,[["__scopeId","data-v-c3feea2c"]]);export{Pe as default};
