import{r as d,q as D,s as h,U as y,a as n,o as r,b as g,i as o,h as u,d as l,F as k,e as U,g as R,t as S}from"./index-e0d1eab6.js";const M={style:{"max-width":"1300px",margin:"auto"}},j=l("h2",{style:{"text-align":"center"}},[l("b",null,"Reporte de Cancelaciones")],-1),q={class:"grid p-3 mt-4",style:{"align-items":"center","justify-content":"start",display:"flex",gap:"1rem"}},F={class:"m-0 py-2"},L=l("h2",{style:{"text-align":"center"}},[l("b",null,"Cancelaciones en el tiempo por categorias")],-1),N={class:"card"},T={class:"card"},G={__name:"CancellationReports",setup($){const _=d([{}]),a=d({start_date:new Date,end_date:new Date,sites:[]}),c=d([]),m=d([]),p=d({}),v=async()=>{var s;const e=await h.post(`${y}/get_all_cancellation_request_summary`,{start_date:a.value.start_date,end_date:a.value.end_date,site_ids:a.value.sites.map(i=>i.site_id)||[1,2]});((s=e==null?void 0:e.summary)==null?void 0:s.length)>0&&(_.value=e==null?void 0:e.summary,c.value=Object.keys(e==null?void 0:e.summary[0]),console.log(c.value),p.value=e==null?void 0:e.graph_daily_categories)};return D(async()=>{await v(),m.value=await h.get(`${y}/sites/`)}),(e,s)=>{const i=n("Calendar"),w=n("calendar"),x=n("MultiSelect"),f=n("Button"),V=n("column"),b=n("DataTable"),C=n("Chart");return r(),g("div",M,[o(b,{class:"mx-auto shadow-2 p-4",style:{"max-width":"max-content"},stripedRows:"",showGridlines:"",value:_.value},{header:u(()=>[j,l("div",q,[o(i,{modelValue:a.value.start_date,"onUpdate:modelValue":s[0]||(s[0]=t=>a.value.start_date=t)},null,8,["modelValue"]),o(w,{modelValue:a.value.end_date,"onUpdate:modelValue":s[1]||(s[1]=t=>a.value.end_date=t)},null,8,["modelValue"]),o(x,{style:{"max-width":"30rem"},modelValue:a.value.sites,"onUpdate:modelValue":s[2]||(s[2]=t=>a.value.sites=t),optionLabel:"site_name",options:m.value.filter(t=>t.show_on_web)},null,8,["modelValue","options"]),o(f,{severity:"help",onClick:v,label:"Buscar",icon:"pi pi-search"})])]),default:u(()=>[(r(!0),g(k,null,U(c.value,t=>(r(),R(V,{class:"py-0",style:{"text-transform":"uppercase"},header:t},{body:u(B=>[l("h6",F,S(B.data[t]),1)]),_:2},1032,["header"]))),256))]),_:1},8,["value"]),L,l("div",N,[l("div",T,[o(C,{type:"line",data:p.value,class:"h-30rem"},null,8,["data"])])])])}}};export{G as default};
