import pe from"./pqrUser-b807567e.js";import{_ as _e,M as ye,r as u,A as ve,l as he,q as be,i as fe,D as W,a as _,o as s,c as o,g as r,w as m,b as t,F as I,d as X,s as ge,j as $,U as L,t as a,k as b,m as c,f as n,u as V,N as Y,n as xe,e as Z,p as Ve,h as ke}from"./index-7ca17fce.js";import"./editor.esm-7018d2f4.js";/* empty css                                                             */const d=k=>(Ve("data-v-9692e618"),k=k(),ke(),k),we={style:{display:"flex","flex-direction":"column"}},Te={style:{"min-width":"max-content",margin:"0",padding:"0"},class:"p-text-secondary m-0 p-0"},qe={style:{"min-width":"max-content",margin:"0",padding:"0"},class:"p-text-secondary m-0 p-0"},Ce={class:"m-0"},Ne=d(()=>t("div",null,null,-1)),Pe={key:0,class:"m-0",style:{"text-transform":"capitalize"}},Se=d(()=>t("b",null,"Responsable:",-1)),ze={key:1,class:"p-0 m-0"},De={key:2,class:"p-0 m-0"},Re={key:3},Ue=d(()=>t("b",null,"Notas",-1)),Ie=d(()=>t("br",null,null,-1)),$e=d(()=>t("div",{style:{display:"flex",gap:"1rem"}},null,-1)),Le=d(()=>t("div",null,[t("h4",{class:"mt-0 py-0"})],-1)),Be={style:{display:"flex","flex-direction":"column"}},je={key:0},Ee=d(()=>t("b",null,"Datos del cliente",-1)),Fe=[Ee],Me={key:1},Oe=d(()=>t("b",null,"Nombre: ",-1)),Ge={key:2},He=d(()=>t("b",null,"Telefono: ",-1)),Ae={key:3},Qe=d(()=>t("b",null,"Orden: ",-1)),Je=d(()=>t("h6",null,[t("b",null,"Historial")],-1)),Ke={style:{display:"flex","flex-direction":"column"}},We={style:{"min-width":"max-content",margin:"0",padding:"0"},class:"p-text-secondary m-0 p-0"},Xe={style:{"min-width":"max-content",margin:"0",padding:"0"},class:"p-text-secondary m-0 p-0"},Ye={class:"m-0"},Ze=d(()=>t("div",null,null,-1)),et={key:0,class:"m-0",style:{"text-transform":"capitalize"}},tt=d(()=>t("b",null,"Responsable:",-1)),st={key:1,class:"p-0 m-0"},lt={key:2,class:"p-0 m-0"},ot={key:3},at=d(()=>t("b",null,"Notas",-1)),nt=d(()=>t("br",null,null,-1)),it=d(()=>t("div",{style:{display:"flex",gap:"1rem"}},null,-1)),ut=d(()=>t("h6",null,[t("b",null,"Como desea proceder?")],-1)),rt={key:4},dt={key:0,style:{display:"flex","justify-content":"space-between",margin:"1rem 0"}},ct=d(()=>t("h6",{class:"m-0"},"Le costo algo a la empresa?",-1)),mt={key:1},pt=d(()=>t("h6",null,"Cuanto?",-1)),_t={key:2,style:{display:"flex","justify-content":"space-between",margin:"1rem 0"}},yt=d(()=>t("h6",{class:"m-0"},"Le envio una orden como cortesia ?",-1)),vt={key:3},ht=d(()=>t("h6",null,"Id de la orden",-1)),bt=d(()=>t("h6",{class:"m-0 my-3"},"Detalles",-1)),ft={style:{"background-color":"#ff00002e"},class:"p-3"},gt=d(()=>t("b",null,"No preste sus credenciales de Salchigest, cada miembro de la empresa tiene los suyos, muchas gracias",-1)),xt={style:{display:"flex","justify-content":"end","margin-top":"2rem"}},Vt={class:"nav_bar shadow-2 p-0 my-0 mx-2",style:{position:"sticky",top:"3rem","max-width":"900px","border-radius":"10rem","background-color":"white","z-index":"99"}},kt={class:"nav_bar--buttons p-0 m-1",style:{}},wt={key:"",class:"",style:{display:"flex","align-items":"center"}},Tt={class:"grid p-3",style:{"align-items":"center","justify-content":"space-between",display:"flex",gap:"1rem"}},qt={class:"px-2"},Ct=d(()=>t("i",{class:"fa-regular fa-bars-progress"},null,-1)),Nt={style:{"text-transform":"uppercase"}},Pt={style:{display:"flex",gap:"1rem"}},St={key:0,style:{"min-width":"max-content"},class:"m-0 p-0"},zt={key:2,class:"m-0 p-0"},Dt={key:3,class:"m-0 p-0"},Rt={key:5,class:"p-2",style:{display:"flex",gap:".1rem","flex-direction":"column","align-items":"start"}},Ut={key:6,class:"p-2",style:{display:"flex",gap:".1rem","flex-direction":"column","align-items":"start"}},It={key:7,class:"p-2",style:{display:"flex",gap:".1rem","flex-direction":"column","align-items":"start"}},$t={style:{display:"flex",gap:".5rem","justify-content":"center"},class:"px-2"},Lt={__name:"pqrsSection",setup(k){const ee=ye(),w=u(""),T=u(),B=ve(),j=u([]),te=h=>h,U=u({id:2,name:"Generada",description:"Estado inicial de la pqr",exist:!0,color:"#3498DB"}),E=he(),F=u([]),p=u(),se=async h=>{q.value=!0,y.value=h},M=u([]),y=u([]),O=u(!1),q=u(!1),C=u(null),le=()=>{C.value={global:{value:null,matchMode:ge.CONTAINS}}};be(()=>{le()});const oe=u([{columnName:"Id",columnValue:"pqr_request_id",columnType:"other",size:"1rem",vif:!0},{columnName:"Clasificacion",columnValue:"tag_name",columnType:"tag",size:"1rem",vif:!0},{columnName:"Id orden",columnValue:"order_id",columnType:"other",size:"1rem",vif:!0},{columnName:"Canal",columnValue:"channel",columnType:"tag",size:"4rem",vif:!0},{columnName:"Sede",columnValue:"site_name",columnType:"other",size:"4rem",vif:!0},{columnName:"Red",columnValue:"red",columnType:"other",size:"4rem",vif:!0},{columnName:"Calificacion",columnValue:"rating",columnType:"rating",size:"10rem",vif:!0},{columnName:"Tipo",columnValue:"request_type",columnType:"other",size:"15rem",vif:!0},{columnName:"Comentarios",columnValue:"request_content",columnType:"other",size:"20rem",vif:!0},{columnName:"Estado",columnValue:"current_status",columnType:"status",size:"15rem",vif:!0}]);u({2:"#3498DB",4:"#2ECC71",5:"#16A085",6:"#E74C3C",7:"#F39C12"}),u({question:"",answer:""}),u({}),u({}),u(null);const G=u([{}]);u({}),u(!1),u({});const N=u(!1),P=u(),S=u(!1),z=async()=>{G.value=await $.get(`${L}/get-all-pqrs`);const h=await $.get(`${L}/get-all-pqrs-status`);F.value=h,j.value=h};fe(async()=>{z()}),W(p,()=>{H()});const H=()=>{P.value=null,w.value="",T.value=null,N.value=!1,S.value=!1},ae=async()=>{const h={pqr_request_id:y.value.pqr_request_id,status_id:p.value,responsible_id:E.rawUserData.id,value:P.value||null,notes:w.value||"",order_id:T.value||null};try{await $.post(`${L}/change-pqr-status`,h),z(),q.value=!1,H()}catch(i){console.error("Error al enviar la actualizaciÃ³n de la PQR:",i)}};return W(()=>B.params.section_id,()=>{z()},{deep:!0}),(h,i)=>{const x=_("Tag"),A=_("Timeline"),Q=_("Dialog"),ne=_("Dropdown"),J=_("Checkbox"),ie=_("InputNumber"),K=_("InputText"),ue=_("Textarea"),D=_("Button"),re=_("Rating"),de=_("column"),ce=_("Column"),me=_("DataTable");return s(),o(I,null,[r(Q,{class:"mx-2",visible:O.value,"onUpdate:visible":i[0]||(i[0]=e=>O.value=e),modal:"",header:`Historial de la pqr  ID   ${M.value.pqr_request_id}`,style:{width:"40rem"}},{default:m(()=>[r(A,{value:M.value.status_history},{opposite:m(e=>{var l,v,f,g;return[t("div",we,[t("p",Te,a((l=e.item.timestamp)==null?void 0:l.split(" ")[0]),1),t("p",qe,a((g=(f=(v=e.item.timestamp)==null?void 0:v.split(" "))==null?void 0:f.slice(1,4))==null?void 0:g.join(" ")),1)])]}),content:m(e=>{var l;return[r(x,{style:b(`background-color:${e.item.color}`)},{default:m(()=>[t("p",Ce,[t("b",null,a(e.item.status),1)])]),_:2},1032,["style"]),Ne,e.item.responsible_name?(s(),o("p",Pe,[Se,c(" "+a((l=e.item.responsible_name)==null?void 0:l.toLowerCase()),1)])):n("",!0),e.item.value?(s(),o("p",ze,[c("Le costo a la empresa "),t("b",null,a(V(Y)(e.item.value)),1)])):n("",!0),e.item.order_id?(s(),o("p",De,[c("Orden entregada "),t("b",null,a(e.item.order_id),1)])):n("",!0),e.item.notes?(s(),o("p",Re,[Ue,c(" "+a(e.item.notes),1)])):n("",!0),Ie,$e]}),_:1},8,["value"])]),_:1},8,["visible","header"]),Le,r(Q,{class:"mx-2",visible:q.value,"onUpdate:visible":i[7]||(i[7]=e=>q.value=e),modal:"",header:`Gestion de la pqr  ID    ${y.value.pqr_request_id}`,style:{width:"50rem"}},{footer:m(()=>[t("div",xt,[r(D,{onClick:ae,label:"Enviar",severity:"help"})])]),default:m(()=>[t("div",Be,[y.value.user_name||y.value.user_phone?(s(),o("h6",je,Fe)):n("",!0),y.value.user_name?(s(),o("span",Me,[Oe,c(" "+a(y.value.user_name),1)])):n("",!0),y.value.user_phone?(s(),o("span",Ge,[He,c(" "+a(y.value.user_phone),1)])):n("",!0),y.value.order_id?(s(),o("span",Ae,[Qe,c(" "+a(y.value.order_id),1)])):n("",!0),Je,r(A,{value:y.value.status_history},{opposite:m(e=>{var l,v,f,g;return[t("div",Ke,[t("p",We,a((l=e.item.timestamp)==null?void 0:l.split(" ")[0]),1),t("p",Xe,a((g=(f=(v=e.item.timestamp)==null?void 0:v.split(" "))==null?void 0:f.slice(1,4))==null?void 0:g.join(" ")),1)])]}),content:m(e=>{var l;return[r(x,{style:b(`background-color:${e.item.color}`)},{default:m(()=>[t("p",Ye,[t("b",null,a(e.item.status),1)])]),_:2},1032,["style"]),Ze,e.item.responsible_name?(s(),o("p",et,[tt,c(" "+a((l=e.item.responsible_name)==null?void 0:l.toLowerCase()),1)])):n("",!0),e.item.value?(s(),o("p",st,[c("Le costo a la empresa "),t("b",null,a(V(Y)()),1)])):n("",!0),e.item.order_id?(s(),o("p",lt,[c("Orden entregada "),t("b",null,a(e.item.order_id),1)])):n("",!0),e.item.notes?(s(),o("p",ot,[at,c(" "+a(e.item.notes),1)])):n("",!0),nt,it]}),_:1},8,["value"]),ut,r(ne,{modelValue:p.value,"onUpdate:modelValue":i[1]||(i[1]=e=>p.value=e),options:F.value.filter(e=>e.id!=2),optionLabel:"name",optionValue:"id"},null,8,["modelValue","options"]),p.value?(s(),o("div",rt,[p.value==4||p.value==7?(s(),o("div",dt,[ct,r(J,{binary:"",modelValue:N.value,"onUpdate:modelValue":i[2]||(i[2]=e=>N.value=e)},null,8,["modelValue"])])):n("",!0),(p.value==4||p.value==7)&&N.value?(s(),o("div",mt,[pt,r(ie,{modelValue:P.value,"onUpdate:modelValue":i[3]||(i[3]=e=>P.value=e),style:{width:"100%"}},null,8,["modelValue"])])):n("",!0),p.value==4||p.value==7?(s(),o("div",_t,[yt,r(J,{modelValue:S.value,"onUpdate:modelValue":i[4]||(i[4]=e=>S.value=e),binary:""},null,8,["modelValue"])])):n("",!0),(p.value==4||p.value==7)&&S.value?(s(),o("div",vt,[ht,r(K,{modelValue:T.value,"onUpdate:modelValue":i[5]||(i[5]=e=>T.value=e),style:{width:"100%"}},null,8,["modelValue"])])):n("",!0),t("div",null,[bt,r(ue,{modelValue:w.value,"onUpdate:modelValue":i[6]||(i[6]=e=>w.value=e),rows:"5",style:{resize:"none",width:"100%"}},null,8,["modelValue"])]),t("h6",ft,[c("Recuerde que esta firmando como "),t("b",null,a(V(E).rawUserData.name),1),c(" y por ende se hace responsable, "),gt])])):n("",!0)])]),_:1},8,["visible","header"]),t("nav",Vt,[t("ul",kt,[(s(!0),o(I,null,X(j.value,e=>(s(),o("li",wt,[r(x,{style:b([`background-color:${e.color}`,{height:"1.3rem","aspect-ratio":"1 / 1","border-radius":"50%"}])},null,8,["style"]),c(),r(D,{onClick:()=>U.value=e,class:xe(["nav_bar--buttons-button p-2",e.id==U.value.id?"nav_bar--buttons-button-selected":""]),label:e.name},null,8,["onClick","class","label"])]))),128))])]),r(me,{paginator:!0,rows:15,style:{width:"100%"},paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",currentPageReportTemplate:"Mostrando {first} a {last} de {totalRecords} solicitudes",rowsPerPageOptions:[5,10,25,100],scrollable:"",showGridlines:"",scrollHeight:"65vh",stripedRows:"",class:"col-12 m-auto",value:G.value.filter(e=>{var l,v;return((l=e.current_status)==null?void 0:l.status)==((v=U.value)==null?void 0:v.name)}),tableStyle:"min-width: 50rem;",filters:C.value},{header:m(()=>[t("div",Tt,[t("h4",qt,[Ct,c(),t("b",Nt,[c("PQRS "),t("b",null,a(V(B).params.section),1)])]),t("div",Pt,[r(K,{class:"",modelValue:C.value.global.value,"onUpdate:modelValue":i[8]||(i[8]=e=>C.value.global.value=e),placeholder:"Buscar Solicitud..."},null,8,["modelValue"]),r(D,{onClick:i[9]||(i[9]=e=>V(ee).visible_add_pqr=!0),label:"Nueva PQR",severity:"help"})])])]),default:m(()=>[(s(!0),o(I,null,X(te(oe.value),e=>(s(),Z(de,{header:e.columnName,style:b(`min-width:${e.size}`),field:e.columnValue,class:"my-0 py-0"},{body:m(l=>{var v,f,g;return[e.columnType=="date"?(s(),o("h6",St,a(((v=l.data[e.columnValue])==null?void 0:v.split("-").reverse().join("-"))||"---------"),1)):n("",!0),e.columnType=="max-content"?(s(),o("h6",{key:1,style:b(e.columnType=="max-content"?"min-width: max-content":""),class:"m-0 p-0"},a(l.data[e.columnValue]||"---------"),5)):n("",!0),e.columnType=="other"?(s(),o("h6",zt,a(l.data[e.columnValue]||"---------"),1)):n("",!0),e.columnType=="rating"?(s(),o("h6",Dt,[l.data[e.columnValue]>0?(s(),Z(re,{key:0,cancel:!1,readonly:"",modelValue:l.data[e.columnValue],"onUpdate:modelValue":R=>l.data[e.columnValue]=R},null,8,["modelValue","onUpdate:modelValue"])):n("",!0)])):n("",!0),e.columnType=="money"?(s(),o("h6",{key:4,style:b(e.columnType=="max-content"?"min-width: max-content":""),class:"m-0 p-0"},a(h.formatoPesosColombianos(l.data[e.columnValue])||"---------"),5)):n("",!0),e.columnValue=="current_status"?(s(),o("div",Rt,[r(x,{style:b([{color:"white"},`background-color:${(f=l.data[e.columnValue])==null?void 0:f.color}`])},{default:m(()=>{var R;return[c(a(((R=l.data[e.columnValue])==null?void 0:R.status)||"---------"),1)]}),_:2},1032,["style"]),t("b",null,a(((g=l.data[e.columnValue])==null?void 0:g.timestamp)||"---------"),1)])):n("",!0),e.columnValue=="channel"?(s(),o("div",Ut,[r(x,{style:b([{color:"white"},`background-color:${l.data.channel_color}`])},{default:m(()=>[c(a(l.data[e.columnValue]||"---------"),1)]),_:2},1032,["style"])])):n("",!0),e.columnValue=="tag_name"?(s(),o("div",It,[r(x,{style:b([{color:"white"},`background-color:${l.data.tag_color}`])},{default:m(()=>[c(a(l.data[e.columnValue]),1)]),_:2},1032,["style"])])):n("",!0)]}),_:2},1032,["header","style","field"]))),256)),r(ce,{class:"my-0 py-0 px-0 mx-0",style:{},header:"Interactuar"},{body:m(e=>[t("div",$t,[r(D,{onClick:l=>se(e.data),label:"Gestionar",severity:"help",icon:"pi pi-check p-0",class:"my-0 py-2"},null,8,["onClick"])])]),_:1})]),_:1},8,["value","filters"]),r(pe,{onReload:i[10]||(i[10]=e=>z())})],64)}}},Mt=_e(Lt,[["__scopeId","data-v-9692e618"]]);export{Mt as default};
